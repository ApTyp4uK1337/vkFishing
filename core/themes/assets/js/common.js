!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}({"+4eP":function(e,t,n){"use strict";var i=n("UxAg"),r=s(n("TYsd")),o=s(n("o+0k")),a=s(n("HQL/"));function s(e){return e&&e.__esModule?e:{default:e}}var l=need("Slider");window.VotingForm={},VotingForm._onInit=m,VotingForm._onAddOptionClick=h,VotingForm._onExpireChange=g,VotingForm._onOptionRemoveClick=y,VotingForm._onTitleKeyDown=f,VotingForm._onTitleInput=p,VotingForm._onOptionKeyDown=_,mediaUpload.onComplete(E),mediaUpload.onStart(k),mediaUpload.onError(C);var u={uploading:"VotingForm_uploading",withExpire:"VotingForm_withExpire",maxOptions:"VotingForm_maxOptions"},c={form:".VotingForm",maxOptions:".VotingForm_maxOptions",option:".VotingForm__option",options:".VotingForm__options",upload:".VotingForm__upload",bcg:".VotingForm__bcg",bcgRadioChecked:".VotingForm__bcgRadio:checked"},d=13,A=8;function f(e){e.keyCode===d&&e.preventDefault()}function p(e){var t=+attr(e,"maxlength"),n=(0,i.$)(".VotingForm__count");t-e.value.length<=20?n.innerHTML="".concat(e.value.length,"/").concat(t):n.innerHTML=""}function _(e){if(f(e),e.keyCode===d){if(!(0,i.$)(c.maxOptions))if((0,i.$)(".VotingForm__option:last-child input")===document.activeElement)return v(),void(0,i.$)(".VotingForm__option:last-child input").focus();if(document.activeElement){var t=document.activeElement.closest(".VotingForm__option"),n=t.nextElementSibling&&t.nextElementSibling.$("input");n&&(n.focus(),n.selectionStart=n.value.length,n.selectionEnd=n.value.length)}}else if(e.keyCode===A){if(1===$$(".VotingForm__option").length)return;var r=e.target;r.value||setTimeout(function(){var e=r.closest(".VotingForm__option"),t=e.previousElementSibling;if(e.outerHTML="",b(),t){var n=t.$("input");n.focus(),n.selectionStart=n.value.length,n.selectionEnd=n.value.length}})}}function h(){v(),(0,i.$)(".VotingForm__option:last-child input").focus()}function m(){var e=(0,i.$)(c.bcgRadioChecked).closest(c.bcg);l.scrollToElem(e)}function v(){var e=(0,i.$)(c.options),t=(0,a.default)({});e.insertAdjacentHTML("beforeend",r.default.html(t)),w(),b()}function g(e){var t=e.$control,n=e.checked;t.closest(c.form).classList.toggle(u.withExpire,n)}function y(e){e.closest(c.option).outerHTML="",w(),b()}function w(){Array.from($$('.VotingForm__option[data-created="0"] input')).forEach(function(e,t){e.setAttribute("name","answers[".concat(t,"]"))})}function b(){var e=(0,i.$)(c.form),t=Number(e.getAttribute("data-max-options")),n=$$(c.option).length;e.classList.toggle(u.maxOptions,n===t)}function E(e){var t=(0,i.$)(c.form);if(t){var n=(0,i.$)(c.upload),a=(t.getAttribute("data-upload-html"),r.default.html((0,o.default)("poll_background_id",{id:"photo_".concat(e.photo_id),type:"photo",photo:e.src,color:e.color,checked:!0})));n.insertAdjacentHTML("beforebegin",a),D()}}function k(){var e=(0,i.$)(c.upload);e&&e.classList.add(u.uploading)}function C(e){var t=(0,i.$)(c.form);if(t){var n=t.getAttribute("data-upload-error-msg");D(),alert(n)}}function D(){var e=(0,i.$)(c.form);(0,i.$)(c.upload).outerHTML=e.getAttribute("data-upload-html")}},"+CUd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("bZ/P"));function r(){var e=a(['\n    <button type="','" class="','" ',">\n      ","\n    </button>\n  "]);return r=function(){return e},e}function o(){var e=a(['\n      <a class="','" href=',' target="','" ',">\n        ","\n      </a>\n    "]);return o=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=function(e){var t=e.class?" ".concat(e.class):"";if(t="MailButton".concat(t),"link"===e.type&&e.link){var n=e.link.href,a=e.link.target||"_blank";return i.default.html(o(),t,n,a,e.onClick,e.text)}var s=e.type;"button"===s&&"submit"===s||(s="button");return i.default.html(r(),s,t,e.onClick,e.text)};t.default=s},"+YbT":function(e,t,n){"use strict";var i=window,r=i.removeClass,o=i.addClass,a=i.geByClass1,s={obj:null,highlight:!1,start:function(e){e.touches&&1==e.touches.length&&(s.clear(),s.end(e),s.obj=this||null,s.obj&&(s.highlight=!0,o("hover",s.obj),o("_thover",s.obj)))},cancel:function(e){s.obj&&(s.highlight=!1,s.end(e))},end:function(){s.obj&&(r("hover",s.obj),s.highlight&&(s.clear(),o("active",s.obj)),s.obj=null,s.highlight=!1)},clear:function(){r("active",a("active","vk_wrap")),r("active",$(".Popup .active._thover"))}};window.thover=s},"+cqQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=Object.assign(r,{kind:function(){var e={};return function(t){return e[t]||(e[t]=r())}}});function r(){var e=[],t=function(){var e=this,t=arguments;if("function"!=typeof t[0]){for(var n=e.length,i=!1,r=0;r<n;r++)!0===e[r].apply(null,t)&&(i=!0);return i}Array.prototype.slice.call(t).forEach(function(t){return e.push(t)})}.bind(e);return t.off=function(e){e?function(e,t){for(;;){var n=e.indexOf(t);if(!(n>=0))break;e.splice(n,1)}}(this,e):this.length=0}.bind(e),t._fns=e,t}t.default=i,window.befall=r},"+jUy":function(e,t,n){"use strict";var i=o(n("+cqQ")),r=o(n("TYsd"));function o(e){return e&&e.__esModule?e:{default:e}}var a=window,s=a.ge,l=a.each,u=a.geByTag,c=a.intval,d=a.gpeByClass,A=a.geByTag1,f=a.attr,p=a.val,_=a.geByClass,h=a.isUndefined,m=a.geByClass1,v=a.toggle,g=a.isVisible,y=a.toggleClass,w=a.show,b=a.cancelEvent,E=a.ce,k=a.setStyle,C=a.parseJSON,D=a.replace,S=a.reflow,T=a.after,M=a.addClass,P=a.clog,I=a.uploadFile,x=a.bind,O=a.readFile,L=a.append,B=a.before,N=a.srand,R=a.extend,F=a.canUploadFile,j=a.gpeByTag,H=a.submitBtn,U=a.removeEvent,V=a.addEvent,z=a.clone,q=a.remove,W=a.getImageOrientation,Y=window.ajax,G={isUploading:!1,onBeforeRemove:(0,i.default)(),onRemove:(0,i.default)("removeElem"),onStart:(0,i.default)(),onError:(0,i.default)("response"),onComplete:(0,i.default)("response"),_uploadData:{},_uploadQueue:[],_readerQueue:[],_processUploadQueue:!1,_processReaderQueue:!1,fallback:function(e,t){var n=window.post;return e&&n.add_attach(e,t),!1},getLastAttachId:function(){if(!s("attached_wrap"))return 0;var e,t=0;return l(u("input"),function(){if(e=this.name.match(/^attach(\d+)_type$/i)){var n=c(e[1]);t<n&&(t=n)}}),t},refreshAttachIds:function(e){var t=s("attached_wrap");if(t){var n,i=d("mr_x_wrap",e),r=A("input",i),o=c((r&&r.name.match(/^attach(\d+)(_type)?$/i)||[])[1]);if(d("mr_timer",e)){var a=f("add_post_btn","data-value");a&&p("add_post_btn",a)}else o&&l(u("input",t),function(){if(n=this.name.match(/^attach(\d+)(_type)?$/i)){var e=c(n[1]);e==o?this.disabled=!0:e>o&&(this.name="attach"+(e-1)+(n[2]||""))}})}},getAttachesCount:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0;return window.ThumbsEdit&&window.ThumbsEdit.initialized&&e&&(t=ThumbsEdit.getThumbsCount()),t+=_("mr_x_wrap","attached_wrap").length},refreshUploadState:function(e){h(e)&&(e=G.getAttachesCount(!0));var t=m("mr_timer","attached_wrap"),n=s("attach_photo_btn"),i=m("pi_medias","attached_wrap"),r=m("inline_upload",n),o=f(r,"data-max-attaches")||10;v(i,e>0||g(t)),y("cp_attach_btn_sel",n,e>0),r&&(r.disabled=e>=o),w("attached_options"),w("attached_flush")},checkUploading:function(e){return!G._processUploadQueue||b(e)},attachedPhotoTpl:function(e){var t=[{id:"upload_item_".concat(e),class:"medias_thumb thumb_item mr_x_wrap thumb_upload",inner:[{id:"upload_image_".concat(e),class:"tu_img"},{id:"item_progress_wrap_".concat(e),class:"tu_progress_wrap",inner:[{id:"item_progress_".concat(e),class:"tu_progress"}]},{id:"item_cancel_wrap_".concat(e),class:"tu_cancel_wrap",onclick:"return mediaUpload.reset(this, event, '".concat(e,"');"),inner:[{id:"item_cancel_".concat(e),class:"tu_progress"}]}]}];return ceFromString(r.default.html(t))},onUploadProgress:function(e){var t=s("item_progress_"+this.id);window.ThumbsEdit&&ThumbsEdit.initialized?ThumbsEdit.onUploadProgress(this.id,e.loaded/e.total*100):k(t,{width:e.loaded/e.total*100+"%",visibility:"visible"})},onUploadComplete:function(e){var t=this,n=e.target.responseText,i=!1;try{i=C(n)}catch(e){i={error:"ERR_CLIENT_BAD_RESPONSE: bad request response"}}if(i.error)G.onUploadError.call(t,e);else{var r=ThumbsEdit.initialized;t.xhr=Y.post(t.done_url,{_ajax:1,_query:n,te:c(r)},{onDone:function(e){var n,i=s("item_progress_wrap_"+t.id),o=G.getLastAttachId()+1;if(r?(ThumbsEdit.replaceTemp(t.id,e.photo_raw,e.list||"",e.sizes),n=$('[data-media="phototemp_'.concat(t.id,'"]'))):n=s("upload_image_"+t.id),n&&e.src)var a=E("img",{id:"upload_image_"+t.id,className:"ph_img",onload:function(){if(r&&(n.src=e.src,n.classList.remove("Thumb__wrap--temp"),n.setAttribute("data-media","photo"+e.photo_raw),n.setAttribute("data-upload",t.id)),D(a,n),t.iw&&t.ih){if(t.iw>t.ih==a.width>a.height)var i=Math.min(130,Math.floor(75/t.ih*t.iw));else i=Math.min(130,Math.floor(75/t.iw*t.ih));k(a,"width",i)}S(a),k(a,"opacity",1)},src:e.src});T(E("input",{type:"hidden",name:"attach"+o,value:e.photo_raw}),n),T(E("input",{type:"hidden",name:"attach"+o+"_type",value:"photo"}),n),k(i,"opacity",0),t.attached=!0,t.delete_url=e.delete_url,G._processUploadQueue||(G.isUploading=!1,G.onComplete(e))}}),M("tu_progress_request","item_progress_wrap_"+t.id),t.uploaded=!0,G.uploadQueueNext()}},onUploadError:function(e){P("upload error.",e.target.responseText),G.uploadQueueNext(),G.onError(e.target.responseText)},uploadFile:function(e){e.xhr=I(e.upload_url,{photo:e.file},{onProgress:x(G.onUploadProgress,e),onComplete:x(G.onUploadComplete,e),onError:x(G.onUploadError,e)})},readFile:function(e){O(e.file,function(t){var n=s("upload_image_"+e.id);if(n)var i=E("img",{id:"upload_image_"+e.id,className:"ph_img",onload:function(){D(i,n),e.iw=i.width,e.ih=i.height},src:t});G.readerQueueNext()})},addFile:function(e){var t=s("attached_wrap"),n=m("pi_medias",t),i=n?_("medias_thumb",n):[],r=n?m("medias_row",n):null,o=i[i.length-1],a=G.attachedPhotoTpl(e.id);t&&(n||(n=E("div",{className:"pi_medias"}),L(n,t)),window.ThumbsEdit&&ThumbsEdit.initialized?O(e.file,function(t){var n=E("img");n.src=t,n.onload=function(){var i=n.width,r=n.height;window.fakeImg=n;var o=W(t);t="/images/blank.gif";var a=!1;o>4&&o<9&&(a=!0);var s=["photo",e.id,{sizes:{temp:[t,a?r:i,a?i:r]}},{remove:e.id}];ThumbsEdit.addTempPreview(s),CreatePost.checkAttaches()}}):o?T(a,o):r?B(a,r):L(a,n),G._processReaderQueue||G.readerQueueNext())},uploadQueueNext:function(){P("next upload"),G._processUploadQueue=!0;var e=G.uploadQueueRemove();if(!e)return P("empty upload"),G._processUploadQueue=!1,void(G.isUploading=!1);G.uploadFile(e)},readerQueueNext:function(){P("next reader"),G._processReaderQueue=!0;var e=G.readerQueueRemove();if(!e)return P("empty reader"),void(G._processReaderQueue=!1);G.readFile(e)},queueInsert:function(e){var t=N();return G.getUploadDataById(t)?G.queueInsert(e):(G._uploadData[t]=R(e,{id:t}),G._uploadQueue.push(t),G._readerQueue.push(t),G._uploadData[t])},uploadQueueRemove:function(){var e=G._uploadQueue.shift();return!!e&&G.getUploadDataById(e)},readerQueueRemove:function(){var e=G._readerQueue.shift();return!!e&&G.getUploadDataById(e)},getUploadDataById:function(e){return G._uploadData[e]||!1},delUploadDataById:function(e){delete G._uploadData[e]},start:function(e,t){if(!e||!F())return G.fallback(e,t);var n=e.files,i=e.form||j("form",e),r=H(i),o=s("attach_photo_btn"),a=f(e,"data-upload-url"),u=f(e,"data-done-url"),c=f(e,"data-max-attaches")||10,d=G.getAttachesCount();return a&&u?(l(n,function(){var e={upload_url:a,done_url:u,file:this,uploaded:!1,attached:!1};if(d>=c)return!1;G.queueInsert(e),G.addFile(e),d++}),U(i,"submit",G.checkUploading),V(i,"submit",G.checkUploading),U(r,"click",G.checkUploading),V(r,"click",G.checkUploading),U(o,"click",G.checkUploading),V(o,"click",G.checkUploading),G.refreshUploadState(d),D(z(e),e),G._processUploadQueue||G.uploadQueueNext(),window.isNewMail&&G.onStart(),G.isUploading=!0,!1):G.fallback(e,t)},reset:function(e,t,n,i){if(b(t),window.isNewMail&&G.onBeforeRemove(e),"/"==n[0]){Y.post(n,{_ajax:1}),G.refreshAttachIds(e);var r=d("mr_x_wrap",e)||d("mr_timer",e);i?i():q(r)}else{var o=n,a=G.getUploadDataById(o);if(!a)return!1;a.attached?a.delete_url&&(Y.post(a.delete_url,{_ajax:1}),G.refreshAttachIds(e)):(a.xhr&&a.xhr.abort&&a.xhr.abort(),a.loaded||G.uploadQueueNext()),i?i():q("upload_item_"+o),G.delUploadDataById(o)}return G.refreshUploadState(),window.isNewMail&&G.onRemove(e),!1}};window.mediaUpload=G},"+ybh":function(e,t,n){"use strict";Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}},"/8IX":function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,i){n(e!=t,i)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,i){n(e==t,i)},n.ok=n,e.exports=n},"/Id8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Msg__restoreInner",{enumerable:!0,get:function(){return i.Msg__restoreInner}}),Object.defineProperty(t,"Msg__reply",{enumerable:!0,get:function(){return i.Msg__reply}}),Object.defineProperty(t,"Msg__authorName",{enumerable:!0,get:function(){return i.Msg__authorName}}),Object.defineProperty(t,"Msg__replyAttach",{enumerable:!0,get:function(){return i.Msg__replyAttach}}),Object.defineProperty(t,"Msg__replyLink",{enumerable:!0,get:function(){return i.Msg__replyLink}}),Object.defineProperty(t,"Msg__textPreview",{enumerable:!0,get:function(){return i.Msg__textPreview}}),Object.defineProperty(t,"Msg__attachPreview",{enumerable:!0,get:function(){return i.Msg__attachPreview}}),Object.defineProperty(t,"Msg_makeReplyLink",{enumerable:!0,get:function(){return i.Msg_makeReplyLink}}),Object.defineProperty(t,"Msg_detailed",{enumerable:!0,get:function(){return i.Msg_detailed}}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("ti65"));n("C45x");var r=i.default;t.default=r,window.Msg=i.default},"/Rzu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"uConvo_getLastMsgId",{enumerable:!0,get:function(){return i.uConvo_getLastMsgId}}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("YDEi"));n("BKxg");var r=i.default;t.default=r,window.uConvo=i.default},"/bwU":function(e,t,n){"use strict";!function(e){e.console||(e.console={});for(var t,n,i=e.console,r=function(){},o=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)i[t]||(i[t]={});for(;n=a.pop();)i[n]||(i[n]=r)}("undefined"==typeof window?void 0:window)},"03kU":function(e,t,n){"use strict";var i=s(n("OmnB")),r=s(n("k9Tn")),o=n("sWID"),a=s(n("QySK"));function s(e){return e&&e.__esModule?e:{default:e}}var l,u,c,d,A,f,p,_=window,h=_.toggleClass,m=_.geByClass1,v=_.ajax,g=_.addClass,y=_.removeClass,w=_.domCreate,b=_.geByTag1,E=_.domQuery1,k=_.domQuery,C=_.gpeByClass,D=!1,S=[],T=[],M=20,P=.6,I={InProgress:1,NotAvailable:2},x={},O={};function L(e,t){e=e.split("_");for(var n=0;n<t.length;n++){var i=t[n].split("_");if(i[0]==e[0]&&i[1]==e[1])return n}return-1}function B(){return document}function N(){return(document.scrollingElement||window.scrollNode||document.body).scrollTop}function R(e){return k('.articleView__social_buttons[data-article-id="'.concat(e,'"] .articleView__footer_btn_bookmark'))}function F(e){if(f!=e.raw_id)if(f=e.raw_id,u.isWebView)!function(e){i.default.send("articleUpdate",{article:W(e),isSubscribedToOwner:e.is_subscribed_to_owner})}(e);else{var t=m("articleView__owner"),n=b("img",t);t&&n&&(n.src=e.owner_photo);var r=b("a",t);t&&r&&(r.href=e.owner_href);var o=m("articleView__ownerName"),a=b("a",o);o&&a&&(a.href=e.owner_href,a.innerHTML=e.owner_name);var s=m("articleView__footer"),l=m("articleView__footer_views");l&&(l.innerHTML=e.views_formatted);var c=m("articleView__social_buttons",s);s&&c&&c.setAttribute("data-article-id",e.raw_id);var d=[E('.articleView__content_misc_block[data-article-id="'.concat(e.raw_id,'"] .articleView__footer_btn_share')),s&&E(".articleView__footer_btn_share",s)];each(d,function(t,n){n&&(n.href="/like?act=publish&object=article".concat(e.raw_id,"&list=").concat(e.access_hash))});var A=R(e.raw_id),p=JSON.stringify(e.mailru_stats_data);each(A,function(t,n){n&&(n.setAttribute("onclick","Article.fave(this, '".concat(e.url,"', '").concat(e.fave_hash,"', ").concat(p,", '").concat(e.raw_id,"')")),h(n,"_active",e.is_faved))});var _=m("Unfold__item_name_noted");_&&(_.href="/feed?section=search&q=url:https://vk.com".concat(e.url));var v=m("Unfold__item_name_report");v&&(v.href="/reports?act=add&object=article".concat(e.raw_id,"_").concat(e.access_hash,"&refrom=feed"))}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.has_more||(S=S.concat(e.audios_list));var n=new a.default(e,{notFull:!!u.preloadMoreHash,isWebView:u.isWebView,mobile:!0,width:u.width,getScrollTop:N,getScrollNode:B,trackCode:u.trackCode,onScroll:function(t){if(!e.has_more){var n=T[T.length-1],i=C("articleView__content",n.getEl());t>P&&e.next_article_url&&(T.length<M&&(U(e.next_article_url),g(i,"articleView_waitNextArticle")),function(){var e=T[T.length-1];if(e){var t=C("articleView__content",e.getEl()),n=m("articleView__social_buttons",t);n&&show(n)}}()),t>.99&&e.next_article_url&&T.length<M&&U(e.next_article_url,function(e,t){if(e){for(var n=0;n<T.length;n++)if(T[n].getArticle().raw_id==t.raw_id)return;p||(p=setTimeout(function(){var n=w(e);A.appendChild(n),y(i,"articleView_waitNextArticle"),g(n,"articleView_nextPrepared"),requestAnimationFrame(function(){y(n,"articleView_nextPrepared")}),j(t),p=null},400))}}),this.getScreenVisibilityRatio()>.5&&F(e)}},onImageOpen:function(e,t,n){if(u.isWebView){for(var r=[],o=0;o<e.length;o++){var a=e[o],s=[];for(var l in a)a.hasOwnProperty(l)&&s.push({type:l,src:a[l][0],width:a[l][1],height:a[l][2]});r.push(s)}i.default.send("articlePhotoView",{photos:r,index:n})}}});t||n.ready(),T.push(n),H(e),each(geByTag("video"),function(e,t){domData(t,"auto-pause-inited")||(domData(t,"auto-pause-inited",1),t.addEventListener("play",function(){each(geByTag("video"),function(e,n){n!=t&&n.pause()})}))}),u.isWebView&&each(geByTag("figure",n._els.view),function(e,t){var i=intval(domData(t,"type"));n._onObjectView(!1,i,t)&&domData(t,"done",1)})}function H(e){var t=C("articleView__content",ge("article_view_".concat(e.raw_id))),n=m("articleView__ads_block",t);r.default.init(e,n,u)}function U(e,t){var n=O[e];n!==I.NotAvailable?isArray(n)?t&&t(n[0],n[1]):(x[e]=x[e]||[],t&&x[e].push(t),n!=I.InProgress&&(O[e]=I.InProgress,v.post("article.php",{act:"view",url:e,scroll_load:1,wall_owner_id:u.wallOwnerId,audio_bridge:intval(u.audioBridge),can_infinite_scroll:intval(u.canInfiniteScroll),web_view:u.isWebView,context:u.context,ref:"scroll",v:u.clientVersion},{onDone:function(t,n){for(var i=x[e],r=0;r<i.length;r++)i[r](t,n);O[e]=[t,n]}}))):t&&t()}function V(e,t){var n=R(e);each(n,function(e,n){h(n,"_active",t)})}function z(){var e=(0,o.getUrlParam)("anchor");e&&function(){var t=document.getElementById(e);if(t){"scrollRestoration"in history&&(history.scrollRestoration="manual");var n=u.isWebView?0:25,i=t.parentNode.parentNode.offsetTop-n;window.setTimeout(function(){!function(e){(document.scrollingElement||window.scrollNode||document.body).scrollTop=e}(i)},0)}}()}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(D)z();else{u.deviceInfo=e.deviceInfo;var t=T[0],n=t.getArticle();t.ready(),n.has_more?v.post("article.php",{act:"load_more",rev:n.rev,hash:n.has_more_hash,article_owner_id:n.owner_id,article_id:n.id,audio_bridge:intval(u.audioBridge),no_lazy_images:intval(u.noLazyImages),can_infinite_scroll:intval(u.canInfiniteScroll),wall_owner_id:u.wallOwnerId,context:u.context,client_version:u.clientVersion},{onFail:function(){u.failTries>0&&(u.failTries--,setTimeout(function(){$(e)},2e3))},onDone:function(e,i){D=!0,n.audios_list=i.audios_list,n.next_article_url=i.next_article_url,n.has_more=!1,n.audios_list&&n.audios_list.length&&(S=S.concat(n.audios_list));var r=w(e),a=m("article_view",r),s=m("article_view");"figure"!==s.lastElementChild.tagName.toLowerCase()&&s.lastChild.remove();for(var l=s.children.length,u=a.children;l<u.length;)s.appendChild(u[l]);var c=m("article_preload_spinner");c&&c.parentNode.removeChild(c);var d=m("articleView__content_misc_block",r);s.parentNode.appendChild(d),function(){for(var e=m("article").children,t=0;t<e.length;t++){var n=t>0&&e[t-1],i=e[t],r=t+1<e.length&&e[t+1],a=n?"".concat(n.tagName,"_").concat(domData(n,"type")):"",s=i?"".concat(i.tagName,"_").concat(domData(i,"type")):"",l=r?"".concat(r.tagName,"_").concat(domData(r,"type")):"",u=!1,c=!1,d=!1;a&&s==a||(u=!0),l&&s==l||(c=!0),(o.ResizableObjectTypes.includes(+l.type)||l.sep)&&(d=!0),h(i,"article_decoration_first",u),h(i,"article_decoration_last",c),h(i,"article_decoration_before",d)}}(),H(n),z(),t.update()}}):v.post("article.php",{act:"next_url",access_hash:n.access_hash,article_owner_id:n.owner_id,article_id:n.id,wall_owner_id:u.wallOwnerId,context:u.context},{onDone:function(e){e&&(n.next_article_url=e,t.update())}});var i=t.getEl();e.paddingTop&&setStyle(i,"marginTop",intval(e.paddingTop)),e.paddingBottom&&setStyle(i,"marginBottom",intval(e.paddingBottom)),e.noDarkModeTransition&&g(i,"article_dark_no_transition")}}function q(e){var t=null;return each(T,function(n,i){var r=i.getArticle();if(r.raw_id==e)return t=r,!1}),t}function W(e){var t="https://"+u.devHost+"vk.com"+e.url,n={id:e.id,owner_id:e.owner_id,owner_name:e.owner_name,state:"available",can_report:e.can_report,title:e.title,subtitle:"",views:e.views,shares:e.shares,is_favorite:e.is_faved,url:t,view_url:t,access_key:e.access_hash,published_date:e.published_date};return e.owner_photo&&0!=e.owner_photo.indexOf("/images/")&&(n.owner_photo=e.owner_photo),n}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=T[T.length-1];if(t)for(var i=0;i<T.length;i++)if(T[i]._article.raw_id===t){n=T[i];break}n.sendStats({type:e})}window.ArticleView=a.default,window.Article={init:function(e,t){if((u=t).mobile=!0,u.failTries=50,window.cur&&(window.cur.lang=window.cur.lang||{},extend(window.cur.lang,t.lang||{})),A=m("articleView__content_list"),!u.isWebView){var n,r=N(),a=m("articleView__header"),s=m("articleView__footer"),l=m("articleView__layout");B().addEventListener("scroll",n=function(){var e=l.clientHeight,t=Math.max(0,N()),n=t-r>0,i=t+window.innerHeight+20>e;h(a,"articleView__header--narrow",n),s&&h(s,"articleView__footer--hidden",!i&&n),r=t},{passive:!0});var f=m("articleView__close"),p=m("articleView__close_mini");f.addEventListener("click",Y.bind(window,o.ArticleStatsEvents.close)),p.addEventListener("click",Y.bind(window,o.ArticleStatsEvents.close)),window.cur&&cur.destroy.push(function(){document.removeEventListener("scroll",n),y(document.body,"article_body_with_transition")}),u.isStandalone&&(window.al=!1)}if(u.preloadMoreHash||show(m("article_layer_prev_next")),u.isWebView){var _=m("article");g(_,"article_webview")}u.isWebView&&u.audioBridge&&(window.audioplayer={playPause:function(e,t){var n=C("audio_item",e.target);if(c&&c!=n&&(y(c,"ai_playing"),c=!1),d&&(y(d,"article_object_audioplaylist_playing"),d=!1),hasClass(n,"ai_playing"))i.default.send("audioPause",{}),y(n,"ai_playing");else{var r=L(t,S),o=S;-1==r&&(o.unshift(t),r=0),i.default.send("audioPlay",{audioIds:o,pos:r}),g(n,"ai_playing"),c=n}}}),u.isWebView?(i.default.send("articleReady"),window.addEventListener("VKWebAppEvent",function(e){var t=e.detail||{};switch(t.type){case"articleOwnerSubscribed":var n=t.ownerId,i=t.isSubscribed;each(T,function(e,t){var r=t.getArticle();if(r.owner_id==n)return r.is_subscribed_to_owner=i,!1});break;case"articleBookmarked":var r=t.articleOwnerId+"_"+t.articleId,a=q(r);a&&(a.is_faved=t.isBookmarked);var s=R(r);each(s,function(e,n){h(n,"_active",!!t.isBookmarked)});break;case"articleWebViewShow":$(t);break;case"articleWebViewClose":Y(o.ArticleStatsEvents.close);break;case"didShareArticle":var l=t.articleRawId,u=t.shareType;if(!u)break;Y(u,l);break;case"articleMentionClick":var c=t.articleRawId;Y(o.ArticleStatsEvents.clickOnMentions,c)}}),j(e,!0)):j(e,!1)},fave:function(e,t,n,r,a){var s=!hasClass(e,"_active");v.post("article.php",{act:"fave",url:t,add:intval(s),hash:n}),T.forEach(function(e){var n=e.getArticle();n.url==t&&(n.is_faved=s)}),(0,o.mailruStatsPixel)(s?"fave":"unfave",r),Share.setBookmarkState(a,s),V(a,s),u.isWebView&&function(e){var t=q(e);t&&(JSON.stringify({article:W(t)}),i.default.send("articleBookmarked",{article:W(t)}))}(a)},toggleButton:V,share:function(e,t,n){return function(e){var t=q(e),n=u.clientVersion;if(t)if(n){var r={type:"article",data:W(t)};i.default.send("share",r)}else{var o={article:W(t)};i.default.send("articleShare",o)}}(t),!1},subscribe:function(e,t,n){v.post("article.php",{act:"subscribe",owner_id:t,hash:n},{onDone:function(t,n){h(e,"articleView__subscribed",t),e.innerHTML=n}})},toggleDarkMode:function(e){l||(l=setTimeout(function(){var t=m("articleView__layout");h(t,"article_dark",e),h(document.body,"article_dark",e);var n=intval(hasClass(t,"article_dark"));l=!1,void 0!==e||u.isWebView||v.post("article.php",{act:"set_dark_mode",dark:n});var i=m("articleMenu");i&&Unfold.setTitle(i,"dark_mode",n?getLang("mobile_articles_menu_dark_disable"):getLang("mobile_articles_menu_dark")),Y(n?o.ArticleStatsEvents.nightModeOn:o.ArticleStatsEvents.nightModeOff)},e?0:10))},onWebViewShow:$,sendStats:Y,audioPlayPlaylist:function(e,t,n){var r=C("article_object_audioplaylist_webview",e);if(c&&(y(c,"ai_playing"),c=!1),d){var o=d;if(y(o,"article_object_audioplaylist_playing"),d=!1,o==r)return i.default.send("audioPause",{}),cancelEvent(n)}var a=L(t,S),s=S;return-1==a&&(s.unshift(t),a=0),i.default.send("audioPlay",{audioIds:s,pos:a}),g(r,"article_object_audioplaylist_playing"),d=r,cancelEvent(n)},onAudioStateChanged:function(e,t){c&&(y(c,"ai_playing"),c=!1),d&&(y(d,"article_object_audioplaylist_playing"),d=!1),e=(e=e.split("_"))[0]+"_"+e[1];var n=ge("audio".concat(e));n&&h(n,"ai_playing","play"==t);for(var i=geByClass("_article_object_audioplaylist_webview"),r=0;r<i.length;r++)if((domData(i[r],"ids")||"").split(",").indexOf(e)>=0&&"play"==t){g(i[r],"article_object_audioplaylist_playing"),d=i[r];break}}}},"0Ezr":function(e,t,n){"use strict";n("+4eP")},"0Zid":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){cancelEvent(e);var n=t.getAttribute("href"),i=getLang("mobile_wall_prometheus_edit_warn");Confirm(i,'Popup.close(this); nav.go("'.concat(n,'");'),"",{title:getLang("mobile_prometheus_edit_warn_popup_title")})};t.default=i},"0bdD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestrictionSplash=void 0;var i=a(n("Po+v")),r=a(n("WDxS")),o=n("OcsD");function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initPopup(),this.popup&&(this.connectEvents(),this.initSlider(),e.sendStat("show_screen"))}return l(e,null,[{key:"sendStat",value:function(e){(0,o.statlogsValueEvent)("audio_onboarding",e)}}]),l(e,[{key:"initPopup",value:function(){var e=document.querySelector(".audioRestrictionSplash");e&&(this.popup=i.default.open(e,!0,{forceScrollDisable:!0}))}},{key:"connectEvents",value:function(){var t=this;this.popup.querySelectorAll(".audioRestrictionSplash__closeIcon").forEach(function(n){n.addEventListener("click",function(n){gpeByClass("audioRestrictionSplash__firstScreen",n.target)?e.sendStat("skip_1screen"):gpeByClass("audioRestrictionSplash__secondScreen",n.target)&&e.sendStat("skip_2screen"),t.close()})}),this.popup.querySelector(".audioRestrictionSplash__explain").addEventListener("click",function(){return e.sendStat("click_more")}),this.popup.querySelector(".audioRestrictionSplash__continueFreeLink").addEventListener("click",function(){e.sendStat("continue_free"),t.close()}),this.popup.querySelector(".audioRestrictionSplash__continueButton").addEventListener("click",function(){t.slider.next(),e.sendStat("next_1screen")}),this.popup.querySelector(".audioRestrictionSplash__specialLink").addEventListener("click",function(){return e.sendStat("get_offer")})}},{key:"initSlider",value:function(){this.screens=this.popup.querySelector(".audioRestrictionSplash__screens"),this.slider=(0,r.default)(this.screens,{dots:!0,speed:500})}},{key:"close",value:function(){i.default.close(this.popup)}}]),e}();t.RestrictionSplash=u},1:function(e,t,n){e.exports=n("75Qd")},"14pr":function(e,t,n){"use strict";n("nhxT"),n("ydHj"),n("M6Dd"),n("RC9X"),n("uOGV"),n("qxbX"),n("G5f9"),n("JJyo"),n("Mu6q"),n("52I4"),n("/bwU"),n("k1or"),n("s+BL"),n("OsAp"),n("KJ2u"),n("GS9k"),n("+ybh"),n("aXJN"),n("2klm"),n("qnb1"),n("dFlO"),n("7pu1"),n("BJQ+")},"1BRX":function(e,t,n){"use strict";function i(e){var t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}Object.defineProperty(t,"__esModule",{value:!0}),t.isToday=i,t.isYesterday=function(e){return i(new Date(e.getTime()+864e5))},t.isTomorrow=function(e){return i(new Date(e.getTime()-864e5))},t.isSameDate=function(e,t){var n=new Date(e),i=new Date(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()&&n.getDate()===i.getDate()},t.leadingZero=function(e){return e>=10?e:"0"+e},t.formatTime=function(e,t){var n;e=Math.max(e,0);var i=Math.floor(e%60);n=i<10?"0"+i:i;var r=(e=Math.floor(e/60))%60;n=r+":"+n,((e=Math.floor(e/60))>0||t)&&(r<10&&(n="0"+n),n=e+":"+n);return n},t.getServerTime=function(){return vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)}},"1By4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={html:s,wrap:function(e){return e?{__raw__:e}:null},handle:function(){var e=w(arguments[0]),t=Array.prototype.slice.call(arguments,1),n=e[0];if(!n)return;h(n)||console.warn('Invalid handler "'.concat(n,'"'));var i=k(window,n);if(!g(i))return void console.warn("`".concat(n,"` is not a function"));i.apply(null,e.slice(1).concat(t))},handle2:function(e,t){var n=Array.prototype.slice.call(arguments,2),i=e[0];if(!i)return;h(i)||console.warn('Invalid handler "'.concat(i,'"'));var r=k(window,i);if(!g(r))return void console.warn("`".concat(i,"` is not a function"));for(var o=e.slice(1),a=0,s=o.length;a<s;a++)if("event"===o[a]){o[a]=t;break}r.apply(null,o.concat(n))},elem:function(e){return e?ceFromString(s(e)):""},class:u};t.default=i;var r=["tag","inner","attrs","innerHTML","outerHTML"],o=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],a=["abort","auxclick","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","stalled","submit","suspend","timeupdate","toggle","touchcancel","touchend","touchmove","touchstart","volumechange","waiting","wheel"].map(function(e){return"on".concat(e)});function s(e){if(h(e))return e?{__raw__:e}:null;if(m(e))return e.map(s).join("");if(!v(e))throw"Invalid input, object is expected";if("outerHTML"in e){var t=e.outerHTML;if(h(t))return t;if(_(t))return t.toString();if(t)throw"Invalid outerHTML";return""}var n=function(e){if("tag"in e){var t=e.tag;if(h(t)&&/^[\w-]+$/.test(t))return t;throw"Invalid tag name"}if(y(e.href))return"a";return"div"}(e),i=function(e){if("innerHTML"in e){var t=e.innerHTML;if(h(t))return t;if(_(t))return t.toString();if(t)throw"Invalid innerHTML";return""}if("inner"in e)return E(e.inner).map(l).join("");return""}(e),r=function(e){var t="";v(e.attrs)&&Object.assign(e,e.attrs);for(var n in e)if(!A(n)){var i=e[n];"class"===n?i=u(i):f(n)&&(m(i)||p(i))&&(i=c(i));var r=b(n);!0===i?t+=" ".concat(r):_(i)?t+=" ".concat(r,'="').concat(i,'"'):h(i)?t+=" ".concat(r,'="').concat(b(i),'"'):i&&(i=i.__raw__?i.__raw__:b(JSON.stringify(i),!0),t+=" ".concat(r,'="').concat(i,'"'))}h(e.attrs)&&(t+=" ".concat(e.attrs));return t}(e);return function(e){return o.includes(e.toLowerCase())}(n)?"<".concat(n).concat(r," />"):"<".concat(n).concat(r,">").concat(i,"</").concat(n,">")}function l(e){return _(e)?e.toString():h(e)?b(e):v(e)?e.__raw__?e.__raw__:s(e):""}function u(e){return E(e).filter(y).join(" ").trim().replace(/\s+/g," ")}function c(e){if(!(e=w(e)).length)return null;var t=e[0];if(!h(t))throw"Invalid handler";var n=e.slice(1).map(d).join(", ");return"".concat(t,"(").concat(n,")")}function d(e){return _(e)||"this"===e||"event"===e?e:JSON.stringify(e)}function A(e){return r.includes(e)}function f(e){return a.includes(e.toLowerCase())}function p(e){return h(e)&&/^[\w.]+$/.test(e)}function _(e){return"number"==typeof e&&!isNaN(e)}function h(e){return"string"==typeof e}function m(e){return Array.isArray(e)}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return"[object Function]"===Object.prototype.toString.call(e)}function y(e){return h(e)&&e}function w(e){return m(e)?e:[e]}function b(e,t){return t?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;"):(e=e.replace(/&(?!(#\d{0,4};|quot;|lt;|gt;|amp;))/g,"&amp;",e)).replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function E(e){return m(e)?function e(t){var n=[];t.forEach(function(t){m(t)?n=n.concat(e(t)):n.push(t)});return n}(e):[e]}function k(e,t){for(var n=t.split("."),i=n.length,r=e,o=0;o<i;o++)try{r=r[n[o]]}catch(e){return}return r}},"1HYu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("fdw3");var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,i.isObject)(e)&&(t=e.name?e.name:"",e=e.sprite?e.sprite:"");var n=e.split("/").join("-");return{class:"svgIcon svgIcon-".concat(n," svgIcon-").concat(n,"__").concat(t),tag:"div"}};t.default=r},"1IPy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("J/W8"));var r=i.default;t.default=r,window.VotingBcg=i.default},"1Qy5":function(e,t,n){"use strict";n("l57W")},"1V+M":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapAudioPlay=function(e,t){var n=e.play();n&&n.catch&&n.catch(function(e){(0,i.isFunction)(t)&&t(e)})};var i=n("t7n3")},"1dTo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MvkPlayerAdapter=void 0;var i=n("XLUH");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=window,A=d.ge,f=d.isFunction,p=d.audio,_=d.lsGet,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i.AudioStatsPlayerAdapter),function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(t,[{key:"playerListen",value:function(e,t){f(this.player[e])&&this.player[e](t)}},{key:"playerUnListen",value:function(e,t){f(this.player[e])&&this.player[e]("__clear",t)}},{key:"listenPlay",value:function(e,t){var n=this;this.listen("onPlay",function(){n.updateContext();for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];e.apply(t,r)},t)}},{key:"listenPause",value:function(e,t){this.listen("onPause",e,t)}},{key:"listenProgress",value:function(e,t){this.listen("onProgress",e,t)}},{key:"listenVolume",value:function(e,t){this.listen("onVolume",e,t)}},{key:"listenSeek",value:function(e,t){this.listen("onSeek",e,t)}},{key:"listenPlaylistChanged",value:function(e,t){this.listen("onPlaylistChanged",e,t)}},{key:"listenEnded",value:function(e,t){this.listen("onEnded",e,t)}},{key:"listenPlayNext",value:function(e,t){this.listen("onPlayNext",e,t)}},{key:"listenAdCompleted",value:function(e,t){this.listen("adCompleted",e,t)}},{key:"useNewStats",value:function(){return this.player.useNewStats()}},{key:"getPausedBy",value:function(e){return A("StoriesView")?"stories":null}},{key:"getState",value:function(){var e=l(u(t.prototype),"getState",this).call(this),n=this.getAudioId();return n&&A("audio"+n)?i.FULL_SCREEN_STATE:e}},{key:"getProgress",value:function(){var e=p.getCurrent();return e?p.position()/e.dur*100:0}},{key:"getProgressInSeconds",value:function(){return Math.round(p.position())}},{key:"getVolume",value:function(){return Math.round(100*p.volume())}},{key:"getAudioId",value:function(){return p.getCurrentId()}},{key:"getAudioTrackCode",value:function(){try{return document.querySelector("[data-id='"+p.getCurrent().id+"']").getAttribute("data-track-code")}catch(e){return!1}}},{key:"getPrevAudioId",value:function(){var e=this.getAudioId(),t=this.player.getPlaybackQueue();if(e){var n=t.lastIndexOf(e);if(-1!==n)return t[n-1]}}},{key:"getPlaylistIdFromAudioId",value:function(e){if(e&&isString(e)){var t=o(e.split("_"),4),n=t[0],i=t[1],r=t[2],a=t[3];return n&&i&&r&&0===r.indexOf("playlist")?r.replace("playlist","")+"_"+a:void 0}}},{key:"getPlaylistTypeFromAudioId",value:function(e){if(e&&isString(e)){var t=o(e.split("_"),4),n=t[0],i=t[1],r=t[2],a=t[3];return n&&i?r&&0===r.indexOf("playlist")?r.replace("playlist","")+"_"+a:r:void 0}}},{key:"getPrevPlaylistId",value:function(){return this.getPlaylistIdFromAudioId(this.getPrevAudioId())}},{key:"getPlaylistId",value:function(){return this.getPlaylistIdFromAudioId(this.getAudioId())}},{key:"updateContext",value:function(){var e=this.getPlaylistTypeFromAudioId(this.getAudioId());if(e){var t=this.getContextByType(e);"other"===t&&nav.getQuery("from")?this.context=this.getContextByType(nav.getQuery("from")):this.context=t}else this.context="other"}},{key:"getContextByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===e.indexOf("recoms"))return nav.getQuery("q")?"search":"recs";if(0===e.indexOf("audios")){var t=intval(e.replace("audios",""));return t===vk.id?"my":t<0?"group_list":"user_list"}return 0===e.indexOf("popular")?"recs_audio":0===e.indexOf("search")?"search":0===e.indexOf("wall")?"group_list":0===e.indexOf("mail")?"im":0===e.indexOf("feed")?"feed":"other"}},{key:"getContext",value:function(){return this.context||"other"}},{key:"getSequence",value:function(){return 0}},{key:"getListenedTime",value:function(){var e=Math.round(p.played());return isNaN(e)?0:e||0}},{key:"getSearchParams",value:function(){return null}},{key:"getType",value:function(){return"html5"}},{key:"isPlaying",value:function(){return p.playing()}},{key:"isAutoPlayed",value:function(){return this.player.isAutoPlayed()}},{key:"isRepeatCurrentAudio",value:function(){return!1}},{key:"isRepeatAll",value:function(){return!1}},{key:"isShuffledPlaylist",value:function(){return!1}},{key:"isPodcast",value:function(){return!1}},{key:"isAdPlaying",value:function(){return!1}},{key:"isRealPlaylist",value:function(){return!0}},{key:"isRealPrevPlaylist",value:function(){return!0}},{key:"isLastTrack",value:function(){var e=p.getCurrent(),t=p.playlist();return!!e&&(!(!e||t&&t.length)||t.indexOf(e)+1===t.length)}},{key:"hasPrevPlaylist",value:function(){return!1}},{key:"hasPlaylist",value:function(){var e=p.playlist();return Boolean(e&&e.length>1)}},{key:"hasPrevAudio",value:function(){var e=this.getAudioId(),t=this.player.getPlaybackQueue();return Boolean(e&&t.length>1)}},{key:"hasSearchParams",value:function(){return!1}},{key:"isDebug",value:function(){return Boolean(_("audio_stats_debug"))}},{key:"sendListenedData",value:function(e){var t=nav.getQuery("from");ajax.post("/audio",{_ajax:1,act:"playback",audio:e.audio_id,track_code:e.track_code,prev:e.prev_audio_id,hash:this.player.getAddHash(),state:e.state,from_block:t,listened:e.listened,end_stream_reason:e.end_stream_reason,auto:e.auto})}}]),t}();t.MvkPlayerAdapter=h},"21le":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("RkGL"));var r=window,o=r.gpeByClass,a=r.setStyle,s="-webkit-tap-highlight-color";i.default._onMouseDown(function(e){for(var t=e;!(!(t=o("msg_item",t))||t&&attr(t,"data-id")););t&&(!function(e){a(e,s,"transparent")}(t),setTimeout(function(){return function(e){a(e,s,"initial")}(t)},400))})},"29dZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("UvyM")),r=o(n("myok"));function o(e){return e&&e.__esModule?e:{default:e}}Object.assign(i.default,r.default),window.Btn=i.default;var a=i.default;t.default=a},"2C1Z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("TYsd")),r=o(n("z9sQ"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.class||e.mix;return i.default.html({class:[t,r.default.class("Loading",{white:e.white,large:e.large})],inner:{class:"Loading__items",inner:[{class:"Loading__item Loading__item_0"},{class:"Loading__item Loading__item_1"},{class:"Loading__item Loading__item_2"}]}})};t.default=a},"2IoG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("bZ/P"));function r(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "]);return r=function(){return e},e}var o=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.default.list(n.inner);n.url?(e="a",t=i.default.attr("href",n.url)):(e=n.tag||"div",t="");return i.default.html(r(),e,n.mix,t,n.attrs,o,e)};t.default=o},"2eJH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("7qNY"));var r=i.default;t.default=r,window.MessageRequestBox=i.default},"2klm":function(e,t,n){"use strict";String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})},"3+oY":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));window.Select={},Select._onChange=o;var r={optionByValue:function(e){return'.Select__option[value="'.concat(e,'"]')}};function o(e,t){var n=e.value,o=e.$(r.optionByValue(n));i.default.handle(t,{$select:e,$option:o,value:n,name:e.name,label:o.textContent})}},"3Gnz":function(e,t,n){"use strict";var i=n("UxAg"),r=need("Btn");window.PrivacyPolicy={},PrivacyPolicy._onAcceptToggle=a;var o={submit:".PrivacyPolicy__submit"};function a(e){var t=e.checked,n=(0,i.$)(o.submit);r.setDisabled(n,!t)}},"3I1p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiMap=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).replaceSymbols;if(i.default.safari&&i.default.safari_mobile)return e;for(var r={D83DDE07:/(\s|^)([0OÎ]:\))([\s\.,]|$)/g,D83DDE09:/(\s|^)(;-\)+)([\s\.,]|$)/g,D83DDE06:/(\s|^)([XÕxõ]-?D)([\s\.,]|$)/g,D83DDE0E:/(\s|^)(B-\))([\s\.,]|$)/g,D83DDE0C:/(\s|^)(3-\))([\s\.,]|$)/g,D83DDE20:/(\s|^)(&gt;\()([\s\.,]|$)/g,D83DDE30:/(\s|^)(;[oîOÎ])([\s\.,]|$)/g,D83DDE33:/(\s|^)(8\|)([\s\.,]|$)/g,D83DDE32:/(\s|^)(8-?[oîOÎ])([\s\.,]|$)/g,D83DDE0D:/(\s|^)(8-\))([\s\.,]|$)/g,D83DDE37:/(\s|^)(:[XÕ])([\s\.,]|$)/g,D83DDE28:/(\s|^)(:[oîOÎ])([\s\.,]|$)/g,2764:/(\s|^)(&lt;3)([\s\.,]|$)/g},a=0;a<2;a++)for(var l in r)e=e.replace(r[l],function(e,n,i,r){return(n||"")+t(l)+(r||"")});var r={D83DDE0A:/(:-\))([\s\.,]|$)/g,D83DDE03:/(:-D)([\s\.,]|$)/g,D83DDE1C:/(;-[PÐ])([\s\.,]|$)/g,D83DDE0B:/(:-[pð])([\s\.,]|$)/g,D83DDE12:/(:-\()([\s\.,]|$)/g,"263A":/(:-?\])([\s\.,]|$)/g,D83DDE0F:/(;-\])([\s\.,]|$)/g,D83DDE14:/(3-?\()([\s\.,]|$)/g,D83DDE22:/(:&#039;\()([\s\.,]|$)/g,D83DDE2D:/(:_\()([\s\.,]|$)/g,D83DDE29:/(:\(\()([\s\.,]|$)/g,D83DDE10:/(:\|)([\s\.,]|$)/g,D83DDE21:/(&gt;\(\()([\s\.,]|$)/g,D83DDE1A:/(:-\*)([\s\.,]|$)/g,D83DDE08:/(\}:\))([\s\.,]|$)/g,D83DDC4D:/(:like:)([\s\.,]|$)/g,D83DDC4E:/(:dislike:)([\s\.,]|$)/g,"261D":/(:up:)([\s\.,]|$)/g,"270C":/(:v:)([\s\.,]|$)/g,D83DDC4C:/(:ok:|:îê:)([\s\.,]|$)/g};for(var l in r)e=e.replace(r[l],function(e,n,i){return t(l)+(i||"")});n&&(e=e.replace(o,function(e){return s(e,t)}));return e},t.emojiReplace=s,t.emojiJoiners=t.emojiRegEx=t.emojiCharSeq=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var r=/[0-9\uD83D\uD83C\uD83E\uDB40]/;t.emojiCharSeq=r;var o=/((?:[\u203C\u2049\u2122\u2328\u2601\u260E\u261d\u2626\u262A\u2638\u2639\u263a\u267B\u267F\u2702\u2708]|[\u2600\u26C4\u26BE\u2705\u2764]|[\u2194-\u2199\u21AA\u21A9]|[\u231A-\u231B]|[\u23E9-\u23EF]|[\u23F0-\u23F4]|[\u23F8-\u23FA]|[\u24C2]|[\u25AA-\u25AB]|[\u25B6\u25C0]|[\u25FB-\u25FE]|[\u2602-\u2618]|[\u2648-\u2653]|[\u2660-\u2668]|[\u26A0-\u26FA]|[\u2692-\u269C]|[\u262E-\u262F]|[\u2622-\u2623]|[\u2709-\u2764]|[\u2795-\u2797]|[\u27A1]|[\u27BF]|[\u2934-\u2935]|[\u2B05-\u2B07]|[\u2B1B]|[\u2B50\u2B55]|[\u303D]|[\u3297\u3299]|[\uE000-\uF8FF]|[\uD83D\uD83C\uD83E][\uDC00-\uDFFF]|\uDB40[\uDC20-\uDC7F]|[0-9]\u20E3|[\u0023-\u0039\u203C-\u21AA\u1F3F3]\uFE0F\u20E3|[\u200C\u200D\u2640\u2642\uFE0F])+)/g;t.emojiRegEx=o;var a=["2640","2642","200D","200C"];function s(e,t){var n=0,i="",o="",s="",l=[],u=[],c=!0;e.match(/\uFE0F\u20E3/g)&&(e=e.replace(/\uFE0F/g,""));do{if(s=e.charCodeAt(n++)){var d=s.toString(16).toUpperCase(),A=e.charAt(n-1);if(8419!=s)i+=d,o+=A,A.match(r)||(u.push(i),l.push(o),i="",o="");else{var f=n-2,p=e.charAt(f);u.push("003"+p+"20E3"),l.push(p),i="",o=""}}else c=!1}while(c);i&&(u.push(i),l.push(o));var _="",h=!1,m=!1;i="",o="";for(var v=0,g=u.length;v<g;v++){d=u[v];var y=l[v];if(d&&"FE0F"!=d)if(y.match(/\uDB40[\uDC20-\uDC7F]/))i+=d,o+=y,m=!1;else if(y.match(/\uD83C[\uDFFB-\uDFFF]/))i+=d,o+=y;else if(h)i+=d,o+=y,h=!1;else if(-1===a.indexOf(d)){if(y.match(/\uD83C[\uDDE6-\uDDFF]/)){if(m){i+=d,o+=y,m=!1;continue}m=!0}else m&&(m=!1);i&&(_+=t(i,o,!0)),i=d,o=y}else i?(h=!0,i+=d,o+=y):_+=y,m=!1}return i&&(_+=t(i,o,!0)),_}t.emojiJoiners=a},"3JOE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("bZ/P")),r=o(n("Mc5h"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return(0,r.default)({mix:i.default.class(e.mix,"ScrollView"),attrs:e.attrs,inner:e.inner})};t.default=a},"3KRu":function(e,t,n){"use strict";var i=n("sOYs"),r=n("i/qW"),o=null;function a(e){for(var t=geByClass("audio-msg-track--wave-wrapper",e),n=0,i=0;i<t.length;i++){try{n=parseInt(window.getComputedStyle(t[i],null).getPropertyValue("width"))}catch(e){n=parseInt(t[i].currentStyle.width)}if(n>0)break}return n}function s(e,t){t=Math.round(t),e.length!=t&&(e=(0,r.fastResample)(e,t));for(var n="",i=0,o=0;o<e.length;o++)0==(i=Math.floor(10*e[o]*.95))&&(i=.5),n+="M"+(3*o+1)+","+(10-i)+"v"+2*i+"Z";return'<svg class="audio-msg-track--wave" width="'.concat(3*e.length,'px"><path d="').concat(n,'"></path></svg>')}function l(){for(var e=geByClass("audio-msg-track"),t=0;t<e.length;t++){var n=attr(e[t],"data-wave");hasClass(e[t],"audio-msg-player")&&t>0&&(n=attr(e[t-1],"data-wave"));var i=a(e[t]);if(n&&i){n=n.split(",");for(var r=geByClass("audio-msg-track--wave",e[t]),o=s(n,i/3),l=0;l<r.length;l++){var u=ce("div",{innerHTML:o}).firstChild;r[l].parentNode.replaceChild(u,r[l])}}}}function u(){return o||(o=new i.VoiceMessagePlayer({onListened:function(e){AudioMessagePlayer.events.emit("listened",e)}})),o}addEvent(window,"orientationchange",function(){return setTimeout(l,500)}),window.mail&&window.mail.onMessagesRepainted&&(onDOMReady(l),window.mail.onMessagesRepainted(l)),window.AudioMessagePlayer={loaded:!0,events:new EventEmitter,togglePlay:function(e,t){var n=u(),i=n.attachTo(e);!0===i?n.play():i.then(function(){n.play()})},detachPlayer:function(e){u().detach(e)},pauseGlobalMedia:function(){i.VoiceMessagePlayer.pauseGlobalMedia()},resumeGlobalMedia:function(){i.VoiceMessagePlayer.resumeGlobalMedia()},redrawWaves:l,getWave:s};try{stManager.done("voice_message_player.js")}catch(e){}},"3Wjs":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.data=t,this.raw_id=t.raw_id,this.can_remove=t.can_remove,this.can_report=t.can_report,this.can_bookmark=t.can_bookmark,this.is_bookmarked=t.is_bookmarked,this.is_narrative=!!t.narrative}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"needMenu",value:function(){return this.can_remove||this.can_report}},{key:"render",value:function(){var e=window.lang;return i.default.html({class:"StoryMenu",inner:[{class:"StoryMenu__trigger",onclick:"Stories.showMenu();",inner:{class:"Story__icon Story__icon_menu"}},{class:"StoryMenu__container",inner:[this.can_bookmark?{class:"StoryMenu__row",inner:{class:"StoryMenu__button",onclick:"Stories.toggleBookmark(this);",inner:this.is_bookmarked?e.mobile_stories_menu_bookmarked_title:e.mobile_stories_menu_bookmark_title}}:null,this.can_remove?{class:"StoryMenu__row",inner:{class:"StoryMenu__button",onclick:"Stories.removeCurrentStory();",inner:this.is_narrative?e.mobile_stories_menu_remove_narrative_title:e.mobile_stories_menu_remove_title}}:null,this.can_report?{class:"StoryMenu__row",inner:{class:"StoryMenu__button",onclick:'Stories.reportCurrentStory("'.concat(this.raw_id,'");'),inner:e.mobile_stories_menu_report_title}}:null]}]})}}]),e}();t.default=o},"3Xw1":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var r,o=window,a=o.qs2obj,s=o.preventEvent,l=o.im,u=o.nav,c=o.toggle,d=o.attr,A=o.ge,f=o.val,p=o.geByClass1,_=o.removeClass,h=o.show,m=o.hide,v=o.qsearch,g=o.toggleClass,y=o.intval,w=o.mail;function b(){return a(u.params)}function E(e){return"dialogs"===e.tab||!e.q}function k(e){var t=u.getQuery("community");return t?"".concat(e?"?":"&","community=").concat(t):""}function C(){var e=window.lang;v.init({init_once:!0,action:"/mail?act=write&fast=1",container:A("ma_search_items"),field:A("ma_search_field"),btn:A("ma_search_btn"),top_items:[],_cache:{},item_tpl:function(e,t,n,i,r){return this.id>2e9||-1===this.id?'<a href="'+(e||"")+'" class="simple_item'+(-1==this.id?" simple_item_create":"")+'">'+(t||"")+'<div class="si_body"><span class="si_owner">'+this.highlight(n||"")+"</span>"+(i||"")+(r?'<div class="si_slabel">'+r+"</div>":"")+"</div></a>":'<a href="'+(e||"")+'" class="inline_item"><div class="ii_body">'+(t||"")+'<span class="ii_owner">'+this.highlight(n||"")+"</span>"+(i||"")+"</div></a>"},null_tpl:function(){return'<div class="service_msg_box"><div class="service_msg service_msg_null">'+e.mobile_mail_no_peers+"</div></div>"},need_invalid_keys:i.default.desktop,onLoaded:function(e){for(var t in e)w.saveDialog(e[t][e[t].length-1],t)}})}l.clearSearchInput=function(e){if(s(e),E(b())){var t=A("ma_search_field");f(t,""),l.onFilterKeyDown(t)}else u.go("/mail"+k(!0))},l.onFilterKeyDown=function(e){setTimeout(function(){var t=window.lang,n=encodeURIComponent(e.value),i=b();if(c(p("mail_search_clear_button"),n),d(p("tab_dialogs_search"),"href",n?"/mail?tab=dialogs&q="+n+k():"/mail"+k(!0)),d(p("tab_messages_search"),"href","/mail?q="+n+k()),E(i)){var o,a=A("mail_tabs"),s=A("ma_search_items"),l=A("dialogs"),v=i.offset;if(_("mail_show_filtered",p("mail")),r&&clearTimeout(r),g("dialogs_filter_without_important",A("dialogs_filter"),n||0===y(f(p("dialogs_filter_button_important")))),n)h(a),h(s),m(l),r=setTimeout(function(){o="/mail?tab=dialogs&q="+n+(v?"&offset="+v:"")+k(),"/mail"!==u.path||b().act||u.go(o,null,{push_only:!0})},200);else{if(m(a),m(s),h(l),!u.getQuery("community")){var w=p("mhb_back"),C=p("mh_header");f(C,t.mobile_mail_head_title),_("mhi_back",C),w.outerHTML=w.outerHTML.replace("<a","<div").replace("</a>","</div>")}o="/mail"+(v?"?offset="+v:"")+k(!v),u.go(o,null,{push_only:!0})}}},40)},w.onShowWritePageFromCache(C),w.onShowDialogsPageFromCache(C)},"4+be":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLatin=function(e){for(var t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],n=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],i=e,r=0,o=t.length;r<o;r++)i=i.split(t[r]).join(n[r]);for(var a="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ",s=0,l=a.length;s<l;s++)i=i.split(a.charAt(s)).join("абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ".charAt(s));return i===e?null:i},t.parseCyr=function(e){for(var t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],n=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],i="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ",r=e,o=0;o<n.length;o++)r=r.split(n[o]).join(t[o]);for(var a=0;a<i.length;a++)r=r.split(i.charAt(a)).join("abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ".charAt(a));return r===e?null:r},t.parseLatKeys=function(e){for(var t="qwertyuiop[]asdfghjkl;'zxcvbnm,./`",n=e,i=0;i<t.length;i++)n=n.split(t.charAt(i)).join("йцукенгшщзхъфывапролджэячсмитьбю.ё".charAt(i));return n==e?null:n},t.langNumeric=a,t.langSex=function(e,t){if(!(0,r.isArray)(t))return t;var n=t[1];if(!window.langConfig)return n;return(0,r.each)(langConfig.sexRules,function(i,r){return"*"==r[0]?(n=t[r[1]],!1):e==r[0]&&t[r[1]]?(n=t[r[1]],!1):void 0}),n},t.langStr=function(e){for(var t=arguments,n=t.length,i=e+"",r=1;r<n;r+=2){var o="%"===t[r][0]?t[r]:"{"+t[r]+"}";i=i.replace(o,t[r+1])}return i},t.addLangKeys=function(e,t){var n=t?window:window.cur;n.lang?(0,r.extend)(n.lang,e):n.lang=e},t.getLang=s,t.langDate=l,t.getShortDate=u,t.getShortDateOrTime=function(e,t,n,r){return(0,i.isToday)(new Date(1e3*e+1e3*t))?l(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!n):u(e,t,n,r)},t.langWordNumeric=c,t.getDateText=function(e,t){e+=t;var n=parseInt(Date.now()/1e3)-e,i="";if(n<60)i=s("global_just_now");else if(n<3600){var o=(0,r.intval)(n/60);i=c(o,s("global_word_mins_ago","raw"),s("global_mins_ago","raw"))}else if(n<14400){var a=(0,r.intval)(n/3600);i=c(a,s("global_word_hours_ago","raw"),s("global_hours_ago","raw"))}else i=d(e,0,!0,"_l");return i},t.getBigDateNew=d,t.getSmDate=function(e,t,n){void 0===n&&(n=!0);void 0===t&&(t=0);var i=new Date,r=i.getFullYear(),o=i.getMonth(),a=new Date(1e3*e),u=a.getFullYear(),c=a.getMonth();return l(1e3*e,s(u<r&&(o>1||c<9||r-u>=2)?"global_date":"global_short_date_time","raw"),t,s("months_sm_of","raw"),!n)};var i=n("1BRX"),r=n("t7n3"),o=n("98sY");function a(e,t,n){if(!t||!window.langConfig)return e;var i;if((0,r.isArray)(t)?(i=t[1],e!=Math.floor(e)?i=t[langConfig.numRules.float]:(0,r.each)(langConfig.numRules.int,function(n,o){if("*"==o[0])return i=t[o[2]],!1;var a=o[0]?e%o[0]:e;return-1!=(0,r.indexOf)(o[1],a)?(i=t[o[2]],!1):void 0})):i=t,n){for(var o=e.toString().split("."),a=[],s=o[0].length-3;s>-3;s-=3)a.unshift(o[0].slice(s>0?s:0,s+3));o[0]=a.join(langConfig.numDel),e=o.join(langConfig.numDec)}return i=(i||"%s").replace("%s",e)}function s(){try{var e=Array.from(arguments),t=e.shift();if(!t)return"...";var n=window.cur.lang&&window.cur.lang[t]||window.lang&&window.lang[t]||window.langpack&&window.langpack[t]||window[t];if(!n){var i=t.split("_");return i.shift(),i.join(" ")}return(0,r.isFunction)(n)?n.apply(null,e):void 0===e[0]&&!(0,r.isArray)(n)||"raw"===e[0]?n:a(e[0],n,e[1])}catch(e){(0,o.debugLog)("lang error:"+e.message+"("+Array.from(arguments).join(", ")+")")}}function l(e,t,n,o,a,s){var l;if(s||(s=""),(0,r.isArray)(t)||(t=["",t,t,t,t]),"number"==typeof e||"string"==typeof e?(e>2147483646e3&&(e=0),e+=n,l=new Date(e)):l=e,a)t=t[1];else{var u="";!(u=(0,i.isToday)(l)?t[3]:(0,i.isYesterday)(l)?t[2]:(0,i.isTomorrow)(l)?t[4]:t[1])&&t[1]&&(u=t[1]),t=u}var c={hours:l.getHours(),minutes:l.getMinutes(),seconds:l.getSeconds(),day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()},d="";switch(3===vk.lang&&(d=l.getHours()>11?"pm":"am",c.hours=l.getHours()%12==0?12:l.getHours()%12),vk.lang){case 1:switch(l.getHours()){case 11:t=t.replace(" о "," об ");break;case 0:t=t.replace(" о "," в ")}break;case 3:!(0,i.isToday)(l)||(0,i.isYesterday)(l)||(0,i.isTomorrow)(l)||(t=s+t);break;case 12:case 73:1==l.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===vk.lang&&(c.year=c.year+543),t.replace("{hour}",c.hours).replace("{num_hour}",(0,i.leadingZero)(c.hours)).replace("{minute}",(0,i.leadingZero)(c.minutes)).replace("{day}",c.day).replace("{num_day}",(0,i.leadingZero)(c.day)).replace("{month}",o[c.month]).replace("{year}",c.year).replace("{short_year}",c.year%100).replace("{second}",(0,i.leadingZero)(c.seconds)).replace("{am_pm}",d)}function u(e,t,n,i,r){e*=1e3,void 0===n&&(n=!0),void 0===i&&(i=s("months_of","raw")),t*=1e3;var o=Date.now(),a=new Date(o),u=new Date(e+t);return!r&&e>o&&e-o<864e5&&a.getDate()===u.getDate()?l(e,"{hour}:{minute} {am_pm}",t,[],!n):u.getYear()!==a.getYear()||e<o-157248e5?l(e,s("global_date","raw"),t,i,!n):l(e,s("global_short_date","raw"),t,i,!n)}function c(e,t,n){return(0,r.isArray)(t)&&e<t.length?t[e]:a(e,n)}function d(e,t,n,i){void 0===n&&(n=!0),void 0===t&&(t=0),void 0===i&&(i=""),t*=1e3;var r=new Date(1e3*e),o=new Date;return r.getFullYear()!==o.getFullYear()&&r.getTime()<o.getTime()-1728e5||Math.abs(r.getTime()-o.getTime())>157248e5?l(1e3*e,s("global_date","raw"),t,s("months_sm_of"),!n):l(1e3*e,s("global_short_date_time"+i,"raw"),t,s("months_sm_of"),!n)}},"40dl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=c,t.close=d;var i=n("OcsD"),r=n("UxAg");window.Snackbar={init:c,close:d,_onActionClick:function(e,t){var n=u[t];if(!n)return void hide(t);var i=n.callback,r=n.url;i?"function"==typeof i?i.call(null,e,{id:t,url:r}):Wd.handle2(i,e,{id:t,url:r}):hide(t)}};var o="SnackbarItem_",a="SnackbarItem_added",s="SnackbarItem_removed",l=0,u={};function c(e){var t=isFinite(e.duration)?e.duration:5e3,n=l++,r=e.action&&e.action.callback,o=e.action&&e.action.url;e.id=n,r&&!e.action.onclick&&(e.action.onclick=["Snackbar._onActionClick","event",n]);var s,c=Wd.elem(SnackbarItem(e));return function(e){(0,i.append)(e,document.body),setTimeout(function(){e.classList.add(a)},100)}(c),t&&(s=setTimeout(function(){u[n]=null,A(c)},t)),u[n]={id:n,timer:s,callback:r,url:o},n}function d(e){var t=u[e],n=function(e){return(0,r.$)("."+o+e)}(e);t&&(t.timer&&clearTimeout(t.timer),u[e]=null),n&&A(n)}function A(e){e.classList.add(s),setTimeout(function(){(0,i.remove)(e)},300)}},"42eR":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("JDVM")),r=n("UxAg");var o={getHash:function(){var e=(0,r.$)("#feed_add_form"),t=qs2obj(e.action.split("?")[1]);return e.getAttribute("data-hash")||t.hash},openCopyright:function(e,t,n,o){cancelEvent(e);var a=!1;if("BUTTON"===e.target.tagName)a=e.target.disabled;else if("LABEL"===e.target.tagName){a=(0,r.$)("button",e.target).disabled}a||i.default.open(t,n,o)},saveSource:function(e,t){if(t.target){if(13!==t.keyCode)return;t=t.target}var n=(0,r.$)(".AddCopyrightPopup__input",t.closest(".AddCopyrightPopup")),o=n.querySelector("input");i.default.submit(o.value,e,n)},deleteSource:function(e,t,n){var o=(0,r.$)(".AddCopyrightPopup__input",t.closest(".AddCopyrightPopup"));event&&cancelEvent(e),i.default.remove(n,o)},deleteObject:function(e){e&&cancelEvent(e);var t=nav.params,n=qs2obj(t);delete n.object,delete n.list,n.delete_object=1,post.saveDraft(null,o.getHash(),"".concat(nav.path).concat(obj2qs(n)))}};window.posting=o},"4KUl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElem=a,t.setMsgs=function(e){a().innerHTML=e.map(function(e){return(0,r.MailPreSendList__Msg)(e)}).join("")},t.addMsg=function(e){a().insertAdjacentHTML("beforeend",(0,r.MailPreSendList__Msg)(e)),MailScrap.peerGoToBottom()},t.removeMsg=function(e){var t=o.default.getElem(e.sendId);t&&t.remove()},t.getMsg=function(e){return o.default.getElem(e.sendId)};var i=n("UxAg"),r=n("E5Ij"),o=function(e){return e&&e.__esModule?e:{default:e}}(n("/Id8"));function a(){return(0,i.$)(".MailPreSendList__box")}},"4O8T":function(e,t,n){var i;!function(t){"use strict";function r(){}var o=r.prototype,a=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function l(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),r="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],t)&&i[n].push(r?t:{listener:t,once:!1});return this},o.on=l("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=l("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,i,r=this.getListenersAsObject(e);for(i in r)r.hasOwnProperty(i)&&-1!==(n=s(r[i],t))&&r[i].splice(n,1);return this},o.off=l("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):a.call(this,i,r));return this},o.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},o.removeAllListeners=l("removeEvent"),o.emitEvent=function(e,t){var n,i,r,o,a=this.getListenersAsObject(e);for(o in a)if(a.hasOwnProperty(o))for(n=a[o].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},o.trigger=l("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return t.EventEmitter=a,r},void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},"4SKC":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stickers=void 0;var i={},r=function(e,t,n,r){delete i[t],1===r?Emoji.favorite.addFavoriteSticker(e,t,n):-1===r&&Emoji.favorite.deleteFavoriteSticker(e,t,n)};var o={toggleFavorite:function(e,t,n){if(t&&t.stopPropagation(),!hasClass(e,"on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var o=langStr(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(showFastBox(getLang("global_error"),o).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var a=attr(e,"data-sticker-id"),s=attr(e,"data-hash");return!(!a||!s)&&!i[a]&&(i[a]=1,toggleClass(e,"on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:a,hash:s},{onDone:r.pbind(n,a,e)}))},getStickerUrl:function(e,t){var n={id:e,size:t};return window.isMVK?rs(window.store.stickers.url_template,n):getTemplate("stickers_sticker_url",n)}};t.Stickers=o},"4azy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("fdw3");var r=function(e){return(0,i.extend)({tag:"textarea",class:["Textarea",e.mix],name:e.name,placeholder:e.placeholder,rows:e.rows?e.rows:3,inner:e.text},e.attrs)};t.default=r},"4qiT":function(e,t,n){"use strict";var i={init:function(e){var t=this;this.store?addEvent(window,"scroll touchstart",this._onScrollHandler):(this.store=extend({},e),this.loadCount=20,this.store.offset=this.loadCount,this.isLoading=!1,this.elems={wrap:geByClass1("author-page"),nav:geByClass1("author-page-nav",this.wrap),header:geByClass1("author-page-header",this.wrap),content:geByClass1("author-page__inner",this.wrap),spinner:geByClass1("author-page__spinner",this.wrap)},this._onScrollHandler=this._onScrollHandler.bind(this),addEvent(window,"scroll touchstart",this._onScrollHandler),e.isStandalone&&(window.al=!1),window.cur.destroy.push(function(){removeEvent(window,"scroll touchstart",t._onScrollHandler)}))},_getLoadOffset:function(){return this.store.offset},_showLoader:function(){this.isLoading=!0,addClass(this.elems.spinner,"active")},_hideLoader:function(){this.isLoading=!1,removeClass(this.elems.spinner,"active")},_onScrollHandler:function(){var e=this,t=this.elems,n=t.nav,i=t.header,r=t.content,o=this.store.totalCount>this._getLoadOffset();toggleClass(n,"author-page-nav_shown",i.getBoundingClientRect().bottom-n.clientHeight<0),o&&window.scrollTop()+2*window.innerHeight>r.offsetHeight&&this._loadMore(this.store.sortBy,this._getLoadOffset(),function(t){e.elems.content.innerHTML+=t})},_loadMore:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.isLoading||(t&&(this.store.sortBy=t),isFunction(i)||(i=function(){}),this._showLoader(),ajax.post("author_page.php",{act:"load_more",author_id:this.store.authorId,sort_by:t||this.store.sortBy,count:this.loadCount,offset:void 0!==n?n:this._getLoadOffset()},{onFail:function(){e._hideLoader()},onDone:function(t){e._hideLoader(),e.store.offset+=20,t&&i(t)}}))},subscribe:function(e,t,n){ajax.post("author_page.php",{act:"subscribe",author_id:t,hash:n},{onDone:function(t,n){toggleClass(e,"Btn_theme_secondary",t),e.innerHTML=n}})},sortBy:function(e,t){e.preventDefault(),Unfold.setActive(e.target.parentNode),this._closeUnfold(e),t!==this.store.sortBy&&this.updateList(t)},updateList:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||this.store.sortBy,addClass(this.elems.content,"loading"),n&&Unfold.setActive(geByClass1("Unfold__item")),this._loadMore(e,0,function(e){t.elems.content.innerHTML=e,t.store.offset=t.loadCount,removeClass(t.elems.content,"loading")})},_closeUnfold:function(e){if(e){var t=e.target.closest(".Unfold");t&&removeClass(t,"Unfold_open")}},addToBookmark:function(e,t,n,i,r){e.preventDefault(),this._closeUnfold(e);var o=+domData(t,"is-bookmarked"),a=o?"bookmark_remove":"bookmark_add",s=geByClass1("Unfold__itemText",t);ajax.post("bookmarks.php",{_ajax:1,act:a,item_type:5,item_oid:n,item_id:i,hash:r},{onDone:function(e,n,i){domData(t,"is-bookmarked",o?0:1),o?s&&(s.innerHTML=lang.mobile_bookmarks_actions_add):s&&(s.innerHTML=lang.mobile_bookmarks_actions_remove),i&&Bookmarks.showSuccessSnack(i)}})},pinArticle:function(e,t,n,i,r){var o=this;e.preventDefault(),this._closeUnfold(e),ajax.post("author_page.php",{act:"pin_article",article_owner_id:t,article_id:n,do_pin:i?0:1,hash:r},{onDone:function(){o.updateList("date",!0)}})},hideArticle:function(e,t,n,i){var r=this;e.preventDefault(),this._closeUnfold(e),ajax.post("author_page.php",{act:"hide_article",article_owner_id:t,article_id:n,hash:i},{onDone:function(){r.updateList()}})}};window.AuthorPage=i},"4rnG":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("RkGL"));var r,o,a=window,s=a.preventEvent,l=a.cancelEvent,u=a.lockButton,c=a.attr,d=a.ajax,A=1500,f=!1,p=null;function _(){p&&Btn.setLoading(p,!1),r&&(clearInterval(r),r=null),o&&(o.abort(),o=null)}i.default._onCancelClick(function(e,t){t?(f=!1,s(e),l(e),u(t)):(f=!0,t=e.$btn,e=null,p=t,Btn.setLoading(t,!0)),function(e){var t=e.cancelUrl;r=setInterval(function(){o=d.post(t,{_ajax:1},{onDone:function(e){if(1===e){if(f){var t=arguments[1];return p.closest(".BtnStack").outerHTML='\n            <div class="notification__tempText">'.concat(t,"</div>\n          "),void _()}var n=window.scrollTop();nav.go(location.pathname+location.search,null,{replace:!0}),cur.destroy.push(function(){window.scrollTop(n)}),_()}}})},A)}({cancelUrl:c(t,"href")}),window.cur.destroy.push(_)})},"4uOi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageVisibility=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.visibleCallbacks=[],this.hiddenCallbacks=[],this.visibilityPrefix="",this.hiddenStateName="hidden",this.isHidden=!1,this.listen()}return o(e,null,[{key:"_supports",value:function(e){return e+"Hidden"in document}}]),o(e,[{key:"onVisible",value:function(e){this.visibleCallbacks.push(e)}},{key:"onHidden",value:function(e){this.hiddenCallbacks.push(e)}},{key:"listen",value:function(){var e=this,t=arguments;try{var n=i.default.version.split(".")[0];if(i.default.safari_mobile&&n<=7)return window.addEventListener("pagehide",function(){return e._hidden()}),void window.addEventListener("pageshow",function(){return e._visible()});!(i.default.android&&i.default.safari&&n<5)&&this.isSupported()?(document.addEventListener(this.visibilityPrefix+"visibilitychange",function(){return e._nativeSwitch(t)}),window.addEventListener(this.visibilityPrefix+"visibilitychange",function(){return e._nativeSwitch(t)})):document.addEventListener?(window.addEventListener("focus",function(){return e._visible()},1),window.addEventListener("blur",function(){return e._hidden()},1)):(document.attachEvent("onfocusin",function(){return e._visible()}),document.attachEvent("onfocusout",function(){return e._hidden()}))}catch(e){}}},{key:"isSupported",value:function(){for(var t=0;t<e.prefixes.length;t++){var n=e.prefixes[t];if(e._supports(n))return this.hiddenStateName=(n?n+"H":"h")+"idden",this.visibilityPrefix=n,!0}return!1}},{key:"_visible",value:function(){this.isHidden=!1,this.visibleCallbacks.forEach(function(e){return e()})}},{key:"_hidden",value:function(){this.isHidden=!0,this.hiddenCallbacks.forEach(function(e){return e()})}},{key:"_nativeSwitch",value:function(){!0===document[this.hiddenStateName]?this._hidden():this._visible()}}]),e}();t.PageVisibility=a,a.prefixes=["webkit","o","ms","moz",""]},"50sn":function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){if(!("fetch"in window))return function(){};var e=["standalone","fullscreen","minimal-ui"],t="#f8f9fa",n=128,r=48,o=32,a=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple");function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=l(e);if((i.drawImage(e,0,0),!n)&&255==i.getImageData(0,0,1,1).data[3])return null;return i.globalCompositeOperation="destination-over",i.fillStyle=t,i.fillRect(0,0,e.width,e.height),i.canvas.toDataURL()}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},t=e.width,n=e.height,i=document.createElement("canvas");return i.width=t,i.height=n,i.getContext("2d")}return function(){if(a){var u=document.head.querySelector('link[rel="manifest"]'),c=u?u.href:"",d=function(e){for(var t=function(t){var n=e[t];try{return new URL("",n),{v:function(e){return new URL(e,n).toString()}}}catch(e){}},n=0;n<e.length;++n){var r=t(n);if("object"===i(r))return r.v}return function(e){return e}}([c,window.location]);Promise.resolve().then(function(){if(!c)throw'can\'t find <link rel="manifest" href=".." />\'';var e={};return"use-credentials"===c.crossOrigin&&(e.credentials="include"),window.fetch(c,e)}).then(function(e){return e.json()}).then(function(i){return function(i,a){var u=i.icons||[];u.sort(function(e,t){return parseInt(t.sizes,10)-parseInt(e.sizes,10)});var c=u.map(function(e){var t={rel:"apple-touch-icon",href:a(e.src),sizes:e.sizes};return function(e,t){var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);return n}("link",t)}),d=i.display,A=-1!==e.indexOf(d);function f(e,a,s){var u=e.width,c=e.height,d=window.devicePixelRatio,A=l({width:u*d,height:c*d});if(A.scale(d,d),A.fillStyle=i.background_color||t,A.fillRect(0,0,u,c),A.translate(u/2,(c-o)/2),s){var f=s.width/d,p=s.height/d;p>n&&(f/=p/n,p=n),f>=r&&p>=r&&(A.drawImage(s,f/-2,p/-2,f,p),A.translate(0,p/2+o))}var _=document.createElement("link");return _.setAttribute("rel","apple-touch-startup-image"),_.setAttribute("media","(orientation: ".concat(a,")")),_.setAttribute("href",A.canvas.toDataURL()),_}(function(e){var t=function(e){var t=l();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}(e).map(function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}),n=.2126*t[0]+.7152*t[1]+.0722*t[2];Math.abs(1.05/(n+.05))})(i.background_color||t),i.name||i.short_name||document.title,navigator.standalone||function(e,t){t&&(!0===t&&(t="yes"),function(e,t){var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);document.head.appendChild(n)}("meta",{name:e,content:t}))}("apple-mobile-web-app-capable",A);var p=new Set;function _(e){var t=f(window.screen,"portrait",e),n=f({width:window.screen.height,height:window.screen.width},"landscape",e);p.forEach(function(e){return e.remove()}),document.head.appendChild(t),document.head.appendChild(n),p.add(t),p.add(n)}if(_(null),c.length){var h=c[0],m=new Image;m.crossOrigin="anonymous",m.onload=function(){if(_(m),i.background_color){var e=s(m,i.background_color);null!==e&&(h.href=e,c.slice(1).forEach(function(e){var t=new Image;t.crossOrigin="anonymous",t.onload=function(){var n=s(t,i.background_color,!0);e.href=n},t.src=e.href}))}},m.src=h.href}}(i,d)}).catch(function(e){return console.warn("pwacompat.js error",e)})}}}();t.default=r},"52I4":function(e,t,n){"use strict";var i=[];[window.Element,window.CharacterData,window.DocumentType].forEach(function(e){e&&i.push(e.prototype)}),i.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})},"5KvX":function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerFlash=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t||{},window._flashVoiceInstance=this}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"fadeVolume",value:function(e,t){return this.setVolume(e),t()}},{key:"destroy",value:function(){re(e.PLAYER_EL_ID)}},{key:"onReady",value:function(t){if(this._player)return t(!0);if(!1===this._player)return t(!1);this._onReady=t;ge(e.PLAYER_EL_ID)||document.body.appendChild(ce("div",{id:e.PLAYER_EL_ID,className:"fixed"}));var n=this;renderFlash(e.PLAYER_EL_ID,{url:"/swf/audio_lite.swf",id:"flash_voice_player",height:2},{swliveconnect:"true",allowscriptaccess:"always",wmode:"opaque"},{onPlayFinish:"VoicePlayerFlash.onAudioFinishCallback",onLoadProgress:"VoicePlayerFlash.onAudioLoadProgressCallback",onPlayProgress:"VoicePlayerFlash.onAudioProgressCallback"})&&setTimeout(function(){n._checkFlashLoaded()},50)}},{key:"setUrl",value:function(e,t){this._trackOptions={},t&&"object"===i(t)&&(this._trackOptions=t,t=t.callback),this._url!=e?(this._url=e,this._player&&this._player.loadAudio(e),t&&t(!0)):t&&t(!0)}},{key:"setVolume",value:function(e){this._player&&this._player.setVolume&&this._player.setVolume(e)}},{key:"play",value:function(){this._player&&this._player.playAudio()}},{key:"seek",value:function(e){var t=(this._total||0)*e;this._player&&this._player.playAudio(t)}},{key:"pause",value:function(){this._player&&this._player.pauseAudio()}},{key:"isFullyLoaded",value:function(){return!1}},{key:"getPlayedTime",value:function(){return 0}},{key:"getCurrentProgress",value:function(){return this._currProgress||0}},{key:"getCurrentBuffered",value:function(){return this._currBuffered||0}},{key:"stop",value:function(){this._player&&this._player.stopAudio()}},{key:"_checkFlashLoaded",value:function(){var e=ge("flash_voice_player");if(this._checks=this._checks||0,this._checks++,this._checks>10)return this._player=!1,(t=this._onReady)&&t(!1);if(e&&e.paused){var t;this._player=e,(t=this._onReady)&&t(!0),this._onReady=null}else{var n=this;setTimeout(function(){n._checkFlashLoaded()},100)}}},{key:"type",get:function(){return"flash"}},{key:"loaded",get:function(){return!!this._player}}],[{key:"onAudioFinishCallback",value:function(){var e=window._flashVoiceInstance;e.opts.onEnd&&e.opts.onEnd()}},{key:"onAudioProgressCallback",value:function(e,t){var n=window._flashVoiceInstance;t&&(n._total=t,n._currProgress=e/t,n.opts.onProgressUpdate&&n.opts.onProgressUpdate(n._currProgress))}},{key:"onAudioLoadProgressCallback",value:function(e,t){var n=window._flashVoiceInstance;n._currBuffered=e/t,n.opts.onBufferUpdate&&n.opts.onBufferUpdate(n._currBuffered)}}]),e}();t.PlayerFlash=o,window.VoicePlayerFlash=o,o.PLAYER_EL_ID="flash_voice"},"5WJ6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSharePage=function(e,t){var n=ge("SharePageInput__to"),r="";n&&(r=n.value);var o={};"mail"===e&&""!==n.value&&(o=r.split(",").reduce(function(e,t){return e[t]=!0,e},{}));if("club"===e){var a=(0,i.$)(".SharePage .qsearch_wrap"),s=(0,i.$)(".hp_block",a);show(a),show(s)}var l=(0,i.$)(".SharePage .SharePanel.MessagePanel"),u=(0,i.$)(".SharePage .SharePanel.ActionsPanel");extend(cur,{publishTo:e,refreshSelected:function(e,t){var i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];isUndefined(e)||(cur.publishSelected=e),t=cur.publishTo,e=cur.publishSelected,"group"===t?i=ge("club"+e):"mail"===t&&(i=ge("peer"+e));var o=!!cur.selectedMap[e];i&&(i.classList.toggle("inline_item_selected",r?!o:o),cur.like_search.toggleAttach(e,!o),r&&(cur.selectedMap[e]=!o),n.value=Object.keys(cur.selectedMap).filter(function(e){return cur.selectedMap[e]}).join(","));var a=Object.keys(cur.selectedMap).length>0&&Object.keys(cur.selectedMap).some(function(e){return!!cur.selectedMap[e]});return l.classList.toggle("SharePanel--active",a),u.classList.toggle("SharePanel--active",!a),!1},selectedMap:o,selectPeer:function(e,t){return cur.refreshSelected(t,"mail"),!1}}),Object.keys(o).forEach(function(t){cur.refreshSelected(t,e,!1)})},t.updateButtons=function(e){var t=cur.share._els.bookmarkButton,n=(0,i.$)(".ActionsPanel-button__icon",t),o=(0,i.$)(".ActionsPanel-button__label",t);e?(n.innerHTML=Wd.html((0,r.default)("wall","favorite_28")),o.innerHTML=getLang("mobile_share_target_bookmark_active")):(n.innerHTML=Wd.html((0,r.default)("wall","favorite_outline_28")),o.innerHTML=getLang("mobile_share_target_bookmark"))};var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("Y6JH"))},"5c+v":function(e,t,n){"use strict";var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("jk6M")),r=n("UxAg"),o=n("MjTa");var a=window,s=a.removeClass,l=a.replaceClass,u=a.hasClass,c=a.checkEvent,d=a.ce,A=a.scrollTop,f=a.ge,p=a.geByClass1,_=a.append,h=a.addClass,m=a.addEvent,v=a.getCh,g=a.remove,y=a.removeEvent,w=a.getW,b=a.preventEvent,E=a.getCw,k=a.each,C=a.attr,D=a.val,S=a.onBodyResize,T=a.cancelEvent,M=a.scrollLeft,P=window.ajax,I=window.thover,x=window.nav,O=function(){return!window.al||!window.al.menu||window.isNewNavigation},L={enabled:function(e){return O()?(window.isNewNavigation||(s("_lm",window.bodyNode),s("_lms",window.bodyNode)),!1):(void 0!==e&&(e?l("_lms","_lm",window.bodyNode):(l("_lm","_lms",window.bodyNode),L.qsClose())),u("_lm",window.bodyNode))},opened:function(){return u("lm_opened",window.bodyNode)},toggle:function(e,t){return!!c(e)||(!!O()||(L.opened()?L.close(e,t):L.open(e,t),!1))},open:function(e){var t=window.zlayer;if(c(e))return!0;if(O())return!0;if(L.opened())return!1;if(t&&t.opened())return!1;if(!L.enabled())return x.go("/"),!1;L.clear_hover();var n=d("div",{id:"m_helper",onclick:L.close}),i=L._st||0,r=A(),o=f("l"),a=f("m"),u=f("vk_wrap"),g=(p("head_search",o),u.offsetWidth),y=a.offsetWidth,w=a.offsetHeight;if(!(g>=882)){_(n,"m"),L.fixed?(h("lm_opened",window.bodyNode),h("lm_anim_start",u),setTimeout(function(){l("lm_anim_start","lm_anim lm_anim_end",u)},5),setTimeout(function(){s("lm_anim_end",u),s("lm_anim",u)},200),m(a,"touchmove",L.blockScroll)):h("lm_opened",window.bodyNode);var b=o.offsetHeight;return g>=480?i=r<=b-v()?Math.min(r,b-v()):0:r<i?i=r:r-i>w-b&&w>b&&(i=r-w+b),L._st=Math.max(0,r-i),L._mw=y,L.fix_size(!1),L.fixed||A(i),P.post("/",{_ajax:1,act:"ping"}),window.lm_qsearch_counter?window.lm_qsearch_counter--:window.lm_qsearch_counter=-1,window.lm_qsearch_counter>0&&L.cancelSearch(),!1}},close:function(e){if(c(e))return!0;if(O())return!0;if(!L.opened())return!1;g("m_helper"),L.clear_hover();var t=A(),n=L._st+t,i=f("l"),r=f("m"),o=f("vk_wrap"),a=(p("head_search",i),f("vk_wrap").offsetWidth>=480);return L.fixed?(h("lm_anim_end",o),setTimeout(function(){l("lm_anim_end","lm_anim lm_anim_start",o)},5),setTimeout(function(){s("lm_anim_start",o),s("lm_anim",o),s("lm_opened",window.bodyNode)},200),y(r,"touchmove",L.blockScroll)):s("lm_opened",window.bodyNode),L._st=a?0:t,L.fix_size(!0),L.fixed||A(n),window.lm_qsearch_focused&&L.cancelSearch(),!1},fix_size:function(e){var t=f("l"),n=f("m"),i=f("mhead"),r=i&&i.offsetHeight||0,o=L._st||0;t&&n&&(e?n.style.minHeight="0":(o=o>r?o:0,n.style.minHeight=t.offsetHeight+o+"px"),!L.fixed||E()<320?e?n.style.marginTop="0":(t.style.minHeight=v()+"px",n.style.marginTop=-o+"px"):t.style.minHeight="0")},clear_hover:function(){I.clear()},refreshCounters:function(e){if(window.isNewNavigation&&(Tabbar.setCounter(Tabbar.TAB_ID_NOTIFICATION,e[2]),Tabbar.setCounter(Tabbar.TAB_ID_MESSAGES,e[3])),!e||!e.length)return!0;if(!window.al||!window.al.menu)return!0;if(e.length!=window.al.menu.length)return!1;var t=window.al,n=p("main_menu","l"),i=e[2];return"number"==typeof i&&isFinite(i)&&(Bell.setCount(i),window.store&&(store.notificationsCount=i)),k(e,function(e,i){if(void 0===i)return!0;var r=t.menu[e],o=p("mmi_"+r[0],n),a=p("mm_item",o),s=p("mmi_wrap",o),l=p("mm_counter",s);C(a,"data-href",!1),i?(r[3]&&C(a,"href",r[3]),l?D(l,i):_(d("em",{className:"mm_counter",innerHTML:i}),s)):(r[2]&&C(a,"href",r[2]),g(l)),P.prepare_click(a)}),!0},refresh:function(e){e=e||{},P.refreshLinks(e.fv_link,e.app_link),void 0!==e.pp&&!1!==e.pp&&D("lm_prof_panel",e.pp),void 0!==e.tn&&!1!==e.tn&&D("lm_top_notify",e.tn),void 0!==e.bn&&!1!==e.bn&&D("lm_bottom_notify",e.bn),e.lm&&D("l",e.lm),e.topbar||g("vk_topbar")},initEvents:function(){S(function(){var e=f("vk_wrap").offsetWidth,t=u("_hfixed",window.bodyNode);e>=882&&L.close(),L.fix_size(!L.opened(),t)})},init:function(){L.fixed=u("_hfixed",window.bodyNode),L.initEvents(),m(window,"orientationchange",function(){var e=f("vk_wrap").offsetWidth,t=L._st||0;e>=882&&t>44&&L.close()}),L.initTouch();var e=(0,r.$)(".leftMenu__content");e&&(0,o.setScrollView)(e,{topBanner:!!i.default.ipad&&void 0,overscrollY:!1,standalone:!0})},blockScroll:function(e){var t=f("vk_wrap");L.opened()&&w(t)<882&&b(e)},initTouch:function(){if(m(document,"keydown",function(e){var t=window.vk;e&&e.shiftKey&&(e.ctrlKey||e.metaKey)&&t.__debug&&77==e.keyCode&&(T(e),L.toggle())}),i.isTouch){var e=!1,t=!1,n=Math.min(604,E())/3;m(document,"touchstart",function(n){gpeByClass("_preventMenuOpen",n.target)||(p("mhb_home","mhead")||p("mailHat"))&&(M()>0||(e=t=r(n)))}),m(document,"touchmove touchend touchcancel",function(i){if(e){"touchmove"==i.type&&(t=r(i));var o=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}(e,t),a=function(e,t){var n=t.x-e.x,i=e.y-t.y;return Math.abs(180*Math.atan2(i,n)/Math.PI)}(e,t);("touchend"!=i.type&&"touchcancel"!=i.type||(e=!1,"touchcancel"!=i.type))&&(o<10||(L.opened()&&(a=180-a),a>30?e=!1:(b(i),o>n&&(e=!1,L.toggle()))))}})}function r(e){var t=e.touches,n=A();return{x:(t&&t[0]?t[0].pageX:e.pageX)||0,y:((t&&t[0]?t[0].pageY:e.pageY)||0)-n}}},qsOpened:!1,qsOpen:function(){L.qsOpened||(L.qs_st=A(),h("qs_opened","vk_wrap"),h("qs_opened",window.bodyNode),w("vk_wrap")<882&&A(0),L.qsOpened=!0)},qsClose:function(){L.qsOpened&&(s("qs_opened","vk_wrap"),s("qs_opened",window.bodyNode),w("vk_wrap")<882&&A(L.qs_st||0),L.qsOpened=!1)},closeSearch:function(){return!!O()||(window.lm_qsearch&&window.lm_qsearch.blur(),L.qsClose(),!1)},cancelSearch:function(){return!!O()||(window.lm_qsearch&&window.lm_qsearch.clear(),L.qsClose(),!1)},headerAction:function(e,t){return w("vk_wrap")>=882?x.go(e,t):L.toggle()}};window.menu=L},"5qQ6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("CKxJ"));var r=i.default;t.default=r,window.uMsg=i.default},"6ng+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStats=void 0;var i,r,o=n("XLUH"),a=n("BJj/");function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=(d(i={},"start",1),d(i,"stop",2),d(i,"volume",3),d(i,"rewind",4),d(i,"play_further",5),i),f=(d(r={},"default",1),d(r,"next_track",2),d(r,"prev_track",3),d(r,"auto",4),d(r,"interruption",5),d(r,"pause",6),d(r,"new",7),d(r,"close_app",8),d(r,"queue",9),d(r,"pause",10),r),p=300,_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerAdapter=t,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,this.debug=t.isDebug(),this.onVolume=(0,a.debounce)(this.onVolume.bind(this),p),this.playerAdapter.listenPlay(this.onPlay,this),this.playerAdapter.listenPause(this.onPause,this),this.playerAdapter.listenProgress(this.onProgress,this),this.playerAdapter.listenVolume(this.onVolume,this),this.playerAdapter.listenSeek(this.onSeek,this),this.playerAdapter.listenPlaylistChanged(this.onPlaylistChanged,this),this.playerAdapter.listenEnded(this.onEnded,this),this.playerAdapter.listenPlayNext(this.onPlayNext,this),this.playerAdapter.listenAdCompleted(this.onAdCompleted,this),this.onPageClose=this.onPageClose.bind(this),addEvent(window,"beforeunload",this.onPageClose)}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"canOperate",value:function(){return!this.playerAdapter.isPodcast()&&!this.playerAdapter.isAdPlaying()&&this.playerAdapter.useNewStats()}},{key:"getCurrentAudioParams",value:function(){var e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){var t=u(e.split("_"),2);return{ownerId:t[0],audioId:t[1],trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}},{key:"getEnvParams",value:function(){return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&vk.widget?String(cur.widgetReferrer||"").substring(0,20):""}}},{key:"getListenedTime",value:function(){return Math.round(this.playerAdapter.getListenedTime())||0}},{key:"getPlaySubtype",value:function(){if(this.playerAdapter.isAutoPlayed())return"auto";var e=this.playerAdapter.getSequence();if(e)return e>0?"next_track":"prev_track";var t=this.pausedAudioId,n=this.playerAdapter.getAudioId();return t&&n===t?"pause":"new"}},{key:"onPlay",value:function(){if(this.canOperate()){var e=this.playerAdapter.getAudioId(),t=this.currentAudioId===e,n=this.playerAdapter.getListenedTime();t||this.onTrackSwitch(this.currentAudioId,this.currentAudioTrackCode,this.currentPlaylistId,e),this.playedTime=vkNow(),this.currentAudioId=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode(),this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,n=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=n,this.sendCurrentAudioEvent({type:"start",subtype:this.getPlaySubtype(),position:this.currentPosition,listened:n}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1}}},{key:"onPause",value:function(){var e=this;this.canOperate()&&(this.pausedAudioId=this.playerAdapter.getAudioId(),this.collectListenedData(),this.sendListenedDataDelayed(1e3),setTimeout(function(){if(!(vkNow()-e.playedTime<150)){var t=e.playerAdapter.getPausedBy(e.playedTime);e.sendCurrentAudioEvent({type:"stop",subtype:t?"queue"===t?"queue":"interruption":"pause"})}}))}},{key:"onProgress",value:function(){this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&vkNow()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:"start",subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1)}},{key:"onVolume",value:function(){this.canOperate()&&this.sendCurrentAudioEvent({type:"volume",subtype:"default"})}},{key:"onSeek",value:function(){if(this.canOperate()){var e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent(l({type:"rewind",subtype:"default"},e))}}},{key:"onPlaylistChanged",value:function(){this.canOperate()&&(this.playlistChanged=!0)}},{key:"onEnded",value:function(){this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason="session_end"),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:"stop",subtype:"auto"}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)}},{key:"onPlayNext",value:function(e,t){if(this.canOperate()){var n=u(t.split("_"),2),i=n[0],r=n[1];this.sendAudioEvent({type:"play_further",subtype:"default",ownerId:i,audioId:r})}}},{key:"onAdCompleted",value:function(){this.playerAdapter.useNewStats()&&(this.adsCompleted=!0)}},{key:"onTrackSwitch",value:function(e,t,n){if(e){var i="new",r=this.playerAdapter.getSequence(),o=u(e.split("_"),2),a=o[0],s=o[1];this.playerAdapter.isAutoPlayed()?i="auto":r&&(i=r>0?"next_track":"prev_track"),this.sendCurrentAudioEvent({type:"stop",subtype:i,position:this.currentPosition,listened:this.currentListened,trackCode:t,playlistId:n,ownerId:a,audioId:s})}this.wasEnded=!0,this.collectListenedDataSwitch(),this.sendListenedData()}},{key:"onPageClose",value:function(){this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:"stop",subtype:"close_app"}),this.sendListenedData())}},{key:"collectListenedDataSwitch",value:function(){if(this.listenedData){if("session_end"===this.listenedData.end_stream_reason)return;var e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),n=this.playerAdapter.getSequence(),i=null;n&&!e?i=n>0?"next_btn":"prev":this.playlistChanged&&(i="playlist_change"),!i&&e&&(i="playlist_next"),this.listenedData.end_stream_reason=i||"new",t&&(this.listenedData.listened=t)}}},{key:"collectListenedData",value:function(){if(this.canOperate()){var e=this.playerAdapter.getAudioId(),t=this.playerAdapter.getAudioTrackCode(),n=this.getListenedTime();if(n){var i={audio_id:e,listened:n,context:this.playerAdapter.getContext()};window.cur&&vk.widget&&(i.ref=cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(i.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(i.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(i.shuffled=1)),t&&(i.track_code=t),this.playerAdapter.isRepeatCurrentAudio()?i.repeat="one":this.playerAdapter.isRepeatAll()&&(i.repeat="all"),this.playerAdapter.isAutoPlayed()&&(i.auto=1),this.playerAdapter.hasPrevAudio()&&(i.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(i.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(i.end_stream_reason="stop_btn"),i.state=document.hidden?"background":"app",this.listenedData=i,this.sendListenedDataDelayed(1e4)}}}},{key:"sendListenedData",value:function(){clearTimeout(this.sendTimeout);var e=this.listenedData;this.listenedData=null,e&&e.listened&&this.playerAdapter.sendListenedData(e)}},{key:"sendListenedDataDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout(function(){return e.sendListenedData()},t)}},{key:"serializeEvent",value:function(e){var t=[A[e.type],f[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(o.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(0),e.positionTo&&t.push(e.positionTo),t}},{key:"sendEvent",value:function(e){this.debug&&(console.log("audio stats event",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),statlogsValueEvent.apply(void 0,["audio_sts"].concat(s(this.serializeEvent(e))))}},{key:"sendCurrentAudioEvent",value:function(e){this.sendEvent(l({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId()},this.getEnvParams(),this.getCurrentAudioParams(),e))}},{key:"sendAudioEvent",value:function(e){this.sendEvent(l({},e,this.getEnvParams()))}},{key:"destroy",value:function(){this.playerAdapter.unListenAll(),removeEvent(window,"beforeunload",this.onPageClose),this.playerAdapter=null,this.listenedData=null,clearTimeout(this.sendTimeout)}}]),e}();t.AudioStats=_},"702z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerQueue=function(e,t){r[e]={pending:[],failed:[],items:{},onSend:t.onSend,onStopped:t.onStopped,maxFails:0|t.maxFails,loaded:!1,sendingItemId:null,backoffTimer:null},o[e]=a},t.queueAddItem=function(e,t,n){var i={id:t,data:n,fails:0},o=r[e];l(e,t),o.items[t]=i,o.pending.push(t),c(e),d(e)},t.queueRemoveItem=l,t.queueGetItem=function(e,t){return r[e].items[t]||null},t.queueGetSize=function(e){var t=r[e];if(!t)return 0;return t.pending.length},t.queueSignalSuccess=function(e){var t=r[e],n=t.sendingItemId;n&&(t.pending[0]===n&&t.pending.shift(),delete t.items[n]);o[e]=a,t.sendingItemId=null,c(e),d(e)},t.queueSignalFail=function(e){var t=r[e],n=t.sendingItemId;if(n&&t.pending[0]===n){var i=t.items[n];if(i&&(i.fails+=1,i.fails>=t.maxFails))return void u(e)}o[e]=a,t.sendingItemId=null,c(e)},t.queueSignalStop=u,t.queueGetItems=function(e){var t=r[e],n=t.pending,i=t.failed,o=t.items;return{pending:n,failed:i,items:o}},t.queueWhenReady=function(e){var t=r[e];if(t.loaded)return Promise.resolve();if(t.retrieving)return t.retrieving;return t.retrieving=function(e){return new Promise(function(t){var n=(0,i.lsGet)("q_".concat(e))||{items:{},pending:[],failed:[]};n.failed=n.failed.concat(n.pending).filter(function(e){return!!n.items[e]}),n.pending=[],t(n)})}(e).then(function(t){var n=t.pending,i=t.failed,o=t.items,a=r[e];a.retrieving=null,a.loaded=!0,a.pending=n,a.failed=i,a.items=o}),t.retrieving};var i=n("OcsD"),r={},o={},a="idle",s="sending";function l(e,t){var n=r[e];delete n.items[t];var i=n.pending.indexOf(t),o=n.failed.indexOf(t);-1!==i&&n.pending.splice(i,1),-1!==o&&n.failed.splice(o,1),d(e)}function u(e){var t=r[e];t.failed=t.failed.concat(t.pending),t.pending=[],o[e]=a,t.sendingItemId=null,t.onStopped(),d(e)}function c(e,t){if(!1!==navigator.onLine){var n=r[e];if(o[e]!==s&&n.pending.length&&!n.backoffTimer){var i=n.pending[0],a=n.items[i];if(!a.fails||t)o[e]=s,n.sendingItemId=i,n.onSend(a.id,a.data);else{var l=Math.pow(2,Math.max(a.fails-2,0));n.backoffTimer=setTimeout(function(){n.backoffTimer=null,c(e,!0)},1e3*l)}}}}function d(e){var t=r[e],n=t.pending,o=t.failed,a=t.items;(0,i.lsSet)("q_".concat(e),{pending:n,failed:o,items:a})}window.addEventListener("online",function(){Object.keys(r).forEach(function(e){c(e)})})},"75Qd":function(e,t,n){"use strict";n("14pr");var i=n("OcsD");n("CQvH"),n("a0wW"),n("z9sQ"),n("+cqQ"),n("TYsd");var r=n("BZzM"),o=l(n("eGQV")),a=function(e){return e&&e.__esModule?e:{default:e}}(n("saGk"));n("uQjJ"),n("gqEf");var s=l(n("jk6M"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n("wcVR"),n("kr3z"),n("+jUy"),n("GMrv"),n("+YbT"),n("T24x"),n("wMVj"),n("gUYQ"),n("AeId"),n("Gzds"),n("kYGI"),n("5c+v"),n("tsGB"),n("mOHq"),n("nlPs"),n("gNTM"),n("eoxF"),n("ohv3"),n("giB6"),n("vZUn"),n("9EK6"),n("pBF5"),n("i0zL"),n("ldCb"),n("A+9M"),n("TORN"),n("rulp"),n("K0hv"),n("42eR"),n("wyHI"),n("o3gn"),n("3Xw1"),n("G0UO"),n("Mc5h"),n("BoyB"),n("O5lf"),n("9y81"),n("AXyT"),n("gy8s"),n("KMpi"),n("r/ag"),n("AgBx"),n("TuGt"),n("V1Rh"),n("29dZ"),n("p5n7"),n("7tQU"),n("3+oY"),n("Q8gl"),n("DG1x"),n("E7VD"),n("9Cbe"),n("lcib"),n("RikE"),n("1Qy5"),n("V4qE"),n("HON1"),n("QQoL"),n("rKUZ"),n("wTbK"),n("sXAB"),n("3Gnz"),n("nj7l"),n("Qg0H"),n("1IPy"),n("0Ezr"),n("OcB7"),n("XlF1"),n("Bqje"),n("gTod"),n("yEBz"),n("r2Pq"),n("9HII"),n("8t6d"),n("LBNP"),n("HDU4"),n("blmJ"),n("i8t0"),n("RVJ9"),n("B9v3"),n("L1lF"),n("GVjC"),n("GDYn"),n("bRFj"),n("eyw1"),n("iE+E"),n("yuVR"),n("vys4"),n("QcsT"),n("U34x"),n("P+Xc"),n("l51W"),n("BLcx"),n("nXjO"),n("onYX"),n("BQMu"),n("zHNa"),n("zouF"),n("sVNd"),n("OGWK"),n("ciqL"),n("zEUu"),n("tqja"),n("yZoT"),n("sZWN"),n("VLMK"),n("KWgi"),n("iN5q"),n("M9zQ"),n("Ny8a"),n("yXty"),n("hxrZ"),n("jLRy"),n("98L6"),n("gunf"),n("m9bs"),n("MzAf"),n("Dh0N"),n("fYoA"),n("h27l"),n("p/K1"),n("03kU"),n("4qiT"),n("Tjn9"),n("tlL+"),n("w1QQ"),n("DVnk"),n("cLcH"),n("uo4j"),n("Fhlr"),n("RHkR"),n("eFmH"),n("aXSb"),n("WeE2"),n("WCKs"),n("yHBz"),n("XLP4"),n("Ivtq"),n("NBPr"),n("bYEY"),n("MUoB"),n("OnSo"),n("fP8X"),n("LTt1"),n("mXGF"),n("is+u"),n("jXv2"),n("pOpT"),n("T9Df"),n("GLI1"),n("tqgD"),n("HpMb"),n("AkSq"),o.init(),window.SpecialEvent=a.default;var c=window,d=c.onDOMReady;c.clog;(0,i.addEvent)(window,"scroll touchmove",function(){(0,i.onBodyScroll)(!0)},{passive:!0}),window.cur={destroy:[]},window.lang={};var A=window,f=A.thover,p=A.ajax;function _(){if((0,i.lsGet)("custom_opts"))return(0,i.addClass)("_copts","vk_wrap");var e=(0,i.ce)("div",{innerHTML:'<input id="copts_test_radio" type="radio" checked="checked"><div id="copts_test_label"></div>'});(0,i.append)(e,"vk_utils");var t=(0,i.ge)("copts_test_label");t&&Math.abs(t.offsetWidth-5)<1&&((0,i.addClass)("_copts","vk_wrap"),(0,i.lsSet)("custom_opts",1)),(0,i.remove)(e)}(0,i.addEvent)(document,"touchmove touchcancel",f.cancel),(0,i.addEvent)(document,"touchend",f.end);var h=window.page;p._init(),p.enabled=!!p._req,p.enabled&&(d(function(){(0,i.remove)("app_go_frame"),p.prepare_nav(),p.prepare_click(),g&&g.init(),y&&y.initAudio(),(0,i.addClass)("_js","vk_wrap")}),h.clear()),d(r.resizePosters),(0,i.addEvent)(window,"resize",r.resizePosters),(0,i.addEvent)(document,"touchstart",function(e){var t=(0,i.checkTouchHover)(e.target);f.clear(),t&&f.start.call(t,e)}),(0,i.addEvent)(document,"click",function(e){var t=window.al;if(window.al&&t.ver){var n=(0,i.gpeByClass)("al_after",e.target);if(n){var r=(0,i.attr)(n,"data-target"),o=!!r&&(0,i.geByClass1)(r,n);if(o&&!v.go_after(o,e)||!v.go_after(n,e))return}var a=(0,i.checkNav)(e.target,{allow_post_away:!0});if(a&&(v.go(a,e)||(0,i.cancelEvent)(e)),"bookmarks"===cur.module){var s=e&&e.target&&(e.target.closest(".BookmarksItem_link")||e.target.closest(".BookmarkSlider__item")||e.target.closest(".OwnerRow"));if(!s)return;var l=u(s.getAttribute("id").match(/^(link|page)(-?\d+)_(-?\d+)?$/)||[],4),c=l[0],d=l[1],A=l[2],f=l[3];if(!(c&&d&&A&&f))return;var p=!1;switch(d){case"link":p=e.target.closest('a[target="_blank"]');break;case"page":p=e.target.closest(".OwnerRow__content")||e.target.closest(".OwnerColumn")}if(!p)return;statlogsValueEvent("bookmarks_product_analytics",{item_type:d,item_owner_id:intval(A),item_id:intval(f),time:vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)})}}}),(0,i.addEvent)(document,"submit",function(e){var t=e.target;(0,i.hasClass)("vk_js_yes",geByTag1("html"))&&!(0,i.hasClass)("opera_mini_yes",geByTag1("body"))&&(0,i.hasClass)("qsearch",t)&&(0,i.gpeByClass)("audioPage",t)&&(geBySel1('[type="submit"]',t).click(),(0,i.cancelEvent)(e))}),(0,i.addEvent)(document,s.isTouch?"touchstart":"mousedown",function(e){w.closeByTap(e)}),d(_),(0,i.sgFix)();var m=window,v=m.nav,g=m.menu,y=m.audioplayer,w=m.tooltip,b=m.zlayer;d(function(){var e=window.vk;e&&!e.id&&(0,i.lsCheck)()&&localStorage.clear()}),window.optionsTest=_,b.isReady=!0,(0,i.setDocumentDomain)();try{n("3KRu")}catch(e){console.error("Catched error: ",e)}window.isNewMail&&(n("sc7o"),n("s0aB"),n("/Id8"),n("DkIl"),n("CkGd"),n("iS9e"),n("fWqt"),n("QBkA"),n("rKp0"),n("u33z"),n("5qQ6"),n("/Rzu"),n("B5sG"),n("M2vk"),n("HPEO"),n("irqS"))},"77iS":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("Xeoq"));t.default=i},"7V3f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiSymbolToByteHex=function(e){var t=e.split("").map(function(e){return e.charCodeAt(0).toString(16)}).filter(function(e){return"fe0f"!==e.toLowerCase()}).map(function(e){return String.fromCodePoint(parseInt(e,16))}).join("");return encodeURIComponent(t).replace(/%/gi,"").toLowerCase()},t.emojiByteHexToSymbol=function(e){var t=e.length%2==1,n=t?e.slice(0,1):"",i=t?e.slice(1):e,r="";try{r=decodeURIComponent("%"+function(e){return e.split("").reduce(function(e,t,n){var i=(n+1)%2==0;return e+t+(i?" ":"")},"").trim().split(/\s+/)}(i).join("%"))}catch(e){}return n+r},t.emojiRemoveSkinToneModifiers=function(e){return e.replace((0,i.emojiRegex)(),r)};var i=n("AgYL");function r(e){return e.replace(i.skinToneModifierRegex,"")}},"7jQU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"uTyping_getPeerTyping",{enumerable:!0,get:function(){return i.uTyping_getPeerTyping}}),Object.defineProperty(t,"uTyping_getNames",{enumerable:!0,get:function(){return i.uTyping_getNames}});var i=n("USu8")},"7lzo":function(e,t,n){"use strict";(function(e){return e&&e.__esModule?e:{default:e}})(n("9CLW")).default.onPostMessage(function(e){"waiterStart"!==e&&"3dsPage"!==e||document.activeElement&&document.activeElement.blur()})},"7pu1":function(e,t,n){"use strict";window.requestAnimationFrame||(window.requestAnimationFrame=function(e){setTimeout(e)})},"7qNY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("DiaP")),r=o(n("29dZ"));function o(e){return e&&e.__esModule?e:{default:e}}Object.assign(i.default,{accept:function(e,t,n){r.default.setLoading(t,!0),ajaxRequest("/mail",{act:"mrs_accept",peer_id:n,hash:store.mail.hash.mrs},function(e){e.error&&r.default.setLoading(t,!1)},function(){r.default.setLoading(t,!1)})},reject:function(e,t,n){r.default.setLoading(t,!0),ajaxRequest("/mail",{act:"mrs_reject",peer_id:n,hash:store.mail.hash.mrs},function(e){e.error&&r.default.setLoading(t,!1)},function(){r.default.setLoading(t,!1)})}});var a=i.default;t.default=a},"7tQU":function(e,t,n){"use strict";var i=n("UxAg"),r=need("scrollToEl");need("page").onChange(a);var o={anchorByHash:function(e){return".Anchor#".concat(e)}};function a(e){if(e){var t=e.split("#")[1],n=t&&!~t.indexOf("=")&&(0,i.$)(o.anchorByHash(t));n&&r(n)}}},"82vK":function(e,t,n){"use strict";var i=n("UxAg"),r=l(n("+cqQ")),o=(n("jk6M"),l(n("AXyT"))),a=l(n("rKUZ")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("NJSj"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){e.target.closest("a.convo__avatar")||(e.stopPropagation(),e.preventDefault(),s.default.onTap(t))}Object.assign(s.default,{onTap:(0,r.default)("url"),setOnline:function(e,t){(0,i.$$)(".convo_id_".concat(e," .convo__online")).forEach(function(e){e.outerHTML=(0,s.Convo__online)(t)})},setLastMsg:function(e,t,n){var r=n.dateShort,o=n.pending,a=n.failed;(0,i.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e){e.$(".convo__text").innerHTML=t,e.$(".convo__status").innerHTML=(0,s.Convo__rightStatus)({pending:o,failed:a}),o||a?(e.$(".convo__date").innerText="",e.$(".convo__unreadBox").hidden=!0):(e.$(".convo__date").innerText=r,e.$(".convo__unreadBox").hidden=!1)})},setTyping:function(e,t){(0,i.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e){var n=e.$(".convo__typing"),i=t.typing,r=t.typingCount;if(r&&(!0===i||Array.isArray(i))){var o=n.$(".typing"),s=o&&q.parseClass("typing",o.className);o&&s.animation===t.animation?a.default.setTyping(o,t):(e.classList.add("convo_typing"),n.innerHTML=(0,a.default)(t))}else n.innerHTML="",e.classList.remove("convo_typing")})},setUnreadCount:function(e,t){(0,i.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e){var n=e.$(".Oval");e.classList.toggle("convo_unread",t>0),e.classList.toggle("convo_unreadOut",t<0),o.default.setValue(n,t)})},setImportant:function(e,t){(0,i.$$)(".convo_id_".concat(e)).forEach(function(e){e.classList.toggle("convo_important",t)})}}),s.default._onClick=u},"8oxB":function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,u=[],c=!1,d=-1;function A(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var e=s(A);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"8t6d":function(e,t,n){"use strict";var i=_(n("TYsd")),r=_(n("+cqQ")),o=_(n("WDxS")),a=_(n("jk6M")),s=n("fntf"),l=_(n("IXdz")),u=_(n("W12k")),c=n("LpA2"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("t7Ww")),A=_(n("r/ag")),f=_(n("29dZ")),p=n("OcsD");function _(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=window,g=v.page,y=v.audio,w=v.zlayer,b={init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=extend({replace:!1,reply:!1,replyTo:!1,restore:!1,forceAuthorIndex:!0,isOpenNarrativeFromFeed:!1},n);var i=m(this._parseList(e).split("/"),3),r=i[0],o=i[1],a=i[2],s=m(r.split("_"),1)[0];n&&n.narrativeId&&(s=n.narrativeId.toString()),this.initRaw=e,this.storyOwner=(0,p.intval)(s),this.storyRaw=r,this.storyExtra=a,this.storyList=o,this.extra=this.parseExtra(this.storyExtra),this.needAudioRestore=y.playing(),this.Views={},this.popoutOpen=!1,this.slideTimer=null,this.createLayer(),this._initStore(),this.detectAutoplay().then(function(){t.isRestored?t._init():t._checkPreloadedList()?(t._initPreloadedList(),t._init()):t._requestList().then(function(e){var n=e.items,i=e.list;n&&(t.store.authors=n,t.store.listLoaded=!0,t.store.list=i,t.store.inited=!0,t._init())},function(){})})},parseExtra:function(e){var t={},n=String(e).split(";");for(var i in n)if(n.hasOwnProperty(i)){var r=m(n[i].split(":"),2),o=r[0],a=r[1];o&&a&&(t[o]=a)}return t},_checkPreloadedList:function(){return!!(window.store&&window.store.storiesLists&&window.store.storiesLists[this.storyList])},_initPreloadedList:function(){var e=window.store.storiesLists[this.storyList];e&&(this.store.authors=e,this.store.listLoaded=!0,this.store.list=this.storyList,this.store.inited=!0)},pushPreloadedList:function(e){var t=(0,p.parseJSON)(e);window.store||(window.store={}),window.store.storiesLists||(window.store.storiesLists={}),extend(window.store.storiesLists,t),window.store.stories||(window.store.stories={}),Object.keys(t).forEach(function(e){window.store&&window.store.storiesLayers&&window.store.storiesLayers.includes(e)||delete window.store.stories[e]})},_createMetaStory:function(){var e=this;(0,p.each)(this.store.authors,function(t,n){var i=n.items[n.items.length-1];i.isNarrativeMetaStory||n.items.push({type:"photo",raw_id:i.raw_id,preview:i.preview,preview_url:i.preview_url,narrative:i.narrative,photo_url:i.photo_url,isNarrativeMetaStory:!0,isOpenNarrativeFromFeed:e.params.isOpenNarrativeFromFeed})})},_init:function(){var e=this;this.createAuthors(),this.storyList.match(/narrative-?\d+_\d+/)&&this._createMetaStory();var t=this.getFirstStoryIndex();this.setCurrentStory(t);var n=this.getCurrentStory();this.params.restore||this.setHistory(n.raw_id,{nav_init:!0,replace:this.params.replace}),this.sliderEl=ge("StoriesSlider"),this.slider=(0,o.default)(this.sliderEl,{speed:300,startSlide:this.getCurrentAuthorIndex(),onSlideChange:function(t){t=e.slider&&(0,p.intval)(e.slider.getCurrentPos());var n=e.getCurrentAuthorIndex();e.setAllAuthorStoriesReaded(n),clearTimeout(e.slideTimer),void 0!==t&&t!==n&&(!1===e.isTap&&(t>n?e.sendAnalyticsEvent("go_to_next_author"):e.sendAnalyticsEvent("go_to_previous_author")),e.setCurrentAuthor(t),e.slideTimer=setTimeout(function(){e.renderStory()},300)),delete e.isTap},onSetup:function(){(0,p.addClass)(e.layer,"Stories_inited"),e.renderStory()}}),this.Authors&&1===this.Authors.length&&((0,p.addClass)(this.layer,"Stories_inited"),this.renderStory()),this.store.showViews&&this.showViews(n.raw_id,!0),this._initViewerSource(),this._sendOpeningEvents()},_initStore:function(){window.store||(window.store={stories:{},storiesLayers:[]}),window.store.stories||(window.store.stories={}),window.store.storiesLayers||(window.store.storiesLayers=[]),window.store.stories[this.storyList]&&window.store.stories[this.storyList].inited?(this.store=window.store.stories[this.storyList],this.isRestored=!0):(this.store={authors:[],listLoaded:!1,readedStories:{},_requests:[],viewers:{},questions:{},viewersState:{},replies:{},showMenu:!1,storyList:this.storyList,initRaw:this.initRaw,storyIndex:0,authorIndex:0,isReply:this.params.reply,replyTo:this.params.replyTo,inited:!1},window.store.stories[this.storyList]=this.store,this.isRestored=!1),this.params.restore||window.store.storiesLayers.push(this.store.storyList)},_initViewerSource:function(){var e=this._getSource();switch(e){case"reply":this.viewerSource="replies_list";break;case"feed":this.viewerSource=cur.module;break;default:this.viewerSource=e}},_sendOpeningEvents:function(){var e=this._getSource();if(e){var t;switch(e){case"narrative_story":t="narrative_open_stories";break;case"narrative_snippet":case"narrative_link":t="narrative_open";break;case"narrative_recommendations":t="narrative_other"}if(t&&this._sendNavigationStatEvents(t),"narrative_fave"===e){var n=(this.getCurrentStory()||{}).narrative||{},i=n.owner_id,r=n.id;if(!i||!r)return;statlogsValueEvent("bookmarks_product_analytics",{item_type:"narrative",item_owner_id:(0,p.intval)(i),item_id:(0,p.intval)(r),time:vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)})}}},_abortRequests:function(){isArray(this.store._requests)&&(0,p.each)(this.store._requests,function(e,t){t&&t.readyState<4&&t.abort()}),this.store._requests=[]},_saveRequest:function(e){this.store._requests.push(e)},getStore:function(){return this.store},setAllAuthorStoriesReaded:function(e){var t=this;this.store.authors[e].items.forEach(function(e){if(e.unread){var n=e.raw_id;e.track_code&&(n+="_"+e.track_code),t.store.readedStories[n]=!0}})},createAuthors:function(){var e=this,t="";this.Authors=[];var n=this.getCurrentAuthorIndex();this.isRestored&&!this.params.forceAuthorIndex||(n=this.getFirstAuthorIndex());var i=this.store.authors[n],r=i.items[i.items.length-1].unread;if(this.extra)switch(this.extra.context){case"new":r=!0;break;case"all":r=!1}(0,p.each)(this.store.authors,function(n,i){var o=i.items;if(!n||!r||o[o.length-1].unread){var a=new s.StoryAuthor(n,i);e.Authors.push(a),t+=a.renderEmpty()}}),(0,p.val)((0,p.geByClass1)("Stories__authors",this.layer),t),this.authors=Array.from(geByClass("StoryAuthor",this.layer)),(0,p.each)(this.Authors,function(e,t){t.updateHeader()}),this.setCurrentAuthor(n)},getFirstStoryIndex:function(){var e=this,t=this.store.authors[this.getCurrentAuthorIndex()];if(this._hasContext("all"))return 0;if(!this._hasContext("new")){var n=t.items.findIndex(function(t){return t.raw_id===e.storyRaw});if(-1!==n)return n}return this.getCurrentStoryIndex()},getFirstAuthorIndex:function(){var e=this,t=this.store.authors.findIndex(function(t){return t.author.index===e.storyOwner});return-1!==t?t:0},getCurrentAuthorIndex:function(){return this.store.authorIndex},getCurrentStoryIndex:function(){return this.store.authors[this.getCurrentAuthorIndex()].index},getCurrentStory:function(){return this.store.authors[this.getCurrentAuthorIndex()].items[this.getCurrentStoryIndex()]},setCurrentAuthor:function(e){this.store.authorPrevIndex=this.store.authorIndex,this.store.authorIndex=e,this.updateCurrentAuthor()},setCurrentStory:function(e){this.store.authors[this.getCurrentAuthorIndex()].index=e},drawSiblingPreview:function(){for(var e=this.getCurrentAuthorIndex(),t=-2;t<=2;t++){var n=e+t;this.authors[n]&&n!==e&&this.drawPreview(this.authors[n])}},drawPreview:function(e){setStyle(e,"background-image","url(".concat(attr(e,"data-src"),")"))},updateCurrentAuthor:function(){var e=this.authors[this.store.authorIndex];(0,p.each)(this.authors,function(e,t){(0,p.removeClass)(t,"StoryAuthor_current")}),(0,p.addClass)(e,"StoryAuthor_current")},getSizes:function(){var e,t,n=window.innerHeight,i=window.innerWidth;return i<540?(e=i,t=n,w.open(),w.onResize=this.onResize.bind(this)):(e=Math.floor(Math.min(540,Math.max(320,.563*n))),t=Math.floor(1.78*e),(0,p.addClass)(document.body,"vk__story_open")),[e,t]},createLayer:function(){window.innerWidth<540?(w.open(),w.onResize=this.onResize.bind(this)):(0,p.addClass)(document.body,"vk__story_open");var e=m(this.getSizes(),2),t=e[0],n=e[1];this.storyW=t;var r=i.default.html({id:"StoriesView",class:"Stories__layer _preventMenuOpen",style:"max-width: ".concat(t,"px; max-height: ").concat(n,"px"),inner:[{class:"Stories__loading",inner:{class:"Stories__loadingInner"}},{id:"StoriesSlider",class:"Stories__authors peppermint peppermint-inactive",ontouchmove:"Stories.onTouchMove(event);",inner:""},{class:"Stories__layerClose",inner:{class:"Story__icon Story__icon_close"},onclick:"return Stories.clickClose();"},{class:"Stories__popout"},{class:"Stories__flash",onclick:"Stories.hideFlashPopup()",inner:{class:"Stories__flashText"}},{class:"Stories__swipeText Stories__swipeText_top"}]});this.layer=(0,p.append)((0,p.ce)("div",{className:"Stories",innerHTML:r}),document.body),attr(this.layer,"ontouchmove","event.preventDefault();"),this.loader=(0,p.geByClass1)("Stories__loading",this.layer),this.popout=(0,p.geByClass1)("Stories__popout",this.layer),this.swipeTextTop=(0,p.geByClass1)("Stories__swipeText_top",this.layer)},onResize:function(){var e=ge("StoriesView"),t=m(this.getSizes(),2),n=t[0],i=t[1];attr(e,"style","max-width: ".concat(n,"px; max-height: ").concat(i,"px")),this.storyW=n,this.authors.forEach(function(e){setStyle(e,"width","".concat(n,"px"))}),this.Authors&&this.Authors.length>1&&this.slider&&this.slider.recalcWidth()},getWidth:function(){return this.storyW},renderStory:function(){var e=this.store.authorPrevIndex,t=this.getCurrentAuthorIndex(),n=this.authors[t],i=this.Authors[t];if(i.update(),!isNaN(e)&&e!==t){var r=this.Authors[e],o=this.authors[e];r.update();var a=r.renderEmpty(),s=ceFromString(a);replace(s,o)}var l=ceFromString(i.render());replace(l,n),this.authors=Array.from(geByClass("StoryAuthor",this.layer)),this.updateCurrentAuthor(),i.updateHeader(),this.onRender(),this.drawSiblingPreview(),"open"===this.extra.replies&&this.showViews(this.getCurrentStory().raw_id)},getCurrentAuthor:function(){var e=this.getCurrentAuthorIndex();return(this.Authors||[])[e]},getCurrentAuthorEl:function(){return this.getCurrentAuthor().authorElem},getAuthorElems:function(){return this.authors},prevStory:function(){var e=this;this.stopStory(),this.store.isStopped=!1,requestAnimationFrame(function(){var t=e.getCurrentStoryIndex(),n=e.getCurrentAuthorIndex();if(t-1<0)if(n-1<0)e.setCurrentStory(0),e.renderStory();else{e.slider.slideTo(n-1);var i=e.store.authors[n-1].items.length-1;e.setCurrentStory(i)}else e.setCurrentStory(t-1),e.renderStory()})},nextStory:function(e){var t=this;this.stopStory(),this.store.isStopped=!1,requestAnimationFrame(function(){var n=t.store.authors[t.getCurrentAuthorIndex()],i=t.getCurrentStoryIndex(),r=t.getCurrentAuthorIndex(),o=n.items.length,a=t.Authors.length;o-1<=i?a-1<=r?requestAnimationFrame(function(){t.sendAnalyticsEvent("close_auto_by_time"),t.close()}):(e&&t.sendAnalyticsEvent("go_to_next_story_auto_by_time"),t.slider.slideTo(r+1),t.setCurrentStory(0)):(e&&t.sendAnalyticsEvent("go_to_next_story_auto_by_time"),t.setCurrentStory(i+1),t.renderStory())})},stopStory:function(){this.store.isStopped=!0,this.pauseStory()},pauseStory:function(e){var t=this.getCurrentAuthor();if(t){t.getCurrentStory();var n=t.getCountDown();e&&(0,p.addClass)(this.layer,"Stories_paused"),n&&n.pause()}},playStory:function(e){this.store.isStopped=!1;var t=this.getCurrentAuthor();if(t){t.getCurrentStory();var n=t.getCountDown();(0,p.removeClass)(this.layer,"Stories_paused"),n&&n.start()}},pauseAudio:function(){var e=window.audio;e&&e.pause()},restoreAudio:function(){var e=window.audio;this.needAudioRestore&&e&&e.play()},showMenu:function(){this.store.showMenu=!0,this._hideTooltip(),this.stopStory(),(0,p.addClass)(this.layer,"Stories_menuOpened")},hideMenu:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.store.showMenu=!1,(0,p.removeClass)(this.layer,"Stories_menuOpened"),e&&this.playStory()},showLoading:function(){var e=this;this.loader&&(clearTimeout(this.loaderTimer),this.loaderTimer=setTimeout(function(){show(e.loader)},100))},hideLoading:function(){this.loader&&(clearTimeout(this.loaderTimer),hide(this.loader))},onRepliesScroll:function(e,t){this.Views[t]&&(this.store.viewersState[t].repliesScrollLeft=e.target.scrollLeft)},showViews:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hideMenu(),this.store.showViews=!0,this.stopStory(),this._hideTooltip(),this.Views[e]){this.store.viewersState[e];var i=this.Views[e].render();this.popoutOpen=!0,(0,p.val)(this.popout,i);var r=(0,p.geByClass1)("Views__repliesBody",this.popout);r&&(r.scrollLeft=0),n||this.sendAnalyticsEvent("open_replies_list")}else{var o=this.store.viewersState[e],a=this.store.viewers[e];if(o&&a)return void this.createViews(e,n);this.showLoading(),this._requestFeedback(e).then(function(){t.markQuestionsAsViewed(),t.createViews(e,n),t.hideLoading()})}},markQuestionsAsViewed:function(){(this.getCurrentStory()||{}).isNewQuestions=!1,(0,p.removeClass)((0,p.geByClass1)("Story__stats"),"Story__stats_new_questions")},createViews:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.store.viewersState[e],i=new l.default(e),r=i.render();this.popoutOpen=!0,(0,p.val)(this.popout,r),this.Views[e]=i;var o=(0,p.geByClass1)("Views__repliesBody",this.popout);o&&(o.scrollLeft=n.repliesScrollLeft),t||this.sendAnalyticsEvent("open_replies_list")},hideViews:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.playStory(),this.store.showViews=!1,this.popoutOpen=!1,(0,p.val)(this.popout,"")},loadViews:function(e){var t=this,n=this.store.viewersState[e],i=n.loading,r=n.nextFrom;!i&&r&&(n.loading=!0,this.showLoading(),this._requestFeedback(e,r).then(function(){var i=new l.default(e),r=i.render();t.popoutOpen=!0;var o=(0,p.geByClass1)("Views__body",t.layer).scrollTop;(0,p.val)(t.popout,r),(0,p.geByClass1)("Views__body",t.layer).scrollTop=o,t.Views[e]=i,t.hideLoading(),n.loading=!1}))},showComment:function(){var e=this,t=this.authors[this.store.authorIndex],n=(0,p.geByClass1)("Story__commentTextarea",t);this.store.showComment=!0,this.stopStory(),(0,p.addClass)(this.layer,"Stories_commentOpened"),this._hideTooltip(),requestAnimationFrame(function(){e.sendAnalyticsEvent("comment_tap"),n&&n.focus()})},hideComment:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.store.showMenu=!1,(0,p.removeClass)(this.layer,"Stories_commentOpened"),e&&this.playStory()},onInputComment:function(e){var t=this.authors[this.store.authorIndex],n=(0,p.geByClass1)("Story__commentSend",t),i=(0,p.val)(e);(0,p.toggleClass)("Story__commentSend_active",n,!!i)},sendComment:function(){var e=this.authors[this.store.authorIndex],t=(0,p.geByClass1)("Story__commentTextarea",e),n=(0,p.geByClass1)("Story__commentSend",e),i=(0,p.val)(t);if(hasClass("Story__commentSend_active",n)){(0,p.val)(t,""),(0,p.removeClass)(n,"Story__commentSend_active");var r,o=this.getCurrentAuthorIndex(),a=this.getCurrentStory(),s=a.raw_id,l=a.narrative,u=this.store.authors[o],c=u.send_hash,d=u.author.id;r=l?"narrative".concat(l.raw_id):"story".concat(s),this._sendMessage(c,r,i,d),this.hideComment()}},showFlashPopup:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.stopStory();var i=(0,p.geByClass1)("Stories__flash",this.layer);(0,p.val)((0,p.geByClass1)("Stories__flashText",i),e),setTimeout(function(){(0,p.addClass)(i,"Stories__flash_show")}),clearTimeout(this.flashTimer),clearTimeout(this.flashHideTimer),this.flashTimer=setTimeout(function(){(0,p.removeClass)(i,"Stories__flash_show"),t.flashHideTimer=setTimeout(function(){t.hideFlashPopup(n)},1500)},1500)},hideFlashPopup:function(e){e&&this.playStory(),clearTimeout(this.flashTimer),clearTimeout(this.flashHideTimer);var t=(0,p.geByClass1)("Stories__flash",this.layer);(0,p.removeClass)(t,"Stories__flash_show")},removeCurrentStory:function(){var e=this,t=window.lang,n=this.getCurrentAuthor();if(n){var i=n.getCurrentStory(),r=i.narrative?t.mobile_stories_delete_narrative:t.mobile_stories_delete_story;if(confirm(r.replace(/(<([^>]+)>)/gi,"\n"))){var o=n.data.remove_hash,a=i.can_remove,s=i.raw_id;if(a){this.pauseStory();var l=function(){e._requestFeedBlock(),i.isNarrativeSlide&&e.close(),0===e.getCurrentStoryIndex()?(e.close({closeAll:!1}),location.reload()):(e.store.authors[e.getCurrentAuthorIndex()].items.splice(e.getCurrentStoryIndex(),1),e.hideMenu(),e.prevStory())};if(i.narrative){var u=i.narrative,c=u.owner_id,d=u.id,A="".concat(c,"_").concat(d);this._requestRemoveNarrative(A,o).then(function(){l()},function(){})}else this._requestRemoveStory(s,o).then(function(){e.sendAnalyticsEvent("delete"),l()},function(){})}}}},onScrollViews:function(e,t){var n=this.store.viewersState[t],i=n.loading,r=n.nextFrom;if(!i&&r){e.scrollHeight-e.offsetHeight-400<=e.scrollTop&&this.loadViews(t)}},unMute:function(e,t){var n=this.getCurrentAuthor().story.getVideo();(0,p.cancelEvent)(t),n&&n.muted&&(n.muted=!1,(0,p.removeClass)(gpeByClass(s.VIDEO_MUTED_CLASS,e),s.VIDEO_MUTED_CLASS))},onTouchStart:function(e){var t=this,n=this.getCurrentAuthor().story;if(n&&"video"===n.getType()){var i=n.getVideo();if(i&&i.paused)return void(this.preventedTap=!0)}this.pauseStory(!0),this.isTap=!0,"touchstart"===e.type?(this.tapStartX=e.changedTouches[0].clientX,this.tapStartY=e.changedTouches[0].clientY):(this.tapStartX=e.clientX,this.tapStartY=e.clientY),clearTimeout(this.isTapTimer),this.isYmove=null,(0,p.removeClass)(this.layer,"Stories_touchMove"),this.isTapTimer=setTimeout(function(){t.isTap=!1,t.sendAnalyticsEvent("pause_long_tap")},200)},onTouchMove:function(e){var t=0,n=0;"touchmove"===e.type&&(t=this.tapStartX-e.changedTouches[0].clientX,n=this.tapStartY-e.changedTouches[0].clientY),null===this.isYmove&&(this.isYmove=Math.abs(t)<Math.abs(n),this.isYmove&&(0,p.addClass)(this.layer,"Stories_touchMove")),this.isYmove?this.onVerticalSwipe(-n/1.5):this.onVerticalSwipe(0)},onTouchEnd:function(e,t){clearTimeout(this.isTapTimer);var n=this.getCurrentAuthor().story;this.isTap||this.sendAnalyticsEvent("resume_release");var i,r;if("touchend"===e.type?(i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(i=e.clientX,r=e.clientY),(Math.abs(this.tapStartX-i)>20||Math.abs(this.tapStartY-r)>20)&&(this.isTap=!1),(0,p.removeClass)(this.layer,"Stories_touchMove"),setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform((0,p.geByClass1)("Story__moreLink"),1,[0,0]),this.needGoToLink){var o=this.getCurrentAuthor().story;if(this.needGoToLink=!1,o&&o.hasLink())return void this.openCustomButton(e)}if(this.needClose)return this.sendAnalyticsEvent("close_swipe_down"),void this.close();if(this.tooltip)this._hideTooltip();else{if(this.isTap){if(hasClass(e.target,"Story__sticker"))return(0,p.removeClass)(this.layer,"Stories_paused"),void((0,p.domData)(e.target,"question")?this.askQuestionBox(e):this.tooltip?this._hideTooltip():this._showTooltip(e,n._createStickerLink(e.target)));t?(this.sendAnalyticsEvent("go_to_previous_story"),this.prevStory()):(this.sendAnalyticsEvent("go_to_next_story_tap"),this.nextStory())}this._hideTooltip(!0),this.hideMenu()}},openCustomButton:function(e){e.preventDefault(),e.stopPropagation();var t=this.getCurrentAuthor().story,n=t.getLinkUrl(),i=n.match(/\/narrative(-?\d+)_(\d+)/);if(i){var r={ownerId:i[1],narrativeId:i[2]},o=r.ownerId,a=r.narrativeId;if(!o||!a)return!1;this.openNarrative("".concat(o,"/narrative").concat(o,"_").concat(a),{source:"narrative_story",isOpenNarrativeFromFeed:!0})}else if(this.stopStory(),this.showLoading(),t.stats&&t.stats.url_view){var s=t.stats.url_view,l=s.event_type,u=s.rhash,c=t.raw_id;this._requestClickStat(c,l,u,function(){nav.go(n)})}else nav.go(n);return!1},onVerticalSwipe:function(e){var t=window.lang;if(this.needClose=!1,this.needGoToLink=!1,e){var n=e>0,i=this.sliderEl.offsetHeight,r=i/3.5,o=Math.abs(e)>r;if(n){var a=o?t.mobile_zphoto_release_to_close:t.mobile_zphoto_move_to_close,s=o?"":n?"zpv_close_move_down":"zpv_close_move_up",l=Math.max(1-.75*e/i,.6);(0,p.val)(this.swipeTextTop,'<div class="zpv_close_msg '.concat(s,'">').concat(a,"</div>")),setStyle(this.sliderEl,"opacity",l),setStyle.transform(this.sliderEl,1,[0,e/1.5]),setStyle(this.swipeTextTop,"opacity",Math.abs(l-1-.6)),setStyle.transform(this.swipeTextTop,1,[0,e/1.5*.85]),this.needClose=o}else{var u=Math.min(1-.5*e/i,1.1);setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform((0,p.geByClass1)("Story__moreLink"),u,[0,Math.max(e/(1.5*1.6),-90)]),this.needGoToLink=o}}else setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform((0,p.geByClass1)("Story__moreLink"),1,[0,0]),this.needClose=!1,this.needGoToLink=!1},preventScroll:function(){return this.popoutOpen},_requestRemoveStory:function(e,t){return new Promise(function(n,i){ajax.post("stories.php",{_ajax:1,act:"remove_story",hash:t,story_raw:e},{onDone:function(){n()},onFail:function(){i()}})})},_requestRemoveNarrative:function(e,t){return new Promise(function(n,i){ajax.post("stories.php",{_ajax:1,act:"remove_narrative",hash:t,narrative_raw:e},{onDone:function(){n()},onFail:function(){i()}})})},_requestList:function(){var e=this;return new Promise(function(t,n){var i={storyOwner:e.storyOwner,list:e.storyList,storyRaw:e.storyRaw,extra:e.storyExtra};if(!e.storyRaw)return n();var r=ajax.post("stories.php",{_ajax:1,act:"get_list",list:i.list,story_raw:i.storyRaw,extra:i.extra},{onDone:function(e){if(i.items=e.list,e.recommendations){var n=i.list+"_recommendations";window.store.stories[n]=b._forceSetStore(i.storyRaw,n,e.recommendations)}t(i)},onFail:function(){n()}});e._saveRequest(r)})},_forceSetStore:function(e,t,n){return{authors:n,listLoaded:!0,list:t,readedStories:{},viewers:{},viewersState:{},replies:{},showMenu:!1,storyList:t,initRaw:e,storyIndex:0,authorIndex:0,isReply:!1,replyTo:!1,inited:!0}},_requestFeedback:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.store;return new Promise(function(r,o){var a=ajax.post("stories.php",{_ajax:1,act:"feedback",offset:n,story_raw:e},{onDone:function(t,n,o,a,s,l,u){var c;(a&&a.length&&(i.replies[e]=a),i.viewers[e])?o&&(c=i.viewers[e]).push.apply(c,h(t)):i.viewers[e]=t;i.viewersState[e]?o&&extend(i.viewersState[e],{count:n,nextFrom:o}):i.viewersState[e]={count:n,nextFrom:o,repliesCountText:s,authorCountText:l,repliesScrollLeft:0},u.length&&(i.questions[e]=u),s&&(i.viewersState[e].repliesCountText=s),l&&(i.viewersState[e].authorCountText=l),r({viewers:t,count:n,nextFrom:o,repliesCountText:s,authorCountText:l,questions:u})},onFail:function(){o()}});t._saveRequest(a)})},_requestReadStories:function(){var e=this.store,t=Object.keys(e.readedStories),n=this._getSource();if(t.length){var i=ajax.post("stories.php",{_ajax:1,act:"read_stories",hash:this.store.authors[0].read_hash,stories:t.join(","),source:n,navigation_stats:(0,c.serializeNavigationStats)(),loading_stats:(0,c.serializeLoadingStats)(),connection_type:(0,c.getConnectionType)()},{onDone:function(){e.readedStories={},"feed"===n&&b._requestFeedBlock()}});this._saveRequest(i)}},_getSource:function(){if(this.params&&this.params.source)return this.params.source;var e=this.store&&this.store.list||"",t="";return e.includes("feed")?t="feed":e.includes("replies")&&(t="reply"),t},_sendNavigationStatEvents:function(e){var t=this.getCurrentStory(),n=t&&t.raw_id;if(n){var i=this._getSource();(0,c.saveNavigationStatEvent)({storyRawId:n,source:i,action:e})}},_sendViewerStartTime:function(e,t){var n=this.viewerSource;(0,c.saveViewerStartTime)({storyRawId:e,source:n,time:t})},_requestFeedBlock:function(){var e=nav.getQuery();if(!window.store.storiesLayers.length)ajax.post("stories.php",{_ajax:1,act:"feed_block",q:e.q},{onDone:function(e,t){var n=ge("StoriesFeedBlock");n&&replace(ceFromString(e),n),b.pushPreloadedList(t)}})},_requestClickStat:function(e,t,n,i){ajax.post("stories.php",{_ajax:1,act:"stat",source_story:e,event_type:t,rhash:n},{onDone:function(){i&&i()}})},_requestStickerStat:function(e,t){var n=this.getCurrentStory(),i=n.raw_id,r=n.clickable_stickers;ajax.post("stories.php",extend({act:"stickers_stat",story_raw_id:i,action:e,hash:r.hash},t))},_sendMessage:function(e,t,n,i){var r=ajax.post("mail.php",{_ajax:1,act:"send",entrypoint:"stories_comment",hash:e,media:t,message:n,to:i},{onDone:function(){var e=window.lang;b.showFlashPopup(e.mobile_stories_comment_success),b.sendAnalyticsEvent("comment_send")}});this._saveRequest(r)},_requestFave:function(e,t,n,i){ajax.post("bookmarks.php",{_ajax:1,act:e,item_type:31,item_oid:t,item_id:n,hash:i,ref:cur.module})},_parseList:function(e){var t=(e=decodeURIComponent(e)).match(/^story(-?\d+)_(\d+)(\/([a-z0-9\_\-]+))?(\/([a-z0-9\_\:\;\-]+))?$/i);if(t){var n=m(t,7),i=n[1],r=n[2],o=n[4],a=n[6],s=i+"_"+r;return e.match(/from_feed\=1/)?o="feed":e.match(/profile\=1/)?o="profile":o||(o=s),s+"/"+o+"/"+a}return e},setHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nav_init:!1,replace:!0},n=window.nav,i=this.getHistoryURL(e),r=n.getQuery();i.match(/narrative-\d+_\d+/)&&(i="narrative".concat(this.getCurrentStory().narrative.raw_id)),r.z=i;var o=n.path+obj2qs(r)+n.hash,a={push_only:!0,replace:t.replace,nav_init:!t.no_open,nav_incr:!0};n.go(o,null,a)},getFrom:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window.nav,n=this.store.list,i=t.getQuery(),r="z=".concat(i.z),o="";return"/write"===t.path.substr(0,6)?o="write".concat(t.path.substr(0,6),"?").concat(r):"/mail"===t.path?o="write".concat(i.peer,"?").concat(r):"/feed"===t.path?o=i.section&&"notifications"===i.section?"feed?section=notifications&".concat(r):"feed?".concat(r):n.startsWith("archive")?o="".concat(t.path,"?act=stories"):i.from&&(o=i.from),e?encodeURIComponent(o):o},getHistoryURL:function(e){var t=this.store.list;return"story"+e+(t?"/"+t:"")},getParams:function(){return this.params||{}},reportCurrentStory:function(e){var t=window.nav,n=this.getHistoryURL(e),i=(t.getQuery(),this.getFrom()),r="/reports?act=add&object=".concat(n,"&refrom=").concat(i);t.go(r)},toggleBookmark:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getCurrentAuthor();if(n){var i=n.getCurrentStory(),r=i.bookmark_add_hash,o=window.store,a=(i.narrative?i.narrative:i).is_bookmarked;Object.keys(o.stories).forEach(function(e){var t=o.stories[e];if(t.authors){var n=!1;t.authors.forEach(function(e){n||(n=e.items.find(function(e){return!!e.narrative&&(e.narrative.bookmark_hash===r&&e.raw_id===i.raw_id)}))}),n&&(n.narrative?n.narrative.is_bookmarked=!a:n.is_bookmarked=!a)}}),(0,p.val)(e,a?lang.mobile_stories_menu_bookmark_title:lang.mobile_stories_menu_bookmarked_title);var s=a?"bookmark_remove":"bookmark_add",l=i.narrative,u=l.owner_id,c=l.id;t||this._requestFave(s,u,c,r),i.narrative&&Share.setBookmarkState(i.narrative.raw_id,!a)}},share:function(e,t){var n=this,i=this.getCurrentAuthor();if(i){var r=i.getCurrentStory(),o=r.bookmark_add_hash,a=(r.narrative?r.narrative:r).is_bookmarked;this.stopStory();this.getFrom();var s=t?"narrative":"story";this.stopStory(),Share(e,{mail_hash:this.getCurrentStory().share_hash,object:s+e,is_bookmarked:a,bookmark_hash:o,bookmark_type:31,can_bookmark:t,can_to_own:t,can_to_club:t}),cur.share.onClose(function(){n.playStory()})}},openReplies:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.playStory(),t||this.sendAnalyticsEvent("open_parent_story"),this.destroy();var n=m(e.split("/"),2)[1];if(n)if(~window.store.storiesLayers.indexOf(n)){var i=this.store.list,r=n;this.restore(i,r)}else this.init(e,{reply:!0,replyTo:t});else this.close()},openNarrative:function(e,t){this.playStory(),this.destroy();var n=m(e.split("/"),2)[1];if(n)if(~window.store.storiesLayers.indexOf(n)){var i=this.store.list,r=n;this.restore(i,r)}else this.init(e,t);else this.close()},clickClose:function(){var e=this;requestAnimationFrame(function(){e.sendAnalyticsEvent("close_tap"),e.close()})},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(extend({isPopState:!1,storyRaw:!1,closeAll:!1},e),this.store&&this.store.list&&this._getSource().indexOf("narrative")>-1&&this._sendNavigationStatEvents("narrative_close"),!e.isPopState){var t=window.nav,n=t.getQuery();if(window.store.storiesLayers[window.store.storiesLayers.length-1-1]){var i=window.store.storiesLayers[window.store.storiesLayers.length-1-1],r=window.store.stories[i],o=r.authorIndex,a=r.authors[o].index,s=r.authors[o].items[a];n.z=this.getHistoryURL(s.raw_id)}else delete n.z;var l=t.path+obj2qs(n)+(t.hash||"");t.go(l,null,{push_only:!0})}if(this.destroy(),e.isPopState&&e.storyRaw){var u=m(this._parseList(e.storyRaw).split("/"),2)[1];this.store?this.restore(this.store.storyList,u,e.storyRaw,e):this.init(e.storyRaw,{replace:!0})}else this.store&&this.store.storyList&&this.restore(this.store.storyList,!1,!1,e)},hideAllViews:function(){var e=window.store;e&&(e.storiesLayers=[],e.stories&&Object.keys(e.stories).forEach(function(t){e.stories[t].showViews=!1,e.stories[t].isStopped=!1}))},restore:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(window.store.storiesLayers){var r=window.store.storiesLayers.indexOf(e);window.store.storiesLayers.splice(r,1)}if(window.store.storiesLayers.length||t||n){t=t||window.store.storiesLayers[window.store.storiesLayers.length-1];var o=window.store.stories[e],a=window.store.stories[t];if(o&&a){var s=Object.keys(o.readedStories);(0,p.each)(s,function(e,t){var n=m(t.split("_"),3),i=n[0],r=(n[1],n[2],a.replies[o.replyTo]);if(r){var s=m(r.filter(function(e){return e.owner_id==i}),1)[0];s&&(s.has_new=!1)}}),this.init(a.initRaw,{restore:!0,forceAuthorIndex:!1,reply:!0})}else n&&this.init(n,{restore:!0,forceAuthorIndex:!1,reply:!0})}else this.hideAllViews();i.closeAll&&window.store.storiesLayers.length&&this.close(i)},clearStore:function(){this.store=this._initStore()},destroy:function(){var e=this;if(this.restoreAudio(),this.store){this.slider=null,this.hideMenu(!1),this._abortRequests(),this._requestReadStories(),(0,p.removeClass)(this.layer,"Stories_inited");var t=this.getCurrentAuthorIndex();if(void 0!==t&&this.Authors)this.Authors[t].destroy();this.onRender.off(),(0,p.remove)(this.layer),Object.keys(this).forEach(function(t){"store"!==t&&"supportAutoplay"!==t&&"function"!=typeof e[t]&&(e[t]=null,delete e[t])}),w.close(),(0,p.addClass)(ge("StoriesFeedBlock"),"StoriesFeedBlock_been-open"),(0,p.removeClass)(document.body,"vk__story_open")}},isAutoplaySupport:function(){return this.supportAutoplay},isGoodBrowser:function(){return a.default.ios&&a.default.safari_mobile&&parseInt(a.default.version,10)>=10},detectAutoplay:function(){var e=this;return new Promise(function(t){if(e.supportAutoplay)t();else{if(e.isGoodBrowser())return e.supportAutoplay=!0,void t();e.supportAutoplay=!1;var n=(0,p.ce)("video"),i=(0,p.ce)("source");i.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var r=(0,p.ce)("source");r.src="data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM",(0,p.append)(r,n),(0,p.append)(i,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),(0,p.append)(n,document.body);var o=ge("base64testvideo");if(a.default.android&&a.default.chrome)return e.supportAutoplay=!0,(0,p.remove)(n),t(),void clearTimeout(e.autoDetectTimeout);if(a.default.mobile&&a.default.ios&&a.default.ios<10)return e.supportAutoplay=!1,(0,p.remove)(n),t(),void clearTimeout(e.autoDetectTimeout);if(!a.default.safari_mobile||a.default.safari_mobile&&parseInt(a.default.version,10)>=10){var s=n.play();void 0!==s&&s.then(function(){e.supportAutoplay=!0,(0,p.remove)(n),t(),clearTimeout(e.autoDetectTimeout)}).catch(function(e){})}o.onplay=function(){e.supportAutoplay=!0,(0,p.remove)(n),t(),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout(function(){o.paused||(e.supportAutoplay=!0),(0,p.remove)(n),t()},250)}})},narrativeReply:function(){this.setCurrentStory(0),this.renderStory(),this._sendNavigationStatEvents("narrative_replay")},narrativeGoToStories:function(){this.nextStory(),this._sendNavigationStatEvents("narrative_go_to_stories")},_showTooltip:function(e,t){if(this.hideMenu(!1),this.hideFlashPopup(!1),e&&t)if(this.tooltip)this._hideTooltip();else{var n=this.getCurrentAuthorEl();this.tooltip=(0,p.ce)("div",{className:"StoriesTooltip"},{top:0,left:0}),this.tooltipArrow=(0,p.ce)("span",{className:"StoriesTooltip__arrow"}),this.tooltip.appendChild(t),this.tooltip.appendChild(this.tooltipArrow),n.appendChild(this.tooltip);var i=0,r=0;"touchend"===e.type?(i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(i=e.clientX,r=e.clientY);var o=n.getBoundingClientRect(),a=o.top,s=o.left,l=o.width,u=m(getSize(this.tooltip),2),c=u[0],d=r-(a+u[1]+10),A=i-(s+c/2);setStyle(this.tooltip,{top:Math.max(d,2),left:Math.min(Math.max(A,2),l-c-2)}),setStyle(this.tooltipArrow,{left:Math.max(Math.min(i-s-Math.min(Math.max(A,0),l-c),c-15),15)}),this.pauseStory()}else this.playStory()},_hideTooltip:function(e){this.tooltip&&(e||this.playStory(),(0,p.remove)(this.tooltip),delete this.tooltip)},_createNarrativeTooltipLink:function(){var e=this.getCurrentStory().narrative||{};return(0,p.ce)("div",{className:"Stories__tooltip-link",innerHTML:lang.mobile_stories_narrative_show,onclick:function(){b._hideTooltip(!0),b.openNarrative("".concat(e.owner_id,"/narrative").concat(e.raw_id),{source:"narrative_story",isOpenNarrativeFromFeed:!0})}})},_hasContext:function(e){return!(!this.extra||!this.extra.context||this.extra.context!==e)},sendAnalyticsEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=b.getCurrentStory(),i=b.getCurrentAuthor(),r=b.getCurrentStoryIndex(),o=m(n.raw_id.split("_"),2),a=o[0],s=o[1],l=b._getSource(),u={event_type:e,story_owner_id:a,story_id:s,time:vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3),view_entry_point:l,nav_screen:cur.module};if(i){var c=i.data,d=i.getCountDown();d&&c&&extend(u,{stories_author_before:r,stories_author_after:c.items.length-r,view_event_timeline_position:d.initialTime-d.left})}Object.assign(u,t),statlogsValueEvent("story_product_analytics",u)},clickAuthor:function(){this.sendAnalyticsEvent("go_to_author")},askQuestionBox:function(e){(0,p.cancelEvent)(e);var t=this.getCurrentStory().can_ask;if(this.hideFlashPopup(!1),this.sendAnalyticsEvent("click_on_clickable_sticker"),this._hideTooltip(),!t)return b.showFlashPopup(lang.mobile_stories_ask_question_forbidden),!1;this.stopStory(),(0,p.addClass)(this.layer,"Stories_questionOpened");var n=this.authors[this.store.authorIndex],i=(0,p.geByClass1)("Story__questionTextarea",n);requestAnimationFrame(function(){i&&i.focus()})},changeAskAnonymous:function(e){e.preventDefault();var t=this.getCurrentStory();if(t){var n=(0,p.intval)(!(0,p.intval)((0,p.domData)(e.target,"anonymous")));(0,p.domData)(e.target,"anonymous",n),t.isAskAnonymous=n,(0,p.val)(e.target,n?lang.mobile_stories_ask_question_anonymous:lang.mobile_stories_ask_question_own_name)}},hideAskQuestion:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b.store.showMenu=!1,(0,p.removeClass)(b.layer,"Stories_questionOpened"),e&&b.playStory()},onInputQuestion:function(e){$(".Story__questionSend").disabled=!(0,p.trim)((0,p.val)(e))},sendQuestion:function(){var e=b.getCurrentAuthorEl();if(e){var t=(0,p.geByClass1)("Story__questionTextarea",e),n=(0,p.geByClass1)("Story__questionSend",e),i=b.getCurrentStory(),r=i.raw_id,o=i.askQuestionHash,a=i.accessKey,s=i.isAskAnonymous,l=m(r.split("_"),2),u=l[0],c=l[1],d=(0,p.trim)((0,p.val)(t));(0,p.val)(t,""),n.disabled=!0;var A=ajax.post("stories.php",{_ajax:1,act:"ask_question",story_owner_id:u,story_id:c,question_text:d,is_anonymous:s,hash:o,access_key:a},{onDone:function(e){if(!e)return b.showFlashPopup(lang.mobile_stories_question_error),!1;var t=b.getCurrentAuthor().data.author;b.showFlashPopup(lang.mobile_stories_question_sent.replace("{name}",t.first_name_ins)),s?b.sendAnalyticsEvent("question_reply_anonymous"):b.sendAnalyticsEvent("question_reply")}});b._saveRequest(A),b.hideAskQuestion()}},getQuestionById:function(e){var t=this.getCurrentStory();return this.store.questions[t.raw_id].find(function(t){return t.id===e})},openQuestionActions:function(e){var t=this.getQuestionById(e);if(t){var n=t.canAnswer,r=t.isOwnerBlocked,o=t.canBlocked,a=[(0,d.ModalMenuBtn)({inner:lang.mobile_stories_question_delete,onclick:["Stories.removeQuestion","this",t.id]})];o&&a.push((0,d.ModalMenuBtn)({inner:r?lang.mobile_stories_question_unban:lang.mobile_stories_question_ban,onclick:[r?"Stories.unbanQuestion":"Stories.banQuestion","this",t.id]})),n&&a.unshift((0,d.ModalMenuBtn)({inner:lang.mobile_stories_question_reply,onclick:["Stories.replyQuestionBox","this",t.id]}));var s=(0,d.default)({class:"Question__popup",items:a});A.default.open(i.default.elem(s),!0)}},removeQuestion:function(e,t){var n=this,i=this.getQuestionById(t),r=i.storyOwnerId,o=i.storyId,a=i.id,s=i.removeHash;ajax.post("stories.php",{_ajax:1,act:"remove_question",story_owner_id:r,story_id:o,question_id:a,remove_hash:s},{onDone:function(i){var s="".concat(r,"_").concat(o);if(d.default.close(e),!i)return requestAnimationFrame(function(){return n.showFlashPopup(lang.mobile_stories_question_error)}),!1;$$('.Question[data-id="'.concat(t,'"]')).forEach(function(e){return re(e)}),n.store.questions[s]=n.store.questions[s].filter(function(e){return e.id!==t}),$$(".Question").length<1&&re((0,p.geByClass1)("Views__questions")),b.sendAnalyticsEvent("question_delete",{questionId:a})}})},replyQuestionBox:function(e,t){var n=this.getCurrentStory(),r=this.getQuestionById(t),o=r.author,a=r.text,s=lang.mobile_stories_question_reply_title.replace("{name}",o.nameGen),l=i.default.elem({class:"QuestionReplyPopup",inner:[{class:"QuestionReplyPopup__inner",inner:[{class:"QuestionReplyPopup__header",inner:[{class:"QuestionReplyPopup__preview",style:"background-image: url(".concat(n.small_preview,")")},{class:"QuestionReplyPopup__top",inner:[{class:"QuestionReplyPopup__title",inner:s},{class:"QuestionReplyPopup__question",inner:a}]}]},{class:"QuestionReplyPopup__content",inner:[{class:"QuestionReplyPopup__textarea",tag:"textarea",placeholder:lang.mobile_stories_comment_textarea,oninput:"Stories.onInputReplyQuestion(this);"}]},{class:"QuestionReplyPopup__footer",inner:[(0,f.default)({class:"QuestionReplyPopup__send",theme:"regular",inner:lang.mobile_stories_question_reply_to_message,on_click:["Stories.sendReplyQuestion",t],disabled:!0}),(0,f.default)({class:"QuestionReplyPopup__cancel",theme:"link",inner:lang.mobile_stories_comment_cancel,on_click:["Stories.hideReplyQuestion"]})]}]}]});this.popout.appendChild(l),d.default.close(e)},hideReplyQuestion:function(){re((0,p.geByClass1)("QuestionReplyPopup",b.popout))},onInputReplyQuestion:function(e){$(".QuestionReplyPopup__send").disabled=!(0,p.trim)((0,p.val)(e))},sendReplyQuestion:function(e){var t=(0,p.trim)((0,p.val)((0,p.geByClass1)("QuestionReplyPopup__textarea"))),n=b.getQuestionById(e),i=n.id,r=n.ownerId,o=n.storyOwnerId,a=n.storyId,s=n.sendHash,l="story".concat(o,"_").concat(a),u="".concat(t,"\n\n🗣 ").concat(n.text),c=ajax.post("mail.php",{_ajax:1,act:"send",hash:s,media:l,message:u,to:r},{onDone:function(e){var t=e&&e.error?e.message:lang.mobile_stories_comment_success;b.showFlashPopup(t,!1),b.sendAnalyticsEvent("question_send_message",{questionId:i})}});b._saveRequest(c),b.hideReplyQuestion()},showQuestions:function(e){var t=new u.default(e).render();this.popout.appendChild(t),b.sendAnalyticsEvent("question_show_all")},hideQuestions:function(){re((0,p.geByClass1)("Questions",this.popout))},banQuestion:function(e,t){var n=this.getQuestionById(t),i=n.storyOwnerId,r=n.storyId,o=n.banHash,a=this.getFrom(),s="/stories?act=ban_question_box&question_id=".concat(t,"&story_raw=").concat(i,"_").concat(r,"&ban_hash=").concat(o,"&refrom=").concat(a);d.default.close(e),nav.go(s)},banQuestionConfirm:function(e,t,n,i,r,o){var a="mobile_stories_question_ban_reason_".concat(i);Confirm(e,'Stories.banQuestionSend("'.concat(t,'", ').concat(n,', "').concat(i,'", "').concat(r,'", "').concat(o,'")'),"",{title:getLang(a)})},banQuestionSend:function(e,t,n,i,r){var o=this.getQuestionById(t).isAnonymous;ajax.post("stories.php",{_ajax:1,act:"ban_question",story_raw:e,question_id:t,ban_hash:i,reason:n},{onDone:function(){var e="question_ban_author";o&&(e="question_ban_anonymous_author"),b.sendAnalyticsEvent(e,{questionId:t}),nav.go(r)}})},unbanQuestion:function(e,t){var n=this.getQuestionById(t),i=n.storyOwnerId,r=n.storyId,o=n.banHash,a=this.getFrom();ajax.post("stories.php",{_ajax:1,act:"unban_question",story_raw:"".concat(i,"_").concat(r),question_id:t,ban_hash:o,redirect_url:a},{onDone:function(){d.default.close(e),n.isOwnerBlocked=!1,b.showFlashPopup(lang.mobile_stories_question_author_unblocked)}})},toggleQuestionTooltip:function(e,t){var n=$(".QuestionSupport");(0,p.cancelEvent)(e),n&&(t?(0,p.removeClass)(n,"QuestionSupport--active"):(0,p.toggleClass)(n,"QuestionSupport--active"))},openMusicStickerActions:function(e,t){var n=ge("audio".concat(e)),r=hasClass("ai_added",n),o=(0,d.default)({close:!0,items:[(0,d.ModalMenuBtn)({class:"ai_add",inner:r?lang.global_delete_audio:lang.global_add_to_audio,onclick:'Stories.addMusic(this, "'.concat(e,'", ').concat(r,");")}),(0,d.ModalMenuBtn)({class:"ai_add",inner:lang.mobile_stories_music_next,onclick:"Stories.nextMusic(this, ".concat(t,");")})]}),a=i.default.elem(o);a.setAttribute("id","ai_menu_".concat(t.id)),A.default.open(a,!0)},addMusic:function(e,t,n){audioplayer.add(t),d.default.close(e),b._hideTooltip(!0),b.showFlashPopup(n?lang.mobile_stories_music_deleted:lang.mobile_stories_music_added)},nextMusic:function(e,t){var n=window,i=n.audio,r=n.audioplayer;if(i.getCurrentId()){var o=i.playlist().map(function(e){return e.id}).indexOf(i.getCurrentId())+1;i.addToPlaylist([t],o)}else r.playPause(!1,t.id,!0),i.pause();d.default.close(e),b._hideTooltip()},onRender:(0,r.default)()};g.onChange(function(){window.store.storiesLayers=[],window.store.stories={}}),window.Stories=b},"8trB":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("W9Tc"),r=n("m0RZ"),o=n("W0P9"),a=function(e){return e&&e.__esModule?e:{default:e}}(n("Xrg9"));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sw=t,this.SWClient=n,vk.id&&this.canBeEnabled().then(function(e){e&&(i.listenPermission(),i.loadEndpoint()&&i.update().then(i.checkMessageState.bind(i)))})}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"cleanNotification",value:function(){this.sw.action("cleanNotification")}},{key:"canBeEnabled",value:function(){return Promise.resolve(this.isSupported())}},{key:"isSupported",value:function(){return"PushManager"in window&&"Notification"in window&&this.SWClient.isSupported()}},{key:"loadEndpoint",value:function(){return a.default.get("push_notifier_endpoint"+vk.id)||!1}},{key:"saveEndpoint",value:function(e){a.default.set("push_notifier_endpoint"+vk.id,e||!1)}},{key:"action",value:function(e,t){return this.sw.action(e,t)}},{key:"_needupdate",value:function(e){var t=Date.now(),n=this.loadEndpoint(),i=a.default.get("push_notifier_subscribed_ts"+vk.id),r=!1;return(n!==e.endpoint||!i||t-i>6e4)&&(a.default.set("push_notifier_subscribed_ts"+vk.id,t),r=!0),r}},{key:"listenPermission",value:function(){var e=this;(0,i.partConfigEnabled)("push_notifier")&&navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then(function(t){t.onchange=function(){return e.update()}})}},{key:"update",value:function(){var t=this;return this.updatePermission().then(function(n){return n===e.PUSH_NOTIFIER_PERMISSION_GRANTED?t.subscribe().catch(function(t){t!==e.SUBSCRIBE_ERROR_NETWORK&&t("can not update subscribe")}):Promise.reject("premession_not_granted")}).catch(o.error)}},{key:"updatePermission",value:function(){var t=e.getPermission();if(t!==e.PUSH_NOTIFIER_PERMISSION_GRANTED){var n=this.loadEndpoint();if(n)return this.unsubscribe(n).then(function(){return t})}return Promise.resolve(t)}},{key:"processSubscribe",value:function(t){return t.subscribe({userVisibleOnly:!0,applicationServerKey:(0,r.urlBase64ToUint8Array)(e.SERVER_KEY)})}},{key:"setupSubscription",value:function(){var t=this;return new Promise(function(n,i){var r=e.getPermission(),o=function(){t.subscribe(!0).then(function(){n()}).catch(function(){i()})};r!==e.PUSH_NOTIFIER_PERMISSION_DENIED?r!==e.PUSH_NOTIFIER_PERMISSION_GRANTED?r===e.PUSH_NOTIFIER_PERMISSION_DEFAULT&&t.requestPermission().then(function(t){t===e.PUSH_NOTIFIER_PERMISSION_GRANTED?o():i()}):o():i(e.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS)})}},{key:"subscribe",value:function(t){var n=this;return this.sw.register().then(function(e){var t=e.pushManager;return t.getSubscription().then(function(e){if(e){var i=e.expirationTime;return i&&Date.now()>i-432e6?n.unsubscribe(n.loadEndpoint()).then(function(){return n.processSubscribe(t)}):e}return n.processSubscribe(t)})}).then(function(i){return new Promise(function(r,o){if(t||n._needupdate(i)){var a=i.getKey("p256dh"),s=i.getKey("auth");window.ajax.post(e.SERVER_URL,{act:"a_subscribe",endpoint:i.endpoint,key:a?btoa(String.fromCharCode.apply(null,new Uint8Array(i.getKey("p256dh")))):null,token:s?btoa(String.fromCharCode.apply(null,new Uint8Array(i.getKey("auth")))):null},{onDone:function(e){e?(n.saveEndpoint(i.endpoint),r()):o()},onFail:function(){return o(e.SUBSCRIBE_ERROR_NETWORK),!0}})}else r()})})}},{key:"unsubscribe",value:function(t){var n=this;return this.sw.register().then(function(i){return i.pushManager.getSubscription().then(function(i){return i?i.unsubscribe().then(function(i){return i?new Promise(function(i,r){ajax.post(e.SERVER_URL,{act:"a_unsubscribe",endpoint:t},{onDone:function(e){e?(n.saveEndpoint(!1),i()):r()}})}):Promise.reject("ERROR: can not unsubscribe")}):(n.saveEndpoint(!1),Promise.reject("ERROR: no subscription"))})})}},{key:"requestPermission",value:function(){var t=e.getPermission();return t===e.PUSH_NOTIFIER_PERMISSION_DEFAULT?new Promise(function(e,t){var n=Notification.requestPermission(function(t){e(t)});n instanceof Promise&&n.then(e,t)}):Promise.resolve(t)}},{key:"checkMessageState",value:function(){var t=this;return new Promise(function(e){return setTimeout(e,5e3)}).then(function(){return t.action("getMessagesMetaData")}).then(function(t){return"object"===s(t)&&Object.keys(t).length?new Promise(function(n,i){window.ajax.post(e.SERVER_URL,{act:"a_update_messages_state",data:Object.entries(t)},{onDone:function(e){e?n(e):i("ERROR: act error")},onFail:function(){return i("ERROR: network error"),!0}})}):Promise.resolve({})}).then(function(e){try{return JSON.parse(e)}catch(e){return{}}}).then(function(e){return t.action("updateMessageNotifications",e)}).catch(function(e){return(0,o.error)(e)})}}],[{key:"getPermission",value:function(){return Notification.permission}}]),e}();u.SERVER_KEY="BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",u.SERVER_URL="push_notifier",u.PUSH_NOTIFIER_PERMISSION_GRANTED="granted",u.PUSH_NOTIFIER_PERMISSION_DEFAULT="default",u.PUSH_NOTIFIER_PERMISSION_DENIED="denied",u.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS="BLOCKED_BY_BROWSER_SETTINGS",u.SUBSCRIBE_ERROR_NETWORK="SUBSCRIBE_ERROR_NETWORK";var c=u;t.default=c},"98L6":function(e,t,n){"use strict";window.FeedBlocks={hideReason:function e(t,n){if(e.progress)return!1;e.progress=!0;var i="block_"+t,r=ge(i);cur.feedBlocksHTML&&delete cur.feedBlocksHTML[i],ajax.post("feed.php",{act:"block_hide_reason",block_id:t,reason:0|n,hash:attr(r,"data-hash"),pos:attr(r,"data-pos"),ref:attr(r,"data-ref")},{onDone:function(t){e.progress=!1,t?val(r,t):hide(r),e.progress=!1},onFail:function(){e.progress=!1}})},restore:function(e){var t="block_"+e,n=ge(t);cur.feedBlocksHTML&&cur.feedBlocksHTML[t]&&val(t,cur.feedBlocksHTML[t]),ajax.post("feed.php",{act:"block_restore",block_id:e,hash:attr(n,"data-hash"),pos:attr(n,"data-pos"),ref:attr(n,"data-ref")})},hide:function e(t,n){if(e.progress)return!1;e.progress=!0,post.wallActionsHide();var i="block_"+t,r=ge(i);return ajax.post("feed.php",{act:"block_hide",block_id:t,hash:attr(r,"data-hash"),pos:attr(r,"data-pos"),ref:attr(r,"data-ref")},{onDone:function(t){post.wallActionsHide(),cur.feedBlocksHTML||(cur.feedBlocksHTML={}),cur.feedBlocksHTML[i]=val(r),val(r,t),e.progress=!1},onFail:function(){e.progress=!1}}),!1}}},"98sY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initDebugTools=function(){window._logTimer=(new Date).getTime(),function(){if((0,r.partConfigEnabled)("log_fetch_requests")){var e=function(e,t){try{if(~e.indexOf("/al_audio")||~e.indexOf("/like.php"))throw new Error(t)}catch(e){a(e)}};!function(e){var t=window.XMLHttpRequest;window.XMLHttpRequest=function(){var n,i,o=new t,a=o.open,s=o.send;return o.open=function(){var e=Array.prototype.slice.call(arguments);return i=e[0],n=e[1],a.apply(o,arguments)},o.send=function(){var t=arguments[0];return("POST"===(i=(i||"").toUpperCase())||"GET"===i&&(0,r.partConfigEnabled)("log_fetch_requests_get"))&&e(n,[i,n,t].join(":")),s.apply(o,arguments)},o},["DONE","HEADERS_RECEIVED","LOADING","OPENED","UNSENT"].forEach(function(e){Object.defineProperty(window.XMLHttpRequest,e,{enumerable:!1,configurable:!1,writable:!1,value:t[e]})})}(e),window.fetch&&function(e){var t=window.fetch;window.fetch=function(){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];var r,o=n[0],a="GET";"string"==typeof o?r=o:"Request"in window&&o instanceof window.Request?(r=o.url,o.method&&(a=o.method)):r=""+o,n[1]&&n[1].method&&(a=n[1].method);var s={method:a,url:r,status_code:null};return e(r,r),t.apply(this,n).then(function(e){return s.status_code=e.status,e}).catch(function(e){throw e})}}(e)}}()},t.logEvalError=function(e,t){if(!window.Raven)return;if(t&&t.length>350){var n=t.indexOf("; window.TimeSpent && TimeSpent.setTimers && TimeSpent.setTimers(");~n&&(t=t.slice(0,n)),t="".concat(t.slice(0,200),"...").concat(t.slice(-200))}e.message+=": ".concat(t),o(e)},t.debugLog=function(e){try{window.debuglogClient&&debuglogClient(e);var t="["+((new Date).getTime()-window._logTimer)/1e3+"] ";if(window.console&&console.log){var n=Array.prototype.slice.call(arguments);n.unshift(t),i.browser.msie||i.browser.mobile?console.log(n.join(" ")):console.log.apply(console,n)}}catch(e){}},t.debugEl=function(e){if(!e)return!1;var t=e.tagName,n=e.id,i=e.className,r=(t||"").toLowerCase();i&&(r+="."+e.className.replace(/\s+/g,"."));n&&!/^__vk/.test(n)&&(r+="#".concat(e.id));if(!r)return e.toString()||"[NULL]";return r},t.logError=o,t.debugBufferLog=a;var i=n("gdug"),r=n("W9Tc");function o(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).environment,n=void 0!==t&&t;window.Raven&&(n?Raven.captureException(e,{environment:n}):Raven.captureException(e))}function a(e){return o(e,{environment:"debugLog"})}},"9CLW":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));var r=window,o=r.addEvent,a=r.removeEvent,s={onIframeReady:(0,i.default)("{ is_api, check_transfer_url, on_success_url }"),onPostMessage:(0,i.default)(),onAcceptCookieClick:(0,i.default)()};function l(e){var t;if(e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)){try{t=JSON.parse(e.data)}catch(e){t={}}"billing"===t.type&&s.onPostMessage(t.action,t.action_params)}}s.onIframeReady(function(){o(window,"message",l),window.cur.destroy.push(function(){a(window,"message",l)})}),window.BasisMoneyTransfer=s;var u=s;t.default=u},"9Cbe":function(e,t,n){"use strict";var i=n("OcsD"),r=window,o=r.page,a=r.onDOMReady,s=r.nav;window.SliderTabs={},SliderTabs._onClick=h,a(_),o.onChange(A),o.onRestore(f);var l={container:"SliderTabs",scroll:"Slider__scroll",active:"SliderTabs__tab_selected"},u={active:".SliderTabs__tab_selected",tab:".SliderTabs__tab",scroll:".".concat(l.scroll),container:".".concat(l.container)},c="",d=0;function A(){var e=ge(c),t=$(u.container);if(e){var n=$(u.scroll,e),r=$(u.active,e);n.scrollLeft=d;var o=(0,i.getX)(r);if(d>o){n.scrollLeft=o-16}}else t?p():(c="",d=0)}function f(){setTimeout(function(){var e=ge(c);if(e){var t=Array.from($$(u.tab,e));if(t)t.some(function(e){return e.getAttribute("href")===s.cur})&&t.forEach(function(e){e.getAttribute("href")===s.cur?e.classList.add(l.active):e.classList.remove(l.active)})}})}function p(){var e=$$(u.container),t=Math.min((0,i.getCw)(),882);e.forEach(function(e){var n=$(u.scroll,e),r=$(u.active,e);if(r){var o=r.offsetWidth,a=(0,i.getX)(r);a+o>t&&(n.scrollLeft=a-t+o)}})}function _(){p()}function h(e,t){var n=(0,i.gpeByClass)(l.container,t),r=(0,i.gpeByClass)(l.scroll,t),o=$(u.active,n);return o&&o.classList.remove(l.active),t.classList.add(l.active),d=r.scrollLeft,c=attr(n,"id"),!0}},"9EK6":function(e,t,n){"use strict";var i=n("tMHi"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ")),o=n("jk6M"),a=n("lkNA"),s=n("fOXz"),l=n("XBHu"),u=n("uU5W"),c=n("W9Tc"),d=n("0bdD"),A=n("D+pY");var f=window,p=f.cancelEvent,_=f.removeEvent,h=f.srand,m=f.ce,v=f.addEvent,g=f.ssSet,y=f.lsGet,w=f.vkNow,b=f.onDOMReady,E=f.ssGet,k=f.se,C=f.lsSet,D=f.each,S=f.HTMLAudioElement,T=function(){if(!S)return{init:function(){},playing:function(){},onInit:function(){},onSelect:function(){},pause:function(){},onAdStart:function(){},onAdComplete:function(){}};var e=!1,t=!1,n=!1,s=!1,l=!1,A=function t(n){(e||!1!==l)&&(e=!1,R&&!1===l||(s=!0,z.pause.call(I))),p(n),_(I,"play",t),_(document,o.isTouch?"touchstart":"click",P)},f=function(){!1!==l&&l()},P=function t(){n&&(n=!1,e=!0,$(I),_(document,o.isTouch?"touchstart":"click",t))},I=function(t){var n=window.Audio?new Audio:m("audio");n.autobuffer=!0,n.muted=!1,n.preload="none",t&&(n.volume=t.volume,_(t,"play",q),_(t,"pause",W),_(t,"progress",Y),_(t,"timeupdate",G),_(t,"ended",Q),_(t,"play",A),_(t,"progress canplaythrough",f),_(document,o.isTouch?"touchstart":"click",P),t.muted=!0,t.pause(),t.src=null);return j=!1,F=!1,!1,e=!1,s=!1,l=!1,v(n,"play",q),v(n,"pause",W),v(n,"progress",Y),v(n,"timeupdate",G),v(n,"ended",Q),v(n,"play",A),v(n,"progress canplaythrough",f),v(document,o.isTouch?"touchstart":"click",P),n}(),x=h(),O=[],L=null,B={},N="",R=!1,F=!1,j=!1,H=null,U=!1,V=!1;delete S.prototype.play,delete S.prototype.pause,delete S.prototype.load,delete S.prototype.canPlayType;var z={play:S.prototype.play,pause:S.prototype.pause,load:S.prototype.load,canPlayType:S.prototype.canPlayType};function $(e){var t=z.play.call(e);void 0!==t&&t.catch(function(t){t.code!==t.ABORT_ERR&&e.pause()})}function q(){R||(R=!0,T.onPlay(!0),g("audio_play","1"),clearTimeout(H),H=setTimeout(Z,100)),audioBackgroundRestriction&&audioBackgroundRestriction.isIdle&&T.pause()}function W(){s?s=!1:R&&(R=!1,T.onPause(!0),g("audio_play","0"),clearTimeout(H))}function Y(){T.onProgress(!0)}function G(){s||(T.onProgress(!0),T.onPositionChanged(!0,T.position(),T.duration()),T.onTimeUpdate(!0),g("audio_pos",T.position()),!j&&I.duration-I.currentTime<.5&&(j=!0),F&&(F=!1,T.next()))}function Q(){T.onEnded(!0),j?(j=!1,T.next()):F=!0}function X(){return O[L]||!1}function K(){return X().id||!1}function J(e,t){if(e){var n=(0,i.audioUnmaskSource)(e.src),r=function(){return T.onSelect(!0,e)};!function(e){return/\.m3u8/.test((0,i.audioUnmaskSource)(e))}(e.src)?(I.src=n,t||z.load.call(I),r()):function e(t,n,i){var r=window,o=r.Hls,s=r.browser;var l=function(){isFunction(i)&&i()};if(!o)return s.safari&&$(I),void(0,a.loadScript)("/js/lib/hls.min.js",{onLoad:function(){return e(t,n,i)}});if(o.isSupported()&&!s.msie_edge){te&&te.destroy();var u=new o({maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxBufferLength:240});u.attachMedia(t),u.loadSource(n),u.on(o.Events.ERROR,function(e,t){t.details===o.ErrorDetails.BUFFER_STALLED_ERROR&&(u.stopLoad(),u.startLoad())}),u.on(o.Events.MANIFEST_PARSED,function(){return l()}),te=u}else t.canPlayType("application/vnd.apple.mpegurl")&&(t.src=n,l())}(I,n,r)}}function Z(){if(R){var e=y("audio_current_player");x!=e?T.pause():H=setTimeout(Z,100)}}function ee(){var e=K();g("audio_id",e),g("audio_pos",0),U&&(document.cookie=U+"="+e+"; expires="+new Date(w()+864e5).toUTCString()+"; path="+V)}var te=null;return{onInit:(0,r.default)(),init:function(e){if(!T.support)return!1;e.cookie&&(U=e.cookie,V=e.cookie_path||"/"),b(function(){e.playlist&&T.playlist(e.playlist,{q:e.playlist_q||""});var t=E("audio_id");if(t){var n=E("audio_pos"),i=E("audio_vol"),r=E("audio_play");T.select(t),"1"==r&&(null!==n&&T.position(n),null!==i&&T.volume(i))}T.onInit()})},support:I.canPlayType&&z.canPlayType.call(I,"audio/mpeg")&&"no"!=z.canPlayType.call(I,"audio/mpeg")||!1,onPlay:k(K),onPause:k(K),onAdStart:k(X),onAdComplete:k(X),onDeselect:k(X),onSelect:k(),onProgress:k(K,function(){return T.loaded()},function(){return T.duration()}),onPositionChanged:k(K),onTimeUpdate:k(K),onVolumeChanged:k(K,function(){return I.volume}),onEnded:k(K),onNotFoundError:k(),onEmptyPlaylistError:k(),getCurrent:X,getCurrentId:K,operate:function(e){if(!T.support)return!1;!e||O[L]&&e==O[L].id?R?T.pause():T.play():T.play(e)},playing:function(){return R},select:function(e){if(!T.support)return!1;if(e)if(O.length){if(O[B[e]])return K()&&T.onDeselect(!0),L=B[e],J(O[L],!0),ee(),!0;T.onNotFoundError(!0,e)}else T.onEmptyPlaylistError(!0,e)},autoplay:function(e){T.play(e),I.paused&&T.pause()},play:function(e){var t=this;if(!T.support)return!1;if(e){if(R&&T.pause(),!T.select(e))return;try{I.currentTime=.01}catch(e){}}if(M.isPlaying())R?M.pause():M.resume();else if(!R)if(I.muted=!1,I.preload="auto",R=!0,T.onPlay(!0),e&&(0,c.partConfigEnabled)("mvk_audio_ads")){browser.safari&&z.load.call(I);var n=u.AdsPlayerAdapter.convertAudioInfo(O[B[e]]);M.startPlay(n,!1,function(){t._play()})}else this._play()},_play:function(){$(I),g("audio_play","1"),C("audio_current_player",x)},pause:function(){if(!T.support)return!1;R&&(z.pause.call(I),M.isPlaying()&&M.pause(),R=!1,T.onPause(!0),g("audio_play","0"))},position:function(e,t){if(!T.support)return!1;if(void 0===e)return this.isAdsPlaying()?M.getCurrentProgress()*M.getDuration():I.currentTime;t&&(e=T.duration()*e),e=Math.max(0,Math.min(e,T.duration()));var n=R;n&&(R=!1,z.pause.call(I));try{I.currentTime=e,T.onPositionChanged(!0,T.position(),T.duration()),g("audio_pos",e),n&&(R=!0,I.muted=!1,$(I))}catch(t){T.onPositionChanged(!0,e,T.duration()),l=function(){l=!1,T.position(e)},n&&(R=!0)}},volume:function(e){if(!T.support)return!1;if(void 0===e)return I.volume;try{I.volume=e||0,M.updateVolume()}catch(e){}T.onVolumeChanged(!0),g("audio_vol",e||0)},loaded:function(){return I.buffered&&I.buffered.length&&I.buffered.end(I.buffered.length-1)||0},duration:function(){return this.isAdsPlaying()?M.getDuration():I.duration||O[L]&&O[L].dur||0},played:function(){for(var e=I.played,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return t},next:function(){if(!T.support)return!1;R&&T.pause(),T.onDeselect(!0),++L>=O.length&&(L=0),J(O[L]),ee(),n=!0,T.play(K())},prev:function(){if(!T.support)return!1;R&&T.pause(),T.onDeselect(!0),--L<=0&&(L=O.length-1),J(O[L]),ee(),n=!0,T.play(K())},playlist:function(e,t){return!!T.support&&(void 0===e?O:(R&&T.pause(),X()&&T.onDeselect(!0),O=e,N=t&&t.q||"",L=null,B={},D(e,function(e,t){B[t.id]=e}),void function(e){g("audio_query",e),U&&(document.cookie=U+"q="+encodeURIComponent(e)+"; expires="+new Date(w()+864e5).toUTCString()+"; path="+V)}(N)))},addToPlaylist:function(e,t){var n={},i=t||O.length;O.forEach(function(e){return n[e.id]=!0}),e.forEach(function(e){n[e.id]||(t?O.splice(i,0,e):O.push(e))})},playlist_q:function(){return N},setIsPlaying:function(e){R=e},isAdsPlaying:function(){return M.isPlaying()},initSplash:function(){t||(window.audioRestrictionSplash=new d.RestrictionSplash,t=!0)}}}();window.Artist=s.Artist,window.audio=T,window.AudioBackgroundRestriction=A.AudioBackgroundRestriction;var M=new l.AudioAds(new u.AdsPlayerAdapter(T),null,!0);window.audioBackgroundRestriction=null,document.addEventListener("DOMContentLoaded",function(){(0,c.partConfigEnabled)("audio_mvk_background_restriction_enabled")&&(window.audioBackgroundRestriction=new A.AudioBackgroundRestriction)}),document.addEventListener("DOMContentLoaded",function(){"audio"===cur.module&&T.initSplash()}),window.page.onChange(function(){"audio"===cur.module?T.initSplash():window.audioRestrictionSplash&&window.audioRestrictionSplash.popup&&window.audioRestrictionSplash.close()})},"9HII":function(e,t,n){"use strict";var i=n("UxAg");window.AudioSpecialForYou={selector:".AudioSpecialForYou",setPlaying:function(e){var t=(0,i.$)(r.special);t&&t.classList.toggle(o.playing,e)}};var r={special:AudioSpecialForYou.selector},o={playing:"AudioSpecialForYou_playing"}},"9Hyc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("bZ/P")),r=s(n("Mc5h")),o=s(n("9y81")),a=s(n("AXyT"));function s(e){return e&&e.__esModule?e:{default:e}}function l(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n    <div class="','" ',">\n      ",'\n      <div class="Unfold__popup ScrollView ','">\n        ',"\n      </div>\n    </div>\n  "]);return l=function(){return e},e}var u=function(e){var t=i.default.class(e.mix,"Unfold",{position:e.position,asIcon:!!e.icon||!!e.icon_html,open:e.opened,withTitle:!!e.title}),n=function(e){var t,n=e.title;if(e.icon)t=(0,o.default)({icon:e.icon});else if(e.icon_html)t=e.icon_html;else{for(var a=e.items,s=a.length,l="",u="",c=0;c<s;c++){var d=a[c];if(d&&d.active){l=d.text,u=d.activeCount;break}}t=[(0,r.default)({mix:"Unfold__triggerText",tag:"h1",inner:[Wd.html({class:"Unfold__triggerContent",inner:n?[{class:"Unfold__triggerContentTitle",inner:n},{class:"Unfold__triggerContentSubTitle",inner:l}]:[l,u?Wd.html((0,r.default)({mix:"Unfold__triggerTextCount",inner:u})):""]})]}),(0,o.default)({mix:"Unfold__triggerIcon",icon:"reveal"})],t=i.default.list(t)}var A=e.opened?e.close_url:e.open_url;return Wd.html({href:A,class:"Unfold__trigger",onclick:["Unfold._onTriggerClick","event"],onmousedown:["Unfold._onTriggerMouseDown","this"],attrs:e.trigger_attrs,inner:Wd.wrap(t)})}(e),a=i.default.list(e.items,c),s=e.name&&i.default.attr("data-name",e.name);return i.default.html(l(),t,s,n,e.popup_class,a)};function c(e){if(!e)return"";var t="";return e.icon&&(t="string"==typeof e.icon?(0,o.default)({mix:"Unfold__itemIcon",icon:e.icon}):(0,r.default)({mix:i.default.class("Unfold__itemIcon",e.icon.class)})),(0,r.default)({mix:i.default.class(e.mix,"_touched","Unfold__item",{active:e.active,name:e.name,disabled:e.disabled}),url:e.url,tag:e.tag,attrs:e.attrs,inner:[t,(0,r.default)({mix:"Unfold__itemText",inner:[e.text,e.count?(0,r.default)({mix:"Unfold__itemCountHidden",inner:e.count}):""]}),e.count?(0,a.default)({mix:"Unfold__itemCount",gray:!0,value:e.count}):""]})}t.default=u},"9M99":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiToHTML=function(e){return(0,i.emojiMap)(e,l,{replaceSymbols:!0})},t.getEmojiHTML=l,t.emojiWithJoiners=t.emojiJoinersRegEx=t.imgEmoji=t.cssEmoji=void 0;var i=n("3I1p"),r={D83DDE0A:[0,":-)"],D83DDE03:[1,":-D"],D83DDE09:[2,";-)"],D83DDE06:[3,"xD"],D83DDE1C:[4,";-P"],D83DDE0B:[5,":-p"],D83DDE0D:[6,"8-)"],D83DDE0E:[7,"B-)"],D83DDE12:[8,":-("],D83DDE0F:[9,";-]"],D83DDE14:[10,"3("],D83DDE22:[11,":'("],D83DDE2D:[12,":_("],D83DDE29:[13,":(("],D83DDE28:[14,":o"],D83DDE10:[15,":|"],D83DDE0C:[16,"3-)"],D83DDE20:[17,">("],D83DDE21:[18,">(("],D83DDE07:[19,"O:)"],D83DDE30:[20,";o"],D83DDE33:[21,"8|"],D83DDE32:[22,"8o"],D83DDE37:[23,":X"],D83DDE1A:[24,":-*"],D83DDE08:[25,"}:)"],2764:[26,"<3"],D83DDC4D:[27,":like:"],D83DDC4E:[28,":dislike:"],"261D":[29,":up:"],"270C":[30,":v:"],D83DDC4C:[31,":ok:"]};t.cssEmoji=r;var o={D83DDE15:1,D83DDE1F:1,D83DDE2E:1,D83DDE34:1};t.imgEmoji=o;var a=/2640|2642|200D|200C/g;t.emojiJoinersRegEx=a;var s=["D83DDC71200D2640FE0F","D83DDC6E200D2640FE0F","D83DDC77200D2640FE0F","D83DDD75200D2640FE0F","D83DDE47200D2640FE0F","D83DDC81200D2642FE0F","D83DDE45200D2642FE0F","D83DDE46200D2642FE0F","D83DDE4E200D2642FE0F","D83DDE4D200D2642FE0F","D83DDC86200D2642FE0F","D83DDC87200D2642FE0F","D83DDEB6200D2640FE0F","D83CDFC3200D2640FE0F","D83CDFCB200D2640FE0F","26F9200D2640FE0F","D83CDFC4200D2640FE0F","D83CDFCA200D2640FE0F","D83DDEB5200D2640FE0F","D83DDEB4200D2640FE0F","D83DDC6F200D2642FE0F","D83CDFCC200D2640FE0F","D83DDE4B200D2642FE0F","D83DDC73200D2640FE0F","D83DDC82200D2640FE0F","D83CDFF3200DD83CDF08FE0F","D83EDD26D83CDFFB200D2642FE0F","D83EDD37D83CDFFB200D2640FE0F","D83EDD37D83CDFFB200D2642FE0F","D83EDD3DD83CDFFB200D2642FE0F","D83EDD3DD83CDFFB200D2640FE0F","D83EDD3ED83CDFFB200D2642FE0F","D83EDD3C200D2642FE0F","D83EDD38D83CDFFB200D2642FE0F","D83EDD37200D2642FE0F","D83EDD37D83CDFFC200D2642FE0F","D83EDD37D83CDFFD200D2642FE0F","D83EDD37D83CDFFE200D2642FE0F","D83EDD37D83CDFFF200D2642FE0F","D83EDD26200D2642FE0F","D83EDD26D83CDFFC200D2642FE0F","D83EDD26D83CDFFD200D2642FE0F","D83EDD26D83CDFFE200D2642FE0F","D83EDD26D83CDFFF200D2642FE0F","D83EDD37200D2640FE0F","D83EDD37D83CDFFC200D2640FE0F","D83EDD37D83CDFFD200D2640FE0F","D83EDD37D83CDFFE200D2640FE0F","D83EDD37D83CDFFF200D2640FE0F","D83EDD3D200D2642FE0F","D83EDD3DD83CDFFC200D2642FE0F","D83EDD3DD83CDFFD200D2642FE0F","D83EDD3DD83CDFFE200D2642FE0F","D83EDD3DD83CDFFF200D2642FE0F","D83EDD3D200D2640FE0F","D83EDD3DD83CDFFC200D2640FE0F","D83EDD3DD83CDFFD200D2640FE0F","D83EDD3DD83CDFFE200D2640FE0F","D83EDD3DD83CDFFF200D2640FE0F","D83EDD3E200D2642FE0F","D83EDD3ED83CDFFC200D2642FE0F","D83EDD3ED83CDFFD200D2642FE0F","D83EDD3ED83CDFFE200D2642FE0F","D83EDD3ED83CDFFF200D2642FE0F","D83EDD38200D2642FE0F","D83EDD38D83CDFFC200D2642FE0F","D83EDD38D83CDFFD200D2642FE0F","D83EDD38D83CDFFE200D2642FE0F","D83EDD38D83CDFFF200D2642FE0F","D83EDD19D83CDFFB","D83EDD19D83CDFFC","D83EDD19D83CDFFD","D83EDD19D83CDFFE","D83EDD19D83CDFFF","D83EDD1BD83CDFFB","D83EDD1BD83CDFFC","D83EDD1BD83CDFFD","D83EDD1BD83CDFFE","D83EDD1BD83CDFFF","D83EDD1CD83CDFFB","D83EDD1CD83CDFFC","D83EDD1CD83CDFFD","D83EDD1CD83CDFFE","D83EDD1CD83CDFFF","D83EDD26200D2640FE0F","D83EDD39200D2642FE0F","D83EDD39200D2640FE0F","D83DDC68200DD83DDE92FE0F","D83DDC69200DD83DDE92FE0F","D83DDC68200DD83CDFA4FE0F","D83DDC69200DD83CDFA4FE0F","D83DDC68200D2695FE0F","D83DDC69200D2695FE0F","D83DDC68200DD83CDF93FE0F","D83DDC69200DD83CDF93FE0F","D83DDC68200DD83CDFEBFE0F","D83DDC69200DD83CDFEBFE0F","D83DDC68200D2696FE0F","D83DDC69200D2696FE0F","D83DDC68200DD83CDF3EFE0F","D83DDC69200DD83CDF3EFE0F","D83DDC68200DD83CDF73FE0F","D83DDC69200DD83CDF73FE0F","D83DDC68200DD83DDD27FE0F","D83DDC69200DD83DDD27FE0F","D83DDC68200DD83CDFEDFE0F","D83DDC69200DD83CDFEDFE0F","D83DDC68200DD83DDCBCFE0F","D83DDC69200DD83DDCBCFE0F","D83DDC68200DD83DDD2CFE0F","D83DDC69200DD83DDD2CFE0F","D83DDC68200DD83DDCBBFE0F","D83DDC69200DD83DDCBBFE0F","D83DDC68200DD83CDFA8FE0F","D83DDC69200DD83CDFA8FE0F","D83DDC68200D2708FE0F","D83DDC69200D2708FE0F","D83DDC68200DD83DDE80FE0F","D83DDC69200DD83DDE80FE0F"];function l(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.match(a)){if(e=e.replace("FE0F","")+"FE0F",-1===s.indexOf(e)){for(var c=e.replace("FE0F","").split(a),d="",A=0;A<c.length;A++)c[A]&&(d+=l(c[A],u(c[A]),n));return d}t&&(t=t.replace(/\uFE0F/g,""),t+=u("FE0F"))}var f=window.devicePixelRatio>=2?"_2x":"";if(i&&void 0!=r[e]){var p=17*-r[e][0];return'<img src="/images/blank.gif" emoji="'+e+'" '+(t?'alt="'+t+'"':t)+' class="emoji_css" style="background-position: 0px '+p+'px;" />'}return o[e]||!t||n?'<img class="emoji" '+(t?'alt="'+t+'"':"")+' src="/images/emoji/'+e+f+'.png" />':t}function u(e){for(var t=Math.round(e.length/4),n="",i=0;t--;)n+=String.fromCharCode(parseInt(e.substr(i,4),16)),i+=4;return n}t.emojiWithJoiners=s},"9RP+":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("rKUZ")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("AWn4"));Object.assign(r.default,{redraw:function(){if(!store.mail.cur.peerId)return;var e=i.default.getElem("curConvo"),t=(0,r.uCurConvoTyping_getParams)();q.parseClass("typing",e.className).animation===t.animation?i.default.setTyping(e,t):e.outerHTML=(0,i.default)(t)}})},"9qLg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=window,a=o.getNotify,s=o.setNotify,l=o.setDocumentDomain,u=o.ce,c=o.onDOMReady,d=o.append,A=o.clog,f=o.extend,p=o.parseJSON,_=o.intval,h=o.each,m=window.ajax,v=window.nav,g=window.menu,y=window.mail,w=function(){var e=null,t={},n=1,o=null,b=!1,E=!1;function k(){n<64&&(n*=2)}function C(e,t){var n=window.al;if(!1===e&&(e=a()+(t||1)),s(e),window.al&&window.al.menu){var i=new Array(n.menu.length);i[3]=e,g.refreshCounters(i)}}function D(e){return Object.keys(e).some(function(e){return-1!==e.indexOf("attach")})||e.fwd||e.emoji||e.geo}function S(e,t,n){var i=toInt(e.from_admin)||null,r=toInt(v.getQuery("community"));return i&&r?r:2&t?window.vk.id:toInt(e.from)||n}function T(e){var t=new Date(1e3*e),n=t.getHours(),i=t.getMinutes();return n+":"+(i<10?"0":"")+i}function M(){return Number(v.getQuery("offset"))>0}function P(e){try{return JSON.parse(e)}catch(e){return null}}return{onNewMsg:(0,i.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags, isService }"),onEditMsg:(0,i.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags }"),onMsgReadByMe:(0,i.default)("msgId","dialogId"),onMsgReadByOther:(0,i.default)("msgId","dialogId"),onOnlineChange:(0,i.default)("{ userId, isOnline, onlinePlatform, lastActionTime }"),onTyping:(0,i.default)("dialogId","authorId"),onMultiTyping:(0,i.default)("peerId","userIds","totalCount"),onMsgImportantRemove:(0,i.default)("msgId"),onMsgImportantAdd:(0,i.default)("msgId"),onMsgRemove:(0,i.default)("msgId"),onMsgRestore:(0,i.default)("msgId"),onPeerKeyboard:(0,i.default)("peerId"),onPeerBanner:(0,i.default)("peerId"),onDialogImportant:(0,i.default)("peerId","isImportant"),onUnreadCount:(0,i.default)("count"),onResync:(0,i.default)(),isLongPollingEnabled:function(){return!!b},init:function(t){e||(l(),e=u("iframe",{src:t.frameUrl},{display:"none"}),c(function(){d(e,window.bodyNode),!0})),w.refreshParams(t),setTimeout(w.check,1e3)},on:function(){A("[longpoll] start"),b=!0,setTimeout(w.check,1e3)},off:function(){A("[longpoll] pause"),b=!1},refreshParams:function(e){f(t,e||{}),f(w,t)},getKey:function(){if(o)try{o.abort()}catch(e){}o=m.post("/mail",{_ajax:1,act:"im_get_key",community:v.getQuery("community")},{onDone:function(e){/[0-9a-f]{40}/i.test(e)?(w.refreshParams({key:e}),w.check()):A("[longpoll] invalid key")},onFail:function(e){setTimeout(w.getKey,1e3*n),A("[longpoll] from getKey delaying getKey for "+n+"secs"),k()}})},check:function(){if(b&&!E)if(w.makeRequest)try{w.makeRequest(function(e,t){if(E=!1,b)if(window.vk.__debug)w.checked(p(t))&&(w.check(),n=1);else try{w.checked(p(t))&&(w.check(),n=1)}catch(e){try{A("[longpoll] error",e.message||"no message",e.type||"no type",e.stack||"no stack")}catch(e){}setTimeout(w.check,1e3*n),k()}},function(){E=!1,setTimeout(w.check,1e3*n),k()}),E=!0}catch(e){A("[longpoll] makeRequest failed")}else setTimeout(w.check,1e3)},checked:function(e){var i=e.failed;if(1==i||t.ts>=e.ts+256){if(w.refreshParams({ts:e.ts}),i)return!0}else{if(2==i)return A("[longpoll] delaying getKey for "+n+"secs"),setTimeout(w.getKey,1e3*n),k(),!1;if(i)return void A("[longpoll]",e)}if(w.refreshParams({ts:e.ts}),e.updates){var o=[],a=!1;for(var s in e.updates){if(116==e.updates[s][0])var l=e.updates[s][1],u=[e.updates[s][0],l.id,l.flags,l.peer_id,l.date,l.title||"",l.message,l.kludges,l.random_id];else u=e.updates[s];var c=_(u[0]),d=_(u[1]),p=_(u[2]),g=_(u[3]);if(1===p){if(10===c){y.updateImportantDialog(d,!1);continue}if(12===c){y.updateImportantDialog(d,!0);continue}}if(8&p){if(2===c){if(window.isNewMail){w.onMsgImportantAdd(d);continue}y.updateImportantMessages(g,d,1);continue}if(3===c){if(window.isNewMail){w.onMsgImportantRemove(d);continue}y.updateImportantMessages(g,d,-1);continue}}if(51!=c)if(61!=c)if(62!=c)if(8!=c)if(9!=c)if(6!=c&&7!=c)if(80!=c||!d||v.getQuery("community"))if(52!=c){if(g)if(4!=c&&5!=c&&116!=c)if(0!=c)if(2!=c);else{if(128&p){if(window.isNewMail){w.onMsgRemove(d);continue}y.markAsDeleted(g,d)}window.isNewMail&&64&p&&w.onMsgRemove(d)}else{if(window.isNewMail){w.onMsgRemove(d);continue}y.markAsDeleted(d)}else{var b=5==c||116==c;if(window.isNewMail){var E=r(u,9),I=E[1],x=E[3],O=E[4],L=E[6],B=E[7],N=void 0===B?{}:B,R=E[8],F=D(N),j=T(O),H=toInt(N.from_admin)||null,U=(toInt(v.getQuery("community")),S(N,p,x)),V=!!N.source_act,z=N.keyboard?P(N.keyboard):null;if(b){var $={peerId:x,msgId:I,authorId:U,text:L,date:j,hasAttachments:F,flags:p,adminId:H,randomId:R};116==c?$.refreshed=1:$.edited=Math.floor(Date.now()/1e3),w.onEditMsg($)}else w.onNewMsg({peerId:x,msgId:I,authorId:U,text:L,date:j,hasAttachments:F,flags:p,adminId:H,randomId:R,isService:V,keyboard:z});continue}var q=window.vk,W=2&p?q.id:u[7]&&u[7].from||g,Y=u[7]&&u[7].source_act;a||(a=!!need("PinnedMsg").getByMsgId(d));var G=u[7].from_admin||Y||a?null:y.getMsgHTML(d,p,g,u[4],u[5],u[6],u[7],116!=c?b:"");if(G&&(b?y.replaceMessage(g,d,W,G):M()||y.addMessage(g,d,W,G),2&p||v.getQuery("community")||C(!1,1)),"chat_kick_user"===Y&&u[7].source_mid==q.id){var Q=u[3];y.unpinMessage(Q)}G&&"chat_pin_message"!==Y&&"chat_unpin_message"!==Y||o.push({peer:g,msg_id:d,from_id:W,source_act:Y,edited:b})}}else{var X=r(u,3),K=X[1],J=X[2];if(!window.isNewMail)continue;11==K&&w.onPeerKeyboard(J),10==K&&w.onPeerBanner(J)}else C(d);else{if(window.isNewMail){var Z=u[1],ee=u[2];6===c?w.onMsgReadByMe(ee,Z):w.onMsgReadByOther(ee,Z);continue}y.markPeerAsRead(d,p,7==c)}else{if(window.isNewMail){w.onOnlineChange({userId:-d,isOnline:!1,lastActionTime:g});continue}y.updateOnline(-d,0)}else{if(window.isNewMail){w.onOnlineChange({userId:-d,isOnline:!0,onlinePlatform:7===(p||7)?"desktop":"mobile"});continue}y.updateOnline(-d,p||7)}else{if(window.isNewMail){var te=2e9+p,ne=d;w.onTyping(te,ne);continue}y.typing(2e9+p,d)}else{if(window.isNewMail){var ie=d,re=d;w.onTyping(ie,re);continue}y.typing(d)}}if(o.length){var oe=[];h(o,function(e,t){oe.push(t.msg_id)});var ae={_ajax:1,act:"get_messages",msgs:oe.join(","),community:v.getQuery("community")};a&&(ae.force_pinned=1),m.post("/mail",ae,{onDone:function(e,t){var n=window.cur,i=M();h(o,function(t,n){var r=e[n.msg_id],o=n.peer;r.text&&!i&&(n.edited?y.replaceMessage(n.peer,n.msg_id,n.from_id,r.text):y.addMessage(n.peer,n.msg_id,n.from_id,r.text)),r.unpin&&y.unpinMessage(o),r.pinned&&y.pinMessage(o,r.pinned)}),t&&(t.play_animation_msg_id&&StickersAnimation?StickersAnimation.loadStickerInMvkIMAndPlay(t.play_animation_msg_id):(f(n,t),y.updateStickers()))}})}}return!0}}}(),b=w;t.default=b},"9y81":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"IconWd",{enumerable:!0,get:function(){return i.IconWd}}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("EMnU"));n("vfU8");var r=i.default;t.default=r,window.Icon=i.default},"A+9M":function(e,t,n){"use strict";var i=window,r=i.hide,o=i.lockButton,a=i.gpeByClass,s=window.ajax;window.FeedNotifications={webActionsAcceptHandlers:{reveal_bdya:function(e,t,n,i,r){var o=a("_block",e);return s.post("profileEdit.php",{act:"reveal_birthday",from:"feed_assistance",hash:r},{onDone:function(e){var t=window.Snackbar;t&&t.init&&t.init({text:e.msg}),remove(o)}}),!0}},webActionsDeclineHandlers:{},withoutNavActions:["enable_browser_notifications","reveal_bdya"],hide:function(e,t,n,i,l,u,c,d){var A={_ajax:1,act:"hide_internal_notification",reason:i,id:t,hash:n},f={},p=a("_block",e),_=!0;if("decline"==i){var h=this.webActionsDeclineHandlers[u];_=this.runActionHandler(h,e,A,f,c,n),r(p)}else{var m=this.webActionsAcceptHandlers[u];_=this.runActionHandler(m,e,A,f,c,n),o(e),"add_custom_newsfeed"==u&&(setCookie("remixcustom_feed_added",c),A.action=u,A.action_section=c.section,A.action_hash=c.hash)}return f.onDone=function(){"compact"===d&&"accept"===i||cur.destroy.push(function(){return remove(p)}),~this.withoutNavActions.indexOf(u)||nav.go(e,l)}.bind(this),f.onFail=function(){unlockButton(e)},Promise.resolve(_).then(function(e){(e||isUndefined(e))&&s.post("/index.php",A,f)}),!1},runActionHandler:function(e,t,n,i,r,o){return!isFunction(e)||e(t,n,i,r,o)},addWebActionAcceptHandler:function(e,t){this.webActionsAcceptHandlers[e]=t},addWebActionDeclineHandler:function(e,t){this.webActionsDeclineHandlers[e]=t}}},ACAL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=i.default.open(e,t,{hash:n}),c=a,d=$(".Popup__wrap",r),a.swipeDown&&window.innerWidth<o&&(setStyle.transform(d,1,[0,0]),scrollTop(0),addEvent(d,"touchstart",f,{passive:!0}),addEvent(d,"touchmove",_,{capture:!0}),addEvent(d,"touchcancel touchend",h,{passive:!0}))},t.close=A;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("r/ag"));var r,o=882,a=!1,s=null,l=0,u=0,c={},d=$(".Popup__wrap",r);function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.closest(".ModalMenu");innerWidth<o?(i.default.close(n,{smooth:!0}),t.onClose&&t.onClose()):setTimeout(function(){i.default.close(n),t.onClose&&t.onClose()}),removeEvent(d,"touchstart",f,{passive:!0}),removeEvent(d,"touchmove",_,{capture:!0}),removeEvent(d,"touchcancel touchend",h,{passive:!0}),s=null,l=0,p=!1,u=0,r=null,d=null,c={}}function f(e){if(e.touches&&e.touches.length>1)a=!1;else{var t=e.target.closest(".ScrollView")||$(".ScrollView",e.target);$(".ModalMenu").classList.contains("ModalMenu--blocked")||(s=e.touches[0],l=e.touches[0].clientY,a=!(t&&t.scrollTop>1))}}var p=!1;function _(e){if(e.touches&&e.touches.length>1)a=!1;else if(s&&a){var t=e.touches[0],n=-Math.min(0,l-t.clientY);0!==n&&(cancelEvent(e),u=n,p||(r.classList.add("ModalMenu--dragging"),p=!0),setStyle.transform(d,1,[0,n]))}}function h(){a&&(a=!1,r.classList.remove("ModalMenu--dragging"),u>d.clientHeight/3?A(r,c):(r.classList.add("ModalMenu--restore"),setStyle.transform(d,1,[0,0]),setTimeout(function(){r&&r.classList.remove("ModalMenu--restore")},200)))}addEvent(window,"keydown",function(e){var t=$(".ModalMenu");if(t)switch(e.keyCode){case 27:A(t)}})},AWn4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uCurConvoTyping_getParams=a,t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("rKUZ")),r=n("7jQU");var o=function(){return(0,i.default)(a())};function a(){var e,t,n=store.mail.cur.peerId,i=(0,r.uTyping_getPeerTyping)(n);return i&&("mixed"===i.type?(e="dots",t="mixed"):"audio"===i.type?(e="audio",t="audio"):"text"===i.type&&(e="dots",t="")),{id:"curConvo",typing:(0,r.uTyping_getNames)(i),typingCount:i?i.count:0,dimmed:!0,animation:e,text:t}}t.default=o},AXyT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("WTJf"));n("I/8u");var r=i.default;t.default=r,Object.assign(window,{Oval:i.default,Oval_isHidden:i.OvalIsHidden})},AeId:function(e,t,n){"use strict";var i=window,r=i.ge,o=i.attr,a=(i.clog,i.lsCheck),s=i.isEmpty,l=i.vkNow,u=i.lsGet,c=i.intval,d=i.lsSet,A=i.extend,f=i.hasClass,p=i.gpeByClass,_=i.each,h=i.geByClass,m=i.addClass,v=i.checkPostsSeen,g=i.hashCode,y=window.ajax,w=window.nav,b={_seen:{},_saved:{},_saveTimer:null,_sendTimer:null,_cleanTimer:null,LS_ADS_EVENTS:"ads.events",postsGetRaws:function(e){var t,n=(e=r(e)).id||"",i=o(e,"data-copy")||"",a={};if("block_"===n.substr(0,6)){a[n]=1,a.block=n.substr(6);var s=o(e,"data-contain");s&&(s=s.split(",")).forEach(function(e){e=e.split(":"),a[e[0]]=c(e[1])||1})}else(t=n.match(/^wall(adsite.*)$/))?a[t[1]]=1:(t=n.match(/^wall(-?\d+_\d+)$/))&&(a[t[1]]=1,(t=i.match(/^(-?\d+_\d+)$/))&&(a[t[1]]=-1));var l=o(e,"data-ad-view");return l&&(a["ad_"+l]=1),a.height=e.offsetHeight,a.index=indexOf(domPN(e).children,e)-1,a},seen:function(e){var t,n,i,r,o,a,s;window.vk.id&&e.length&&(window._postsExtras||(window._postsExtras={}),e.forEach(function(e,l){o=e.index,s=e.block,a=e.height,Object.keys(e).forEach(function(l){"index"!==l&&"block"!==l&&"height"!==l&&"viewportHeight"!==l&&(n=e[l],i=b._seen[l],-1===(r=b._saved[l])||-1===i||1===n&&(r||i)||(t=b._seen[l]=n,_postsExtras[l]={index:o,block:s,height:a,viewportHeight:getCh()}))})}),t&&(clearTimeout(b._saveTimer),b._saveTimer=setTimeout(b.save,2500),clearTimeout(b._sendTimer),b._sendTimer=setTimeout(b.send,5e3)))},save:function(){if(!a()||s(b._seen))return b._seen;var e,t,n,i,r,o=window.vk,A=Math.floor((o.ts+Math.floor((l()-o.started)/1e3))/3600),f=u("posts_sent")||{},p=u("posts_seen")||{},_=u("posts_extras")||{};for(t in window._postsExtras||(window._postsExtras={}),b._seen)r=b._seen[t],_postsExtras[t]&&(_[t]={index:_postsExtras[t].index,block:_postsExtras[t].block,height:_postsExtras[t].height,viewportHeight:_postsExtras[t].viewportHeight},delete window._postsExtras[t]),"ad"!==(n=t.split("_"))[0]&&"adsite"!==n[0]&&"block"!==n[0]&&(n[0]=c(n[0]),n[1]=c(n[1])),i=(f[n[0]]||{})[n[1]],n[0]!=o.id&&(!i||-1==r&&i>0)&&(p[n[0]]||(p[n[0]]={}),(!p[n[0]][n[1]]||-1==r&&p[n[0]][n[1]]>0)&&(e=p[n[0]][n[1]]=A*r)),b._saved[t]=r;b._seen={},e&&(d("posts_seen",p),d("posts_extras",_))},getSeenData:function(){var e,t,n,i={},s={},l=[];if(a())i=u("posts_seen"),s=u("posts_extras")||{};else for(e in n=b.save()){var d=n[e],A=e.split("_");A[0]=c(A[0]),A[0]&&(A[1]=c(A[1])),i[A[0]]||(i[A[0]]={}),(!i[A[0]][A[1]]||-1==d&&i[A[0]][A[1]]>0)&&(i[A[0]][A[1]]=d)}for(e in i){for(t in n=[],i[e]){var f=i[e][t]>0?t:-t,p=s[e+"_"+t],_="";p?(_+=":"+(p.index||""),_+=":"+(p.block||""),_+=":"+(p.height||""),_=(_+=":"+(p.viewportHeight||"")).replace(/:+$/,"")):_="","block"!==e||cur._pstatbref||(cur._pstatbref=o(r(e+"_"+t),"data-ref")),n.push(f+_)}n.length&&l.push(e+"_"+n.join(","))}return l.length?{seen:i,data:l.join(";")}:""},onSend:function(e){if(!a())return A(b._saved,b._seen);var t,n,i=u("posts_seen")||{},r=u("posts_sent")||{};for(t in e){for(n in e[t])r[t]||(r[t]={}),-1!=r[t][n]&&(r[t][n]=e[t][n]),(i[t]||{})[n]&&delete i[t][n];i[t]&&s(i[t])&&delete i[t]}d("posts_seen",i),d("posts_sent",r),clearTimeout(b._cleanTimer),b._cleanTimer=setTimeout(b.clean,1e4)},send:function(){var e=window.cur,t=window.vk,n=b.getSeenData();if(n.data){if(!t.id)return b.clear();var i="";!w||"/feed?section=podcasts"!==w.cur&&"/feed/podcasts"!==w.cur?e&&e.module?i=e.module:w&&"/feed"==w.cur&&(i="feed"):i="feed_podcasts";var r={_ajax:1,act:"ping",_pstat:n.data,_pstatref:i};e._pstatbref&&(r._pstatbref=e._pstatbref),y.post("/",r,{onDone:function(){b.onSend(n.seen)}}),delete e._pstatbref}},clean:function(){var e,t,n,i=window.vk,r=Math.floor((i.ts+Math.floor((l()-i.started)/1e3))/3600),o=u("posts_sent")||{};for(e in o){for(t in o[e])r-((n=o[e][t])>0?n:-n)>24&&delete o[e][t];s(o[e])&&delete o[e]}d("posts_sent",o),b.cleanAdsEvents()},clear:function(){d("posts_seen",{}),d("posts_sent",b._saved=b._seen={}),d(b.LS_ADS_EVENTS,b._lsAdsEvents={})},getStatsObj:function(e){return e=r(e),f("_stats_cont",e)?e:p("_stats_cont",e)},getAdsEvents:function(){var e=b._lsAdsEvents;return e||(e=b._lsAdsEvents=u(b.LS_ADS_EVENTS)||{}),e},cleanAdsEvents:function(){var e=b.getAdsEvents(),t=(new Date).getTime()/1e3|0,n=!1;_(e,function(i,r){t-r>=3600&&(delete e[i],n=!0)}),n&&d(b.LS_ADS_EVENTS,e)},checkPixelEvent:function(e,t){var n=e.getAttribute("data-ad-block-uid"),i=-1!==indexOf(["load","impression"],t);if(!n||!i)return!0;try{var r=g(""+t+n),o=b.getAdsEvents();if(o[r])return!1;var a=(new Date).getTime()/1e3|0;o[r]=a,d(b.LS_ADS_EVENTS,o)}catch(e){try{console.log(e.message)}catch(e){}}return!0},getPixelElements:function(e,t){var n=[];return _(h(t,e),function(){o(this,"data-src")&&n.push(this)}),n},sendPixels:function(e){_(e,function(){o(this,"src",o(this,"data-src")),o(this,"data-src",!1),m("_cntr",this)})},viewed:function(e){if(e=b.getStatsObj(e)){var t=b.getPixelElements(e,"_cntr_view");t.length&&b.checkPixelEvent(e,"impression")&&b.sendPixels(t)}},clicked:function(e){if(e=b.getStatsObj(e)){o(e,"data-clicked","1");var t=b.getPixelElements(e,"_cntr_click");t.length&&b.sendPixels(t),v()}}};b._sendTimer||(b._sendTimer=setTimeout(b.send,1e4)),window.pStats=b},AgBx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("3JOE"));n("QMH7");var r=i.default;t.default=r,window.ScrollView=i.default},AgYL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skinToneModifierRegex=t.EMOJI_REPLACES=t.EMOJI_PREFIXED_REPLACES=t.EMOJI_SECTIONS=t.emojiRegex=void 0;t.emojiRegex=function(){return/(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g};t.EMOJI_SECTIONS={1:["😀","😃","😄","😁","😅","😆","😂","🤣","😉","😊","☺","🙂","🙃","😇","😗","😙","😚","😘","😍","🥰","🤩","🤗","😋","😜","🤪","😛","😝","🤑","🤭","🤐","🤫","😶","🤔","🤨","🧐","😐","😑","🙄","😬","🤥","😏","😌","🤤","😴","🤓","😎","🥳","🤠","😒","😔","😪","😕","😟","🙁","☹","😮","😯","😲","😳","🥺","😦","😧","😨","😰","😥","😢","😭","😱","😖","😣","😞","😓","😩","😫","😷","🤒","🤕","🤢","🤮","🤧","🥶","🥵","🥴","😵","🤯","😤","😠","😡","🤬","😈","👿","💀","☠","💩","🤡","👹","👺","👻","👽","👾","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🙈","🙉","🙊"],2:["🐵","🐒","🦍","🐶","🐕","🐩","🐺","🦊","🦝","🐱","🐈","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🐮","🐂","🐃","🐄","🐷","🐽","🐖","🐗","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🐿","🦔","🦇","🐻","🐨","🐼","🦘","🦡","🐾","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊","🦅","🦆","🦢","🦉","🦚","🦜","🐸","🐊","🐢","🦎","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🐟","🐠","🐡","🦈","🐙","🦀","🦞","🦐","🦑","🐚","🐌","🦋","🐛","🐜","🐝","🐞","🦗","🕷","🕸","🦂","🦟","🦠","💐","🌸","💮","🏵","🌹","🥀","🌺","🌻","🌼","🌷","🌳","🌲","🎄","🌴","🌵","🌾","🌱","🌿","☘","🍀","🍁","🍂","🍃","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌡","☀","🌝","🌞","⭐","🌟","🌠","☁","⛅","⛈","🌤","🌥","🌦","🌧","🌨","🌩","🌪","🌫","🌬","💨","🌀","🌈","🌂","☂","☔","⛱","⚡","❄","☃","⛄","☄","🔥","💦","💧","🌊"],3:["👍🏻","👎🏻","👌🏻","✌🏻","🤞🏻","🤟🏻","🤘🏻","🤙🏻","🖕🏻","✊🏻","👊🏻","🤛🏻","🤜🏻","👈🏻","👉🏻","👆🏻","👇🏻","☝🏻","👋🏻","🤚🏻","🖐🏻","✋🏻","🖖🏻","👏🏻","🙌🏻","👐🏻","🤲🏻","🤝🏻","🙏🏻","💪🏻","🦵🏻","🦶🏻","👂🏻","👃🏻","🧠","🦷","🦴","👀","👁","👅","👄","✍","💅","🤳","👫","👭","👬","👩‍❤️‍💋‍👨","👨‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍❤️‍👨","👨‍❤️‍👨","👩‍❤️‍👩","👪","👶","🧒","👦","👧","🧑","👱","👨","🧔","👱‍♂️","👨‍🦰","👨‍🦱","👨‍🦳","👨‍🦲","👩","👱‍♀️","👩‍🦰","👩‍🦱","👩‍🦳","👩‍🦲","🧓️","👴️","👵️","🙍‍♂️️","🙍‍♀️️","🙎‍♂️","🙎‍♀️️","🙅‍♂️","🙅‍♀️","🙆‍♂️","🙆‍♀️","💁‍♂️","💁‍♀️️","🙋‍♂️","🙋‍♀️️","🙇‍♂️","🙇‍♀️️","🤦‍♂️","🤦‍♀️","🤷‍♂️","🤷‍♀️","💆‍♂️️","💆‍♀️","💇‍♂️️","💇‍♀️","🚶‍♂️️","🚶‍♀️️","🏃‍♂️️","🏃‍♀️","💃","🕺","🕴️","👯‍♂️️","👯‍♀️","🧖‍♂️","🧖‍♀️️","👼","🎅","🤶","🦸‍♂️","🦸‍♀️","🦹‍♂️","🦹‍♀️","🧙‍♂️","🧙‍♀️","🧚‍♂️","🧚‍♀️","🧛‍♂️","🧛‍♀️","🧜‍♂️","🧜‍♀️","🧝‍♂️","🧝‍♀️","🧞‍♂️","🧞‍♀️","🧟‍♂️","🧟‍♀️","👨‍⚕️","👩‍⚕️","👨‍🎓","👩‍🎓","👨‍🏫","👩‍🏫","👨‍⚖️","👩‍⚖️","👨‍🌾","👩‍🌾","👨‍🍳","👩‍🍳","👨‍🔧","👩‍🔧","👨‍🏭","👩‍🏭","👨‍💼","👩‍💼","👨‍🔬","👩‍🔬","👨‍💻","👩‍💻","👨‍🎤","👩‍🎤","👨‍🎨","👩‍🎨","👨‍✈️","👩‍✈️","👨‍🚀","👩‍🚀","👨‍🚒","👩‍🚒","👮‍♂️","👮‍♀️","🕵️‍♂️","🕵️‍♀️","💂‍♂️","💂‍♀️","👷‍♂️","👷‍♀️","🤴","👸","👳‍♂️","👳‍♀️","👲","🧕","🤵","👰","🤰","🤱","🛀","🛌"],4:["🍏","🍎","🍐","🍅","🥝","🍑","🍒","🍓","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🥭","🥥","🥑","🍆","🥔","🥕","🌽","🌶","🥒","🥬","🥦","🍄","🥜","🌰","🍞","🥐","🥖","🥨","🥯","🥞","🧀","🍖","🍗","🥩","🥓","🍔","🍟","🍕","🌭","🥪","🌮","🌯","🥙","🥚","🍳","🥘","🍲","🥣","🥗","🍿","🧂","🥫","🍱","🍘","🍙","🍚","🍛","🍜","🍝","🍠","🍢","🍣","🍤","🍥","🥮","🍡","🥟","🥠","🥡","🍦","🍧","🍨","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍼","🥛","☕","🍵","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🥢","🍽","🍴","🥄"],5:["⚽","⚾","🥎","🏀","🏐","🏈","🏉","🎾","🥏","🎳","🏏","🏑","🏒","🥍","🏓","🏸","🥊","🥋","🥅","⛳","⛸","🎣","🎽","🛹","🎿","🛷","🥌","🎯","🎱","🎮","🕹","🎰","🎲","🧩","♟","🧗‍♂️️","🧗‍♀️","🤺","🏇","⛷","🏂","🏌️‍♂️","🏌️‍♀️","🏄‍♂️","🏄‍♀️","🚣‍♂️","🚣‍♀️","🏊‍♂️","🏊‍♀️","⛹️‍♂️","⛹️‍♀️","🏋️‍♂️","🏋️‍♀️","🚴‍♂️","🚴‍♀️","🚵‍♂️","🚵‍♀️","🤸","🤼‍♂️","🤼‍♀️","🤽‍♂️","🤽‍♀️","🤾‍♂️","🤾‍♀️","🤹‍♂️","🤹‍♀️","🧘‍♂️","🧘‍♀️","🎖","🏆","🏅","🥇","🥈","🥉"],6:["🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚌","🚍","🚎","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🏎","🏍","🛵","🚲","🛴","🚏","🛣","🛤","🛢","⛽","🚨","🚥","🚦","🛑","🚧","⚓","⛵","🛶","🚤","🛳","⛴","🛥","🚢","✈","🛩","🛫","🛬","💺","🚁","🚟","🚠","🚡","🛰","🚀","🛸","🌍","🌎","🌏","🌐","🗺","🗾","🧭","🏔","⛰","🌋","🗻","🏕","🏖","🏜","🏝","🏞","🏟","🏛","🏗","🧱","🏘","🏚","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","🏩","🏪","🏫","🏬","🏭","🏯","🏰","💒","🗼","🗽","⛪","🕌","🕍","⛩","🕋","⛲","⛺","🌁","🌃","🏙","🌄","🌅","🌆","🌇","🌉","♨","🌌","🎠","🎡","🎢","💈","🎪"],7:["🎙","🎚","🎛","🎤","🎧","📻","🎷","🎸","🎹","🎺","🎻","🥁","📯","🎭","🖼","🎨","🧵","🧶","🔮","🧿","🧸","🃏","🀄","🎴","🎃","🎆","🎇","🧨","🎈","🎉","🎊","🎋","🎍","🎎","🎏","🎐","🎑","🧧","🎀","🎁","🎗","🎟","🎫","🛎","🧳","⌛","⏳","⌚","⏰","⏱","⏲","🕰","👓","🕶","🥽","🥼","👔","👕","👖","🧣","🧤","🧥","🧦","👗","👘","👙","👚","👛","👜","👝","🛍","🎒","👞","👟","🥾","🥿","👠","👡","👢","👑","👒","🎩","🎓","🧢","⛑","📿","💄","💍","💎","📱","📲","☎","📞","📟","📠","🔋","🔌","💻","🖥","🖨","⌨","🖱","🖲","💽","💾","💿","📀","🧮","🎥","🎞","📽","🎬","📺","📷","📸","📹","📼","🔍","🔎","🕯","💡","🔦","🏮","📔","📕","📖","📗","📘","📙","📚","📓","📒","📃","📜","📄","📰","🗞","📑","🔖","🏷","💰","💴","💶","💷","💸","💳","🧾","💹","💱","💲","✉","💌","📧","📨","📩","📤","📥","📦","📫","📪","📬","📭","📮","🗳","✏","✒","🖋","🖊","🖌","🖍","📝","💼","📁","📂","🗂","📅","📆","🗒","🗓","📇","📈","📉","📊","📋","📌","📍","📎","🖇","📏","📐","✂","🗃","🗄","🗑","🔒","🔓","🔏","🔐","🔑","🗝","🔨","⛏","⚒","🛠","🗡","⚔","🔪","🔫","🏹","🛡","🔧","🔩","⚙","🗜","⚖","🔗","⛓","🧰","🧲","⚗","🧪","🧫","🧬","🔬","🔭","📡","💉","💊","🚪","🛏","🛋","🚽","🚿","🛁","🧴","🧷","🧹","🧺","🧻","🧼","🧽","🧯","🛒","🚬","⚰","⚱","🏺","🗿"],8:["💋","❤","💔","❣","💘","💝","💖","💗","💓","💞","💕","💟","💜","🧡","💛","💚","💙","🖤","💯","💢","💥","💫","🕳","💣","💬","👁️‍🗨️","🗨","🗯","💭","💤","🗣","👤","👥","👣","🔇","🔊","📢","📣","🔔","🔕","🎼","🎵","🎶","⚠","🚸","☢","☣","🆚","🆒","🆓","🆕","🚮","🚾","🚭","✅","⚕","🔱","‼","⁉","❓","❗","🆘","⛔","🚫","🚳","🚯","🚱","🚷","📵","🔞"],9:["🇷🇺","🇰🇿","🇧🇾","🇺🇦","🇲🇳","🇬🇪","🇦🇿","🇹🇯","🇧🇷","🇱🇹","🇱🇻","🇪🇪","🇦🇲","🏁","🚩","🎌","🏴","🏳","🏳️‍🌈","🏴‍☠️","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇨","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇺","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇬","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼"]};t.EMOJI_PREFIXED_REPLACES={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g};t.EMOJI_REPLACES={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g};t.skinToneModifierRegex=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/},AkSq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("P3wa")),r=n("XUaJ");var o=i.default;t.default=o,window.WarningModal=i.default,extend(i.default,{close:r.close,leave:r.leave})},Au5b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));var r={setChecked:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l(e).checked=t},isChecked:function(e){return l(e).checked}},o=r;t.default=o,r._onChange=s;var a={control:".Control",native:".Control__native"};function s(e,t){i.default.handle(t,{$control:e.closest(a.control),name:e.name,checked:e.checked,value:e.value})}function l(e){return e.$(a.native)}},B34N:function(e,t,n){"use strict";var i=l(n("z9sQ")),r=n("OcsD"),o=l(n("wMVj")),a=l(n("29dZ")),s=l(n("jk6M"));function l(e){return e&&e.__esModule?e:{default:e}}var u={onTemplateInput:function(e,t,n,r){var o=$("."+n),a=r-t.value.length;o.textContent=a,o.className=i.default.class(n,{error:a<=0})},onButtonMouseDown:function(e,t){s.default.safari_mobile||e.preventDefault()},onButtonClick:function(e,t,n){var i=$(".MailTemplatePage__TextTextarea"),r=i.value,o=i.selectionStart,a=i.selectionEnd;i.value=r.slice(0,o)+n+r.slice(a);var s=o+n.length;i.selectionStart=i.selectionEnd=s},onSave:function(e,t,n,i,s){var l=$(".MailTemplatePage__NameInput .TextInput__native"),u=$(".MailTemplatePage__TextTextarea");a.default.setLoading(t,!0),(0,r.ajaxRequest)("/mail",{act:"save_template",name:l.value,text:u.value,hash:i,id:n},function(e){if(e){if(e.error){var i=$(".MailTemplatePage__ErrorRow"),r=$(".MailTemplatePage__ErrorText");return a.default.setLoading(t,!1),i.hidden=!1,void(r.textContent=e.message)}if(store.mail.cur&&store.mail.cur.templates){var l=store.mail.cur.templates,u=n?l.findIndex(function(e){return e.id===n}):-1;-1!==u?l.splice(u,1,e.result):l.push(e.result)}o.default.go(s)}},function(){a.default.setLoading(t,!1)})},onSubmit:function(e){e.preventDefault()}};window.MailTemplatePage=u},B5sG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("bYEY")),r=n("DkIl");var o=function(){var e=store.mail.cur.peerId,t=store.mail.cur.page;if(e)return function(e){var t=store.mail,n=t.peers[e],i=e>2e9,o={title:n.title,photos:n.avatarImages,actions:function(e){var t=store.mail,n=t.peers[e].actionUrls,i=t.peers[e].isChannel,r=[];r=e>-2e9&&e<0?[a("showMedias",n.showMedia),a("deleteHistory",n.flushHistory),a("blockCommunity",n.blockCommunity),a("unblockCommunity",n.unblockCommunity),a("blockNotify",n.blockNotify)]:e>2e9?[a("chatInfo",n.chatInfo,"",i),a("chatAdd",n.addToChat),a("inviteLink",n.inviteLink,"",i),a("showMedias",n.showMedia),n.unpinMsg?a("chatUnpinMsg",n.unpinMsg):"",n.unpinMsg?a("chatShowPinnedMsg",null,'onmousedown="uMessenger.onShowPinnedMsgClick()"'):"",n.unpinMsg?a("chatHidePinnedMsg",null,'onmousedown="uMessenger.onHidePinnedMsgClick()"'):"",a("chatDeleteHistory",n.flushHistory),a("chatReturn",n.returnToChat,"",i),a("chatLeave",n.leaveChat,"",i)]:t.cur.groupId?[a("showMedias",n.showMedia),a("markAsAnswered",n.communityMarkAsAnswered),n.isDialogImportant?a("removeImportantMark",n.communityToggleImportant):a("markAsImportant",n.communityToggleImportant),n.isBlacklisted?a("unbanUser",n.userBan):a("banUser",n.userBan),a("deleteHistory",n.flushHistory)]:[a("showMedias",n.showMedia),a("deleteHistory",n.flushHistory)];return r}(e),editing:t.cur.editing};if(i){var s=i?e-2e9:null;if(o.url="/mail?act=info&chat=".concat(s),o.membersCount=n.countMembers,o.hasPinnedMsg=n.hasPinnedMsg,o.isChannel=n.isChannel,o.isChannel){var l=-n.ownerId;o.url="/club".concat(l)}}else o.url=n.profileUrl,o.isOnline=n.isOnline,o.onlinePlatform=n.onlinePlatform,o.offlineText=n.offlineText;return(0,r.MailHat_convo)(o)}(e);if(t)return function(e){return(0,r.MailHat_page)(e)}(t);return function(){var e=store.mail.cur,t=Math.abs(e.groupId),n=t?"&community=".concat(t):"",o=t?"?community=".concat(t):"";return(0,r.MailHat_main)({folder:e.folder,urls:{all:"/mail".concat(o),unrespond:"/mail?act=unrespond".concat(n),unread:"/mail?act=unread".concat(n),important:"/mail?act=important".concat(n),createChatUrl:"/mail?act=new_chat"},unreadCount:e.countUnread,importantCount:e.countImportant,withUnrespond:!!t,forwarding:!!e.forwardFromId,notifier:(0,i.default)()})}()};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=window.lang;if(!t&&!n)return null;var o={showMedias:[r.mobile_mail_show_medias,"attach"],deleteHistory:[r.mobile_mail_delete_history,"delete"],blockCommunity:[r.mobile_mail_block_community,"block"],blockNotify:[r.mobile_mail_block_community_notify,"block"],unblockCommunity:[r.mobile_mail_unblock_community,"allow"],chatAdd:[r.mobile_mail_add_to_chat,"plus"],chatUnpinMsg:[r.mobile_mail_unpin_msg,"unpin","unpin"],chatShowPinnedMsg:[r.mobile_mail_pin_show,"show","showPinned"],chatHidePinnedMsg:[r.mobile_mail_pin_hide,"hide","hidePinned"],chatInfo:[r.mobile_mail_chat_info,"info"],chatDeleteHistory:[r.mobile_mail_delete_chat_history,"delete"],chatReturn:[i?r.mobile_mail_return_to_channel:r.mobile_mail_chat_return,"revert","returnToChat"],chatLeave:[i?r.mobile_mail_channel_leave:r.mobile_mail_chat_leave,"close16","leaveChat"],markAsAnswered:[r.mobile_mail_mark_as_answered,"answered"],removeImportantMark:[r.mobile_mail_remove_important_mark,"important"],markAsImportant:[r.mobile_mail_mark_as_important,"important"],unbanUser:[r.mobile_settings_blacklist_unban_user,"allow"],banUser:[r.mobile_settings_blacklist_ban_user,"block"],inviteLink:[i?r.mobile_mail_channel_invite_link:r.mobile_mail_invite_link,"invite"]},a={text:o[e][0],icon:o[e][1],attrs:n,url:t};return o[e][2]&&(a.name=o[e][2]),a}t.default=o},B9v3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActionsPanel",{enumerable:!0,get:function(){return i.ActionsPanel}}),Object.defineProperty(t,"setBookmarkState",{enumerable:!0,get:function(){return r.setBookmarkState}}),t.default=void 0;var i=o(n("JYMJ")),r=o(n("qsX6"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}window.Share=r.default,extend(r.default,{setBookmarkState:r.setBookmarkState});var a=i.default;t.default=a},"BJQ+":function(e,t,n){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=setTimeout;function i(){}function r(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,u._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void a(t.promise,e)}o(t.promise,i)}else(1===e._state?o:a)(t.promise,e._value)})):e._deferreds.push(t)}function o(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===t(n)||"function"==typeof n)){var i=n.then;if(n instanceof u)return e._state=3,e._value=n,void s(e);if("function"==typeof i)return void l(function(e,t){return function(){e.apply(t,arguments)}}(i,n),e)}e._state=1,e._value=n,s(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&u._immediateFn(function(){e._handled||u._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}function u(e){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}var c=u.prototype;c.catch=function(e){return this.then(null,e)},c.then=function(e,t){var n=new this.constructor(i);return r(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},u.all=function(e){return new u(function(n,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);var o=r.length;function a(e,s){try{if(s&&("object"===t(s)||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(t){a(e,t)},i)}r[e]=s,0==--o&&n(r)}catch(e){i(e)}}for(var s=0;s<r.length;s++)a(s,r[s])})},u.resolve=function(e){return e&&"object"===t(e)&&e.constructor===u?e:new u(function(t){t(e)})},u.reject=function(e){return new u(function(t,n){n(e)})},u.race=function(e){return new u(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},u._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){n(e,0)},u._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},window.Promise||(window.Promise=u)}).call(this,n("URgk").setImmediate)},"BJj/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t,n){var i;return function(){var r=this,o=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,o)},t),a&&e.apply(this,o)}}},BKxg:function(e,t,n){"use strict";a(n("+cqQ"));var i=a(n("s0aB")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("YDEi")),o=n("7jQU");function a(e){return e&&e.__esModule?e:{default:e}}Object.assign(r.default,{onTap:i.default.onTap,redrawOnline:function(e){var t=store.mail.peers[e];if(t){var n=(0,r.uConvo_getOnline)(t);i.default.setOnline(e,n)}},redrawUnread:function(e){if(!store.mail.peers[e])return;var t=(0,r.uConvo_getUnreadCount)(e);i.default.setUnreadCount(e,t)},redrawLastMsg:function(e){var t=(0,r.uConvo_getLastMsg)(e);t&&i.default.setLastMsg(e,(0,r.uConvo_msgPreview)(t),{dateShort:t.dateShort,pending:t.pending,failed:t.failed})},redrawTyping:function(e){if(!store.mail.cur)return;var t=(0,o.uTyping_getPeerTyping)(e),n=t&&1===t.count&&t.users[0]===e,a=(0,r.uConvo_getTyping)(e,n);i.default.setTyping(e,a)},redrawImportant:function(e,t){i.default.setImportant(e,t)}})},BLcx:function(e,t,n){"use strict";var i=window,r=i.langNumeric,o=i.show,a=i.hide,s=function(){var e=document.getElementsByClassName("gift_create_post_counter");return{counter:function(t){var n=e[0];if(n){var i=t.value.length,s=t.maxLength;if(i>s)t.value=t.value.substr(0,s);else if(i>s/2){var l=Math.max(s-i,0);n.innerText=r(l,lang.text_N_symbols_remain),o(n)}else a(n)}}}}();window.GiftsSendFormCounter=s},BQMu:function(e,t,n){"use strict";var i=window,r=i.cancelEvent,o=i.gpeByClass,a=i.geByClass1,s=i.getY,l=i.getX,u=i.getW,c=i.addClass,d=i.hasClass,A=i.append,f=i.tooltip,p=i.addEvent,_=i.removeClass,h=i.removeEvent,m=i.before,v=i.remove,g=i.clone,y=i.setStyle,w=i.each,b=i.getStyle,E=function(){var e,t,n="ai_menu_opened",i=!1;function E(e){for(var t=!1;e;){var n=b(e,"overflow-y");if(("scroll"===n||"auto"===n)&&e.offsetHeight<e.scrollHeight){t=!0;break}e=e.parentElement}return{cursor:e,isOverflowYContainer:t}}function k(e){for(var t=!1;e;){var n=b(e,"overflow-x"),i=d(e,"Slider__scroll");if("scroll"===n||"auto"===n||i){t=!0;break}e=e.parentElement}return{cursor:e,isOverflowXContainer:t}}function C(){if(e&&t){var n=a("i_pointer",e);document.body.contains(n)&&(E(n).isOverflowYContainer?y(t,"top",function(e){return e.getBoundingClientRect().top}(n)):y(t,"top",s(n)),k(n).isOverflowXContainer?y(t,"left",function(e){return e.getBoundingClientRect().left}(n)-u(t)):y(t,"left",l(n)-u(t)))}}function D(e){e&&"A"===e.target.tagName&&requestAnimationFrame(function(){C()})}function S(r){!function(n){e=o("ai_menu_wrap",n),t=a("ai_menu",e)}(r),c(n,e),A(t,document.body),i=T,f.addHandler(i),f.show(e,t),p(window,"resize",C),p(t,"click",D);var s=a("i_pointer",e),l=E(s);l.isOverflowYContainer&&p(l.cursor,"scroll",C);var u=k(s);u.isOverflowXContainer&&p(u.cursor,"scroll",C),C()}function T(){_(n,e),A(t,e),f.removeHandler(i),f.hide(),h(window,"resize",C),h(t,"click",C);var r=a("i_pointer",e),o=E(r);o.isOverflowYContainer&&h(o.cursor,"scroll",C);var s=k(r);s.isOverflowXContainer&&h(s.cursor,"scroll",C)}return{closeMenu:T,toggleMenu:function(t,i){r(t),d(n,e)?T():S(i)},update:function(){!function(){if(t){var e=geByClass("wia_item",t);e&&w(e,function(e,t){var n=g(t);m(n,t),v(t),c("unhover",n),setTimeout(function(){_("unhover",n)},100)})}}(),C()}}}();window.ActionMenu=E},BX0V:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("9CLW")),r=n("OcsD");var o,a,s,l=window,u=l.nav,c=l.ajax,d=l.geByClass1,A=l.addClass,f=l.val,p="pageMoneyTransfer",_="pageMoneyTransfer_error",h="pageMoneyTransfer__errorText",m="pageMoneyTransfer__iframe",v=2e3;i.default.onIframeReady(function(e){y(),a={checkUrl:e.check_transfer_url,onSuccessUrl:e.on_success_url},b(),window.cur.destroy.push(E)}),i.default.onPostMessage(function(e,t){if("paySuccess"===e)A("pageMoneyTransfer_success",d(p));else if("payError"===e)E(),A(_,d(p)),f(d(h),t.descr);else if("session_fail"===e){if(g)return void w();E(),A(_,d(p)),A("pageMoneyTransfer_errorCookie",d(p))}else if("putPixel"===e&&"page_load"===t.alias){var n=null;(0,r.isVkWebView)()&&((0,r.isIosWebView)()?n="iphone":isAndroidWebView()&&(n="android")),n||(n=""),(0,r.statlogsValueEvent)("money_transfers",0,"iframe_loaded",n)}});var g=0;function y(){var e=d(m);if(e){var t=e.contentWindow.document;t.open("text/html","replace"),t.write(attr(e,"data-html")),t.close()}else setTimeout(y,2e3)}function w(){var e=d(m);if(e){var t=ce("div",{innerHTML:attr(e,"data-html")});hide(e),d(p).appendChild(t),ge("payment_form").submit()}else setTimeout(w,2e3)}function b(){var e=a,t=e.checkUrl,n=e.onSuccessUrl;o=setInterval(function(){s=c.post(t,{},{onDone:function(e,t,i){if(1===e||3===e){if(E(),i)return void u.go(i,null,{replace:!0});"/"===n[0]?u.go(n,null,{replace:!0}):location.href=n}else 2===e&&(E(),A(_,d(p)),f(d(h),t))}})},v)}function E(){o&&(clearInterval(o),o=null),s&&(s.abort(),s=null)}i.default.onAcceptCookieClick(function(){var e=window.open("https://top-fwz1.mail.ru/counter2?id=1;","","width=300; height=300");setTimeout(function(){e.close();var t=d(m),n=clone(t);removeClass(_,d(p)),replace(n,t);var i=n.contentWindow.document;i.open("text/html","replace"),i.write(attr(t,"data-html")),i.close(),b()},500),g++})},BZzM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizePosters=function(e,t,n){var i=s(t)||document,d="[data-".concat("poster-resized","='false']");(e||n)&&(d="");var A=a(".poster__text"+d,i),f=[],p=cur.posterConfig&&cur.posterConfig.constants;if(!p){if(!A.length)return;p=JSON.parse(r(A[0].parentElement,"poster-constants"))}for(var _=0;_<A.length;_++){var h=A[_],m=o(h);f.push(o(m).clientWidth)}for(var v=0;v<A.length;v++){var g=A[v],y=o(g),w=f[v],b=p.font_size_ratio_range_1*w+"px",E=Math.round(p.line_height_ratio_range_1*w)+"px",k="0 "+Math.round(w*c)+"px";g.textContent.length>p.range_threshold&&(b=Math.round(p.font_size_ratio_range_2*w)+"px",E=Math.round(p.line_height_ratio_range_2*w)+"px"),l(y,{height:w*u+"px",width:w}),l(g,{fontSize:b,lineHeight:E,padding:k}),r(g,"poster-resized",!0)}};var i=window,r=i.domData,o=i.domPN,a=i.domQuery,s=i.ge,l=i.setStyle,u=.75,c=1/18},BoyB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("2C1Z"));var r=i.default;t.default=r,window.Loading=i.default},Bqje:function(e,t,n){"use strict";var i=n("UxAg");function r(){var e=(0,i.$)(o.intro),t=new Scroller(e,{byPage:!0,ignoreMouseWheel:!0,noAutoScroll:!0});t.init(),cur.destroy.push(function(){return t.destroy()})}window.AuthCheckIntro={},AuthCheckIntro._onMount=r;var o={intro:".AuthCheckIntro"}},BxOC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=function(e,t,n){t&&(t.im_v=o);return new Promise(function(i,o){r.post(e,t,{timeout:n,onDone:function(){i.apply(null,[Array.prototype.slice.call(arguments)])},onFail:function(){return o.apply(null,arguments),!0}})})},t.plainget=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(e,t,n).request},t.plaingetCancelable=a;var i=n("cGUQ"),r=window.ajax,o=2;function a(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=window.XDomainRequest?new XDomainRequest:r._getreq(),{request:new Promise(function(r,a){var s,l=Date.now(),u=o.timeout||60,c=(0,i.toQueryString)(t);if(window.XDomainRequest)n.open("get","".concat(e,"?").concat(c)),n.ontimeout=function(e){a([e,{}])},n.onerror=function(e){a([e,{}])},n.onload=function(){r([n.responseText,{}])},setTimeout(function(){n.send()},0);else{n.onreadystatechange=function(){4==n.readyState&&(clearInterval(s),n.status>=200&&n.status<300?r([n.responseText,n]):a([n.responseText,n]))};try{n.open("GET","".concat(e,"?").concat(c),!0)}catch(e){return a([e,n])}n.send()}s=setInterval(function(){Date.now()-l>1e3*u&&(window.browser.safari&&n.abort(),a(["",{}]),clearInterval(s))},1e3)}),cancel:function(){n.abort()}}}},C45x:function(e,t,n){"use strict";var i=n("UxAg"),r=u(n("bZ/P")),o=u(n("+cqQ")),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("ti65")),s=u(n("Gzds")),l=n("OcsD");function u(e){return e&&e.__esModule?e:{default:e}}var c=need("Voting");Object.assign(a.default,{class:"msg",onClick:(0,o.default)(),onPendingClick:(0,o.default)(),onRestoreClick:(0,o.default)(),onReplyClick:(0,o.default)(),onForward:(0,o.default)(),onLoadAgain:(0,o.default)(),getElem:function(e){return(0,i.$)(".msg_id_".concat(e))},remove:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,i.$$)(".msg_id_".concat(e)).forEach(function(e){return e.remove()}):m(e,!1)},spam:function(e){m(e,!0)},restore:function(e){(0,i.$$)(".msg_id_".concat(e)).forEach(function(e){e.classList.remove("msg_removed"),e.classList.remove("msg_spam")})},unselectAll:function(){(0,i.$$)(".msg_selected").forEach(function(e){return e.classList.remove("msg_selected")})},getReplyDataFromHTML:function(e){var t=e&&a.default.getElem(e),n="";if(t){var r=(0,i.$)(".thumbs_map .thumb_map_img_as_div",t);return(n=r&&r.style.backgroundImage)&&(n=n.replace(/^url\((['"])?/,"").replace(/(['"])?\)$/,"")),{msg_id:e,parent_id:null,preview_url:n}}return null},toggleImportant:function(e,t){[].concat(e).forEach(function(e){var n=(0,i.$)(".msg_id_".concat(e));n&&n.classList.toggle("msg_important",t)})},markAsRead:function(e){(0,i.$$)(".msg_id_".concat(e)).forEach(function(e){return e.classList.remove("msg_unread")})},getId:function(e){var t=r.default.parseClass(A.msg,e.className);return Number(t.id)},getTextHtml:function(e){return e.$(f.text).innerHTML}}),a.default._onClick=v,a.default._onPendingClick=g,a.default._onTouchStart=w,a.default._onRestoreClick=h,a.default._onActionClick=b,a.default._onReplyClick=k,a.default._onStickerClick=C,a.default.onStickerTouchStart=D;var d,A={msg:"msg"},f={text:".msg__text"},p=500,_=!1;function h(e,t){e.stopPropagation(),t=parseInt(t,10),a.default.onRestoreClick(t)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a.Msg__restoreInner)(e);(0,i.$$)(".msg_id_".concat(e)).forEach(function(e){e.$(".msg__restore").innerHTML=n,e.classList.remove("msg_selected"),e.classList.add("msg_removed"),e.classList.toggle("msg_spam",t)})}function v(e,t,n){y(e.target,t,function(){t.classList.toggle("msg_selected"),a.default.onClick(n)})}function g(e,t,n,i,r){y(e.target,t,function(){a.default.onPendingClick(n,i,r)})}function y(e,t,n){for(var i=t.classList.contains("msg_pending")||t.classList.contains("msg_failed");e!==t;)if(i&&-1!==e.className.indexOf("msg__sticker"))e=e.parentElement;else{if("A"===e.tagName||"BUTTON"===e.tagName||e.getAttribute("onclick")||e.classList.contains("im_msg_audiomsg")||e.classList.contains("articleSnippet__block")||e.classList.contains("MailButton")||e.closest(".".concat(c.cls)))return;e=e.parentElement}_?_=!1:E()||t.classList.contains("msg_removed")||t.classList.contains("msg_spam")||store.mail.cur.editing||n()}function w(){E()&&(_=!0)}function b(e,t,n){switch(t){case"forward":a.default.onForward(n)}}function E(){return window.getSelection().toString().length>0}function k(e,t,n,i){e.preventDefault(),a.default.onReplyClick(t,n,i)}function C(e,t,n,i){n&&(e.preventDefault(),i&&s.default.stickersClick(t,i))}function D(e,t){if(clearTimeout(d),!!t.getAttribute("data-animation-path")){var n=e.touches[0].clientX,i=e.touches[0].clientY;(0,l.addEvent)(t,"contextmenu",S),(0,l.addEvent)(t,"touchmove",r,{passive:!0}),(0,l.addEvent)(t,"touchend",o,{passive:!0}),(0,l.addEvent)(t,"touchcancel",o,{passive:!0}),d=setTimeout(function(){!function(e){StickersAnimation.loadAndPlaySticker(e)}(t),o()},p)}function r(e){(Math.abs(e.touches[0].clientX-n)>=10||Math.abs(e.touches[0].clientY-i)>=10)&&o()}function o(){clearTimeout(d),(0,l.removeEvent)(t,"contextmenu",S),(0,l.removeEvent)(t,"touchmove",r,{passive:!0}),(0,l.removeEvent)(t,"touchend",o,{passive:!0}),(0,l.removeEvent)(t,"touchcancel",o,{passive:!0})}}function S(e){event.preventDefault(),event.stopPropagation()}},C4zK:function(e,t,n){"use strict";var i=s(n("bZ/P")),r=n("UxAg"),o=s(n("+cqQ")),a=s(n("nggH"));function s(e){return e&&e.__esModule?e:{default:e}}function l(){store.mail.cur&&f()}function u(e){store.mail.cur&&function(e){var t=e.target,n=$(".mailActs");n&&n.classList.contains("mailActs_menuOpened")&&!t.closest(".mailActs__chevronList")&&!t.closest(".mailActs__chevronMoreIcon")&&n.classList.remove("mailActs_menuOpened")}(e)}function c(e){d({canEdit:e})}function d(e){(0,r.$$)(".mailActs").forEach(function(t){var n=i.default.parseClass("mailActs",t.getAttribute("class"));t.setAttribute("class",i.default.class("mailActs",Object.assign({},n,e)))})}function A(e){switch(e){case"edit":a.default.onEditClick();break;case"remove":a.default.onRemoveClick();break;case"important":a.default.onImportantClick();break;case"reply":a.default.onReplyClick();break;case"forward":a.default.onForwardClick();break;case"spam":a.default.onSpamClick();break;case"pin":a.default.onPinClick()}}function f(){var e=document.querySelector(".mailActs__chevron"),t=e.offsetWidth-1,n=e.querySelectorAll(".mailActs__chevronListItem"),i=e.querySelectorAll(".mailActs__icon");Array.prototype.forEach.call(i,function(e,r){t<36*i.length?t-34>=36*(r+1)?(e.classList.remove("mailActs__icon_hidden"),n[r].classList.add("mailActs__chevronListItem_hidden")):(e.classList.add("mailActs__icon_hidden"),n[r].classList.remove("mailActs__chevronListItem_hidden")):(e.classList.remove("mailActs__icon_hidden"),n[r].classList.add("mailActs__chevronListItem_hidden"))}),d({cutted:t<36*i.length})}function p(){(0,r.$$)(".mailActs").forEach(function(e){return e.classList.toggle("mailActs_menuOpened")})}Object.assign(a.default,{onCloseClick:(0,o.default)(),onRemoveClick:(0,o.default)(),onImportantClick:(0,o.default)(),onReplyClick:(0,o.default)(),onForwardClick:(0,o.default)(),onSpamClick:(0,o.default)(),onPinClick:(0,o.default)(),onMoreClick:(0,o.default)(),onEditClick:(0,o.default)(),setCount:function(e){var t=langNumeric(e,lang.mobile_mail_messages_selected).replace("{count}",e);(0,r.$$)(".mailActs__counter").forEach(function(e){return e.innerText=t}),1!=e&&c(!1);f()},setEditAvailable:c,setImportantAvailable:function(e){d({canImportant:e})},toggleQuickButtons:function(e){$(".mailActs__buttonsIn").hidden=!e},setReplyAvailable:function(e){$(".mailActs__button_type_reply").disabled=!e},togglePin:function(e){(0,r.$$)(".mailActs").forEach(function(t){return t.classList.toggle("mailActs_canPin",e)})},setModifiers:d,setLabels:function(e){var t=window.lang,n=e.pinned?t.mobile_mail_messages_actions_unpin:t.mobile_mail_messages_actions_pin,i=e.important?t.mobile_mail_messages_actions_important_off:t.mobile_mail_messages_actions_important;$(".mailActs__icon_type_pin").setAttribute("aria-label",n),$(".mailActs__icon_type_important").setAttribute("aria-label",i),$(".mailActs__chevronListItem_type_pin").innerHTML=n,$(".mailActs__chevronListItem_type_important").innerHTML=i},update:f}),a.default._onButtonClick=A,a.default._onCloseClick=a.default.onCloseClick,a.default._onMoreClick=p,onBodyResize(l),document.addEventListener("click",u)},CKxJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("bZ/P")),r=(o(n("KMpi")),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("/Id8")));n("fdw3");function o(e){return e&&e.__esModule?e:{default:e}}function a(){var e=l(['\n    <div class="msg__newMsgsDivider">\n      <span class="msg__newMsgDividerText">',"</span>\n    </div>\n  "]);return a=function(){return e},e}function s(){var e=l(["\n    ","\n    ","\n  "]);return s=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=function(e){var t,n=e.msgId,o=e.withDivider?function(){var e=window.lang;return i.default.html(a(),e.mobile_mail_new_msgs)}():"",l=store.mail,u=l.msgs[n],c=l.members[u.authorId],d=u.peerId,A=l.peers[d];if(!e.detailed){var f=store.mail.presend,p=(f=f&&f.msgs)&&f["edit"+n];p&&(u=p)}A&&(A.isIncomingMR||A.isRejectedMR)&&(o="");if(u.isService)t=(0,r.default)({id:n,text:u.service,service:!0,unread:u.isUnread});else{var _=(0,r.Msg__authorName)(c,d,l.cur.userId),h={id:n,text:u.text,important:u.isImportant,unread:u.isUnread,authorPhoto:c.avatar,authorName:_,authorUrl:c.url,date:u.date,removed:l.cur.msgRemoved[n],admin:u.adminName?{name:u.adminName,url:u.adminUrl}:null,edited:u.edited,channel:A.isChannel&&A.ownerId!==l.cur.viewerId,attaches:u.attaches,attachesHTML:u.attachesHTML,attachesLoading:u.attachesLoading,forwards:u.forwards,reply:u.reply,pending:u.pending,waiting:u.waiting,failed:u.failed,sendId:u.sendId,sticker:u.sticker,maxDepth:e.detailed?l.cur.maxDetailedMsgDepth:l.cur.maxMsgDepth};t=e.detailed?(0,r.Msg_detailed)(h):(0,r.default)(h)}return i.default.html(s(),o,t)};t.default=u},CQvH:function(e,t,n){"use strict";addEvent(window,"keydown",function(e){9===e.keyCode&&document.body.classList.add("tabbing")},{passive:!0}),addEvent(window,"click touchstart",function(){document.body.classList.remove("tabbing")},{capture:!0,passive:!0})},CkGd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("nggH"));n("C4zK");var r=i.default;t.default=r,window.MailActs=i.default},Cxv5:function(e,t,n){"use strict";(function(e){return e&&e.__esModule?e:{default:e}})(n("9CLW")).default.onPostMessage(function(e){"putPixel"!==e&&"addCard"!==e&&window.scrollTop(0)})},"D+pY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBackgroundRestriction=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("r/ag")),r=n("4uOi");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s=window,l=s.setCookie,u=s.getCookie,c=s.audioSubscribe,d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c||(this.isIdle=!1,this.showAlertCountToday=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(u(e),10);if(isNaN(n,10))return t;return n}(e.SHOW_ALERT_COOKIE),this.initVisibilityChangeEvent())}return a(e,null,[{key:"writePopupStat",value:function(e){statlogsValueEvent("mvk_audio_background_popup",e)}},{key:"createPopup",value:function(){var t='<div class="audioBackgroundPopup__content">\n      <div class="audioBackgroundPopup__title">'.concat(getLang("mobile_audio_background_restriction_title"),'</div>\n      <div class="audioBackgroundPopup__description">').concat(getLang("mobile_audio_background_restriction_description"),'</div>\n      <div class="audioBackgroundPopup__buyButtonWrapper">\n        <a href="').concat(e.REMOVE_RESTRICTION_LINK,'"\n          onclick="AudioBackgroundRestriction.writePopupStat(\'link_click\');"\n          class="audioBackgroundPopup__buyButton button">\n          ').concat(getLang("mobile_audio_background_restriction_button"),'\n         </a>\n      </div>\n      <a href="').concat(e.EXPLANATION_LINK,'"\n        onclick="AudioBackgroundRestriction.writePopupStat(\'explanation_click\');"\n        class="audioBackgroundPopup__explanation">\n        ').concat(getLang("mobile_audio_background_restriction_explanation"),"\n      </a>\n    </div>");return Wd.elem(new i.default({content:Wd.wrap(t),class:"audioBackgroundPopup"}))}}]),a(e,[{key:"onIdle",value:function(){window.audio.playing()&&this.triggerRestriction()}},{key:"showBackgroundMessage",value:function(){var t=e.createPopup();this.showAlertCountToday+=1,l("remixaudio_show_alert_today",this.showAlertCountToday,1),this.showAlertCountToday%3||(i.default.open(t,!0),e.writePopupStat("show"))}},{key:"triggerRestriction",value:function(){audio.pause(),this.showBackgroundMessage()}},{key:"initVisibilityChangeEvent",value:function(){var e=this;this.pageVisibility=new r.PageVisibility,this.pageVisibility.onVisible(function(){e.isIdle=!1}),this.pageVisibility.onHidden(function(){e.isIdle=!0,e.onIdle()})}}]),e}();t.AudioBackgroundRestriction=d,d.SHOW_ALERT_COOKIE="remixaudio_show_alert_today",d.REMOVE_RESTRICTION_LINK="/offermusic",d.EXPLANATION_LINK="https://vk.cc/9uFgyl"},D48u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Qwnw"));var r=i.default;t.default=r,window.MessageRequestsPage=i.default},DG1x:function(e,t,n){"use strict";var i=window,r=i.getY,o=i.getCh,a=i.onDOMReady,s=i.onBodyScroll,l=window.page,u=window.ajax,c=window.Pad,d=window.Btn;window.LoadMore={setUrl:h,destroy:m},LoadMore._strategy={replace:{onFail:D,onSuccess:function(e){var t=e.response;p.outerHTML=t,m()}},padsExtend:{onFail:D,onSuccess:function(e){var t=e.response,n=t.pads,i=t.nextPageUrl;Object.keys(n).forEach(function(e){var t=n[e];c.addContent(e,t)}),i?h(i):m()}}},LoadMore._onButtonClick=v,a(g),l.onChange(g);var A={loadMore:".LoadMore",button:".LoadMore__button"},f="_loadMore_loading",p=null,_=null;function h(e){_.setAttribute("href",e)}function m(e){p.remove(),p=null,_=null,w()}function v(){C()||b()}function g(){if(p=$(A.loadMore)){var e=window.cur;_=p.$(A.button),y(0),s(y),e.destroy.push(w)}}function y(e){if(p&&!C()){var t=r(p),n=o();t-(e+n)<2*n&&b()}}function w(){s("__clear",y)}function b(){k(!0);var e=_.getAttribute("href");u.post(e,{_ajax:1},{onDone:function(e){return E(e,!0)},onFail:function(e){return E(e,!1)}})}function E(e,t){if(k(!1),p){var n=t?"data-success-handler":"data-fail-handler";n=p.getAttribute(n),Wd.handle(n,{$loadMore:p,response:e}),p=null,_=null,w(),g()}}function k(e){_&&p&&(d.setLoading(_,e),p[f]=e)}function C(){return p&&p[f]}function D(e){console.error("LoadMore: failed to load more",e)}},DM26:function(e,t,n){"use strict";function i(e,t){return new Promise(function(n){setTimeout(n.bind(null,t),1e3*e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.pause=i,t.retryFn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=0;return function o(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return Promise.resolve().then(function(){return e.apply(void 0,s)}).catch(function(e){if(++r<=t){var a="function"==typeof n?n(r):0;return 0===a?o.apply(void 0,s):i(a).then(function(){return o.apply(void 0,s)})}throw e})}},t.debouncedPromise=function(e,t,n){var i,r;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new Promise(function(e,o){var s=n&&!i;clearTimeout(i),r&&r.reject("debounce"),i=setTimeout(function(){i=null,r=null,n||e(a)},t),s?e(a):n&&o("debounce"),r={resolve:e,reject:o}}).then(function(t){return e.apply(void 0,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))})}},t.abortablePause=function(e,t){var n,i=new Promise(function(i){n=i,setTimeout(i.bind(null,t),1e3*e)});return{pause:function(){return i},abort:function(){n(t)}}},t.promisify=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return new Promise(function(t){return e.apply(void 0,n.concat([t]))})}}},DVnk:function(e,t,n){"use strict";var i=window.FriendsRecommendedSlider;FeedAssistanceStats.registerTrackingCls("feedAssistance_recommendedFriends"),FeedAssistanceStats.onStartViewElement(function(e){if(FeedAssistanceStats.getElementType(e)===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_RECOMMENDED_SLIDER){if(e._friendsSliderHandlersAdded)return;i.onScroll(e),e._friendsSliderHandlersAdded=!0}})},DgYJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uMailWrite_TemplatesContent=function(e){var t=e.length,n=!t;return i.default.html([u(n),{class:"uMailWrite__templatesRows",attrs:{hidden:n},inner:e.map(function(e,n){return c(e,n,t)})}])},t.uMailWrite_TemplatesEmpty=u,t.uMailWrite_TemplatesLoading=function(){return Loading({mix:"uMailWrite__templatesLoading"})},t.uMailWrite_TemplatesRow=c,t.prepareTemplateText=d;var i=l(n("TYsd")),r=l(n("bZ/P")),o=n("9M99"),a=l(n("gy8s")),s=l(n("29dZ"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t="/mail?act=template&from="+store.mail.cur.peerId+store.mail.cur.communityParam,n=r.default.onClick("uMailWrite.loadTemplatePage","event","this",t);return{class:"uMailWrite__templatesEmpty",attrs:{hidden:!e},inner:[{class:"uMailWrite__templatesEmptyInfo",inner:lang.mobile_mail_templates_empty_info},(0,s.default)({type:"button",theme:"small",attrs:n,inner:lang.mobile_mail_templates_empty_button})]}}function c(e,t,n){var s=t>0&&t===n-1,l=store.mail.cur.communityParam,u=store.mail.cur.peerId,c=e.name,A=e.text;c=(0,o.emojiToHTML)(c),A=d(A,!0);var f="_touched uMailWrite__templatesRow";return f+=" uMailWrite__templatesRow".concat(e.id),e.deleting&&(f+=" uMailWrite__templatesRow_hidden"),{class:f,inner:[{class:"uMailWrite__templatesRowContent",attrs:{onclick:["uMailWrite.onTemplateClick","event","this",e.id]},inner:[{class:"uMailWrite__templatesRowName",inner:i.default.html(c)},{class:"uMailWrite__templatesRowText",inner:i.default.html(A)}]},{class:"uMailWrite__templatesRowMore",inner:[i.default.wrap((0,a.default)({mix:"",icon:"more",position:s?"bottomRight":"topRight",items:[{text:lang.mobile_mail_templates_action_edit,name:"edit",url:"/mail?act=template&id=".concat(e.id).concat(l,"&from=").concat(u)},{text:lang.mobile_mail_templates_action_delete,name:"delete",attrs:r.default.onMouseDown("uMailWrite._onDeleteTemplate",e.id)}]}))]}]}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=store.mail.members,i=store.mail.cur,r=n[i.peerId],a=n[i.userId],s=n[i.groupId],l=r.name.replace(r.firstName,"").trim(),u=a.name.replace(a.firstName,"").trim();if((e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<br>/g,"\n")).replace(/&lt;br&gt;/g,"\n")).replace(/\t/g,"\n")).replace(/{user name}/g,r.firstName)).replace(/{user surname}/g,l)).replace(/{admin name}/g,a.firstName)).replace(/{admin surname}/g,u)).replace(/{community}/g,s.name)).match(/{greeting}/g)){var c,d=function(){var e=Date.now()+1e3*store.mail.cur.timeShift;return new Date(e).getHours()}();c=d>=3&&d<12?lang.mobile_mail_templates_greeting_morning:d>=12&&d<17?lang.mobile_mail_templates_greeting_afternoon:d>=17&&d<=23?lang.mobile_mail_templates_greeting_evening:lang.mobile_mail_templates_greeting_night,e=e.replace(/{greeting}/g,c)}return t&&(e=(0,o.emojiToHTML)(e)),e}},Dh0N:function(e,t,n){"use strict";function i(e,t){var n=t.$select,i=t.value;n.closest(r.email).classList.toggle(o.groupsVisible,e.includes(i)||e.includes(Number(i)))}window.SettingsEmail={},SettingsEmail._onFrequencyChange=i;var r={email:".settingsEmail"},o={groupsVisible:"settingsEmail_groupsVisible"}},DiaP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("TYsd")),r=o(n("29dZ"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=window.lang;return i.default.html({class:"MessageRequestBox",inner:[{class:"MessageRequestBox__info",inner:t.mobile_mail_mrs_confirm_info},{class:"MessageRequestBox__buttons",inner:[(0,r.default)({theme:"negative",size:"normal",type:"button",inner:t.mobile_mail_mrs_button_reject,attrs:q.onClick("MessageRequestBox.reject","event","this",e)}),(0,r.default)({theme:"secondary",size:"normal",type:"button",inner:t.mobile_mail_mrs_button_accept,attrs:q.onClick("MessageRequestBox.accept","event","this",e)})]}]})};t.default=a},DkIl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MailHat",{enumerable:!0,get:function(){return i.MailHat}}),Object.defineProperty(t,"MailHat__Title",{enumerable:!0,get:function(){return i.MailHat__Title}}),Object.defineProperty(t,"MailHat__icon",{enumerable:!0,get:function(){return i.MailHat__icon}}),Object.defineProperty(t,"MailHat_main",{enumerable:!0,get:function(){return i.MailHat_main}}),Object.defineProperty(t,"MailHat_convo",{enumerable:!0,get:function(){return i.MailHat_convo}}),Object.defineProperty(t,"MailHat_page",{enumerable:!0,get:function(){return i.MailHat_page}});var i=n("k9Tg");n("iUjD"),window.MailHat_main=i.MailHat_main,window.MailHat_convo=i.MailHat_convo},E5Ij:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MailPreSendList__Msg=function(e){var t=store.mail,n=t.members[e.authorId],r=e.peerId,o=t.peers[r],a=(0,i.Msg__authorName)(n,r,t.cur.userId);return(0,i.default)({id:e.id,text:e.text,important:e.isImportant,unread:e.isUnread,authorPhoto:n.avatar,authorName:a,authorUrl:n.url,date:e.date,removed:t.cur.msgRemoved[e.id],admin:e.adminName?{name:e.adminName,url:e.adminUrl}:null,edited:e.edited,channel:o.isChannel&&o.ownerId!==t.cur.viewerId,attaches:e.attaches,attachesHTML:e.attachesHTML,attachesLoading:e.attachesLoading,forwards:e.forwards,reply:e.reply,pending:e.pending,failed:e.failed,sendId:e.sendId,sticker:e.sticker,maxDepth:store.mail.cur.maxMsgDepth})},t.default=void 0;!function(e){e&&e.__esModule}(n("TYsd"));var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("/Id8"));var r=function(){store.mail.pendingMsgs;return{class:"MailPreSendList__box"}};t.default=r},E7VD:function(e,t,n){"use strict";var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var o=need("page"),a=need("onDOMReady");window.Slider={scrollToElem:function(e){var t=e.closest(s.scroll);t.scrollLeft=e.offsetLeft-t.offsetWidth/2+e.offsetWidth/2}},Slider._onWheel=l,(r.default.ios||r.default.msie_edge)&&(a(c),o.onChange(c),window.MutationObserver&&a(function(){if(document.body){var e=new MutationObserver(u);e.observe(document.body,{subtree:!0,childList:!0})}}));var s={slider:".Slider",scroll:".Slider__scroll"};function l(e,t){var n=e.deltaX,i=e.deltaY;Math.abs(n)>Math.abs(i)&&(e.preventDefault(),t.scrollLeft+=n)}function u(e){e.forEach(function(e){e.addedNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&e.$$(s.slider).forEach(d)})})}function c(){(0,i.$$)(s.slider).forEach(d)}function d(e){var t=getComputedStyle(e),n=Number(t.paddingTop.replace("px","")),i=Number(t.paddingBottom.replace("px",""));e.style.overflow="hidden",e.style.height=e.offsetHeight-n-i+"px",e.$(s.scroll).style.paddingBottom="20px"}},EMnU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconWd=function(e){var t,n=e.icon;return{class:[e.class,Bem.class("Icon",(t={},a(t,n,!0),a(t,"active",e.active),a(t,"blue",e.blue),a(t,"bluer",e.bluer),a(t,"dark",e.dark),a(t,"selected",e.selected),a(t,"small",e.small),a(t,"white",e.white),t))],href:e.url,attrs:e.attrs}},t.default=void 0;var i=o(n("bZ/P")),r=o(n("Mc5h"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n=e.icon,o=e.class||e.mix;return(0,r.default)({mix:i.default.class(o,"Icon",(t={},a(t,n,!0),a(t,"active",e.active),a(t,"blue",e.blue),a(t,"bluer",e.bluer),a(t,"dark",e.dark),a(t,"selected",e.selected),a(t,"small",e.small),a(t,"white",e.white),t)),url:e.url,attrs:e.attrs})};t.default=s},EUzL:function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.createLongpollEventsQueue=function(e,t,n){var r=0,o=e,a=[],s=!1;function l(){!a.length||r>0||s||(t(a),a=[])}function u(){n&&(s=!0,n(o).then(function(e){var t,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,3),r=(n[0],n[1]),u=n[2];o=r,s=!1,(t=a).push.apply(t,i(u)),l()}))}return{pause:function(){r++},resume:function(){r>0&&(r--,l())},onLp:function(e,t,n){var r;s||(o>=e?(o=t,(r=a).push.apply(r,i(n)),l()):u())}}}},Egk5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addEvent=function(e,t,n,o,l,u){if(!(e=(0,i.ge)(e))||3==e.nodeType||8==e.nodeType)return;var c=l?function(){var e=function(e){var t=e.data;e.data=l;var i=n.apply(this,[e]);return e.data=t,i};return e.handler=n,e}():n;e.setInterval&&e!==window&&(e=window);var d=(0,i.data)(e,"events")||(0,i.data)(e,"events",{}),A=(0,i.data)(e,"handle")||(0,i.data)(e,"handle",function(e){return function(){(function(e){e=s(e);var t=Array.from(arguments);t[0]=e;var n=(0,i.data)(this,"events");if(!n||"string"!=typeof e.type||!n[e.type]||!n[e.type].length)return;var r=(n[e.type]||[]).slice();for(var o in r)if(r.hasOwnProperty(o)){if("mouseover"===e.type||"mouseout"===e.type){for(var l=e.relatedElement;l&&l!==this;)l=l.parentNode;if(l===this)continue}var u=r[o].apply(this,t);if(!1!==u&&-1!==u||a(e),-1===u)return!1}}).apply(e,arguments)}}(e));(0,r.each)(t.split(/\s+/),function(t,n){d[n]||(d[n]=[],!o&&e.addEventListener?e.addEventListener(n,A,u):!o&&e.attachEvent&&e.attachEvent("on"+n,A)),d[n].push(c)})},t.removeEvent=function e(t,n,o,a){void 0===a&&(a=!1);t=(0,i.ge)(t);if(!t)return;var s=(0,i.data)(t,"events");if(!s)return;if("string"!=typeof n){for(var l in s)s.hasOwnProperty(l)&&e(t,l);return}(0,r.each)(n.split(/\s+/),function(e,n){if((0,r.isArray)(s[n])){var l=s[n].length;if((0,r.isFunction)(o)){for(var u=l-1;u>=0;u--)if(s[n][u]&&(s[n][u]===o||s[n][u].handler===o)){s[n].splice(u,1),l--;break}}else{for(var c=0;c<l;c++)delete s[n][c];l=0}l||(t.removeEventListener?t.removeEventListener(n,(0,i.data)(t,"handle"),a):t.detachEvent&&t.detachEvent("on"+n,(0,i.data)(t,"handle")),delete s[n])}});(0,r.isEmpty)(s)&&((0,i.removeData)(t,"events"),(0,i.removeData)(t,"handle"))},t.triggerEvent=function(e,t,n,o){e=(0,i.ge)(e);var a=(0,i.data)(e,"handle");if(a){var s=function(){return a.call(e,(0,r.extend)(n||{},{type:t,target:e}))};o?s():setTimeout(s,0)}},t.cancelEvent=a,t.stopEvent=function(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;e.stopPropagation&&e.stopPropagation();return e.cancelBubble=!0,!1},t.normEvent=s,t.checkEvent=function(e){var t=e||window.event;return t&&("click"===t.type||"mousedown"===t.type||"mouseup"===t.type)&&(t.which>1||t.button>1||t.ctrlKey||t.shiftKey||o.browser.mac&&t.metaKey)||!1},t.checkKeyboardEvent=function(e){if(!(e=s(e))||!e.target)return!1;if(!e.screenX)return!0;var t=(0,i.getSize)(e.target),n=(0,i.getXY)(e.target),r=e.pageX-n[0],o=e.pageY-n[1];if(r<-1||r>t[0]+1||o<-1||o>t[1]+1)return!0;return Math.abs(e.pageX-n[0]-t[0]/2)<1&&Math.abs(e.pageY-n[1]-t[1]/2)<1},t.checkOver=function(e,t){if(!e)return!0;e=e.originalEvent||e,t=t||e.target;var n=e.fromElement||e.relatedTarget;if(!n||n===t||n===t.parentNode)return!0;for(;n!==t&&n.parentNode&&n.parentNode!==bodyNode;)n=n.parentNode;return n!==t},t.KEY=void 0;var i=n("zxIV"),r=n("t7n3"),o=n("gdug");function a(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.cancelBubble=!0,e.returnValue=!1,!1}function s(e){var t=e=e||window.event;if((e=(0,r.clone)(t)).originalEvent=t,e.target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target),null==e.pageX&&null!=e.clientX){var n=document.documentElement,i=bodyNode;e.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n.clientTop||0)}return!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey?e.metaKey=e.ctrlKey:!e.ctrlKey&&e.metaKey&&o.browser.mac&&(e.ctrlKey=e.metaKey),!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}t.KEY={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16}},FLY7:function(e,t,n){"use strict";var i=P(n("jk6M")),r=n("cq4b"),o=P(n("TYsd")),a=(P(n("Mc5h")),M(n("/Id8"))),s=P(n("CkGd")),l=P(n("fWqt")),u=P(n("77iS")),c=M(n("/Rzu")),d=P(n("HPEO")),A=P(n("yNeG"));n("XRdp");var f=P(n("D48u")),p=(P(n("2eJH")),P(n("M2vk"))),_=n("7jQU"),h=P(n("rKp0")),m=M(n("HGMY")),v=M(n("lQx8")),g=n("9M99"),y=n("hw56"),w=n("qHA9"),b=n("MjTa"),E=M(n("W38l")),k=M(n("HdGT")),C=M(n("ok75")),D=M(n("wZtc")),S=P(n("UlUB")),T=n("BZzM");function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}function P(e){return e&&e.__esModule?e:{default:e}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=window.clog,O=!1;uVK.onReady(pe),v.Messenger.onQueryChange(me),v.Messenger.onQueryClear(ve),c.default.onTap(J),A.default.onUnreadClick(j),A.default.onBackClick(je),A.default.onBackToDialogClick(He),A.default.onCancelEditing(Ct),d.default.onAttachedMsgsRemove(K),d.default.onToBottomClick(Oe),d.default.onMessage(W),k.onMessage(q),k.onStopped(Y),k.onMessageRemove(G),k.onCaptcha(Ht),a.default.onClick(ct),a.default.onRestoreClick(dt),a.default.onReplyClick(At),a.default.onForward(pt),Voting.onHtmlUpdate(Tt),v.Messenger.onMainScroll(xe),v.Messenger.onConvoScroll(Le),v.Messenger.onSearchMsgsClick(he),v.Messenger.onConvoScroll(v.default.expandPeerBefore),v.Messenger.onConvoAtTop(Me),v.Messenger.onConvoAtBottom(Pe),s.default.onCloseClick(et),s.default.onRemoveClick(tt),s.default.onImportantClick(at),s.default.onReplyClick(lt),s.default.onForwardClick(ut),s.default.onSpamClick(ot),s.default.onPinClick(Je),s.default.onEditClick(Ze),l.default.onConfirmDelete(it),PinnedMsg.onHideClick(vt),f.default.onRejectAll(Ot),im.onNewMsg(Q),im.onEditMsg(X),im.onMultiTyping(Ve),im.onRecordingAudio($e),im.onOnlineChange(qe),im.onMsgReadByMe(We),im.onMsgReadByOther(Ye),im.onMsgImportantRemove(ee),im.onMsgImportantAdd(Z),im.onMsgRemove(te),im.onMsgListen(ne),im.onPeerKeyboard(re),im.onPeerBanner(le),im.onPeerConvert(ue),im.onPeerAdmin(ce),im.onMsgRequestChange(de),im.onDialogImportant(oe),im.onUnreadCount(ae),im.onResync(se),C.onUnidle(Ft),AudioMessagePlayer.events.on("listened",jt),nav.onPopState(Ge),nav.onBeforeGo(Qe),nav.onBeforeGo2(Xe),page.onChange(Ke),uVK.onReady(wt),page.onChange(wt),uVK.onReady(bt),page.onChange(bt),page.onChange(z),page.onChange(St),uVK.onReady(z),uVK.onReady(ht),uVK.onReady(St),uVK.onOrientationChange(V),v.default.loadMailPage(Mt),v.default.onShowPinnedMsgClick=mt,v.default.onHidePinnedMsgClick=vt,v.default.onBannerButtonClick=gt,v.default.onBannerTextClick=yt;var L=!1,B=0,N=[],R=[],F=(0,S.default)(function(){if(!N.length)return;var e=store.mail,t=e.members,n=e.cur,i=N,r=R;N=[],R=[],ajaxRequest("/mail",{act:"get_members",members:i},function(e){Object.assign(t,e),r.forEach(function(e){e===n.peerId&&p.default.redraw(),c.default.redrawTyping(e)})})},3e3);function j(){v.Messenger.scrollMainBodyToTop()}function H(){(0,b.preventDocumentScroll)();var e=v.Messenger.getMainBody();e&&(0,b.setScrollView)(e);var t=$(".leftMenu__searchItems");t&&(0,b.setScrollView)(t,{topBanner:!1,overscrollY:!1})}function U(){(0,b.preventDocumentScroll)({topBanner:!1}),v.Messenger.setupConvoBody()}function V(){i.default.safari_mobile&&document.activeElement.blur()}function z(){var e=nav.getQuery("msg")||nav.getQuery("id")||nav.getQuery("edit_msg_id");e?requestAnimationFrame(function(){v.default.scrollToMsg(e)}):requestAnimationFrame(v.Messenger.scrollConvoToBottom)}function q(e){var t=store.mail.cur;(0,y.addPendingMsg)(e),t.peerId&&(0===e.sendId.indexOf("edit")?Re(e):(m.removeMsg(e),m.addMsg(e),Nt()))}function W(e){store.mail.cur.peerId&&0===e.sendId.indexOf("edit")&&Re(e)}function Y(){(0,y.failAllPendingMsgs)();var e=store.mail,t=e.cur,n=e.presend;if(t)if(t.peerId){if(n.failed[t.peerId]){var i=[];n.failed[t.peerId].map(function(e){var t=n.msgs[e];t&&(0===t.sendId.indexOf("edit")?Re(t):i.push(t))}),m.setMsgs(i)}}else Object.keys(n.failed).forEach(function(e){c.default.redrawLastMsg(e)})}function G(e){var t=store.mail.presend.msgs[e];t&&((0,y.removePendingMsg)(t),(0,y.removeFailedMsg)(t),0===e.indexOf("edit")?store.mail.cur.peerId&&h.default.peerReplaceItems([t.id]):(store.mail.cur.peerId&&m.removeMsg(t),Nt()))}function Q(e){Ne(e)}function X(e){Ne(e)}function K(){var e=store.mail,t=e.cur;e.peers;(0,y.setPeerDraft)(t.viewerId,t.peerId,{msgs:void 0},t.editing),t.msgAttached[t.peerId]=[],d.default.uiRedrawAttachments(t.peerId)}function J(e){var t=store.mail,n=(t.cur,t.rolls),i=t.msgs,r=Number(qs2obj(e.split("?")[1]).peer);i[last(n.peer[r]||[])];return _e(e)}function Z(e){var t=store.mail,n=t.cur,i=t.msgs,r=t.scraps,o=t.rolls,s=i[e];if(s&&(s.isImportant=!0,o.folder.important=o.folder.important.concat(e).filter(unique).sort(desc),a.default.toggleImportant(e,!0),"important"===n.folder)){var l=r.folder.slice();r.folder=r.folder.concat(e).filter(unique).sort(desc),h.default.redrawFolder(l)}}function ee(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=store.mail,i=n.cur,o=n.msgs,s=n.scraps,l=n.rolls,u=o[e];if(u&&(u.isImportant=!t,(0,r.arrayRemove)(l.folder.important,e),a.default.toggleImportant(e,!1),"important"===i.folder)){var c=s.folder.slice();(0,r.arrayRemove)(s.folder,e),h.default.redrawFolder(c)}}function te(e){var t=store.mail,n=t.cur,i=t.msgs,o=t.scraps,l=t.rolls,u=t.peers,c=i[e];if(c&&!n.msgRemoved[e]){delete i[e],(0,r.arrayRemove)(l.peer[c.peerId],e),n.peerId===c.peerId&&((0,r.arrayRemove)(o.peer,e),a.default.remove(e,!0),n.msgSelected[e]&&(delete n.msgSelected[e],s.default.setCount(Object.keys(n.msgSelected).length),v.default.redrawMailActions()),o.peer.length?h.default.checkDivider():h.default.redrawPeer()),c.isImportant&&n.countImportant--;var f=u[c.peerId],p=f.isIncomingMR,_=f.isRejectedMR;c.isUnread&&c.authorId!==n.viewerId&&(u[c.peerId].countUnread=u[c.peerId].countUnread-1,p||_||u[c.peerId].countUnread<=0&&(n.countUnread=n.countUnread-1),d.default.redrawToBottom(),A.default.redrawCounter()),l.peer[c.peerId].length?ie(c,e):ajaxRequest("/mail",{act:"get_last_msg",peer_id:c.peerId,user_id:n.userId},function(t,n){n&&(storeMethods.injectMail(t),l.peer[c.peerId].push(n)),ie(c,e)},function(){ie(c,e)})}}function ne(e){var t=store.mail.msgs,n=t&&t[e];n&&(n.listened=!0)}function ie(e,t){var n=store.mail,i=n.cur,o=(n.msgs,n.scraps),a=n.rolls,s=n.peers,l=s[e.peerId],u=l.isIncomingMR,c=l.isRejectedMR;a.peer[e.peerId].length||(u||c?(0,r.arrayRemove)(a.mrs,e.peerId):((0,r.arrayRemove)(a.folder.all,e.peerId),(0,r.arrayRemove)(a.folder.unread,e.peerId),(0,r.arrayRemove)(a.folder.unrespond,e.peerId)),"mrs"===i.page?(0,r.arrayRemove)(o.mrs,e.peerId):"important"!==i.folder&&(0,r.arrayRemove)(o.folder,e.peerId)),a.peer[e.peerId]=a.peer[e.peerId].filter(unique).sort(asc),u||c?a.mrs=a.mrs.filter(unique).sort(_t):(0===l.countUnread&&(a.folder.unread=a.folder.unread.filter(function(t){return t!==e.peerId})),a.folder.all=a.folder.all.filter(unique).sort(_t),a.folder.unread=a.folder.unread.filter(unique).sort(_t),i.groupId&&(a.folder.unrespond=a.folder.unrespond.filter(unique).sort(_t))),"mrs"===i.page?(o.mrs=o.mrs.filter(unique).sort(_t),h.default.redrawMRs()):"important"===i.folder?((0,r.arrayRemove)(o.folder,t),h.default.redrawFolder()):"all"===i.folder?(o.folder=o.folder.filter(unique).sort(_t),h.default.redrawFolder()):"unread"===i.folder?(0===s[e.peerId].countUnread&&(0,r.arrayRemove)(o.folder,e.peerId),o.folder=o.folder.filter(unique).sort(_t),h.default.redrawFolder()):"unrespond"===i.folder&&(o.folder=o.folder.filter(unique).sort(_t),h.default.redrawFolder())}function re(e){var t=store.mail,n=t.peers,i=t.cur;if(n[e]){var r=(0,y.getKeyboardState)(e);if(!(Date.now()-r.updateTime<=500)){var o=r.updateTime;ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(t){o===r.updateTime&&(storeMethods.injectMail(t),e==i.peerId&&d.default.renderKeyboardIfNeeded({update:!0}))})}}}function oe(e,t){var n=store.mail.peers[e];n&&(n.isImportant=t),c.default.redrawImportant(e,t)}function ae(e){nav.getQuery("community")||function(e){if(setNotify(e),!window.al||!window.al.menu)return;var t=window.al,n=new Array(t.menu.length);n[3]=e,menu.refreshCounters(n)}(e);var t=store.mail.cur;t&&(t.countUnread=e,A.default.redrawCounter()),window.ExperimentalBadge&&window.ExperimentalBadge.set(e)}function se(){im.pause(),fe(function(){im.resume()})}function le(e){Date.now()-B<=500||ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(t){var n=store.mail.cur;storeMethods.injectMail(t),e==n.peerId&&v.default.redrawBanner()})}function ue(e,t){im.pause(),ajaxRequest("/mail",{act:"get_peers",peer_ids:[t]},function(n){(0,y.replacePeer)(e,t),storeMethods.injectMail(n);var i=store.mail.cur;e===i.peerId?(h.default.redrawFolder(),t===i.peerId?Ee(t):_e("/mail?act=show&peer=".concat(t),{replace:!0})):i.folder&&h.default.redrawFolder(),im.resume()})}function ce(e,t,n){var i=store.mail,o=i.cur,a=i.peers;if(o){var s=a[e];s&&(t===o.userId&&(s.isAdmin=n),n&&!(0,r.arrayContains)(s.adminIds,t)?s.adminIds.push(t):!n&&(0,r.arrayContains)(s.adminIds,t)&&(0,r.arrayRemove)(s.adminIds,t))}}function de(e,t){var n=store.mail,i=n.cur,o=n.rolls,a=n.scraps;i&&("created"!==t&&O||("created"===t&&O&&(O=!1),"created"===t?Ae(e,function(t,n){(0,y.removePeer)(e),storeMethods.injectMail(t),i.countMR=n,store.mail.mrs&&(o.mrs=o.mrs.concat(e).filter(unique).sort(_t)),i.folder&&(h.default.redrawFolder(),v.default.redrawMRsHint()),i.peerId===e&&Ee(e)}):"canceled"===t?Ae(e,function(t,n){(0,y.removePeer)(e),storeMethods.injectMail(t),i.countMR=n,store.mail.mrs&&(0,r.arrayRemove)(o.mrs,e),i.folder&&(h.default.redrawFolder(),v.default.redrawMRsHint()),i.peerId===e?Ee(e):"mrs"===i.page&&((0,r.arrayRemove)(a.mrs,e),h.default.redrawMRs())}):"rejected"===t?Ae(e,function(t,n){(0,y.removePeer)(e),storeMethods.injectMail(t),i.countMR=n,store.mail.mrs&&(0,r.arrayRemove)(o.mrs,e),i.folder&&(h.default.redrawFolder(),v.default.redrawMRsHint()),i.peerId===e?Ee(e):"mrs"===i.page&&((0,r.arrayRemove)(a.mrs,e),h.default.redrawMRs())}):"accepted"===t&&Ae(e,function(t,n){(0,y.addPeer)(e),storeMethods.injectMail(t),i.countMR=n,store.mail.mrs&&(0,r.arrayRemove)(o.mrs,e),i.folder&&(h.default.redrawFolder(),v.default.redrawMRsHint()),i.peerId===e?Ee(e):"mrs"===i.page&&((0,r.arrayRemove)(a.mrs,e),h.default.redrawMRs())})))}function Ae(e,t){im.pause(),ajaxRequest("/mail",{act:"mrs_get_peer",peer_id:e},function(e,n){t(e,n),im.resume()})}function fe(e){var t=store.mail,n=t.cur,i=t.msgs,r=t.scraps,o=t.rolls;o.folder[n.folder]=[],r.folder=[],v.Messenger.setMainLoading(!0),ajaxRequest("/mail",{act:"all"===n.folder?null:n.folder,offset:0},function(t,a){if(store.mail.cur){storeMethods.injectMail(t),"all"!==n.folder&&"unread"!==n.folder||Object.keys(t.msgs).forEach(function(e){e=toInt(e);var n=t.msgs[e].peerId;o.peer[n]=(o.peer[n]||[]).concat(e).filter(function(e){return!!i[e]}).filter(unique).sort(asc)});var s="important"===n.folder,l=s?desc:_t,u=Object.keys(s?t.msgs:t.peers).map(toInt).sort(l).filter(function(e){return-1===r.folder.indexOf(e)}),c=[].concat(u).filter(unique).sort(l);o.folder[n.folder]=c,r.folder=first(20,c),store.mail.reached.folder[n.folder]=a,h.default.redrawFolder(),A.default.redrawCounter(),v.Messenger.setMainLoading(!1),e&&e()}})}function pe(){"/mail"!==location.pathname&&0!==location.pathname.indexOf("/write")||Pt()}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ye(e);return e=makeUrl(e),n&&location.pathname+location.search!==e&&nav.go(e,!1,{push_only:!0,replace:!0===t.replace}),n}function he(){var e=store.mail.cur.query;_e("/mail?q=".concat(e,"&tab=messages"))}function me(e){var t=me;if(t.timer&&clearTimeout(t.timer),store.mail.cur){var n=store.mail.cur,i=!n.query;if(e){var r="msgs"===n.tab?"&tab=messages":"",o=makeUrl("/mail?q=".concat(e)+r);ye(o),i?_e(o):t.timer=setTimeout(function(){_e(o,{replace:!0})},300)}else _e("/mail",{replace:!0})}}function ve(){v.Messenger.setMainLoading(!1),v.Messenger.setConvoLoading(!1),me.clearTimer(),_e("/mail",{replace:!0})}function ye(e){var t=(e=makeUrl(e)).split("?"),n=t[0],i=qs2obj(t[1]),r=store.mail,a=r.cur,s=r.scraps;if(a){var l=i.act,u=i.peer,c=i.chat,d=i.email,A=i.m,p=toInt(i.msg)||toInt(i.id)||null,_="messages"===i.tab?"msgs":"peers",m=i.q||"",g=+i.community||0;if(Qe())return!0;if("/mail"!==n||"add_to_chat"===l||"flush_history"===l||"info"===l||"msg"===l||"unpin"===l||"leave_chat"===l||"new_chat"===l||"chat_preview"===l||"return_to_chat"===l||"show_medias"===l||"toggle_community_block"===l||"community_toggle_important"===l||"ban_user"===l||"community_mark_answered"===l||"invite_link"===l||"reset_link"===l||"send"===l||"show"===l&&i.id||70==A||71==A||76==A||784==A||783==A||786==A||785==A||787==A)return x("[mail nav] Exit Mail"),void It();if((a.groupId?-a.groupId:0)===g){p&&(L=!0),h.default.clearSystemMessage2();var y=u?toInt(u):c?toInt(c)+2e9:d?-toInt(d)-2e9:null,w="unread"===l||"important"===l||"unrespond"===l?l:"all",b=function(e){switch(e){case"template":case"mrs":return!0}return!1}(l),E=!b&&!!a.page,k=a.query!==m||a.tab!==_;a.page;if(E&&(a.page=null),k&&y&&("peers"===a.tab?store.mail.cur.mvk_entrypoint="conversations_search":"msgs"===a.tab&&(store.mail.cur.mvk_entrypoint="message_search")),a.peerId&&!y&&m)x("[mail nav] Peer back to Search"),a.query=m,a.peerId=null,a.tab=_,ke(),v.Messenger.setQuery(m),Te();else if(k&&a.peerId===y)a.query=m,a.tab=_,s.search=[],a.tab!==_&&(store.mail.reached.search.msgs={}),v.default.redrawView(),v.Messenger.setQuery(m),h.default.redrawSearch(),m?(x("[mail nav] Search update"),Te()):(x("[mail nav] Search exit"),function(){var e=store.mail,t=e.cur,n=e.scraps;t.query="",t.tab="peers",n.search=[],v.default.redrawView(),h.default.redrawSearch(),v.Messenger.setQuery("")}(),0===s.folder.length&&Se());else if(b)x("[mail nav] Enter Page: "+l),a.page=l,a.peerId&&(a.peerId=null,ke()),a.backUrl=xt({peerId:y}),v.default.redrawView(),function(e){var t=store.mail.cur,n=v.Messenger.getPageLayer();"mrs"===t.page&&store.mail.mrs?(store.mail.scraps.mrs=store.mail.rolls.mrs.concat(),n.classList.toggle("messenger__layer_loading",!1),n.innerHTML=o.default.html((0,f.default)({count:t.countMR}))):(n.classList.toggle("messenger__layer_loading",!0),n.innerHTML=(0,v.Messenger_renderLoadingPage)(),ajaxRequest(e,{},function(e,t){t&&storeMethods.injectMail(t),n.classList.toggle("messenger__layer_loading",!1),n.innerHTML=e}))}(e);else{if(a.peerId&&a.peerId===y)return!0;a.peerId!==y||E&&y?y?(x("[mail nav] Enter Dialog"),a.backUrl=xt({peerId:y}),Ee(y,p)):(x("[mail nav] Exit Dialog"),ke(),we(w),v.Messenger.getMainBody().scrollTop=0,Se()):y&&A?(x("[mail nav] Peer System Msg"),store.mail.peers[y].systemMessageCode=toInt(A),h.default.updateClass("peer"),h.default.redrawSystemMessage(),v.Messenger.scrollConvoToBottom()):(a.folder!==w||E&&w)&&(x("[mail nav] Enter Folder"),we(w),v.Messenger.getMainBody().scrollTop=0,Se())}return!0}}}function we(e){var t=store.mail,n=t.cur,i=t.scraps,r=t.rolls;n.folder=e,be()?fe():(i.folder=first(20,r.folder[e]),h.default.folderSetItems(i.folder),v.default.redrawView(),A.default.redraw())}function be(){var e=store.mail,t=e.rolls,n=e.cur,i=e.msgs,r=t.folder[n.folder];return!r||("important"===n.folder?r.some(function(e){return!i[e]}):r.some(function(e){return!(t.peer[e]&&t.peer[e].length>0)}))}function Ee(e,t){var n=store.mail,i=n.cur,o=n.msgs,a=n.peers,s=n.scraps,l=n.rolls,u=n.reached;if(a[e]){var f=l.peer[e]||[];if(t||!(a[e].countUnread>1)||a[e].isIncomingMR||a[e].isRejectedMR){i.peerId=e,s.peer=[],ht(),t?(s.peer=[t],l.peer[e]=[],u.peer.before[e]=!1,u.peer.after[e]=!1):(s.peer=last(20,f),_()),store.mail.reached.peer.after[e]=!0,h.default.updateClass("peer"),v.default.redrawView(),v.Messenger.redrawConvoLayer(),wt(),A.default.startStatusUpdate(),h.default.peerSetItems(s.peer),U(),k.ready().then(function(){d.default.init()}),t||Ce(e);a[e];t&&(h.default.updateClass("peer"),v.default.scrollToMsg(t)),t?Me(t):Me(),(0,T.resizePosters)(),requestAnimationFrame(function(){t||(v.Messenger.scrollConvoToBottom(),k.ready().then(function(){v.Messenger.scrollConvoToBottom()})),AudioMessagePlayer.redrawWaves(),requestAnimationFrame(function(){t||v.Messenger.scrollConvoToBottom()})})}else{v.Messenger.setConvoLoading(!0),window._preventedCheckTop=!0,L=!0,i.peerId=e,s.peer=[],ht(),c.default.redrawUnread(e),v.default.redrawView(),v.Messenger.redrawConvoLayer(),wt(),A.default.startStatusUpdate(),_(),h.default.peerSetItems([]),U(),k.ready().then(function(){d.default.init()});var p={act:"show",peer_id:e,msg:"unread",reply_msg_id:i.msgReply[i.peerId]};ajaxRequest("/mail",p,function(t,n,i){if(store.mail.cur){var a=t.rolls.peer[e];if(storeMethods.injectMail(t),u.peer.after[e]=n,u.peer.before[e]=i,f=l.peer[e]||[],((0,r.arrayIntersects)(a,f)||n&&0===f.length)&&(l.peer[e]=f.concat(a).filter(unique).sort(asc)),store.mail.cur.peerId===e){d.default.preventShowToBottom(),s.peer=a.slice(),geByClass1("mailScrap__items_peer").innerHTML="",h.default.updateClass("peer"),h.default.peerSetItems(a),AudioMessagePlayer.redrawWaves(),Ce(e);var c=a.find(function(e){return o[e].isUnread});v.default.scrollToMsg(c,!0,!1),requestAnimationFrame(function(){window._preventedCheckTop=!1,L=!1,v.Messenger.setConvoLoading(!1)})}}})}}else ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(n){storeMethods.injectMail(n),a[e]?Ee(e,t):window.location.reload()});function _(){i.forwardFromId&&(st(),i.forwardFromId=null)}}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=store.mail,n=t.cur,i=t.scraps;A.default.cancelStatusUpdate(),Ct(),n.peerId=null,n.mvk_entrypoint="",i.peer=[],ht(),n.hasAttachments=!1,e.keepSelected||(n.msgSelected={}),v.default.redrawView(),A.default.redraw(),d.default.reset(),v.Messenger.cleanConvoBody(),H(),requestAnimationFrame(function(){s.default.setCount(0),v.default.redrawMailActions(),p.default.redraw(),requestAnimationFrame(function(){h.default.peerSetItems(i.peer)})})}function Ce(e){C.addAction("read_dialog".concat(e),function(){!function(e){var t=store.mail.peers;if(!t)return;var n=t[e];if(n&&(n.isIncomingMR||n.isRejectedMR))return;!n||n.countUnread>0?ajaxRequest("/mail",{act:"read_dialog",peer_id:e,hash:n.hashRead},function(){We(null,e)}):setTimeout(function(){We(null,e)},500)}(e)})}function De(e,t){C.addAction("read_dialog".concat(t),function(){!function(e,t){var n=store.mail.peers;if(!n)return;We(null,t),ajaxRequest("/mail",{act:"read_message",msg_id:e,peer_id:t,hash:n[t].hashRead},function(){})}(e,t)})}function Se(){var e=Se,t=e.locked||(e.locked={}),n=store.mail,i=n.cur,r=n.scraps,o=n.rolls,a=n.reached,s=i.folder,l=r.folder,u=o.folder[s],c="folder_".concat(s),d=a.folder[s]&&last(l)===last(u);if(v.Messenger.setMainLoading(0===l.length&&!d),!t[c]&&!d){var f="important"===s,p=be(),_=f?desc:_t,m=[];if(0===l.length)m=first(20,u);else{var g=u.indexOf(last(l));m=g>=0?u.slice(g+1,g+21):[]}if(m.length&&!p){var y=l.concat(m).filter(unique).sort(_);r.folder=y,h.default.folderAddItems(m)}else{t[c]=!0;var w="all"===s?null:s,b=p?0:l.length;ajaxRequest("/mail",{act:w,offset:b},function(e,n){if(store.mail.cur){storeMethods.injectMail(e),Object.keys(e.peers).forEach(function(e){store.mail.reached.peer.after[e]=!0}),"all"!==s&&"unread"!==s||Object.keys(e.msgs).forEach(function(t){t=toInt(t);var n=e.msgs[t].peerId;o.peer[n]=(o.peer[n]||[]).concat(t).filter(unique).sort(asc)});var d=Object.keys(f?e.msgs:e.peers).map(toInt).sort(_).filter(function(e){return-1===l.indexOf(e)}),m=u.concat(d).filter(unique).sort(_);o.folder[s]=m,n&&(a.folder[s]=n),t[c]=!1,i.folder===s&&(r.folder=m,h.default.updateClass("folder"),h.default.folderAddItems(d),v.Messenger.setMainLoading(!1),p&&(h.default.folderSetItems(r.folder),v.default.redrawView(),A.default.redraw()))}})}}}function Te(){var e=Te,t=e.locked||(e.locked={}),n=store.mail,i=n.cur,r=n.scraps,o=n.rolls,a=n.reached,s=i.tab,l=i.query,u="search_msgs_".concat(s,"_").concat(l),c=r.search,d=o.search[s][l]||[],A=a.search[s][l]&&last(c)===last(d);if(v.Messenger.setMainLoading(0===c.length&&!A),!t[u]&&!A){var f=[];if("peers"===s&&(d.length||(d=function(){var e=store.mail,t=e.cur,n=e.peers,i=(e.rolls,Object.keys(n).map(toInt)),r=[];return QuickSearch.getQueryREs(t.query).forEach(function(e){i.forEach(function(t){n[t].title.match(e)&&r.push(t)})}),r.filter(unique).sort(_t)}()),d.length))if(0===c.length)f=first(20,d);else{var p=d.indexOf(c);f=p>=0?d.slice(p+1,p+41):[]}if(f.length&&(r.search=c.concat(f).filter(unique),h.default.redrawSearch(),h.default.updateClass("search"),v.Messenger.setMainLoading(!1)),!f.length||"peers"===s){var _="msgs"===s?{act:"search",q:l,offset:r.search.length,messages:1}:{act:"search",q:l};e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){t[u]=!0,ajaxRequest("/mail",_,function(e,n){if(store.mail.cur){t[u]=!1,storeMethods.injectMail(e);var c=Object.keys("peers"===s?e.peers:e.msgs).map(toInt),A="peers"===s?_t:desc,f=d.concat(c).filter(unique).sort(A);o.search[s][l]=f,n&&(a.search[s][l]=n),i.tab===s&&i.query===l&&(v.Messenger.setMainLoading(!1),r.search=r.search.concat(c).filter(unique).sort(A),h.default.redrawSearch(),h.default.updateClass("search"))}})},300)}}}function Me(e){if(!$(".load_before_closed")){var t=Me,n=t.locked||(t.locked={}),i=store.mail,o=i.cur,a=i.scraps,s=i.rolls,l=i.reached;if(o){var u=o.peerId,c=a.peer,A=s.peer[u]||[],f="peer_before_".concat(u),p=l.peer.before[u]&&c[0]===A[0],_=o.msgReply[u];if(v.Messenger.setConvoLoading(c.length<1&&!p),!n[f]&&!p){var m=v.Messenger.getConvoBody(),g=!(0,r.arrayIntersects)(c,A),y=first(c),w=y?A.indexOf(y):-1,b=0===c.length?last(10,A):w>=0?A.slice(w-20,w):[];if(b.length&&!e){if(m.scrollTop>6e3&&!g)return;if(window._preventedCheckTop)return;var E=a.peer.slice(),k=c.concat(b).filter(unique).sort(asc);a.peer=k,h.default.peerAddItemsBefore(b.filter(function(e){return-1===E.indexOf(e)})),AudioMessagePlayer.redrawWaves(),h.default.updateClass("peer"),v.Messenger.setConvoLoading(!1)}else{if(!u)return;var C={act:"show",peer_id:u,msg:c[0],direction:e?"around":"before",reply_msg_id:_},D=c[0];n[f]=!0,ajaxRequest("/mail",C,function(t,i,o){if(store.mail.cur){e&&setTimeout(function(){L=!1},10),n[f]=!1,t.peers=[],storeMethods.injectMail(t);var p=Object.keys(t.msgs).map(toInt).filter(function(e){return-1===c.indexOf(e)}),_=c.concat(p).filter(unique).sort(asc);if(o&&(l.peer.before[u]=!0),i&&(l.peer.after[u]=!0),A=s.peer[u]||[],((0,r.arrayIntersects)(_,A)||o&&0===A.length)&&(s.peer[u]=(s.peer[u]||[]).concat(_).filter(unique).sort(asc)),store.mail.cur.peerId===u){if(d.default.preventShowToBottom(),m.scrollTop>6e3&&!g)return;var y=a.peer.slice();a.peer=_,h.default.updateClass("peer"),D?(h.default.peerAddItemsBefore(p.filter(function(e){return-1===y.indexOf(e)&&e<D}),!0),h.default.peerAddItemsAfter(p.filter(function(e){return-1===y.indexOf(e)&&e>D}),!0)):h.default.peerAddItemsBefore(p,!0),e&&(v.default.scrollToMsg(e),v.Messenger.setConvoLoading(!1)),AudioMessagePlayer.redrawWaves(),v.Messenger.setConvoLoading(!1),v.default.expandPeerBefore(),setTimeout(v.default.expandPeerBefore,100),e&&st(),d.default.redrawReply()}}})}}}}}function Pe(){var e=Pe,t=e.locked||(e.locked={}),n=store.mail,i=n.cur,o=n.scraps,a=n.rolls,s=n.reached;if(!L&&i){var l=i.peerId,u=o.peer,c=a.peer[l]||[],d="peer_after_".concat(l);if(!(t[d]||s.peer.after[l]&&last(u)===last(c))){var A=v.Messenger.getConvoBody(),f=!(0,r.arrayIntersects)(u,c),p=function(){return A.scrollHeight-A.scrollTop-A.offsetHeight},_=last(u),m=_?c.indexOf(_):-1,g=m>=0?c.slice(m+1,m+21):[];if(!g.length||nav.getQuery("msg")||nav.getQuery("id")){if(!l)return;var y={act:"show",peer_id:l,msg:last(u),direction:"after"};t[d]=!0,ajaxRequest("/mail",y,function(e,n){if(store.mail.cur){t[d]=!1,e.peers=[],storeMethods.injectMail(e);var i=Object.keys(e.msgs).map(toInt).filter(function(e){return-1===u.indexOf(e)}).sort(asc),A=u.concat(i).filter(unique).sort(asc);if(n&&(s.peer.after[l]=n),c=a.peer[l]||[],((0,r.arrayIntersects)(A,c)||n&&0===c.length)&&(a.peer[l]=(a.peer[l]||[]).concat(A).filter(unique).sort(asc)),store.mail.cur.peerId===l){if(p()>6e3&&!f)return;n&&h.default.updateClass("peer"),o.peer=A,h.default.updateClass("peer"),h.default.peerAddItemsAfter(i),AudioMessagePlayer.redrawWaves()}}})}else{if(p()>6e3&&!f)return;var w=u.concat(g).filter(unique).sort(asc);o.peer=w,h.default.peerAddItemsAfter(g),h.default.updateClass("peer"),AudioMessagePlayer.redrawWaves()}}}}me.clearTimer=function(){self=me,self.timer&&(clearTimeout(self.timer),self.timer=null)};var Ie=!1;function xe(e){var t=store.mail,n=t.cur,i=t.scraps,r=t.rolls,o=e.scrollTop,a=e.scrollHeight,s=e.offsetHeight;if(n)if(!n.query&&o<=20&&i.folder.length){if(Ie){Ie=!1;i.folder.slice();i.folder=first(20,r.folder[n.folder]),h.default.folderCutItems(20)}}else o>20&&(Ie=!0,a-o-s<window.innerHeight&&(n.query?Te():Se()))}function Oe(){var e=store.mail,t=e.cur,n=e.scraps,i=e.rolls,r=e.reached,o=n.peer,a=i.peer[t.peerId]||[];if(a.length&&last(o)===last(a)&&r.peer.after[t.peerId])v.Messenger.scrollConvoToBottom(),d.default.hideToBottom(),h.default.updateClass("peer");else{var s=t.peerId;ajaxRequest("/mail",{act:"show",peer_id:s},function(e,t){if(store.mail.cur){var o=e.rolls.peer[s];i.peer[s]=o.slice(),storeMethods.injectMail(e),r.peer.after[s]=!0,store.mail.cur.peerId===s&&(d.default.preventShowToBottom(),n.peer=o.slice(),geByClass1("mailScrap__items_peer").innerHTML="",h.default.peerAddItemsBefore(o),h.default.updateClass("peer"),v.Messenger.scrollConvoToBottom(),AudioMessagePlayer.redrawWaves())}})}}function Le(e){var t=Le;t.timer||(t.timer=setTimeout(function(){t.timer=null,function(e){var t=store.mail,n=t.cur,i=t.scraps,r=t.msgs,o=t.peers;if(!n)return;var s=i.peer.find(function(e){return r[e]&&r[e].isUnread&&r[e].authorId!==n.viewerId}),l=e.scrollTop,u=e.scrollHeight-l-e.offsetHeight;if(s){var c=a.default.getElem(s),A=e.scrollHeight-c.offsetTop;u-A<=100&&Ce(n.peerId)}e._prevScroll||(e._prevScroll=0),u<300&&$(".mailScrap_reachedAfter")?d.default.hideToBottom():l>e._prevScroll-5||n.peerId&&o[n.peerId].countUnread?d.default.showToBottom():d.default.hideToBottom();e._prevScroll=l}(e)},50))}function Be(e){for(var t=0,n=e.attaches.length;t<n;t++){if("sticker"===e.attaches[t].type)return!1}var i=store.mail.cur;return i.userId===e.peerId&&!i.groupId||e.isOut}function Ne(e){var t,n=e.peerId,i=e.id,r=e.authorId,o=e.attaches,a=e.adminId,s=e.isService,l=e.isStealth,u=e.isOut,c=e.keyboard,d=store.mail,A=(d.cur,d.peers),f=(d.msgs,d.members),p=A[n]&&A[n].pinnedMsgId===i,_=(0,w.getMsgSendId)(e),h=(0,y.getPendingMsg)(_,n),b=!(!h&&!e.replaced);if(h?(E.mark(_,"opt_to_lp"),t=function(e){return!!e.length}(o)):t=s||o.length||p||!A[n]||!f[r]||a&&!f[a],h){var C=function(e){var t=store.mail.cur;if((0,y.removePendingMsg)(e),k.remove(e.sendId,"silent"),t.peerId&&-1===e.sendId.indexOf("edit"))return m.getMsg(e)}(h),S=Object.assign({},h,{id:i,failed:!1,pending:!1,waiting:!0,sendId:void 0,canEdit:Be(e)});if(storeMethods.injectMsg(S),Re(S,{existingElem:C}),!t)return void E.clean(_)}!c&&!t||u||e.edited||((0,y.getKeyboardState)(n).updateTime=Date.now());if(!c||t||u||e.edited||function(e){var t=e.peerId,n=e.authorId,i=e.msgId,r=e.keyboard,o=store.mail.peers[t];if(r.buttons&&r.buttons.length){o.keyboard=Object.assign(r,{author_id:n,chat_local_id:i});var a=document.createElement("div");o.keyboard.buttons.forEach(function(e){e.forEach(function(e){var t=e.action.label;a.textContent=t;var n=a.innerHTML;e.action.label=(0,g.emojiToHTML)(n),e.action.rawLabel=t})}),a=null}else o.keyboard=null}({peerId:n,authorId:r,msgId:i,keyboard:c}),t)return im.pause(),void D.loadMessage({msgId:i,forcePinned:p,onTryError:function(e){var t=e.type;_&&(E.error(_,"server_load_attach",t),E.clean(_))},onResult:function(e){var t=I(e,2),r=t[0],o=t[1];(_&&(E.mark(_,"attach"),E.clean(_)),store.mail.cur)&&(storeMethods.injectMail(r),o&&function(e,t){var n=t.unpin,i=t.pinned,r=store.mail,o=r.cur,a=r.peers;if(n){a[e].pinnedMsg="",a[e].hasPinnedMsg=!1;var s=Et();delete s[e],kt(s),o.peerId===e&&(v.default.redrawPinnedMsg(),wt())}else i&&(a[e].pinnedMsg=i,a[e].hasPinnedMsg=!0,o.peerId===e&&(v.default.redrawPinnedMsg(),wt()))}(n,o),Re(r.msgs[i],{isStealth:l,isServerMsg:!0,isReplace:b}),im.resume())}});var T=function(e){var t,n=e.peerId,i=e.id,r=e.authorId,o=e.isOut,a=e.text,s=e.ts,l=e.flags,u=e.adminId,c=e.isService,d=store.mail,A=d.cur,f=(d.peers,d.msgs),p=d.members,_=(0,w.formatTime)(s,A.timeShift),h=f[i],m="";a&&(m=a.replace(/<br>/g,"\n").replace(w.MENTION_DOMAIN_REGEXP,"@$3").replace(w.MENTION_REGEXP,"@$1 ($3)"));t=e.replaced?!!h&&h.edited:!!e.edited;var v=a,y=a;y=(0,w.wrapLinks)(y,l),y=(0,w.wrapMention)(y),y=(0,g.emojiToHTML)(y);var b={id:i,peerId:n,authorId:r,ts:s,date:_,dateShort:_,text:y,textInput:m,body:v,isUnread:!h||h.isUnread,edited:t,canEdit:Be(e),isOut:o,isService:c,attaches:{},forwards:[],hasReply:!!e.hasReply};u&&(b.adminName=u===A.userId?lang.mobile_mail_you:p[u].name,b.adminUrl=p[u].url);return b}(e);storeMethods.injectMsg(T),Re(T,{isStealth:l,isReplace:b})}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isStealth,i=t.isServerMsg,o=t.isReplace,a=t.existingElem,s=store.mail,l=s.cur,u=s.peers,f=(s.msgs,s.members,s.rolls),m=s.scraps,g=s.reached,w=e.peerId,b=(e.keyboard,e.authorId),E=e.isOut,k=e.id,C=!E,D=u[w]&&0===u[w].countUnread&&C,S=o||!!e.edited,T=u[w],M=T.isIncomingMR,P=T.isRejectedMR,I=v.Messenger.getConvoBody(),x=!1;if(e.isUnread&&(x=l.viewerId===w||l.peerId===w&&C&&I.scrollHeight-I.scrollTop-I.offsetHeight<400&&!!$(".mailScrap_reachedAfter")),x&&C&&!M&&!P&&De(k,w),!S){var O=last(f.peer[w]||[]);f.peer[w]=(f.peer[w]||[]).concat(k).filter(unique).sort(asc),n||M||P||(f.folder.all=f.folder.all.concat(w).filter(unique).sort(_t),g.peer.after[w]||(g.peer.after[w]=!0,g.peer.before[w]=!1));var L=u[w];if(C&&(w===l.peerId&&d.default.renderKeyboardIfNeeded({update:!0}),n||(M||P||(f.folder.unread=f.folder.unread.concat(w).filter(unique).sort(_t)),i||(L.countUnread||(L.countUnread=0),L.countUnread+=1)),w!==l.peerId&&n||d.default.redrawToBottom()),!n&&!M&&!P)if(D&&(l.countUnread+=1,A.default.redrawCounter()),l.groupId&&(C?f.folder.unrespond=f.folder.unrespond.concat(w).filter(unique).sort(_t):(0,r.arrayRemove)(f.folder.unrespond,w)),"all"===l.folder){var B=m.folder.slice();m.folder=m.folder.concat(w).filter(unique).sort(_t),h.default.redrawFolder(B)}else if("unread"===l.folder&&b!==l.viewerId){var N=m.folder.slice();m.folder=m.folder.concat(w).filter(unique).sort(_t),h.default.redrawFolder(N)}else if("unrespond"===l.folder){var R=m.folder.slice();C?m.folder=m.folder.concat(w).filter(unique).sort(_t):(0,r.arrayRemove)(m.folder,w),h.default.redrawFolder(R)}if(M&&(f.mrs=f.mrs.concat(w).filter(unique).sort(_t),"mrs"===l.page)){var F=m.mrs.slice();m.mrs=m.mrs.concat(w).filter(unique).sort(_t),h.default.redrawMRs(F)}if(l.peerId!==w||!(0,r.arrayIntersects)(m.peer,f.peer[w])&&0!==m.peer.length||last(m.peer)!==O)a&&a.remove();else{m.peer.slice();m.peer=m.peer.concat(k).filter(unique).sort(asc);var j=Fe(function(){a?h.default.peerAddElemAfter(k,a):h.default.peerAddItemsAfter([k])});C&&!j&&d.default.showToBottom(),b===l.viewerId&&h.default.removeDivider()}b===l.viewerId&&StickersAnimation.checkSettingsAndLoad(e,!0);var H=(0,_.uTyping_getPeerTyping)(w);H&&H.users.length&&((0,y.removePeerTypingUser)(w,b),w===l.peerId&&p.default.redraw(),c.default.redrawTyping(w))}var U=k===(0,c.uConvo_getLastMsgId)(w);S&&(U?Fe(function(){return h.default.peerReplaceItems([k])}):h.default.peerReplaceItems([k])),!n&&U&&(c.default.redrawLastMsg(w),c.default.redrawUnread(w)),w===l.peerId&&AudioMessagePlayer.redrawWaves()}function Fe(e){var t=v.Messenger.getConvoBody(),n=t.scrollTop+t.offsetHeight>=t.scrollHeight-2;e();var i=t.scrollHeight-t.scrollTop-t.offsetHeight<400;return n&&v.Messenger.scrollConvoToBottom(),i}function je(){if(store.mail.cur){var e=store.mail.cur.backUrl;if(store.mail.cur.backUrl=null,H(),e)history.back();else _e(function(){var e=store.mail.cur;if("mrs"===e.page)return"/mail";if("template"===e.page){var t=nav.getQuery("from");return"/mail?act=show&peer=".concat(t)}return e.tab?"/mail":(e.peerId,"/mail")}(),{replace:!0})}}function He(){var e=store.mail.cur,t=e.msgSelected,n=e.forwardFromId;e.forwardFromId=null,Object.keys(t).forEach(function(e){delete t[e]}),a.default.unselectAll(),v.default.redrawMailActions(),n&&Ee(n)}var Ue={};function Ve(e,t,n){var i=store.mail,r=i.cur,o=i.peers,a=o?o[e]:null;if(a&&!a.isIncomingMR&&!a.isRejectedMR){var s=(0,y.filterPeerTypingUser)({type:"text",users:t,count:n},r.viewerId);(0,y.setPeerTyping)(e,s);var l=Ue[e];l&&clearTimeout(l),s.count&&s.users.length&&(Ue[e]=setTimeout(function(){Ue[e]=null,Ve(e,[],0)},7e3),Bt(s.users,e)),e===r.peerId&&p.default.redraw(),c.default.redrawTyping(e)}}var ze={};function $e(e,t,n){var i=store.mail,r=i.cur,o=i.peers;if(o?o[e]:null){var a=(0,y.filterPeerTypingUser)({type:"audio",users:t,count:n},r.viewerId);(0,y.setPeerTyping)(e,a);var s=ze[e];s&&clearTimeout(s),a.count&&a.users.length&&(ze[e]=setTimeout(function(){ze[e]=null,$e(e,[],0)},7e3),Bt(a.users,e)),e===r.peerId&&p.default.redraw(),c.default.redrawTyping(e)}}function qe(e){var t=e.userId,n=e.isOnline,i=e.onlinePlatform,r=e.lastActionTime,o=store.mail,a=o.cur,s=o.peers[t];s&&(s.isOnline=n,e.isOnline&&(s.onlinePlatform=i),r&&(s.lastActionTime=r),c.default.redrawOnline(t),a.peerId===t&&A.default.redrawOnline())}function We(e,t){var n=store.mail,i=n.cur,o=n.peers,s=n.msgs,l=n.scraps,u=n.rolls;if(i){var f=i.peerId===t?l.peer:[],p=u.peer[t]||[],_=o[t];if(p.concat(f).forEach(function(e){var t=s[e];t&&t.isUnread&&t.authorId!==i.viewerId&&(delete t.isUnread,a.default.markAsRead(e))}),_?_.countUnread&&(i.countUnread-=1,_.countUnread=0):i.countUnread-=1,(0,r.arrayRemove)(u.folder.unread,t),"unread"===i.folder){var m=l.folder.slice();(0,r.arrayRemove)(l.folder,t),h.default.redrawFolder(m)}A.default.redrawCounter(),d.default.redrawToBottom(),c.default.redrawUnread(t)}}function Ye(e,t){var n=store.mail,i=n.cur,r=n.msgs,o=n.rolls,s=n.scraps,l=o.peer[t]||[];if(r[e])for(var u=l.indexOf(e);u>=0;){var d=r[l[u]];d.authorId===i.viewerId&&d.isUnread&&(delete d.isUnread,a.default.markAsRead(d.id)),u--}else last(l)&&e<=last(l)&&l.forEach(function(e){var t=r[e];t.authorId===i.viewerId&&t.isUnread&&(delete t.isUnread,a.default.markAsRead(t.id))});i.peerId===t&&s.peer.forEach(function(e){var t=r[e];t.authorId===i.viewerId&&t.isUnread&&(delete t.isUnread,a.default.markAsRead(t.id))}),c.default.redrawUnread(t)}function Ge(){if(Qe())return!0;var e=store.mail.cur;if(e&&(e.backUrl=null),e&&e.forwardFromId)return He(),!0;i.default.safari_mobile&&document.activeElement.blur();var t=qs2obj(location.search.slice(1)).act;if(!$(".uMessenger")&&"/mail"===location.pathname&&"show_medias"!==t)return nav.go(location,null,{no_push:!0,need_restore:!1}),!0;var n=new RegExp(/z=photo/).test(location.search);if($(".uMessenger")&&!n&&!ge("z_photoview")&&!ge("StoriesView")){var r=ye(location.pathname+location.search);return r&&nav.go(location.pathname+location.search,null,{no_push:!0,push_only:!0}),r}}function Qe(){var e=Qe;if(mediaUpload.isUploading)return e.noAlert||alert(unescapeAttr(lang.mobile_mail_wait_until_uploaded)),e.noAlert=!0,setTimeout(function(){e.noAlert=!1},10),!0}function Xe(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=store.mail.cur;if(!("/mail"===n&&r&&r.groupId||i.replace))return!t.m&&geByClass1("uMessenger")?_e(n):void 0}function Ke(){window.isNewMail&&(store.mail.cur?"/mail"!==location.pathname&&0!==location.pathname.indexOf("/write")?It():Pt():me.clearTimer())}function Je(){var e=store.mail,t=e.cur,n=(e.msgs,e.peers),i=e.hash,r=t.msgSelected,o=toInt(Object.keys(r)[0]),s=n[t.peerId];t.hasAttachments=!1,t.msgSelected={},s.pinnedMsgId=o,s.hasPinnedMsg=!0,a.default.unselectAll(),v.default.redrawMailActions(),ajaxRequest("/mail?act=pin",{hash:i.pin,chat:nav.getQuery("chat")||store.mail.cur.peerId-2e9,msg:o,_ajax:1})}function Ze(){var e,t=store.mail,n=t.cur,i=t.msgs,r=(t.peers,t.hash),o=(t.replies,t.pendingReplies,n.msgSelected),a=toInt(Object.keys(o)[0]),s=n.peerId,l=(0,y.getPeerDraft)(n.viewerId,n.peerId),u=i[a],c=function(e){u.hasReply||l&&l.editing&&l.editing.id==a&&l.msgs&&(n.msgAttached[s]=l.msgs),u.hasReply?n.msgReply[s]=u.reply:n.msgReply[s]=null,d.default.redrawReply(),d.default.onAttachedMsgsRemove(),d.default.uiRedrawAttachments(s),d.default.setModifiers({editing:!0}),A.default.setModifiers({editing:!0}),v.default.redrawMailActions(),et(),d.default.setText(e)};if(n.editing==a)return e=l&&l.editing&&l.editing.id==a?l.editing.text||"":u.textInput,void c(e);n.editing=a,Dt(),ajaxRequest("/mail?act=edit_message_start",{hash:r.edit,edit_msg_id:a,peerId:s,_ajax:1},function(e,t){(0,y.pushPeerAttachments)(n.peerId,e),c(t)})}function et(){var e=store.mail.cur.msgSelected;Object.keys(e).forEach(function(t){delete e[t]}),a.default.unselectAll(),s.default.setCount(0),v.default.redrawMailActions()}function tt(){var e=store.mail,t=(e.msgs,e.cur),n=Object.keys(t.msgSelected).every(nt);1!==Object.keys(t.msgSelected).length||n?l.default.open({canDeleteForAll:n}):rt()}function nt(e){var t=store.mail,n=t.msgs,i=(t.cur,t.peers),r=vk.id,o=n[e],a=nav.getQuery().community,s=i[o.peerId];return!!o&&(o.authorId!==r&&o.authorId!==-a?s.isAdmin&&-1===s.adminIds.indexOf(o.authorId):!(o.peerId===r&&!a)&&(333!==o.peerId&&(!(Date.now()/1e3-o.ts>86400)&&!(s.kicked||s.closed||s.unableToWrite||s.kickedMessage))))}function it(){var e=store.mail.cur.editing;e?(!function(e){var t=store.mail,n=t.cur,i=(t.hash,t.msgs,t.peers),r=n.peerId;te(e),ajaxRequest("/mail",{act:"delete_for_all",peer:r,ids:e+"",hash:i[r].hashRemove},function(){}),v.default.redrawMailActions()}(e),Ct(!0)):rt(!1,l.default.isDeleteMessagesForAll()),l.default.close()}function rt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=store.mail,i=n.cur,r=(n.hash,n.msgs,n.peers),o=i.peerId,s=i.msgRemoved,l=i.msgSelected,u=Object.keys(l);u.forEach(function(n){delete l[n=+n],t?te(n):(s[n]=!e||"spam",e?a.default.spam(n):a.default.remove(n))}),ajaxRequest("/mail",{act:t?"delete_for_all":e?"spam":"delete",peer:o,ids:u.join(","),hash:r[o].hashRemove},function(){}),v.default.redrawMailActions()}function ot(){rt(!0)}function at(){var e=store.mail,t=e.cur,n=e.hash,i=e.msgs,r=t.msgSelected,o=Object.keys(r),s=o.some(function(e){return!i[e].isImportant})?1:0;o.forEach(function(e){delete r[e],i[e].isImportant!=!!s&&(s?t.countImportant++:t.countImportant--),i[e].isImportant=!!s,a.default.toggleImportant([e],!!s)}),ajaxRequest("/mail",{act:"mark_important",ids:o,hash:n.important,val:s},function(){}),a.default.unselectAll(),v.default.redrawMailActions()}function st(){var e=store.mail.cur,t=e.peerId,n=Object.keys(e.msgSelected).map(toInt);e.msgAttached[t]=n,(0,y.setPeerDraft)(e.viewerId,e.peerId,{msgs:n,reply:void 0},e.editing),e.msgReply[t]&&!e.editing&&ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),e.msgReply[t]=null,e.msgSelected={},a.default.unselectAll(),s.default.setCount(0),d.default.redrawReply(),d.default.uiRedrawAttachments(t),v.default.redrawMailActions()}function lt(){var e=store.mail,t=e.cur,n=e.flags,i=e.pendingReplies,r=t.peerId;if(!(0,w.isContactPeer)(r)){if(!n.replies)return st();var o=toInt(Object.keys(t.msgSelected)[0]);t.msgReply[r]=o,i[o]=a.default.getReplyDataFromHTML(o),(0,y.setPeerDraft)(t.viewerId,t.peerId,{reply:o,msgs:void 0},t.editing),ajaxRequest("/mail",{act:"reply_start",hash:store.mail.hash.reply,peer_id:store.mail.cur.peerId,msg_id:o}),t.msgAttached[r]=[],t.msgSelected={},a.default.unselectAll(),s.default.setCount(0),d.default.redrawReply(),d.default.uiRedrawAttachments(r),v.default.redrawMailActions(),d.default.openKeyboard("text")}}function ut(){var e=store.mail.cur;e&&((0,w.isContactPeer)(e.peerId)||(e.forwardFromId=e.peerId,e.query="",e.tab="peers",v.Messenger.setQuerySilently(""),ke({keepSelected:!0}),we("all"),v.Messenger.getMainBody().scrollTop=0,Se()))}function ct(e){if(store.mail.cur){var t=store.mail,n=t.cur,i=t.peers,r=t.msgs,o=t.flags,a=n.msgRemoved,l=n.msgSelected,u=i[n.peerId];if(d.default.hideStickersPanel(),!a[e]){l[e]?delete l[e]:l[e]=!0;var c=Object.keys(l),A=c.length,f=1===A&&c[0]==i[n.peerId].pinnedMsgId,p=c.reduce(function(e,t){return e&&r[t].isImportant},!0);s.default.setCount(A),s.default.setModifiers({pinned:f,important:p}),s.default.setLabels({pinned:f,important:p}),(0,w.isContactPeer)(n.peerId)?s.default.toggleQuickButtons(!1):s.default.toggleQuickButtons(!0),o.replies&&(1!==A||u.isIncomingMR?s.default.setReplyAvailable(!1):s.default.setReplyAvailable(!0));var _=toInt(Object.keys(l)[0]),h=1==A&&r[_];if(s.default.setEditAvailable(h&&h.canEdit&&!u.unableToWrite),s.default.setImportantAvailable(A>0&&n.viewerId>0),u.canPin){var m=toInt(Object.keys(l)[0]);s.default.togglePin(1===A&&m!==u.pinnedMsgId)}else s.default.togglePin(!1);v.default.redrawMailActions()}}}function dt(e){var t=store.mail,n=t.cur,i=t.hash,r=t.msgs[e],o="spam"===n.msgRemoved[e]?"nospam":"restore";delete n.msgRemoved[e],a.default.restore(e),ajaxRequest("/mail",{act:o,id:e,hash:i.restore},function(){}),r.isImportant&&(n.countImportant++,Z(e)),h.default.redrawFolder()}function At(e,t,n){var i=store&&store.mail&&store.mail.cur;if(i&&e){var r=store.mail.forwards[n];if(r.peerId&&r.peerId===i.peerId&&!i.msgRemoved[e])v.default.scrollToMsg(e)||ajaxRequest("/mail",{act:"get_msgs",msgs:[e]},function(i){storeMethods.injectMail(i);var r=store.mail,o=r.msgs,a=r.cur;a.peerId&&(o[e]?Ee(a.peerId,e):ft(e,t,n))});else ft(e,t,n)}else ft(e,t,n)}function ft(e,t,n){if(t){var i=nav.getQuery();"show"===i.act&&(i.msg=t,nav.go(location.pathname+obj2qs(i),!1,{replace:!0,push_only:!0}))}var r=(0,a.Msg_makeReplyLink)(e,t,n);nav.go(r,null,{force:!0})}function pt(e){var t=store.mail.cur;t&&(t.msgSelected=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,!0),statlogsValueEvent("messages_channel_forward_click",0),ut())}function _t(e,t){var n=store.mail,i=n.rolls,r=n.presend,o=n.msgs,a=i.peer[e]||[0],s=i.peer[t]||[0],l=Rt(r.pending[e],function(e){return-1===e.indexOf("edit")}),u=Rt(r.pending[t],function(e){return-1===e.indexOf("edit")}),c=last(a),d=last(s),A=Math.max(l?r.msgs[l].ts:0,c?o[c].ts:0);return Math.max(u?r.msgs[u].ts:0,d?o[d].ts:0)-A}function ht(){if(store.mail.cur){var e=!!store.mail.cur.peerId;$$(".vk__page_mail").forEach(function(t){return t.classList.toggle("messenger_noPullToRefresh",e)})}}function mt(){var e=store.mail.cur.peerId,t=$(".pinnedMsg");if(t){Number(t.dataset.id);var n=Et();delete n[e],kt(n),wt()}}function vt(){var e=store.mail.cur.peerId,t=$(".pinnedMsg");if(t){var n=Number(t.dataset.id),i=Et();i[e]=n,kt(i),wt()}}function gt(e,t){var n=store.mail,i=n.cur,r=n.peers[i.peerId];ajaxRequest("/mail",{act:"banner_callback",hash:r.hashBanner,peer_id:i.peerId,callback_data:t}),B=Date.now(),r.banner=null,v.default.redrawBanner()}function yt(e){var t=$(".messenger__banner_content");t&&t.classList.toggle("messenger__banner_contentExpanded")}function wt(){var e=store.mail,t=e.cur;e.peers;if(t){var n=t.peerId;if(n){var i=$(".pinnedMsg"),r=Et()[n],o=i?intval(i.dataset.id):null;v.default.setPinnedVisibility(o&&r!==o)}}}function bt(){if(store.mail.cur&&store.mail.cur.peerId){var e=$(".pinnedMsg");if(e)if(!Number(e.dataset.id)){var t=store.mail.cur.peerId,n=Et();delete n[t],kt(n)}}}function Et(){return lsGet("messenger.pinHidden")||{}}function kt(e){lsSet("messenger.pinHidden",e)}function Ct(e){var t=store.mail.cur;if(t&&t.editing){t.editing=!1,Dt(),!0!==e&&ajaxRequest("/mail?act=edit_message_cancel",{peerId:t.peerId}),(0,y.popPeerAttachments)(t.peerId),(0,y.setPeerDraft)(t.viewerId,t.peerId,{});var n=(0,y.getPeerDraft)(t.viewerId,t.peerId);t.msgAttached[t.peerId]=n.msgs||[],t.msgReply[t.peerId]=n.reply||null,d.default.setText(n&&n.text||""),d.default.setModifiers({editing:!1}),A.default.setModifiers({editing:!1}),d.default.uiRedrawAttachments(t.peerId),d.default.redrawReply();var i=v.Messenger.getConvoBody();i.scrollTop+i.offsetHeight>=i.scrollHeight-2&&v.Messenger.scrollConvoToBottom()}}function Dt(){var e=nav.getQuery();store.mail.cur.editing?e.edit_msg_id=store.mail.cur.editing||void 0:delete e.edit_msg_id,nav.go(location.pathname+obj2qs(e),!1,{replace:!0,push_only:!0})}function St(){if(store.mail.msgs){var e=+nav.getQuery("edit_msg_id");e&&store.mail.msgs[e]&&(store.mail.cur.msgSelected[e]=!0,Ze())}}function Tt(e){var t=e.closest(".".concat(a.default.class));if(t){var n=a.default.getId(t);store.mail.msgs[n].textFull=a.default.getTextHtml(t)}}function Mt(e){_e(e)}function Pt(){store.mail.cur&&(window.isCustomScroll&&(0,b.restoreDocumentScroll)(),!store.mail.cur&&!store.mail.page||store.mail.cur.peerId||H(),store.mail.cur.peerId&&U(),k.ready().then(Lt).then(function(){Nt(),store.mail.cur.peerId&&(d.default.init(),We(0,store.mail.cur.peerId)),nav.getQuery("msg")||nav.getQuery("id")||v.Messenger.scrollConvoToBottom()}),im.on(),C.start(),function(){var e=qs2obj(location.search.slice(1));store.mail.cur.mvk_entrypoint=e.mvk_entrypoint||"notifications"===e.from&&"notifications"||""}(),v.default.startPolling(),addEvent(window,"resize",T.resizePosters),window.ExperimentalBadge&&window.ExperimentalBadge.set(store.mail.cur.countUnread))}function It(){if(store.mail.cur){if(!document.body.classList.contains("vk__page_mail"))return im.off(),C.stop(),void storeMethods.resetMail();(0,b.restoreDocumentScroll)(),v.Messenger.cleanConvoBody(),im.off(),C.stop(),v.default.stopPolling(),A.default.cancelStatusUpdate(),h.default.resetPrevScraps(),storeMethods.resetMail()}}function xt(e){var t=e.peerId,n=store.mail.cur,i=null;if("mrs"===n.page)i="/mail?act=mrs";else if("template"===n.page)i="/mail?act=template";else if(n.forwardFromId&&n.forwardFromId!==t)i="/mail?act=show&peer=".concat(n.forwardFromId);else if(n.query){var r="msgs"===n.tab?"&tab=messages":"";i="/mail?q=".concat(n.query).concat(r)}else if(n.peerId)i="/mail?act=show&peer=".concat(n.peerId);else if(n.folder&&!n.forwardFromId){var o="";"all"!==n.folder&&(o="?act=".concat(n.folder)),i="/mail".concat(o)}return i}function Ot(){var e=store.mail.cur.countMR,t=store.mail.rolls.mrs;store.mail.cur.countMR=0,O=!0,store.mail.rolls.mrs=[],t.forEach(function(e){(0,y.removePeer)(e)}),ajaxRequest("/mail",{act:"mrs_reject",all:!0,hash:store.mail.hash.mrs},function(n){if(n.error)return store.mail.cur.countMR=e,store.mail.rolls.mrs=t,O=!1,void f.default.cancelRejeectLoading();v.default.redrawView(),_e("/mail")},function(){store.mail.cur.countMR=e,store.mail.rolls.mrs=t,O=!1,f.default.cancelRejeectLoading()})}function Lt(){store.mail.cur&&(0,y.queueToPresendMsgs)(k.getItems())}function Bt(e,t){var n=store.mail.members;(e=e.filter(function(e){return!n[e]})).length&&(N=N.concat(e),R.push(t),F())}function Nt(){var e=store.mail,t=e.rolls,n=e.scraps,i=e.cur;t.folder.all=t.folder.all.filter(unique).sort(_t),"all"===i.folder&&(n.folder=n.folder.filter(unique).sort(_t),h.default.redrawFolder())}function Rt(e,t){if(!e||!e.length)return null;for(var n=e.length-1;n>=0;n--)if(t(e[n],n))return e[n];return null}function Ft(){im.abortWaiting()}function jt(e){var t=+e.getAttribute("data-msg");if(t&&isFinite(t)&&store.mail.cur){var n=store.mail.msgs[t],i=n&&store.mail.peers[n.peerId];i&&!n.listened&&n.authorId!==store.mail.cur.viewerId&&(0,w.mailRequest)("/mail",{act:"listen_audiomsg",msg_id:t,hash:i.hashRead})}}function Ht(e,t){u.default.showCaptcha(e,t)}},FZH1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MailScrap_EmptyInner=k,t.MailScrap_Item=y,t.MailScrap_ItemsInner=g,t.MailScrap_class=C,t.default=void 0;var i=d(n("bZ/P")),r=d(n("Mc5h")),o=d(n("O5lf")),a=d(n("M2vk")),s=d(n("5qQ6")),l=d(n("/Rzu")),u=d(n("HGMY")),c=d(n("TYsd"));function d(e){return e&&e.__esModule?e:{default:e}}function A(){var e=m(['\n    <div class="mailScrap__systemMessage" ',">\n      ","\n    </div>\n  "]);return A=function(){return e},e}function f(){var e=m(['\n    <div class="mailScrap__empty mailScrap__empty_','">\n      ',"\n    </div>\n  "]);return f=function(){return e},e}function p(){var e=m(['\n    <div class="','">\n      ',"\n    </div>\n  "]);return p=function(){return e},e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){var e=m(['\n    <div class="','">\n      ',"\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n    </div>\n  "]);return h=function(){return e},e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=function(e){var t=e.scrap,n="peer"===t,o=C(t),s=n?E("before"):"",l=E("after"),d=E("center"),p=function(e){var t=i.default.class("mailScrap__items",_({},e,!0)),n=g(e);return(0,r.default)({mix:t,inner:n})}(t),m=function(e){var t=k(e);return i.default.html(f(),e,t)}(t),v=n?(0,a.default)():"",y=n?c.default.html((0,u.default)()):"",w=n?function(){var e=store.mail.cur.notification||"",t=i.default.onClick("MailScrap.clearSystemMessage2");return i.default.html(A(),t,e)}():"";return i.default.html(h(),o,s,p,m,l,y,v,w,d)};function g(e){for(var t=store.mail,n=t.cur,r=t.msgs,o=t.scraps[e],a=o.length,s=[],l=!1,u=0;u<a;u++){if(u>0&&"peer"===e&&!l){var c=r[o[u-1]],d=r[o[u]];if(d.isUnread&&!c.isUnread&&d.authorId!==n.viewerId){l=!0,s.push(y(e,o[u],!0));continue}}s.push(y(e,o[u]))}return i.default.list(s)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=store.mail.cur,r="";if("folder"===e)r="important"===i.folder?w(t):b(t);else if("search"===e){if("peers"===i.tab)r=function(e){return(0,l.default)(e)}(t);else r=w(t)}else if("peer"===e){r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.default)({msgId:e,withDivider:t})}(t,n)}else if("mrs"===e){r=b(t)}return r}function w(e){var t=store.mail.msgs[e].peerId;return(0,l.default)(t,e)}function b(e){return(0,l.default)(e,"last")}function E(e){var t=i.default.class("mailScrap__loading",_({},e,!0)),n=(0,o.default)();return i.default.html(p(),t,n)}function k(e){var t=window.lang,n=store.mail.cur,i="";switch(e){case"peer":i=t.mobile_mail_history_is_empty;break;case"mrs":i=t.mobile_mail_mrs_empty_info;break;case"folder":i={all:t.mobile_mail_no_messages,important:t.mobile_mail_no_important,unread:t.mobile_mail_no_unreaded,unrespond:t.mobile_mail_sublist_empty}[n.folder];break;case"search":"msgs"===n.tab&&(i=t.mobile_mail_not_found),"peers"===n.tab&&(i=t.mobile_mail_no_peers)}return i}function C(e){var t,n=store.mail,r=n.cur,o=n.reached,a=!0,s=!1,l=!1,u=!1;if("peer"===e){var c=r.peerId,d=n.scraps.peer,A=d.length,f=n.rolls.peer[c]||[];a=o.peer.before[c]&&d[0]===f[0],s=last(d)===last(f)&&o.peer.after[c],0===A&&(s=!0);var p=c?n.peers[c]:null;p&&(l=!!p.systemMessageCode,p.isChannel&&(u=p.ownerId!==r.viewerId))}else if("mrs"===e)s=o.mrs;else if("folder"===e)s=o.folder[r.folder];else if("search"===e){var h=r.tab;r.query;if("peers"===h){var m=n.scraps.search.length;s=o.search[r.tab][r.query]||m>0}else s=o.search[r.tab][r.query]}return i.default.class("mailScrap",(_(t={},e,!0),_(t,"empty",function(e){var t=store.mail,n=t.cur,i=t.scraps,r=t.reached,o=!1;switch(e){case"peer":var a=n.peerId,s=t.rolls.peer[a];0===(s?s.length:0)&&r.peer.after[a]&&r.peer.before[a]&&(o=!0);break;case"mrs":0===i.mrs.length&&r.mrs&&(o=!0);break;case"folder":0===i.folder.length&&r.folder[n.folder]&&(o=!0);break;case"search":0===i.search.length&&r.search[n.tab][n.query]&&(o=!0)}return o}(e)),_(t,"systemMessage",l),_(t,"reachedBefore",a),_(t,"reachedAfter",s),_(t,"tab","search"===e&&r.tab),_(t,"isChannel",u),t))}t.default=v},Fhlr:function(e,t,n){"use strict";var i=window.FeedAssistanceStats;i.registerTrackingCls("feedAssistance_promoButton"),i.onStartViewElement(function(e){if(i.getElementType(e)===i.BLOCKS.BLOCK_TYPE_PROMO_BUTTON){if(e._promoButtonClickHandlerAdded)return;var t=geByClass1("feedAssistancePromoButtonInstallApp__button",e),n=t?"install_app":"",r=t||e;addEvent(r,"click",function(){!function(e,t,n){i.dispatchEvent({type:i.EVENTS.EVENT_PROMO_BUTTON,data:i.serializeEventData(i.EVENTS.EVENT_PROMO_BUTTON_SUB,e,t,n)})}(e,i.EVENTS.SUB_EVENT_PROMO_BUTTON_CLICK,n)}),e._promoButtonClickHandlerAdded=!0}})},G0UO:function(e,t,n){"use strict";var i=Array.isArray,r={mail:{}},o={injectStore:function(e){r.mail={};var t=e.mail,n=t.cur,o=t.rolls,a=t.reached;t.msgs,t.queue;i(e.mail.msgs)&&(e.mail.msgs={}),i(e.mail.replies)&&(e.mail.replies={}),o&&i(o.peer)&&(o.peer={}),o&&i(o.search.peers)&&(o.search.peers={}),o&&i(o.search.msgs)&&(o.search.msgs={}),a&&i(a.search.peers)&&(a.search.peers={}),a&&i(a.search.msgs)&&(a.search.msgs={}),a&&i(a.peer.before)&&(a.peer.before={}),a&&i(a.peer.after)&&(a.peer.after={}),r.mail=e.mail,r.mail.pendingReplies={},r.mail.presend={},n&&(n.msgSelected={},n.msgRemoved={},n.msgAttached={},n.msgReply={},n.keyboards={},n.typings={},n.peerMembers={}),"notificationsCount"in r||(r.notificationsCount=e.notificationsCount)},injectMail:function(e){var t=r.mail,n=e;isObject(n.msgs)&&Object.assign(t.msgs,n.msgs),isObject(n.peers)&&Object.assign(t.peers,n.peers),isObject(n.members)&&Object.assign(t.members,n.members),isObject(n.replies)&&Object.assign(t.replies,n.replies),isObject(n.forwards)&&Object.assign(t.forwards,n.forwards),t.page=n.page,n.mrs&&(t.cur.countMR=n.mrs.count,t.rolls.mrs=n.mrs.rolls,t.reached.mrs=n.mrs.reached,t.scraps.mrs=n.mrs.rolls,Object.keys(n.msgs).forEach(function(e){var i=n.msgs[e],r=i.peerId;t.rolls.peer[r]=[i.id],t.reached.peer.after[r]=!0}),t.mrs=n.mrs)},injectMsg:function(e){o.injectMail({msgs:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.id,e)})},resetMail:function(){r.mail={}}};window.storeMethods=o,window.store=r},G5f9:function(e,t,n){"use strict";Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var r=0|t,o=Math.max(r>=0?r:i-Math.abs(r),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;o<i;){if(a(n[o],e))return!0;o++}return!1}})},GDYn:function(e,t,n){"use strict";var i=n("UxAg");window.PostAttachVideoLink={},PostAttachVideoLink._onInit=l,PostAttachVideoLink._onPlayClick=c,PostAttachVideoLink._onReplayClick=c,PostAttachVideoLink._onSoundClick=u,PostAttachVideoLink._onVideoClick=d,PostAttachVideoLink._onVideoPlay=function(e){return A(e.target,"play")},PostAttachVideoLink._onVideoPause=function(e){return A(e.target,"pause")},PostAttachVideoLink._onVideoEnded=function(e){return A(e.target,"end")};var r={muted:"PostAttachVideoLink_muted",state:function(e){return"PostAttachVideoLink_state_".concat(e)}},o={attach:".PostAttachVideoLink",video:".PostAttachVideoLink__video"},a=window.MutationObserver,s=null;function l(){a&&!s&&(s=new a(f)).observe(document.body,{childList:!0,subtree:!0})}function u(e){var t=e.closest(o.attach),n=$(o.video,t);n.muted=!n.muted,t.classList.toggle(r.muted,n.muted)}function c(e){var t=e.closest(o.attach);$(o.video,t).play()}function d(e){e.paused||e.pause()}function A(e,t){var n=e.closest(o.attach);n.classList.remove(r.state("play")),n.classList.remove(r.state("pause")),n.classList.remove(r.state("end")),n.classList.add(r.state(t))}function f(e){e.forEach(function(e){e.removedNodes.forEach(function(e){e.nodeType===HTMLElement.ELEMENT_NODE&&(0,i.$$)(o.video,e).forEach(function(e){e.src="",e.load()})})}),$(o.video)||(s.disconnect(),s=null)}},GLI1:function(e,t,n){"use strict";n("PuTx")},GMrv:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ")),r=n("cGUQ");var o=window,a=o.parseJSON,s=o.bind,l=o.clog,u=o.canUploadFile,c=o.attr,d=o.uploadFile,A=o.readFile,f=o.replace,p=o.clone,_=o.ce,h=window.ajax,m={onUploadedDone:(0,i.default)("resp"),fallback:function(e,t){var n=window.nav,i=e.nextSibling;return!!i&&!n.go(i)},onUploadProgress:function(e){window.photoview.updateUpload({progress:e.loaded/e.total})},onUploadComplete:function(e){var t=window.photoview,n=e.target.responseText,i=!1;try{i=a(n)}catch(e){i={error:"ERR_CLIENT_BAD_RESPONSE: bad request response"}}if(i.error)m.onUploadError.call(this,e);else{this.xhr=null,this.photo_res=n,this.photo_size=i.size;var r=this.static_url+i.x_src,o=i.size[0],l=i.size[1],u=Math.min(o,l);t.onClose=s(m.onClose,this),t.openCrop({src:r,max_scale:u/200,onSelect:s(m.onCropSelected,this)})}},onUploadError:function(e){var t=window.photoview;l("upload error.",e.target.responseText),t.close()},onClose:function(e){this.xhr&&this.xhr.abort&&this.xhr.abort()},onCropSelected:function(e,t,n){var i=window.photoview,o=this,a=o.photo_res,s=o.photo_size,l=s[0],u=s[1],c=Math.min(l,u),d=Math.round(e*l),A=Math.round(t*u),f=Math.round(n*c);if(o.upload_edit_url)var p=o.upload_edit_url;else p=o.base_url+"upload.php?"+(0,r.toQueryString)({act:"owner_photo_edit",_query:a,_origin:location.protocol+"//"+location.host},!0);o.xhr=h.plainpost(p,{_crop:[d,A,f].join(",")},function(e){m.onCropSuccess.call(o,e)},function(e){m.onCropCancel.call(o)},!0),i.updateCrop({saving:!0})},onCropSuccess:function(e){var t=window.photoview,n=this;n.xhr=h.post("/photos.php?act=done_photo",{_ajax:1,_query:e,_from:n.from},{onDone:function(e){m.onUploadedDone(e),t.close()},onFail:function(){m.onCropCancel.call(n)}})},onCropCancel:function(){window.photoview.updateCrop({saving:!1})},prepareInput:function(e){e.files&&e.files.length&&(e.value="")},start:function(e,t){var n=window.photoview;if(!e||!u())return m.fallback(e,t);var i=e.files[0]||!1,r=c(e,"data-upload-url"),o=c(e,"data-base-url"),a=c(e,"data-static-url"),l=c(e,"data-from");if(!i)return!1;if(!r)return m.fallback(e,t);var _={upload_url:r,base_url:o,static_url:a,file:i,from:l};return _.xhr=d(r,{photo:i},{onProgress:s(m.onUploadProgress,_),onComplete:s(m.onUploadComplete,_),onError:s(m.onUploadError,_)}),A(i,function(e){n.updateUpload({thumb:e})}),f(p(e),e),n.onClose=s(m.onClose,_),n.openUpload({src:null}),!1},getCropFromTag:function(e,t,n){if(!e)return!1;if(3==e.length)var i=+e[0],r=+e[1],o=+e[2];else{i=+e[0]*t/1e4,r=+e[1]*n/1e4,o=+e[2]*t/1e4;var a=+e[3]*n/1e4;if(o>a&&(i+=(o-a)/2,o=a),o<200){var s=(200-o)/2;i-=s,r-=s,o=200}o=Math.min(Math.max(o,200),Math.min(t,n)),i=Math.min(Math.max(i,0),t-o),r=Math.min(Math.max(r,0),n-o)}return[i/t,r/n,o/Math.min(t,n)]},crop:function(e){if(!e||!e.size&&!e.url)return!1;var t=window.photoview,n={upload_edit_url:e.upload_url};if(e.size){n.photo_size=e.size;var i=Math.min(e.size[0],e.size[1]);t.onClose=s(m.onClose,n),t.openCrop({src:e.thumb,max_scale:i/200,rect:m.getCropFromTag(e.rect,e.size[0],e.size[1]),onSelect:s(m.onCropSelected,n)})}else{var r=_("img",{src:e.url,onload:function(){n.photo_size=[r.width,r.height];var i=Math.min(r.width,r.height);t.updateCrop({src:e.thumb,max_scale:i/200,rect:m.getCropFromTag(e.rect,r.width,r.height),onSelect:s(m.onCropSelected,n)})}});t.onClose=s(m.onClose,n),t.openCrop({src:!0})}return!0}};window.ownerPhotoUpload=m},"GR/G":function(e,t,n){var i=n("/8IX"),r=n("HN+/"),o=3;function a(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||s(e)!==s(t)?e:(r(e,t),l(e,t),t):null:e}function s(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function l(e,t){for(var n,i,r,o,s=0,l=0;n=t.childNodes[l],i=e.childNodes[l-s],n||i;l++)if(i)if(n)if(u(i,n))(r=a(i,n))!==n&&(t.replaceChild(r,n),s++);else{o=null;for(var c=l;c<t.childNodes.length;c++)if(u(t.childNodes[c],i)){o=t.childNodes[c];break}o?((r=a(i,o))!==o&&s++,t.insertBefore(r,n)):i.id||n.id?(t.insertBefore(i,n),s++):(r=a(i,n))!==n&&(t.replaceChild(r,n),s++)}else t.appendChild(i),s++;else t.removeChild(n),l--}function u(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&(e.type===o&&e.nodeValue===t.nodeValue)}e.exports=function(e,t,n){if(i.equal(typeof e,"object","nanomorph: oldTree should be an object"),i.equal(typeof t,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly)return l(t,e),e;return i.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),a(t,e)}},GS9k:function(e,t,n){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n})},GVjC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("OcsD"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("v/ER"));(0,i.extend)(r.default,{submit:r.submit}),window.ReportConfirm=r.default;var o=r.default;t.default=o},Go98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("TYsd")),r=o(n("9y81"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.tag,n=t.id===e.current_id?"control_radio_checked":"control_radio";return{href:t.href,class:"Bookmarks__tagsSelectItem",inner:[{class:"Bookmarks__tagsSelectItemTitle",inner:i.default.wrap(t.name)},i.default.wrap((0,r.default)({icon:n}))]}};t.default=a},Gzds:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));var r,o,a=window,s=a.se,l=a.remove,u=a.gpeByTag,c=a.ce,d=a.each,A=a.append,f=a.gpeByClass,p=a.toggleClass,_=a.cancelEvent,h=a.hasClass,m=a.geByClass1,v=a.addClass,g=a.getY,y=a.getH,w=a.scrollTop,b=a.getCh,E=a.removeClass,k=a.checkEvent,C=a.geByClass,D=a.getW,S=a.replaceClass,T=a.escapeRE,M=a.ge,P=a.val,I=a.after,x=a.scrollToEl,O=a.replaceEntities,L=a.toggle,B=a.elfocus,N=a.isUndefined,R=a.isVisible,F=a.clone,j=a.attr,H=a.before,U=a.srand,V=a.extend,z=window.ajax,q=window.nav,W=window.Dialog,Y={curGif:null,onStickersTabSelected:(0,i.default)(),onStickerClick:(0,i.default)(),onStickersInit:s(),onReplyClick:s(),add_attach:function(e,t){var n=window.al;l("feed_extra_field");var i=u("form",e),r=c("input",{id:"feed_extra_field",type:"hidden",name:"add_attach",value:2});if(i){var o=!1;if(d(i,function(e,t){if("submit"===t.type)return o=t,!1}),o)return A(r,i),window.al&&n.ver?q.go(o,t):i.submit()}return!0},saveDraft:function(e,t,n){e&&e.preventDefault();var i=M("feed_add_form"),r={act:"post",save_draft:1,redirect:n,hash:t};d(i.elements,function(e,t){"submit"!==t.type&&(r[t.name]="checkbox"===t.type?(+t.checked).toString():t.value)}),z.post(window.nav.path,r)},toggleActions:function(e,t){var n=f("post_item",e);return p("pi_actions_opened",n),_(t),!1},wallActions:function(e,t){var n=window.tooltip,i=f("_audioPlaylist",e)||f("wall_item",e)||f("post",e);if(!i)return!0;if(h("wi_actions_opened",i))E("wi_actions_opened",i),n.hide();else{var r=m("wi_actions_wrap",i),o=m("wi_actions",r),a=m("wi_actions_btn",i);Y.wallActionsHide(),v("wi_actions_opened",i);var s=g(i)+45+y(o)+7,l=w()+b();p("wi_actions_top",r,s>l),n.addHandler(Y.wallActionsHide),n.show(r,a)}return _(t),!1},wallActionsHide:function(){var e=window.tooltip;E("wi_actions_opened",m("wi_actions_opened")),e.hide()},wallPostOpen:function(e,t){var n=f("wall_item",e),i=m("wi_date",n);return!i||q.go_after(i,t)},toggleGif:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!e||(!!k(t)||(clearInterval(r),h("current_gif",e)?Y.hideGif(e,t,i):(i||Gif.autoplayTest(),Y.showGif(e,t,n,i))))},hidePlayingGifs:function(e,t){C("current_gif","mcont").forEach(function(n,i){n!==e&&Y.hideGif(n,!1,t)})},showGif:function(e,t,n,i){var a=window.cur;if(!e)return!0;if(k(t))return!0;if(n){if(a.loadedGifs||(a.loadedGifs={}),!a.loadedGifs[e.href]&&!confirm(n))return!1;a.loadedGifs[e.href]=!0}if(clearInterval(r),!i){var s=g(e),l=w();w(l-(s-g(e)))}C("current_gif","mcont").forEach(function(e,t){Y.hideGif(e,!1,i)});var u=!h("not_mp4",e)&&Gif.isMp4Supports();if(u){var d=m("ph_img",e).src;o&&"VIDEO"===o.tagName&&(o.pause(),o.src="",o.load()),(o=c("video",{src:e.href,className:"gif_original",loop:!0,muted:!0,autoplay:!0,poster:d},{position:"relative"})).setAttribute("playsinline",!0),o.setAttribute("webkit-playsinline",!0),o.setAttribute("controls",!0),o.controls=!1,o.load()}else o=c("img",{src:e.href,className:"gif_original"});v("current_gif gif_loading",e);var f=function(t,n){h("current_gif",e)&&(S("gif_loading","gif_opened",e),A(o,e),Y.curGif=e,n&&n())};return u?o.oncanplay=function(){e!==Y.curGif&&(statlogsValueEvent("gif_play",0,"mp4",null,i?1:0),f())}:r=setInterval(function(){o.complete&&(statlogsValueEvent("gif_play",0,"gif",null,i?1:0),f(),clearInterval(r))},100),t&&!t.defaultPrevented?_(t):void 0},hideGif:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return!0;if(k(t))return!0;if(E("current_gif",e),E("gif_opened",e),E("gif_loading",e),C("gif_original").forEach(function(e){l(e)}),!n){var i=Gif.getState(),r=i.currentAutoplayElement,o=i.ignore;r===e&&(o.push(e),Gif.setState("ignore",o))}return Y.curGif=null,t&&!t.defaultPrevented?_(t):void 0},replyNamesRE:function(){var e=window.cur;if(!e.replyNames)return!1;var t=[];return d(e.replyNames,function(){t.push(T(this[0]))}),new RegExp("^("+t.join("|")+")")},replyTo:function(e,t,n,i,r){var o=window.cur;if(k(e))return!0;n=n||0,E("nc_current_reply",m("nc_current_reply"));var a=M("nc_form"),s=M("nc_message"),l=m("nc_reply_name",a),u=f("near_btn",l),c=M("nc_reply_as"),d=P(s),_=Y.replyNamesRE();if(n){var h=M(t+"_"+n),b=g(h)+y(h),C=w();I(a,h),v("nc_current_reply",m("pi_reply_wrap",h)),w(C+g(h)+y(h)-b);var D=o.replyNames[i]||{},S=D[0]||"",T=D[1]||"";d=d?_?d.replace(_,S):d:S,Y.onReplyClick(!0,S)}else{A(a,m("wall_replies")),x(a);T="";d=_?d.replace(_,""):d}return P(s,O(d)),P(l,T),L(u,n),c&&(P(c,+r),p("cp_post_as_group",a,+r)),P("nc_reply_to",n),o.replyTo=n,B(s),!1},stickersInit:function(){if(!window.isNewMail||!m("messenger")){var e=window.cur,t=window.Scroller,n=M("stickers_panel");if(n){var i=m("sp_body",n),r=m("sp_stickers_tabs",n);e.scroller&&e.scroller.destroy(),e.scroller=new t(i,{byPage:!0}),e.scroller.init(),e.destroy.push(function(){e.scroller.destroy()}),e.tabScroller&&e.tabScroller.destroy(),e.tabScroller=new t(r),e.tabScroller.init(),e.destroy.push(function(){e.tabScroller.destroy()}),Y.onStickersInit(!0)}}},stickersToggle:function(e,t){var n=window.cur;if(!n.stickers)return!0;N(t)&&(t=!R("stickers_panel"));var i=M("write_form")||M("nc_form"),r=M("stickers_panel"),o=m("cp_sticker_btn",i);return!r||(L(r,t),p("cp_sticker_btn_sel",o,t),t&&n.tabScroller&&n.tabScroller.onShow(),!1)},stickersClick:function(e,t){var n=window.cur;return n.stickers&&n.stickers[t]?(window.isNewMail&&"/mail"===location.pathname&&(window.uMailWrite.drawStickers(),window.uMailWrite.openStickersPanel()),Y.stickersToggle(null,!0),Y.stickersSelectTab(null,t)):q.go(e)},stickersStoreOpen:function(e){var t=window.cur;return z.click(e,!1,{url_params:{reply_to:t.replyTo||0}})},stickersSelectTab:function(e,t){var n=window.cur;if(!window.isNewMail&&n.tabScroller&&!n.tabScroller.canClick())return!1;var i=M("stickers_panel"),r=m("sp_body",i),o=m("sp_tab_selected",i);if(n.stickers[t]){n.scroller&&n.scroller.destroy(),P(r,n.stickers[t]),n.scroller&&n.scroller.init(),e||(e=m("sp_tab"+t,i)),E("sp_tab_selected",o),v("sp_tab_selected",e);var a=g(i),s=a+D(i),l=w(),u=l+b();(a<l||s>u)&&x(i),n.tabScroller&&n.tabScroller.showElem(e),StickersAnimation&&StickersAnimation.loadAutoplayAnimationStickers()}return window.isNewMail&&Y.onStickersTabSelected(),!1},addRecentSticker:function(e,t,n){var i=window.cur,r=f("sticker_item",e);if(i.stickers&&i.stickers[-1]&&r){var o=c("div",{innerHTML:i.stickers[-1]}),a=F(r),s=m("sticker_thumb",a),u=m("stickers_list",o);j(s,"onclick","return post.sendSticker(this, "+t+", true, 'recent');"),d(C("sticker"+t,u),function(){l(this)}),H(a,u.firstChild);var A=0;d(C("sticker_item",u),function(){window.isNewMail?A++>=16&&l(this):A++>=8&&l(this)}),i.stickers[-1]=P(o),n&&Y.stickersSelectTab(!1,-1)}},sendSticker:function(e,t,n,i){if(window.isNewMail&&Y.onStickerClick(t,i))return Y.addRecentSticker(e,t,!1),!1;var r=window.cur;if(r.scroller&&!r.scroller.canClick())return!1;Y.stickersToggle(e,!1);var o=M("write_submit"),a={lock:!0,url_params:{media:"sticker"+t,_af:U()}};if(n&&!i&&(a.url_params.media_from="recent"),r.ref&&(a.url_params.ref=r.ref,r.ref=void 0),r.refSource&&(a.url_params.ref_source=r.refSource,r.refSource=void 0),!i){var s=j(e,"href");s&&(i=s.split("sticker_referrer=")[1].split("&")[0])}return i&&(a.url_params.sticker_referrer=i),Y.addRecentSticker(e,t,n),o?z.click(o,V({save:!0},W),a):(o=M("nc_submit"))?z.click(o,{},a):void 0},toggleMarkAsAds:function(e,t){_(t);var n=$("input[name='from_group']");if(!n||n.checked){var i=$("input",e);i.checked=!i.checked;var r=$("input[name='mute_notifications']");r&&(r.checked=i.checked,r.disabled=i.checked),Y.checkCopyright()}},toggleSender:function(e,t){t.stopPropagation(),t.preventDefault();var n=e.querySelector("input");n.checked=!n.checked;var i={group:[],user:["marked_as_ads","signed","close_comments","mute_notifications"]},r=$("input[name='marked_as_ads']");$$(".Control.Control_type_checkbox.Row").forEach(function(e){if(!h("Control__blocked",e)){var t=e.querySelector("input[name]");if("from_group"!==t.name)n.checked&&!i.group.includes(t.name)?t.disabled=!n.checked:!n.checked&&i.user.includes(t.name)&&(t.disabled=!n.checked),"mute_notifications"===t.name&&r&&r.checked&&(t.disabled=!0);else{var o=$(".header__user"),a=$(".header__group"),s=$("#select-timer"),l=$("input[name=postpone]"),u=$("input#add_post_btn");if(n.checked?(o.classList.add("header_hidden"),a.classList.remove("header_hidden"),s.style.display="inline-block",l.disabled=!1):(o.classList.remove("header_hidden"),a.classList.add("header_hidden"),s.style.display="none",l.disabled=!0),u){var c=u.value;u.value=u.dataset.value,u.dataset.value=c}}}}),Y.checkCopyright()},checkCopyright:function(){var e=$("input[name='marked_as_ads']"),t=$("input[name='from_group']"),n=M("select-copyright"),i=$('input[name="copyright"]'),r=$(".create_post__source-option");if(n){var o=$(".Icon",r),a=$(".Btn",r),s=$(".Btn__text",a);e&&e.checked&&(!t||t.checked)?(hide(n),j(a,"disabled",!0),r.classList.add("create_post__source-option--disabled"),s.innerHTML=getLang("mobile_wall_post_copyright_add_button"),o.classList.remove("Icon_edit"),o.classList.add("Icon_audio_plus")):(j(a,"disabled",!1),r.classList.remove("create_post__source-option--disabled"),i.value?(setStyle(n,"display","inline-block"),s.innerHTML=getLang("mobile_wall_post_copyright_edit_button"),o.classList.remove("Icon_audio_plus"),o.classList.add("Icon_edit")):(s.innerHTML=getLang("mobile_wall_post_copyright_add_button"),o.classList.remove("Icon_edit"),o.classList.add("Icon_audio_plus")))}}},G=Y;t.default=G,window.post=Y},HDU4:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("u+Ht"));window.Archive=i.default},HGMY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MailPreSendList__Msg",{enumerable:!0,get:function(){return i.MailPreSendList__Msg}}),Object.defineProperty(t,"getElem",{enumerable:!0,get:function(){return r.getElem}}),Object.defineProperty(t,"setMsgs",{enumerable:!0,get:function(){return r.setMsgs}}),Object.defineProperty(t,"addMsg",{enumerable:!0,get:function(){return r.addMsg}}),Object.defineProperty(t,"removeMsg",{enumerable:!0,get:function(){return r.removeMsg}}),Object.defineProperty(t,"getMsg",{enumerable:!0,get:function(){return r.getMsg}}),Object.defineProperty(t,"onMsgClick",{enumerable:!0,get:function(){return r.onMsgClick}}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("E5Ij")),r=n("4KUl");var o=i.default;t.default=o},"HN+/":function(e,t,n){var i=n("vOyG"),r=i.length,o=1,a=3,s=8;function l(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}e.exports=function(e,t){var n=e.nodeType,u=e.nodeName;n===o&&function(e,t){for(var n=t.attributes,i=e.attributes,r=null,o=null,a=null,s=null,l=i.length-1;l>=0;--l)s=i[l],a=s.name,r=s.namespaceURI,o=s.value,r?(a=s.localName||a,t.getAttributeNS(r,a)!==o&&t.setAttributeNS(r,a,o)):t.hasAttribute(a)?t.getAttribute(a)!==o&&("null"===o||"undefined"===o?t.removeAttribute(a):t.setAttribute(a,o)):t.setAttribute(a,o);for(var u=n.length-1;u>=0;--u)!1!==(s=n[u]).specified&&(a=s.name,(r=s.namespaceURI)?(a=s.localName||a,e.hasAttributeNS(r,a)||t.removeAttributeNS(r,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t);n!==a&&n!==s||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue);"INPUT"===u?function(e,t){var n=e.value,i=t.value;l(e,t,"checked"),l(e,t,"disabled"),n!==i&&(t.setAttribute("value",n),t.value=n);"null"===n&&(t.value="",t.removeAttribute("value"));e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===u?function(e,t){l(e,t,"selected")}(e,t):"TEXTAREA"===u&&function(e,t){var n=e.value;n!==t.value&&(t.value=n);if(t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t);!function(e,t){for(var n=0;n<r;n++){var o=i[n];e[o]?t[o]=e[o]:t[o]&&(t[o]=void 0)}}(e,t)}},HON1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jZPa"));var r=i.default;t.default=r,window.OwnerRow=i.default},HPEO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("dVvW"));n("Ziv7");var r=i.default;t.default=r,window.uMailWrite=i.default},"HQL/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("TYsd")),r=a(n("9y81")),o=a(n("p5n7"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return{class:"VotingForm__option","data-created":e.is_created?"1":"0",inner:[(0,o.default)({class:"VotingForm__optionInput",name:e.name,value:e.value,on_key_down:"VotingForm._onOptionKeyDown"}),{class:"VotingForm__optionRemove",onclick:["VotingForm._onOptionRemoveClick","this"],inner:i.default.wrap((0,r.default)({icon:"close16"}))}]}};t.default=s},HdGT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ready=h,t.getItems=function(){return(0,r.queueGetItems)(_)},t.send=m,t.retry=function(e,t){var n=(0,r.queueGetItem)(_,e);t&&(n.data=t(n.data));(0,r.queueRemoveItem)(_,e),m(n.data.data)},t.remove=function(e,t){(0,r.queueRemoveItem)(_,e),"silent"!==t&&p(e)},t.QUEUE_NAME=t.QUEUE_MAX_FAILS=t.onMessageRemove=t.onMessage=t.onErrorMessage=t.onCaptcha=t.onFailed=t.onSent=t.onStopped=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("W38l")),r=n("702z"),o=n("qHA9"),a=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ")),s=n("j80l");var l=(0,a.default)();t.onStopped=l;var u=(0,a.default)();t.onSent=u;var c=(0,a.default)();t.onFailed=c;var d=(0,a.default)();t.onCaptcha=d;var A=(0,a.default)();t.onErrorMessage=A;var f=(0,a.default)();t.onMessage=f;var p=(0,a.default)();t.onMessageRemove=p;t.QUEUE_MAX_FAILS=5;var _="mail_send";function h(){return(0,r.queueWhenReady)(_)}function m(e){h().then(function(){i.logQueueSize((0,r.queueGetSize)(_));var t=(0,o.sendDataToMessage)(e);(0,r.queueAddItem)(_,t.sendId,{data:e}),f(t)})}t.QUEUE_NAME=_,(0,r.registerQueue)(_,{onSend:function(e,t){!function(e,t){var n="/mail",a="edit_message"===(e=Object.assign({},e)).act;a?Object.keys(e).forEach(function(t){"attached_messages"!==t&&"has_reply"!==t||delete e[t]}):(n=(0,s.makeUrl)("/mail",{act:"send",to:e.to,from:e.from,hash:e.hash,_af:e._af,ref:e.ref||"",ref_source:e.ref_source||""}),Object.keys(e).forEach(function(t){"act"!==t&&"to"!==t&&"from"!==t&&"hash"!==t&&"_af"!==t||delete e[t]}));i.log(t,a?"edit":"send");var l=function(e){i.mark(t,"server"),a&&!e.was_modified&&p(t),u(),(0,r.queueSignalSuccess)(_)};(0,o.mailRequest)(n,e).then(l,function e(n){var a=n.type,s=n.code,u=n.message,f=n.data;i.error(t,"server_send",a),"captcha"!==a&&i.clean(t);if("server"===a&&s&&s!==o.UNKNOWN_ERROR)return u&&A(u),void(0,r.queueSignalStop)(_);if("captcha"===a)return void d(f,function(n){if(!n)return i.clean(t),void(0,r.queueSignalStop)(_);n.then(l,e)});(0,r.queueSignalFail)(_),c()})}(t.data,e)},onStopped:l,maxFails:5})},HpMb:function(e,t,n){"use strict";var i=n("OcsD");window.GroupsMenu={},window.GroupsMenu._onClick=function(e,t,n,r,o){return(0,i.statlogsValueEvent)("groups_menu_item_click",e,t,n,r,o),!0}},HwqD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("TYsd")),r=a(n("z9sQ")),o=a(n("9y81"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=window.lang,n=e.count;return i.default.html({class:[r.default.class("Bell",{empty:!n}),"al_menu"],href:e.url,onclick:e.onclick,"aria-label":t.mobile_notifications_title,"data-header":t.mobile_notifications_title,"data-skiponclick":1,inner:[i.default.html((0,o.default)({mix:"Bell__icon",icon:"bell"})),{class:"Bell__counter",inner:n,tag:"em"}]})};t.default=s},"I/8u":function(e,t,n){"use strict";var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("WTJf"));Object.assign(i.default,{setValue:function(e,t){if(!e)return;var n=(0,i.OvalIsHidden)(t);e.innerText=t,e.classList.toggle(r.hidden,n)}});var r={hidden:"Oval_hidden"}},IXdz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=window.lang;this.store=Stories.getStore(),this.viewers=this.store.viewers[t]||[],this.viewersState=this.store.viewersState[t]||[],this.questions=this.store.questions[t]||[],this.replies=this.store.replies[t]||[];var i=this.viewersState,r=i.count,o=i.repliesCountText,a=i.authorCountText;this.raw_id=t,this.count=r,this.countText=langNumeric(this.count,n.mobile_stories_views_title),this.repliesCountText=o,this.repliesAuthorCountText=a,this.questions?this.title=n.mobile_stories_views_title_interactions:this.viewers.length&&this.replies.length?this.title=n.mobile_stories_views_title_replies_and_views:this.viewers.length?this.title=this.countText:this.replies.length&&(this.title=n.mobile_stories_views_title_replies)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"render",value:function(){var e=this,t=window.winToUtf,n=this.store.questions[this.raw_id]||[];return i.default.html({class:Bem.class("Views",{short:!(this.viewers.length||!this.replies.length)}),inner:[{class:"Views__overlay",onclick:"Stories.hideViews();"},{class:"Views__header",inner:[{class:"Views__table",inner:[{class:"Views__cell",inner:{class:"Views__title",inner:this.title}}]},{class:"Views__close",onclick:"Stories.hideViews();"}]},{class:"Views__body ScrollView",onscroll:'Stories.onScrollViews(this, "'.concat(this.raw_id,'")'),ontouchmove:"event.stopPropagation();",inner:[this.replies.length?{class:"Views__replies",inner:[{class:"Views__table Views__repliesHeader",inner:[{class:"Views__cell Views__repliesCount",inner:this.repliesCountText},this.repliesAuthorCountText?{class:"Views__cell Views__repliesAuthorCount",inner:this.repliesAuthorCountText}:null]},{class:"Views__repliesBody",onscroll:'Stories.onRepliesScroll(event, "'.concat(this.raw_id,'")'),inner:{class:"Views__repliesScroll",inner:this.replies.map(function(n){return{class:"Views__reply ".concat(n.has_new?"Views__reply_new":""),onclick:'Stories.openReplies("'.concat(n.owner_id,"/").concat(n.list,'", "').concat(e.raw_id,'");'),inner:[{class:"Views__replyAvatarWrap",inner:{class:"Views__replyAvatar",src:n.avatar,tag:"img"}},{class:"Views__replyName",inner:n.name?t(n.name):lang.mobile_stories_reply_you}]}})}}]}:null,n.length?{class:"Views__questions",inner:[{class:"Views__table Views__questionsHeader",inner:[{class:"Views__cell Views__questionsTitle",inner:lang.mobile_stories_question_title},{class:"Views__cell Views__questionsLink",inner:lang.mobile_stories_question_show_all,onclick:'Stories.showQuestions("'.concat(this.raw_id,'")')}]},{class:"Views__questionsBody",inner:{class:"Views__questionsScroll",inner:n.slice(0,10).map(function(e){return{class:"Question","data-id":e.id,inner:[{class:"Question__content",inner:[{href:e.author.link,class:"Question__author",inner:e.isAnonymous?lang.mobile_stories_question_anonymous:e.author.name,onClick:"Stories.sendAnalyticsEvent('question_go_to_author', { questionId: ".concat(e.id," });")},{class:Bem.class("Question__text",{small:e.text.length>40}),inner:e.text}]},{class:"Question__actions",inner:lang.mobile_stories_question_actions,onclick:["Stories.openQuestionActions",e.id]}]}})}}]}:null,{class:"Views__viewers",inner:[this.viewers.length&&(n.length||this.replies.length)?{class:"Views__viewersHeader",inner:this.countText}:null,{class:"Views__viewersBody",inner:this.viewers.map(function(e){return{class:"Views__viewer",href:e.href,inner:{class:"Views__table",inner:[{class:"Views__cell Views__cell_avatar",inner:{class:"Views__avatar",src:e.photo,tag:"img"}},{class:"Views__cell Views__cell_name",inner:{class:"Views__name",inner:e.name}}]}}})}]},this.viewersState.nextFrom?{class:"Views__viewersLoader",onclick:'Stories.loadViews("'.concat(this.raw_id,'")')}:null]}]})}}]),e}();t.default=o},IrFw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QRPhotoPosting=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({on_overlay_click_native:"QRPhotoPosting.back();",class:"QRPhotoPosting",content:[{class:"QRPhotoPosting__img",inner:Wd.wrap(e.svg)},{class:"QRPhotoPosting__title",inner:Wd.wrap(e.title)}]})},t.QRPhotoPostingButton=function(){return{inner:[(0,r.default)({sprite:"common",name:"qr_24"})],class:"QRPhotoPosting__button",onclick:"QRPhotoPosting.show();",tag:"div"}};var i=o(n("r/ag")),r=o(n("Y6JH"));function o(e){return e&&e.__esModule?e:{default:e}}},Ivtq:function(e,t,n){"use strict";var i=n("PovR"),r=window,o=(r.addClass,r.FeedAssistanceStats),a=r.page,s=r.geByClass1,l=r.onDOMReady,u=r.FeedNotifications;l(f),a.onChange(f);var c="feedAssistance_pushNotificationsSwitch",d="enable_browser_notifications",A="m_push_switch";function f(){window.pushNotifier&&pushNotifier.canBeEnabled().then(function(e){return e&&PushNotifier.getPermission()===i.PUSH_NOTIFIER_PERMISSION_DEFAULT}).then(function(e){if(e){u.addWebActionAcceptHandler(d,p),u.addWebActionDeclineHandler(d,_);var t=s(c);if(!t)return;o.registerTrackingCls(c),o.register(t,"feed")}})}function p(e){return PushNotifier.requestPermission().then(function(t){var n,r=!0;return unlockButton(e),t===i.PUSH_NOTIFIER_PERMISSION_DEFAULT?r=!1:(n=t===i.PUSH_NOTIFIER_PERMISSION_GRANTED?o.EVENTS.SUB_EVENT_ENABLE_PUSH:o.EVENTS.SUB_EVENT_DECLINE_PUSH,m(e,n),h(),r)},function(){return _(e)})}function _(e){return unlockButton(e),m(e,o.EVENTS.SUB_EVENT_DECLINE_PUSH),h(),!0}function h(){var e=s(c);remove(e)}function m(e,t){o.dispatchEvent({type:o.EVENTS.EVENT_FEED_ASSISTANCE,data:o.serializeEventData(o.EVENTS.EVENT_FEED_ASSISTANCE,e,A,t)})}},"J/W8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("z9sQ"));var r=function(e){var t=e.bcg,n=t.type;return{class:i.default.class("VotingBcg",{type:n}),style:"photo"===n?function(e){return o({"background-color":e.color})}(t):"gradient"===n?function(e){var t,n=[],i=e.points.length;for(t=0;t<i;t++){var r=e.points[t];n.push("".concat(r.color," ").concat(r.percent,"%"))}var a=e.angle-90;return n=n.join(", "),o({background:"linear-gradient(".concat(a,"deg, ").concat(n,")")})}(t):"tile"===n?function(e){var t=e.image,n=e.width,i=e.height;return o({"background-image":"url('".concat(t,"')"),"background-position":"top center","background-size":"".concat(n,"px ").concat(i,"px")})}(t):null,inner:"photo"===n?function(e){var t=e.bcg,n=t.photo,i=t.color;return{class:"VotingBcg__photoBox",style:o({height:"".concat(e.photoHeight,"px")}),inner:[{class:"VotingBcg__photoImage",style:o({"background-image":"url('".concat(n,"')")})},{class:"VotingBcg__photoGradient",style:o({background:"linear-gradient(to bottom, ".concat("rgba(255, 255, 255, 0)",", ").concat(i,")")})}]}}(e):null}};function o(e){var t,n=[],i=Object.keys(e),r=i.length;for(t=0;t<r;t++){var o=i[t],a=e[o];n.push("".concat(o,": ").concat(a,";"))}return n.join(" ")}t.default=r},JDVM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("MHaq"));window.AddCopyrightPopup=i.default;var r=i.default;t.default=r},JJyo:function(e,t,n){"use strict";Array.prototype.map||(Array.prototype.map=function(e){var t,n,i;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=new Array(o),i=0;i<o;){var a,s;i in r&&(a=r[i],s=e.call(t,a,i,r),n[i]=s),i++}return n})},JYMJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsPanel=u,t.default=void 0;var i=l(n("Y6JH")),r=l(n("VRji")),o=l(n("p5n7")),a=l(n("29dZ")),s=n("fdw3");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.buttons,n=e.options,i="boolean"!=typeof e.active||e.active,r=!(n.can_to_own||n.can_to_club||n.can_bookmark);return{class:"ActionsPanel SharePanel ".concat(i?"SharePanel--active":""),"data-name":"ActionsPanel","aria-hidden":!i,style:r?"display: none;":"",inner:t.map(function(e){if(e)return function(e){var t=e.href?"a":"div",n=e.onclick,i={tag:t,role:"button",tabindex:-1,href:e.href,onclick:n,class:"ActionsPanel-button ActionsPanel-button--".concat(e.target),inner:[{class:"ActionsPanel-button__icon",inner:e.icon},{class:"ActionsPanel-button__label",inner:e.label}]};"boolean"==typeof e["aria-pressed"]&&(i["aria-pressed"]=e["aria-pressed"]+"");return i}(e)})}}var c=function(e){var t=e.can_bookmark,n=e.is_bookmarked,l=e.object,c=e.list,d=e.from,A=e.post_from,f=e.supportsExternalShare,p=(0,s.makeUrl)("/wall",{act:"add",share_box:1,object:l,list:c,from:d,post_from:A});return{inner:[{inner:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{class:"SharePanel SharePanel-header SharePanel--active ShareHeaderConversationsPanel","aria-hidden":"false","data-name":"ShareHeaderConversationsPanel",inner:[{"aria-label":(0,s.getLang)("mobile_close"),onclick:"cur.share.destroy()",role:"button",class:"SharePanel-header__close",inner:(0,i.default)("common","cancel_24")},{class:"SharePanel-headerText",inner:[{class:"SharePanel-headerText__label",inner:(0,s.getLang)("mobile_like_publish_head_title")},{class:"SharePanel-headerText__receivers"}]},{class:"SharePanel-headerRight",inner:[{"aria-label":(0,s.getLang)("mobile_search"),class:"SharePanel-headerRight__search",role:"button",inner:(0,i.default)("wall","search_24"),onclick:"cur.share.toggleConversationsSearch(true)"},e.supportsExternalShare?{"aria-label":(0,s.getLang)("mobile_share_external"),class:"SharePanel-headerRight__externalShare",role:"button",inner:"iOS"===e.platform?(0,i.default)("wall","share_external_ios_24"):(0,i.default)("wall","share_external_android_24"),onclick:"cur.share.externalShare()"}:null]}]}}({platform:e.platform,supportsExternalShare:f}),{class:"SharePanel ShareHeaderSearch ShareHeaderConversationsSearchPanel","aria-hidden":"true","data-name":"ShareHeaderConversationsSearchPanel",role:"search",inner:(0,o.default)({autocomplete:!1,onblur:'cur.share.clearSearch(event, "peers", true)',prefix:{text:{role:"button",inner:(0,i.default)("wall","search_outline_16")}},postfix:{text:{class:"ShareHeaderSearch__clear",role:"button",onclick:'cur.share.clearSearch(event, "peers")',inner:(0,i.default)("common","cancel_outline_24")}},class:"ShareHeaderConversationsSearchPanel__input",id:"ShareHeaderConversationsSearchPanel__input",placeholder:(0,s.getLang)("mobile_search"),spellcheck:!1})},{class:"SharePanel SharePanel-header ShareHeaderGroupsPanel","aria-hidden":"true","data-name":"ShareHeaderGroupsPanel",inner:[{"aria-label":(0,s.getLang)("mobile_back"),onclick:"cur.share.toggleGroupsPanel(false)",role:"button",class:"SharePanel-header__close",inner:(0,i.default)("common","back_24")},{class:"SharePanel-headerText",inner:[{class:"SharePanel-headerText__label",inner:(0,s.getLang)("mobile_like_publish_head_title")}]},{class:"SharePanel-headerRight",inner:[{class:"SharePanel-headerRight__search",role:"button",inner:(0,i.default)("wall","search_24"),onclick:'cur.share.setActivePanel(this, "ShareHeaderGroupsSearchPanel", true)'}]}]},{class:"SharePanel ShareHeaderSearch ShareHeaderGroupsSearchPanel","aria-hidden":"true","data-name":"ShareHeaderGroupsSearchPanel",role:"search",inner:(0,o.default)({autocomplete:!1,onblur:'cur.share.clearSearch(event, "group", true)',prefix:{text:{"aria-label":(0,s.getLang)("mobile_search"),role:"button",inner:(0,i.default)("wall","search_outline_16")}},postfix:{text:{class:"ShareHeaderSearch__clear",onclick:'cur.share.clearSearch(event, "group")',inner:(0,i.default)("common","cancel_outline_24")}},class:"ShareHeaderGroupsSearchPanel__input",id:"ShareHeaderGroupsSearchPanel__input",placeholder:(0,s.getLang)("mobile_search"),spellcheck:!1})}],class:"SharePanelRoot ShareHeader",tag:"header"},{id:"Share__input",style:"display: none;",tag:"input"},{inner:[{class:"ShareConversations SharePanel SharePanel--active filter_peer_wrap","data-name":"ShareConversations","aria-hidden":"false",role:"group",id:"ShareConversations"},{class:"ShareGroups SharePanel","data-name":"ShareGroups","aria-hidden":"true",role:"group",id:"ShareGroups"}],class:"SharePanelRoot ShareLists",tag:"section"},{inner:[u({active:!0,options:e,buttons:[e.can_to_own?{target:"own",label:(0,s.getLang)("mobile_share_target_own"),onclick:"cur.share.go('".concat(p,"')"),icon:(0,i.default)("wall","repost_outline_28")}:null,e.can_to_club?{target:"group",label:(0,s.getLang)("mobile_share_target_group"),icon:(0,i.default)("wall","users_outline_28")}:null,t?{target:"bookmark","aria-pressed":n,label:n?(0,s.getLang)("mobile_share_target_bookmark_active"):(0,s.getLang)("mobile_share_target_bookmark"),icon:(0,i.default)("wall",e.is_bookmarked?"favorite_28":"favorite_outline_28")}:null]}),{class:"SharePanel MessagePanel","aria-hidden":"true","data-name":"MessagePanel",inner:[(0,o.default)({tabindex:-1,autocomplete:!1,class:"MessagePanel__input",on_click:["cur.share.expandMessage"],placeholder:(0,s.getLang)("mobile_share_message_placeholder"),spellcheck:!1,readonly:!0,disabled:!0}),(0,a.default)({stretch:!0,size:"large",inner:(0,s.getLang)("mobile_share_message_single"),on_click:"cur.share.sendMessage(event)",use_native_onclick:!0})]},{class:"SharePanel ExpandedMessagePanel","aria-hidden":"true","data-name":"ExpandedMessagePanel",inner:[{class:"ExpandedMessagePanel__textareaWrap",inner:[(0,r.default)({placeholder:(0,s.getLang)("mobile_share_message_placeholder"),rows:1}),{class:"ExpandedMessagePanelSend",onclick:"cur.share.sendMessage()",inner:(0,i.default)("common","send_active_24")}]}]},{class:"SharePanel ProcessingPanel","aria-hidden":"true","data-name":"ProcessingPanel",inner:[{class:"ProcessingPanel__icon ProcessingPanel__icon--loading",inner:(0,i.default)("wall","loading_40")},{class:"ProcessingPanel__label",inner:(0,s.getLang)("mobile_share_state_progress")}]}],class:"SharePanelRoot ShareBottom",tag:"footer"}],class:"Share","aria-role":"dialog","aria-label":(0,s.getLang)("mobile_like_publish_head_title"),hidden:"false",tabindex:"-1",tag:"div"}};t.default=c},JbZL:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AverageAlgorithm=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"push",value:function(e){this._count++,this._accum+=e}},{key:"get",value:function(){return this._accum/this._count}},{key:"clear",value:function(){this._count=0,this._accum=0}}]),e}();t.AverageAlgorithm=r},JuPy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMvk=function(){return!!window.isMVK}},K0hv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getLayer=h,t.default=void 0;var i=l(n("TYsd")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("a0wW")),o=l(n("Po+v")),a=l(n("z9sQ")),s=n("OcsD");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var d=browser.meizu||browser.mi||browser.uc_mini||0!==browser.ios&&browser.ios<10||browser.chrome&&browser.version.split(".")[0]<53,A=!d&&!!r.default.getFlag(r.FLAG_MP4);onDOMReady(function(){p.onUpdate(),page.onChange(function(){p.onUpdate()})});var f={gifs:[],currentAutoplayElement:null,ignore:[]},p={isBadBrowser:d,isMp4Supports:function(){return A},openPopup:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.autoplayTest(),e&&cancelEvent(e),function(e){cur.loadedGifs||(cur.loadedGifs={});return!cur.loadedGifs[e.raw]}(n)&&n.needConfirm){var r=function(e){return(0,s.ceFromString)(i.default.html((0,o.default)({scrollable:!0,header:{title:getLang("mobile_wall_gif_size_warning_popup_title")},content:[getLang("mobile_wall_gif_size_warning").replace("{size}",e.size),{class:"Popup__buttons",inner:[_(getLang("mobile_continue"),"regular",'Gif.confirm(this, "'.concat(e.raw,'")')),_(getLang("mobile_cancel"),"secondary","Popup.close(this)")]}]})))}(n,t.getAttribute("data-media"));return domInsertBefore(r,t),void o.default.open(r,!0)}var a=c({},nav.getQuery(),{z:"doc"+n.raw+"/"+(n.hash||"")});nav.path,(0,s.obj2qs)(a),nav.hash;photo.zopen(null,null,n.raw,"",{no_push:!1,isDoc:!0,hasVideo:n.hasVideo,hash:n.hash})},init:function(e){zlayer.create(h()),zlayer.open()},close:function(){var e=c({},nav.getQuery());delete e.z;var t=nav.path+(0,s.obj2qs)(e)+nav.hash;nav.go(t,null,{push_only:!1,nav_incr:!0})},confirm:function(e,t){cur.loadedGifs[t]=!0,o.default.close(e),(0,s.geBySel1)('[data-media="'.concat(t,'"]')).click()},autoplayTest:function(){r.default.detectAutoplay().then(function(e){A=r.default.getFeatures().mp4&&e&&r.default.getFlag(r.FLAG_MP4)&&!d})},activateGIF:function(){if("/mail"!==nav.path){var e=scrollTop(),t=e+window.innerHeight,n=e+window.innerHeight/2,i={};f.gifs.forEach(function(r){var o=getXY(r)[1],a=o>=e&&o<=t,s=Math.abs(n-o);a&&(i[s]=r)});var r=i[Math.min.apply(Math,u(Object.keys(i)))];r?r.classList.contains("current_gif")||-1===f.ignore.indexOf(r)&&(post.toggleGif(r,!1,!1,!0),f.currentAutoplayElement=r):post.hidePlayingGifs(!1,!0)}},onUpdate:function(){if(r.default.getFlag(r.FLAG_GIF_AUTOPLAY)){var e=u($$(".doc_preview_rows_1 .doc_preview_gif"));f.gifs=u(e),onBodyScroll((0,s.throttle)(p.activateGIF,200))}},getState:function(){return f},setState:function(e,t){f[e]=t}};function _(e,t,n){return{class:["Popup__button",a.default.class("Btn",{theme:t||"regular"})],tag:"button",inner:e,onclick:n}}function h(){var e='<img class="zpv_img" alt="">';return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(e='<video class="zpv_img" alt="" autoplay preload="metadata" crossorigin="anonymous" poster="/images/blank.gif" webkit-playsinline playsinline controls loop muted>'),'\n    <div id="z_photoview">\n      <div class="zpv_siblings">\n        <div id="zpv_left" class="zpv_thumb_item">\n          <img class="zpv_img" alt="">\n        </div>\n        <div id="zpv_right" class="zpv_thumb_item">\n          <img class="zpv_img" alt="">\n        </div>\n      </div>\n      <div class="zpv_body">\n        <div id="zpv_center" class="zpv_thumb_item">\n          '.concat(e,'\n        </div>\n      </div>\n      <div class="zpv_close_msg_wrap">\n        <div class="zpv_close_msg"> ').concat(lang.mobile_zphoto_move_to_close,'</div>\n      </div>\n      <div class="zpv_controls">\n        <div class="mhead zpv_header">\n          <a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a>\n          <div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div>\n        </div>\n      </div>\n      <div class="zpv_tags"></div>\n      <div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div>\n    </div>\'\n  ')}window.Gif=p;var m=p;t.default=m},KFXn:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PeakAlgorithm=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"push",value:function(e){this._max=Math.max(this._max,Math.abs(e))}},{key:"get",value:function(){return this._max}},{key:"clear",value:function(){this._max=0}}]),e}();t.PeakAlgorithm=r},KJ2u:function(e,t,n){"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)},KMpi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Pfrj"));var r=i.default;t.default=r,window.Avatar=i.default},KWgi:function(e,t,n){"use strict";n("9CLW"),n("7lzo"),n("MSf/"),n("yVRv"),n("Cxv5"),n("BX0V")},L1lF:function(e,t,n){"use strict";var i=n("5WJ6");window.initSharePage=i.initSharePage},LBNP:function(e,t,n){"use strict";var i=n("OcsD"),r="_si_container_loading",o="StoriesArchive--loaded",a={};function s(e){var t=$$(".StoryThumb[data-time]",e);if(t)return t.forEach(function(e){var t=1e3*e.getAttribute("data-time"),n=new Date(t);if(a[n.toDateString()]&&a[n.toDateString()]!==t){var i=geByClass1("StoryThumb-date",e);re(i)}else a[n.toDateString()]=t}),e}window.initStoriesArchive=function(){var e=0,t=!1,n=$(".StoriesArchive"),a=n.classList.contains(o);s(n),(0,i.initAutoScroll)(function(){var t=$$(".StoryThumb");return e=t.length,t[t.length-1]},function(){if(t||a)return!1;var i=$(".StoriesArchive-stories");i.classList.add(r),t=!0,ajax.post("/id".concat(vk.id,"?act=stories"),{offset:e,_ajax:!0},{onDone:function(e){var l=ce("div");l.innerHTML=e.html,l=s(l),i.innerHTML+=l.innerHTML,i.classList.remove(r),e.more||(a=!0,n.classList.add(o)),t=!1}})})}},LTt1:function(e,t,n){"use strict";var i=need("page"),r=need("audio"),o=need("onDOMReady"),a=need("audioplayer"),s=need("AudioSpecialForYou");function l(){c(),r.onInit(c),r.onSelect(c),i.onChange(c)}function u(){d()?a.playPause():a.playFirst(),c()}function c(){s.setPlaying(r.playing()&&d())}function d(){var e=a.getCurrentElem();return e&&!!e.closest(s.selector)}window.uAudioBlock={},o(l),uAudioBlock._onSpecialPlayAllClick=u},LpA2:function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionType=function(){var e=navigator.connection;if(!e)return"";var t=e.effectiveType,n=e.downlink;switch(t){case"slow-2g":return"GPRS";case"2g":return"EDGE";case"3g":return"3G";case"4g":return n>8?"wi-fi":"LTE"}return""},t.saveNavigationStatEvent=function(e){var t=e.storyRawId,n=e.source,o=e.action,a=i(t.split("_"),2),s=a[0],l=a[1];"reply"===n&&(n="replies_list");var u={ownerId:s,storyId:l,source:n,action:o};r.push(u)},t.serializeNavigationStats=function(){var e=r.map(function(e){var t=e.ownerId,n=e.storyId,i=e.source,r=e.action;return[t,n,i,r].join(",")}).join(";");return r=[],e},t.saveViewerStartTime=function(e){var t=e.storyRawId,n=e.source,r=e.time,a=i(t.split("_"),2),s=a[0],l=a[1],u={ownerId:s,storyId:l,source:n,time:r};o.push(u)},t.serializeLoadingStats=function(){var e=o.map(function(e){var t=e.ownerId,n=e.storyId,i=e.source,r=e.time;return[t,n,i,r].join(",")}).join(";");return o=[],e},t.hasStatToSerialize=void 0;var r=[];var o=[];t.hasStatToSerialize=function(){return o.length||r.length}},M2vk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("AWn4"));n("9RP+");var r=i.default;t.default=r,window.uCurConvoTyping=i.default},"M6/v":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("HwqD"));Object.assign(i.default,{setCount:function(e){$$(o.bell).forEach(function(t){var n=t.$(o.counter);t.classList.toggle(r.empty,!e),n.innerText=e})}});var r={empty:"Bell_empty"},o={bell:".Bell",counter:".Bell__counter"}},M6Dd:function(e,t,n){"use strict";Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t){var a=t[o];e.call(r,a,o,t)&&i.push(a)}return i})},M9zQ:function(e,t,n){"use strict";var i=n("UxAg"),r=(need("attr"),need("geByClass1"),need("preventEvent")),o=need("Popup");window.SendMoneyForm={},SendMoneyForm._onAmountChange=A,SendMoneyForm._onSubmit=m,SendMoneyForm._onRecommAmountChange=f,SendMoneyForm._onAutoAcceptToggle=v,SendMoneyForm._onNoAmountToggle=g,SendMoneyForm._onChooseCardClick=d,SendMoneyForm._onChooseCardCancelClick=c,SendMoneyForm._onChooseCardContinueClick=l,SendMoneyForm._onCardSelect=u;var a={form:"sendMoneyForm",errorMin:"sendMoneyForm_error_min",errorMax:"sendMoneyForm_error_max",addCardVisible:"sendMoneyForm_addCardVisible",requestedVisible:"sendMoneyForm_requestedVisible",recommErrorMin:"sendMoneyForm_recommErrorMin",recommErrorMax:"sendMoneyForm_recommErrorMax",noAmount:"sendMoneyForm_noAmount",autoAccept:"sendMoneyForm_autoAccept"},s={form:".sendMoneyForm",cardsPopup:".sendMoneyForm__cardsPopup",amountInput:".sendMoneyForm__input_amount",recommInput:".sendMoneyForm__recommAmountInput input",requestAmount:".sendMoneyForm__amountNote_requestAmount"};function l(){var e=(0,i.$)('.Control__native[name="card"]:checked').value,t=(0,i.$)('.Control__native[name="card"]:checked ~ .Control__label').innerText;(0,i.$)('input[name="accept_card"]').value=e,(0,i.$)('input[name="accept_card"]').setAttribute("data-value",e),(0,i.$)(".sendMoneyForm__chooseCard").innerText=t,o.close()}function u(e){var t="-1"===e.value;(0,i.$)(s.form).classList.toggle(a.addCardVisible,t)}function c(){o.close()}function d(){var e=(0,i.$)(s.cardsPopup);o.open(e)}function A(e){e||(e=(0,i.$)('input[name="amount"]')),_(e),h(e,6);var t=e.closest(s.form),n="1"===t.getAttribute("data-is-chat-request"),r=Number(e.value),o=Number(t.getAttribute("data-max-amount"));if(t.classList.remove(a.errorMin),t.classList.remove(a.errorMax),n||r>o&&t.classList.add(a.errorMax),n){var l=p(),u=Number(t.getAttribute("data-min-amount"))*(l?2:1),c=function(e,t){var n=(0,i.$)('input[name="amount"]').closest(s.form),r=Number(n.getAttribute("data-min-amount")),o=Number(n.getAttribute("data-max-amount")),a=Number(n.getAttribute("data-chat-members-count")),l=Math.ceil(e/(a-(t?0:1)));return Math.min(o,Math.max(r,l))}(r,l);if((0,i.$)(s.recommInput).value=c,t.classList.remove(a.recommErrorMax),t.classList.remove(a.recommErrorMin),!u||r>=u){var d=l?r-c:r;(0,i.$)(s.requestAmount).innerText=d,t.classList.add(a.requestedVisible)}else t.classList.remove(a.requestedVisible)}}function f(e){_(e),h(e,6);var t=e.closest(s.form),n=Number(e.value),i=t.getAttribute("data-max-amount");t.classList.remove(a.recommErrorMax),t.classList.remove(a.recommErrorMin),n>i&&t.classList.add(a.recommErrorMax)}function p(){var e=(0,i.$)('input[name="participiate"]');return e&&e.checked}function _(e){e.value=parseInt(e.value,10)||""}function h(e,t){e.value=e.value.slice(0,t)}function m(e,t){var n=t.$(s.amountInput).value,o=Number(n),l=Number(t.getAttribute("data-min-amount")),u=Number(t.getAttribute("data-max-amount")),c="1"===t.getAttribute("data-is-chat-request"),d=!1;(t.classList.remove(a.errorMin),t.classList.remove(a.errorMax),c&&(t.classList.remove(a.recommErrorMax),t.classList.remove(a.recommErrorMin)),(0,i.$)(s.form).classList.contains(a.noAmount))||(o<l*(!!c&&p()?2:1)||!n||n!==o.toString()?(t.classList.add(a.errorMin),d=!0):o>u&&!c&&(t.classList.add(a.errorMax),d=!0));if(c){var A=t.$(s.recommInput).value,f=Number(A);f<l||!A||A!==f.toString()?(t.classList.add(a.recommErrorMin),d=!0):f>u&&(t.classList.add(a.recommErrorMax),d=!0)}if(d)r(e),stopEvent(e);else{r(e),stopEvent(e),t.insertAdjacentHTML("beforeend",'<input id="submit" type="submit" style="display: none" />');var _=(0,i.$)("#submit");ajax.click(_)}}function v(e){(0,i.$)(s.form).classList.toggle(a.autoAccept,e.checked),e.checked?(0,i.$)('input[name="accept_card"]').value=(0,i.$)('input[name="accept_card"]').getAttribute("data-value"):(0,i.$)('input[name="accept_card"]').value=""}function g(e){(0,i.$)(s.form).classList.toggle(a.noAmount,e.checked)}},MESj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("TuGt")),r=n("fKzu"),o=n("OcsD"),a=s(n("wMVj"));function s(e){return e&&e.__esModule?e:{default:e}}var l,u=["/restore","/login","/join*","/","/settings","/album*","/terms","/privacy","/payments*","/attachments*","/pages*","/blog*","/about","/privacy","/jobs","/dev","/legal","/data_protection","/safety","/activation*","/licence","/agelimits"];function c(){l&&l.classList.remove(i.default.class.open)}function d(){l&&l.classList.add(i.default.class.open)}onDOMReady(function(){!function e(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]||(l=geByClass1(i.default.class.btn),page.onChange(e.bind(this))),t=t?t.split("?")[0]:a.default.path,!/^\/photo/.test(t)&&c(),(0,r.isForbiddenPage)(t,u)||a.default.getQuery("z")?c():d()}(null,!1)});var A={_onCloseClick:function(e){i.default._onCloseClick(e)},show:d,hide:c,processOpenInNativeApp:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r=r||{},a.default.onMenuItemClick(n),a.default.openInNativeApp(i,t,e),(0,o.statlogsValueEvent)("utm_open_in_native_app_button","clicked",r.utm_source,r.utm_param,r.utm_medium,r.utm_time)}};t.default=A},MHaq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("OcsD"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("Po+v")),o=a(n("p5n7"));a(n("z9sQ"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=ge("select-copyright"),i=$('input[name="copyright"]'),r=$(".create_post__source-option"),o=$(".Btn__text",r);if(e){n.style.display="inline-block";var a='posting.openCopyright(event, true, "'.concat(t,'", "').concat(e,'")');attr(n,"onclick",a),attr(r,"onclick",a),o.innerHTML=getLang("mobile_wall_post_copyright_edit_button")}else{var s='posting.openCopyright(event, false, "'.concat(t,'", "').concat(e,'")');attr(r,"onclick",s),setStyle(r,"display","table"),o.innerHTML=getLang("mobile_wall_post_copyright_add_button"),hide(n)}val(i,e),post.checkCopyright()}var l={open:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=new RegExp("{link}(.*){/link}"),s=a.exec(getLang("mobile_wall_post_copyright_mb_text"))[1],l="/@adminsclub-citation?from=".concat(encodeURIComponent(nav.cur)),u=getLang("mobile_wall_post_copyright_mb_text").replace(a,"<a onclick=\"Popup.close(this); nav.go('".concat(l,'\', null)" href="').concat(l,'">').concat(s,"</a>")),c=(0,r.default)({class:"AddCopyrightPopup",header:{title:e?getLang("mobile_wall_post_copyright_mb_title_text_edit"):getLang("mobile_wall_post_copyright_mb_title_text")},content:{inner:[!e&&{tag:"span",inner:Wd.wrap(u)},(0,o.default)({class:"AddCopyrightPopup__input",placeholder:getLang("mobile_post_copyright_input_placeholder"),value:n,spellcheck:!1,on_key_down:["posting.saveSource",t]}),{class:"AddCopyrightPopup__error",style:"display: none;"},{class:"Popup__buttons",inner:[Btn({class:"Popup__button",inner:e?getLang("mobile_wall_post_copyright_edit_button"):getLang("mobile_wall_post_copyright_add_button"),theme:"regular",use_native_onclick:!0,on_click:'posting.saveSource("'.concat(t,'", this)')}),e?Btn({class:"Popup__button",inner:getLang("mobile_delete"),theme:"secondary",use_native_onclick:!0,on_click:'posting.deleteSource(event, this, "'.concat(t,'")')}):{}]}]}});r.default.open(Wd.elem(c),!0);var d=$(".AddCopyrightPopup__input input");d&&(0,i.elfocus)(d)},submit:function(e,t,n){var i=$(".Btn",n.parentNode);i.disabled=!0,ajax.post("/wall?act=check_copyright_link",{_ajax:1,link:e},{onDone:function(e){var o=$(".AddCopyrightPopup__error");e.status?(n.classList.remove("TextInput_error"),hide(o),s(e.link,t),r.default.close(n)):(n.classList.add("TextInput_error"),show(o),val(o,e.error)),post.saveDraft(null,t),i.disabled=!1}})},remove:function(e,t){t&&r.default.close(t),s("",e),e&&post.saveDraft(null,e)}};t.default=l},"MSf/":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("9CLW"));var r=window,o=r.setStyle,a=r.geByClass1;i.default.onPostMessage(function(e,t){"resizeFrame"===e&&o(a("pageMoneyTransfer__iframe"),"height",t.height+40)})},MUoB:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("YhgQ"));window.uRegisterFloatBtn=i.default},Mc5h:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("2IoG"));var r=i.default;t.default=r,window.Brick=i.default},Mf5j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=u,t.init=function(){onDOMReady(function(){u()})};var i=l(n("TYsd")),r=l(n("Po+v")),o=l(n("UvyM")),a=n("OcsD"),s=n("UxAg");function l(e){return e&&e.__esModule?e:{default:e}}function u(){var e=window.lang,t=(0,s.$)(".pcont .service_msg_box");if(t){var n=(0,s.$)(".service_msg",t).innerHTML;(0,a.remove)(t);var l=(0,r.default)({class:"CopyrightPopup",content:[{inner:i.default.wrap(n)},{class:"Popup__buttons",inner:[(0,o.default)({class:"Popup__button",inner:e.mobile_zphoto_close,theme:"regular",on_click:"Popup.close(this)",use_native_onclick:!0})]}]});r.default.open(i.default.elem(l),!0)}}},MjTa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){m&&y();g(e)},t.preventDocumentScroll=g,t.restoreDocumentScroll=function(){if(!m)return;m=!1,y(),1===v.length&&(d.layoutOffset=null,H(),document.body.style.height="");d.layoutElement=null,v.pop(),d=v.length?v[v.length-1]:null,d&&H();removeEvent(window,"focusin",L),removeEvent(window,"focusout",B),removeEvent(document,"touchmove",I,{capture:!0}),removeEvent(document,"touchmove",x,{capture:!1}),removeEvent(window,"resize",S),removeEvent(window,"orientationchange",T),removeEvent(window,"resize",M),removeEvent(window,"scroll",P)},t.cleanDocumentViews=y,t.allowScrolling=w,t.setScrollView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(browser.iphone||browser.ipod||browser.ipad))return;if(!1===t.override&&e.__ScrollView)return;if(!0!==t.standalone){if(!m)return;e.__ScrollView||d.scrollViews.push(e)}e.__ScrollView={allowX:!1!==t.allowX,allowY:!1!==t.allowY,overscrollX:!1!==t.overscrollX,overscrollY:!1!==t.overscrollY,standalone:!0===t.standalone},d&&(browser.wkwebview||(!1!==t.topBanner&&(e.__ScrollView.topBanner=t.topBanner||{hide:30,show:60}),addEvent(e,"scroll",C)),addEvent(e,"scroll",D));addEvent(e,"touchstart",b),addEvent(e,"touchmove",w),addEvent(e,"touchend",E)},t.cleanScrollView=k,t.hideTopBanner=R,t.showTopBanner=F;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("sdz3")),r=n("UxAg");var o,a,s,l,u,c,d,A=".layout",f=!0,p=!1,_="closed",h=!1,m=!1,v=[];function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(browser.iphone||browser.ipod||browser.ipad)&&(!0!==e.stack&&m||(d={initialized:!1,scrollViews:[]},v.push(d),e.layoutElement&&e.layoutElement.nodeType?d.layoutElement=e.layoutElement:d.layoutElement=(0,r.$)(e.layoutElement||A)),!1===e.topBanner?d.topBanner=!1:d.topBanner=!0,m||(m=!0,addEvent(window,"focusin",L),addEvent(window,"focusout",B),addEvent(document,"touchmove",I,{capture:!0}),addEvent(document,"touchmove",x,{capture:!1}),addEvent(window,"resize",S),browser.wkwebview||(addEvent(window,"orientationchange",T),requestAnimationFrame(function(){j()?T(null,!0):(S(),d&&!d.topBanner?requestAnimationFrame(R):s||requestAnimationFrame(F))}))))}function y(){d.scrollViews.forEach(function(e){return k(e)}),d.scrollViews=[]}function w(e){var t=e.currentTarget.__ScrollView;if("prevented"!==t.state){if(!("start"!==t.state||t.allowX&&t.allowY)){var n=Math.abs(t.startX-e.changedTouches[0].clientX),i=Math.abs(t.startY-e.changedTouches[0].clientY);if(!t.allowX&&n>i)return void(t.state="prevented");if(!t.allowY&&i>n)return void(t.state="prevented")}if("allowed"!==t.state&&(t.state="allowed"),f=!1,!t.overscrollX){var r=e.currentTarget.scrollLeft,o=t.startX-e.changedTouches[0].clientX;(r<=0&&o<=0||r>=t.maxX&&o>=0)&&(f=!0,t.standalone&&e.preventDefault())}if(!t.overscrollY){var a=e.currentTarget.scrollTop,s=t.startY-e.changedTouches[0].clientY;(a<=0&&s<=0||a>=t.maxY&&s>=0)&&(f=!0,t.standalone&&e.preventDefault())}}}function b(e){var t=e.currentTarget,n=t.__ScrollView;n.state="start",n.startX=e.changedTouches[0].clientX,n.startY=e.changedTouches[0].clientY,n.maxX=n.overscrollX?null:t.scrollWidth-t.clientWidth,n.maxY=n.overscrollY?null:t.scrollHeight-t.clientHeight}function E(e){e.currentTarget.__ScrollView.state=""}function k(e){e.__ScrollView=null,removeEvent(e,"touchstart",b),removeEvent(e,"touchmove",w),removeEvent(e,"touchend",E),removeEvent(e,"scroll",C),removeEvent(e,"scroll",D)}function C(e){if("closed"!==_||j())return p=!1,void(l&&clearTimeout(l));p=!0;var t=e.target.__ScrollView.topBanner;d&&d.topBanner&&t?N(e.target,t.show,t.hide):N(e.target,1/0,0),l&&clearTimeout(l),l=setTimeout(function(){p=!1,S()},100)}function D(e){"closed"!==_&&function(e){var t=e.scrollTop,n=e.offsetHeight,r=e.scrollHeight-(t+n);r<-20&&!h?(h=!0,i.adjustBottom()):r>10&&h&&(h=!1)}(e.target)}function S(){if(!p)if(c)c=!1;else if(!j()){window.pageYOffset;"closed"===_&&(browser.wkwebview||(o=document.documentElement.offsetHeight,a=innerHeight,s=o===a,d&&d.layoutHeight!==o&&(d.layoutHeight=o,document.body.style.height=o+"px"),"show"===u?(u=null,requestAnimationFrame(F)):"hide"===u&&(u=null,requestAnimationFrame(R))))}}function T(e,t){browser.ipad?d.topBanner||setTimeout(function(){R()},400):90===Math.abs(window.orientation)?(addEvent(window,"resize",M),document.body.style.height="",d.layoutHeight=null,t?setTimeout(function(){window.scrollTo(0,-300),M()}):setTimeout(function(){window.scrollTo(0,-300)},400)):(removeEvent(window,"resize",M),d.layoutOffset=null,H(),d.topBanner||setTimeout(function(){R()},400))}function M(){if("closed"===_){var e=document.body.offsetHeight,t=e-innerHeight;d.layoutOffset=t,H(),window.scrollTo(0,e)}}function P(){pageYOffset&&(_="opened",removeEvent(window,"scroll",P))}function I(e){f=!0}function x(e){var t=e&&e.target;if(t&&(t.classList.contains("Slider__scroll")||t.closest(".Slider__scroll")))return!0;f&&e.preventDefault()}function O(e){var t=e&&e.target,n=!1,i=0===e.eventPhase&&t.getAttribute("autofocus");return"textarea"!==t.tagName.toLowerCase()||i||(n=!0),"input"!==t.tagName.toLowerCase()||["checkbox","radio","image","submit"].includes(t.type)||i||(n=!0),"select"===t.tagName.toLowerCase()&&(n=!0),n}function L(e){if(O(e)){var t=e&&e.target,n="default";_="opening",h=!1,addEvent(window,"scroll",P),window.isCustomScroll&&(n=t.dataset.scrollviewposition),i.onOpen(n)}}function B(e){O(e)&&(removeEvent(window,"scroll",P),setTimeout(function(){"closed"===_&&(scrollTo(0,0),S())}),_="closed",h=!1,i.onClose())}function N(e,t,n){var i=e.scrollTop;i<=-t&&(s||u)?(u="show",window.scrollTo(0,-10)):i>=n&&(!s||u)&&(u="hide",window.scrollTo(0,10))}function R(){window.scrollTo(0,300)}function F(){window.scrollTo(0,-300)}function j(){return 90===Math.abs(window.orientation)&&!browser.ipad}function H(){var e=d.layoutOffset;d.layoutElement.style.top=e?e+"px":""}},Mu6q:function(e,t,n){"use strict";Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in t&&e.call(i,t[r],r,t))return!0;return!1})},MzAf:function(e,t,n){"use strict";function i(e){return function(t){t.$control.closest(o.sms).classList.toggle(a[e])}}function r(e,t){var n=t.$select,i=t.value;n.closest(o.sms).classList.toggle(a.pmUsersVisible,e.includes(i)||e.includes(Number(i)))}window.SettingsSms={},SettingsSms._onEnabledChange=i("enabled"),SettingsSms._onTimeLimitedChange=i("timeLimited"),SettingsSms._onFrequencyChange=r;var o={sms:".settingsSms"},a={enabled:"settingsSms_enabled",timeLimited:"settingsSms_timeLimited",pmUsersVisible:"settingsSms_pmUsersVisible"}},NBPr:function(e,t,n){"use strict";window.closePostSuggest=function(e,t){return re(geByClass1("post_suggest")),ajax.post("wall.php",{_ajax:1,act:"close_suggest_post",suggest_id:e.getAttribute("data-suggest-id")}),cancelEvent(t)}},NJSj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Convo__online=A,t.Convo__rightStatus=f,t.default=void 0;var i=u(n("bZ/P")),r=u(n("Mc5h")),o=u(n("AXyT")),a=u(n("9y81")),s=u(n("KMpi")),l=u(n("rKUZ"));function u(e){return e&&e.__esModule?e:{default:e}}function c(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n    <div class="','" ',">\n      ","\n      ",'\n      <a class="convo__body" href="','">\n        <div class="convo__row convo__row_title">\n          <div class="convo__title">','</div>\n          <div class="convo__row_right">\n            ','\n            <div class="convo__date">','</div>\n          </div>\n        </div>\n        <div class="convo__row convo__row_text">\n          <div class="convo__typing">','</div>\n          <div class="convo__text">','</div>\n          <div class="convo__row_right convo__unreadBox" ',">\n            ",'\n            <div class="convo__unreadOut"></div>\n          </div>\n          <div class="convo__status">',"</div>\n        </div>\n      </a>\n    </div>\n  "]);return c=function(){return e},e}var d=function(e){var t,n,r=e.more,u="",d="",p=0,_=!1,h="";r&&(u=r.text,d=r.date,p=r.unreadCount,_=r.muted,h=r.typing?(0,l.default)(r.typing):"",t=r.pending,n=r.failed,(t||n)&&(d=""));var m=i.default.class("clickable","convo",{id:e.id,short:!r,last:e.isLast,typing:!!h,important:e.important,unread:e.isLast&&p>0,unreadOut:e.isLast&&p<0}),v=(0,s.default)({mix:"convo__avatar",photos:e.photos,url:e.profileUrl}),g=e.isLast?(0,o.default)({mix:"convo__unread",value:p,gray:_}):"",y=f({pending:t,failed:n}),w=A(e.online),b=(0,a.default)({mix:"convo__star",icon:"star",blue:!0}),E=e.url,k=i.default.onClick("Convo._onClick","event",E);return i.default.html(c(),m,k,w,v,e.url,e.title,b,d,h,u,y?"hidden":"",g,y)};function A(e){return"mobile"===e?(0,a.default)({mix:i.default.class("convo__online",{mobile:!0}),icon:"phone"}):"desktop"===e?(0,r.default)({mix:i.default.class("convo__online",{desktop:!0})}):(0,r.default)({mix:"convo__online"})}function f(e){var t=window.lang;return e.pending?'<div class="convo__pending"></div>':e.failed?'<div class="convo__failed">'.concat(t.mobile_mail_send_error,"</div>"):""}t.default=d},NSb7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Typing_renderNames=A,t.Typing_isEmpty=d,t.default=void 0;var i=a(n("bZ/P")),r=a(n("z9sQ")),o=(a(n("Mc5h")),a(n("BoyB")));n("fdw3");function a(e){return e&&e.__esModule?e:{default:e}}function s(){var e=u(['\n    <div class="typing__dotsWrap">\n      <div class="typing__dots">...</div>\n    </div>\n  ']);return s=function(){return e},e}function l(){var e=u(['\n    <div class="','">\n      ','\n      <div class="typing__names">',"</div>\n      ","\n    </div>\n  "]);return l=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=function(e){var t,n,a=e.dimmed,u=e.animation,c=!!e.compact,f=(e.typing,e.typingCount),p=i.default.class("typing",{dimmed:a,id:e.id,empty:d(f),animation:u}),_=A(e);"audio"===u?(t=(0,o.default)({class:r.default.class("typing__loading",{audio:!0,compact:c})}),n=""):"dots"===u?(t=(0,o.default)({class:r.default.class("typing__loading",{audio:!1,compact:c})}),n=""):"simple-dots"===u&&(t="",n=i.default.html(s()));return i.default.html(l(),p,t,_,n)};function d(e){return!e}function A(e){return"audio"===e.text?function(e,t){var n=window.lang;if(!Array.isArray(e))return e?n.mobile_mail_recaudio_1_short:"";var i=e,r=t,o="";if(1===r&&i.length>=1){var a=i[0];o=(o=n.mobile_mail_recaudio_1).replace("{name}",a)}else if(2===r&&i.length>=2){var s=i[0],l=i[1];o=(o=(o=n.mobile_mail_recaudio_2).replace("{name1}",s)).replace("{name2}",l)}else if(r>1&&i.length>=1){var u=i[0];o=(o=(o=n.mobile_mail_recaudio_many).replace("{name}",u)).replace("{count}",r-1)}else r>=1&&!i.length&&(o=langNumeric(r,n.mobile_mail_recaudio_N_unknown));return o}(e.typing,e.typingCount):"mixed"===e.text?function(e,t){var n=window.lang;if(!Array.isArray(e))return"";var i=e,r=t,o="";if(1===r&&i.length>=1)o="";else if(2===r&&i.length>=2){var a=i[0],s=i[1];o=(o=(o=n.mobile_mail_mixtyping_2).replace("{name1}",a)).replace("{name2}",s)}else if(r>1&&i.length>=1){var l=i[0];o=(o=(o=n.mobile_mail_mixtyping_many).replace("{name}",l)).replace("{count}",r-1)}else r>=1&&!i.length&&(o=langNumeric(r,n.mobile_mail_mixtyping_N_unknown));return o}(e.typing,e.typingCount):function(e,t){var n=window.lang;if(!Array.isArray(e))return e?n.mobile_mail_typing_1_short:"";var i=e,r=t,o="";if(1===r&&i.length>=1){var a=i[0];o=(o=n.mobile_mail_typing_1).replace("{name}",a)}else if(2===r&&i.length>=2){var s=i[0],l=i[1];o=(o=(o=n.mobile_mail_typing_2).replace("{name1}",s)).replace("{name2}",l)}else if(r>1&&i.length>=1){var u=i[0];o=(o=(o=n.mobile_mail_typing_many).replace("{name}",u)).replace("{count}",r-1)}else r>=1&&!i.length&&(o=langNumeric(r,n.mobile_mail_typing_N_unknown));return o}(e.typing,e.typingCount)}t.default=c},Ny8a:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("wZQE"));window.MoneyLink={copy:function(e){var t=e.$btn,n=t.nextElementSibling,i=geByClass1("TextInput__native",gpeByClass("Pad__content",t));copyToClipboard(i)&&(MoneyLink.lastCopyLabel&&hide(MoneyLink.lastCopyLabel),MoneyLink.lastCopyLabel=n,show(n))},genQRCode:function(e,t){if(!MoneyLink.qrcode){var n,r;t?(n=geByClass1("snippet__icon",geByClass1(t)),r=80):(n=ge("money_link_qr"),r=200);val(n,i.default.createQR(e,r,"qr-code",{isShowLogo:!0,isShowBackground:!1}))}}}},O5lf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("omrv"));var r=i.default;t.default=r,window.Spinner=i.default},OGWK:function(e,t,n){"use strict";var i=window,r=i.Friends,o=i.Groups,a=i.hasClass,s=i.geByClass1,l=i.getLang;window.SubscribeBtn={onClick:function(e,t,n,i,m,v){try{var g=v+u,y=v+A,w=v+c,b=v+d,E=a(e,g),k=E?i:n,C=l(E?p:f),D=!E,S=s(y,e),T=function(e){var t=intval(domData(e,"block-id"));if(!t){var n=domCA(e,h);t=intval(domData(n,"block-id"))||null}return t}(e),M=domData(e,"from")||null;S&&(toggleClass(w,S,D),toggleClass(b,S,!D)),attr(e,"aria-label",escapeAttr(C)),toggleClass(g,e,D),m===_?function(e,t,n,i){(n?o.leave:o.enter).call(o,e,t,i)}(t,k,E):function(e,t,n,i,o){(n?r.decline:r.accept).call(r,e,t,i,o)}(t,k,E,M,T)}catch(e){console.trace(e)}return!1}};var u="_unsubscribe",c="Icon_unsubscribe",d="Icon_subscribe",A="Icon",f="mobile_groups_you_are_in_public",p="mobile_groups_public_subscribe",_="group",h=".feedAssistance"},OGfC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("8trB")),r=n("PovR"),o=a(n("Xrg9"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?u(e):t}(this,d(t).call(this,e,n)),vk.id&&i.canBeEnabled().then(function(e){e&&(i.updateHeadClass(),i.handlerMessagesLP=i.handlerMessagesLP.bind(u(i)),page.onChange(function(){return i.updateHeadClass()}))}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,i["default"]),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"canBeEnabled",value:function(){var e=this;return c(d(t.prototype),"canBeEnabled",this).call(this).then(function(t){return t?e.isNativeAppInstalled().then(function(e){return!e}):Promise.resolve(!1)})}},{key:"isSupported",value:function(){return c(d(t.prototype),"isSupported",this).call(this)&&(browser.chrome||browser.mozilla)}},{key:"updateHeadClass",value:function(){var e=i.default.getPermission();document.head&&(removeClass(document.head,"push_notifier_"+i.default.PUSH_NOTIFIER_PERMISSION_GRANTED),removeClass(document.head,"push_notifier_"+i.default.PUSH_NOTIFIER_PERMISSION_DENIED),removeClass(document.head,"push_notifier_"+i.default.PUSH_NOTIFIER_PERMISSION_DEFAULT),e&&addClass(document.head,"push_notifier_"+e),addClass(document.head,"push_notifier_supported"))}},{key:"handlerMessagesLP",value:function(e,t){this.sw.action("removeMessageNotification",{peerId:t,msgId:e})}},{key:"cleanNotification",value:function(){this.sw.action("cleanNotification")}},{key:"removeLongPollListener",value:function(){this.lp&&this.lp.off(),this.lp=null}},{key:"addLongPollListener",value:function(){window.isNewMail&&window.isNewLongpoll&&!this.lp&&(this.lp=window.im.onMsgReadByMe(this.handlerMessagesLP))}},{key:"isNativeAppInstalled",value:function(){var e=Date.now(),n=o.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS),i=o.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS);return new Promise(function(r){null!==i&&n&&e-n<t.PUSH_NOTIFIER_LS_TTL_RELATED_APPS?r(!!i):"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then(function(n){var i=Object.values(n).some(function(e){return"com.vkontakte.android"===e.id});o.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS,e),o.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS,i),r(i)}).catch(function(){r(!1)}):r(!1)})}},{key:"update",value:function(){var e=this;return c(d(t.prototype),"update",this).call(this).then(function(){e.updateHeadClass(),e.addLongPollListener()})}},{key:"unsubscribe",value:function(e){var n=this;return c(d(t.prototype),"unsubscribe",this).call(this,e).then(function(){return n.removeLongPollListener()})}}]),t}();f.PUSH_NOTIFIER_LS_KEY_RELATED_APPS="push_notifier_related_apps",f.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS="push_notifier_related_apps_ts",f.PUSH_NOTIFIER_LS_TTL_RELATED_APPS=r.HOUR/2;var p=f;t.default=p},OcB7:function(e,t,n){"use strict";var i=n("UxAg");window.VotingStatsFilters={},VotingStatsFilters._onCountryChange=o;var r={countrySection:".VotingStatsFilters__section_country",citySection:".VotingStatsFilters__section_city"};function o(e){var t=e.$option,n=(0,i.$)(r.countrySection),o=(0,i.$)(r.citySection),a=t.getAttribute("data-city-section-html");o&&(o.outerHTML=""),a&&n.insertAdjacentHTML("afterend",a)}},OcsD:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ariaMode=ariaMode,exports.flatten=flatten,exports.flatArray=flatArray,exports.formatTime=formatTime,exports.setDocumentDomain=setDocumentDomain,exports.bind=bind,exports.intval=intval,exports.floatval=floatval,exports.qs2obj=qs2obj,exports.obj2qs=obj2qs,exports.parseJSON=parseJSON,exports.ssCheck=ssCheck,exports.ssSet=ssSet,exports.ssGet=ssGet,exports.getValues=getValues,exports.len=len,exports.realSubstr=realSubstr,exports.hashCode=hashCode,exports.formatNum=formatNum,exports.addEvent=addEvent,exports.removeEvent=removeEvent,exports.preventEvent=preventEvent,exports.stopEvent=stopEvent,exports.cancelEvent=cancelEvent,exports.checkEvent=checkEvent,exports.onCtrlEnter=onCtrlEnter,exports.submitBtn=submitBtn,exports.createIframe=createIframe,exports.winToUtf=winToUtf,exports.shortCurrency=shortCurrency,exports.checkNav=checkNav,exports.checkElementNav=checkElementNav,exports.checkTouchHover=checkTouchHover,exports.parseCyr=parseCyr,exports.parseLat=parseLat,exports.parseRusKeys=parseRusKeys,exports.parseLatKeys=parseLatKeys,exports.scrollLeft=scrollLeft,exports.scrollTop=scrollTop,exports.se=se,exports.onBodyScrollForce=onBodyScrollForce,exports.sgFix=sgFix,exports.hideUnvisibleItems=hideUnvisibleItems,exports.initObjectsHideByScroll=initObjectsHideByScroll,exports.checkPostsSeen=checkPostsSeen,exports.initPostsStats=initPostsStats,exports.initAutoScroll=initAutoScroll,exports.autoScroll=autoScroll,exports.scrollToEl=scrollToEl,exports.scrollToHash=scrollToHash,exports.lockButton=lockButton,exports.unlockButton=unlockButton,exports.extend=extend,exports.ge=ge,exports.geByClass=geByClass,exports.geByClass1=geByClass1,exports.gpeByClass=gpeByClass,exports.geByTag=geByTag,exports.geByTag1=geByTag1,exports.gpeByTag=gpeByTag,exports.geBySel=geBySel,exports.geBySel1=geBySel1,exports.domNS=domNS,exports.domPS=domPS,exports.append=append,exports.before=before,exports.after=after,exports.replace=replace,exports.remove=remove,exports.clone=clone,exports.reflow=reflow,exports.tag=tag,exports.outer=outer,exports.show=show,exports.hide=hide,exports.isVisible=isVisible,exports.toggle=toggle,exports.ce=ce,exports.elfocus=elfocus,exports.elblur=elblur,exports.val=val,exports.attr=attr,exports.cssToJs=cssToJs,exports.getCssPropertyName=getCssPropertyName,exports.cssValue=cssValue,exports.getStyle=getStyle,exports.setStyle=setStyle,exports.hasClass=hasClass,exports.addClass=addClass,exports.removeClass=removeClass,exports.toggleClass=toggleClass,exports.replaceClass=replaceClass,exports.switchClass=switchClass,exports.getXY=getXY,exports.getX=getX,exports.getY=getY,exports.getW=getW,exports.getH=getH,exports.getSize=getSize,exports.getCw=getCw,exports.getCh=getCh,exports.evalJs=evalJs,exports.alLoadingFix=alLoadingFix,exports.getHref=getHref,exports.indexOf=indexOf,exports.langSex=langSex,exports.langNumeric=langNumeric,exports.langWordNumeric=langWordNumeric,exports.langDate=langDate,exports.setNotify=setNotify,exports.getNotify=getNotify,exports.canUploadFile=canUploadFile,exports.uploadFile=uploadFile,exports.readFile=readFile,exports.trim=trim,exports.domClosestOverflowHidden=domClosestOverflowHidden,exports.copyToClipboard=copyToClipboard,exports.blinkItem=blinkItem,exports.domPN=domPN,exports.domCA=domCA,exports.getLang=getLang,exports.domData=domData,exports.throttle=throttle,exports.debounce=debounce,exports.scrollGetX=scrollGetX,exports.scrollGetY=scrollGetY,exports.domChildIndex=domChildIndex,exports.domChildren=domChildren,exports.safeGet=safeGet,exports.disableFlex=disableFlex,exports.domQuery=domQuery,exports.domQuery1=domQuery1,exports.domFC=domFC,exports.domInsertAfter=domInsertAfter,exports.domInsertBefore=domInsertBefore,exports.alwaysArray=alwaysArray,exports.need=need,exports.ceFromString=ceFromString,exports.isIosWebView=isIosWebView,exports.isAndroidWebView=isAndroidWebView,exports.isVkWebView=isVkWebView,exports.statlogsValueEvent=statlogsValueEvent,exports.ajaxRequest=ajaxRequest,exports.asc=asc,exports.desc=desc,exports.unique=unique,exports.first=first,exports.last=last,exports.toInt=toInt,exports.toArray=toArray,exports.groupBy=groupBy,exports.domInsert=domInsert,exports.openApp=openApp,exports.domCreate=domCreate,exports.rs=rs,exports.getPreloadData=getPreloadData,exports.getImageOrientation=getImageOrientation,exports.isVKUISupported=isVKUISupported,exports.matchesSelector=matchesSelector,Object.defineProperty(exports,"isUndefined",{enumerable:!0,get:function(){return _common.isUndefined}}),Object.defineProperty(exports,"isFunction",{enumerable:!0,get:function(){return _common.isFunction}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return _common.isArray}}),Object.defineProperty(exports,"isObject",{enumerable:!0,get:function(){return _common.isObject}}),Object.defineProperty(exports,"isEmpty",{enumerable:!0,get:function(){return _common.isEmpty}}),Object.defineProperty(exports,"escapeRE",{enumerable:!0,get:function(){return _common.escapeRE}}),Object.defineProperty(exports,"htsc",{enumerable:!0,get:function(){return _common.htsc}}),Object.defineProperty(exports,"escapeAttr",{enumerable:!0,get:function(){return _common.escapeAttr}}),Object.defineProperty(exports,"isString",{enumerable:!0,get:function(){return _common.isString}}),Object.defineProperty(exports,"irand",{enumerable:!0,get:function(){return _common.irand}}),Object.defineProperty(exports,"unescapeAttr",{enumerable:!0,get:function(){return _common.unescapeAttr}}),Object.defineProperty(exports,"replaceEntities",{enumerable:!0,get:function(){return _common.replaceEntities}}),Object.defineProperty(exports,"escapeStr",{enumerable:!0,get:function(){return _common.escapeStr}}),Object.defineProperty(exports,"stripTags",{enumerable:!0,get:function(){return _common.stripTags}}),Object.defineProperty(exports,"rand",{enumerable:!0,get:function(){return _common.rand}}),Object.defineProperty(exports,"srand",{enumerable:!0,get:function(){return _common.srand}}),Object.defineProperty(exports,"utf2win",{enumerable:!0,get:function(){return _common.utf2win}}),Object.defineProperty(exports,"isHttpHref",{enumerable:!0,get:function(){return _common.isHttpHref}}),Object.defineProperty(exports,"vkNow",{enumerable:!0,get:function(){return _common.vkNow}}),Object.defineProperty(exports,"each",{enumerable:!0,get:function(){return _common.each}}),Object.defineProperty(exports,"copy",{enumerable:!0,get:function(){return _common.copy}}),Object.defineProperty(exports,"arrayRemove",{enumerable:!0,get:function(){return _Array.arrayRemove}}),Object.defineProperty(exports,"arrayIntersects",{enumerable:!0,get:function(){return _Array.arrayIntersects}}),exports.registeredEvents=exports.lsRemove=exports.lsGet=exports.lsSet=exports.lsCheck=exports.re=exports.onBodyResize=exports.onBodyScroll=void 0;var _ls=_interopRequireDefault(__webpack_require__("Xrg9")),_browser=_interopRequireDefault(__webpack_require__("jk6M")),_common=__webpack_require__("jE6c"),_Dollars=__webpack_require__("UxAg"),_Array=__webpack_require__("cq4b"),_select=_interopRequireDefault(__webpack_require__("gvr7"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}var registeredEvents=[];exports.registeredEvents=registeredEvents;var onBodyScroll=se(scrollTop);exports.onBodyScroll=onBodyScroll;var onBodyResize=se();exports.onBodyResize=onBodyResize;var re=remove;exports.re=re;var lsCheck=_ls.default.checkVersion;exports.lsCheck=lsCheck;var lsRemove=_ls.default.remove;exports.lsRemove=lsRemove;var lsSet=_ls.default.set;exports.lsSet=lsSet;var lsGet=_ls.default.get;function need(e){var t=safeGet(window,e);if(void 0===t)throw"Unable to get `window.".concat(e,"`");return t}function setDocumentDomain(){var e=(document.domain||"").match(/(m\.)?([a-zA-Z]+\.[a-zA-Z]+\.?)$/);window.locDomain="https:"==location.protocol?e[2]:e[0];var t=navigator.userAgent.toLowerCase();!/opera/i.test(t)&&/msie 6/i.test(t)&&document.domain==window.locDomain||(document.domain=window.locDomain)}function bind(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift();return function(){var i=Array.prototype.slice.call(arguments);return t.apply(n,e.concat(i))}}function intval(e){return!0===e?1:parseInt(e)||0}function floatval(e){return!0===e?1:parseFloat(e)||0}function qs2obj(e){if(!e)return{};for(var t={},n=e.toString().split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");o[0]&&(t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||""))}return t}function obj2qs(e){if(!e)return"";var t=[];for(var n in e)t.push(encodeURIComponent(n)+(e[n]?"="+encodeURIComponent(e[n].toString()||""):""));return t.length?"?"+t.join("&"):""}function parseJSON(obj){try{return JSON.parse(obj)}catch(e){return eval("("+obj+")")}}function ssCheck(){return void 0!==window.sessionStorage&&void 0!==window.JSON}function ssSet(e,t){if(void 0!==t)try{return sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}else try{return sessionStorage.removeItem(e)}catch(e){}return!1}function ssGet(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(e){}return!1}function getValues(e){if(!(0,_common.isArray)(e))return e.call?e():e;for(var t=[],n=0,i=e.length;n<i;n++)t.push(getValues(e[n]));return t}function len(e){if((0,_common.isArray)(e))return e.length;if((0,_common.isObject)(e)){var t=0;for(var n in e)t++;return t}return 0}function realSubstr(e,t){return(e=e||"").length>t&&(e=(e=(e=(e=e.substr(0,t-3)).replace(/&[^;]{0,6}$/,"")).replace(/<[^>]*$/,"")).replace(/(\s|<br\s*\/?>)+$/,""),e+=".."),e}function hashCode(e){var t=0;if(0===e.length)return t;for(var n=0,i=e.length;n<i;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t}function formatNum(e){if(!window.langConfig)return e;for(var t=e.toString().split("."),n=[],i=t[0].length-3;i>-3;i-=3)n.unshift(t[0].slice(i>0?i:0,i+3));return t[0]=n.join(window.langConfig.numDel),e=t.join(window.langConfig.numDec)}exports.lsGet=lsGet,Object.assign(window,{onBodyScroll:onBodyScroll,onBodyResize:onBodyResize,re:re,ariaMode:ariaMode,flatten:flatten,flatArray:flatArray,formatTime:formatTime,setDocumentDomain:setDocumentDomain,isUndefined:_common.isUndefined,isFunction:_common.isFunction,isArray:_common.isArray,isObject:_common.isObject,isEmpty:_common.isEmpty,escapeRE:_common.escapeRE,htsc:_common.htsc,escapeAttr:_common.escapeAttr,unescapeAttr:_common.unescapeAttr,replaceEntities:_common.replaceEntities,escapeStr:_common.escapeStr,stripTags:_common.stripTags,rand:_common.rand,srand:_common.srand,utf2win:_common.utf2win,isHttpHref:_common.isHttpHref,vkNow:_common.vkNow,bind:bind,intval:intval,floatval:floatval,qs2obj:qs2obj,obj2qs:obj2qs,parseJSON:parseJSON,lsCheck:lsCheck,lsSet:lsSet,lsGet:lsGet,ssCheck:ssCheck,lsRemove:lsRemove,ssSet:ssSet,ssGet:ssGet,getValues:getValues,len:len,realSubstr:realSubstr,hashCode:hashCode,formatNum:formatNum,each:_common.each,copy:_common.copy,addEvent:addEvent,removeEvent:removeEvent,preventEvent:preventEvent,stopEvent:stopEvent,cancelEvent:cancelEvent,checkEvent:checkEvent,onCtrlEnter:onCtrlEnter,submitBtn:submitBtn,createIframe:createIframe,winToUtf:winToUtf,shortCurrency:shortCurrency,checkNav:checkNav,checkElementNav:checkElementNav,checkTouchHover:checkTouchHover,parseCyr:parseCyr,parseLat:parseLat,parseRusKeys:parseRusKeys,parseLatKeys:parseLatKeys,scrollLeft:scrollLeft,scrollTop:scrollTop,se:se,onBodyScrollForce:onBodyScrollForce,sgFix:sgFix,hideUnvisibleItems:hideUnvisibleItems,initObjectsHideByScroll:initObjectsHideByScroll,checkPostsSeen:checkPostsSeen,initPostsStats:initPostsStats,initAutoScroll:initAutoScroll,autoScroll:autoScroll,scrollToEl:scrollToEl,scrollToHash:scrollToHash,lockButton:lockButton,unlockButton:unlockButton,extend:extend,ge:ge,geByClass:geByClass,geByClass1:geByClass1,gpeByClass:gpeByClass,geByTag:geByTag,geByTag1:geByTag1,gpeByTag:gpeByTag,geBySel:geBySel,geBySel1:geBySel1,domNS:domNS,domPS:domPS,append:append,before:before,after:after,replace:replace,remove:remove,clone:clone,reflow:reflow,tag:tag,outer:outer,show:show,hide:hide,isVisible:isVisible,toggle:toggle,ce:ce,elfocus:elfocus,elblur:elblur,val:val,attr:attr,cssToJs:cssToJs,getCssPropertyName:getCssPropertyName,cssValue:cssValue,getStyle:getStyle,setStyle:setStyle,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,replaceClass:replaceClass,switchClass:switchClass,getXY:getXY,getX:getX,getY:getY,getW:getW,getH:getH,getSize:getSize,getCw:getCw,getCh:getCh,evalJs:evalJs,alLoadingFix:alLoadingFix,getHref:getHref,indexOf:indexOf,langSex:langSex,langNumeric:langNumeric,langWordNumeric:langWordNumeric,langDate:langDate,setNotify:setNotify,getNotify:getNotify,canUploadFile:canUploadFile,uploadFile:uploadFile,readFile:readFile,registeredEvents:registeredEvents,trim:trim,domClosestOverflowHidden:domClosestOverflowHidden,copyToClipboard:copyToClipboard,blinkItem:blinkItem,domPN:domPN,domCA:domCA,getLang:getLang,domData:domData,throttle:throttle,debounce:debounce,scrollGetX:scrollGetX,scrollGetY:scrollGetY,domChildIndex:domChildIndex,domChildren:domChildren,safeGet:safeGet,disableFlex:disableFlex,domQuery:domQuery,domQuery1:domQuery1,domFC:domFC,domInsertAfter:domInsertAfter,domInsertBefore:domInsertBefore,alwaysArray:alwaysArray,need:need,isString:_common.isString,ceFromString:ceFromString,isIosWebView:isIosWebView,isAndroidWebView:isAndroidWebView,isVkWebView:isVkWebView,statlogsValueEvent:statlogsValueEvent,ajaxRequest:ajaxRequest,arrayRemove:_Array.arrayRemove,arrayIntersects:_Array.arrayIntersects,asc:asc,desc:desc,unique:unique,first:first,last:last,toInt:toInt,toArray:toArray,groupBy:groupBy,domInsert:domInsert,openApp:openApp,rs:rs,domCreate:domCreate,getPreloadData:getPreloadData,getImageOrientation:getImageOrientation,matchesSelector:matchesSelector}),function(){var e=(0,_common.vkNow)();window.clog=function(t){var n=window.vk;if(n&&n.__debug)try{if(window.console&&console.log){var i=Array.prototype.slice.call(arguments);i.unshift("["+((0,_common.vkNow)()-e)/1e3+"] ");var r=window.browser;r.msie||r.mobile&&!r.safari_mobile?console.log(i.join(" ")):console.log.apply(console,i)}}catch(e){}}}();var rf=function(){return!1},eventPassiveSupported=!1;try{var options=Object.defineProperty({},"passive",{get:function(){eventPassiveSupported=!0}});window.addEventListener("test",null,options),window.removeEventListener("test",null,options)}catch(e){}function addEvent(e,t,n,i){var r=!!i&&!0===i.capture,o=!!i&&!0===i.passive;if(e=ge(e),n=n||rf,e&&3!=e.nodeType&&8!=e.nodeType){e.setInterval&&e!=window&&(e=window);for(var a=0,s=(t=t.split(" ")).length;a<s;a++){var l=t[a];e.addEventListener?e.addEventListener(l,n,eventPassiveSupported?{passive:o,capture:r}:r):e.attachEvent&&e.attachEvent("on"+l,n),registeredEvents.push([e,l,n])}}}function removeEvent(e,t,n,i){var r=!!i&&!0===i.capture,o=!!i&&!0===i.passive;if(e=ge(e),n=n||rf,e&&3!=e.nodeType&&8!=e.nodeType)for(var a=0,s=(t=t.split(" ")).length;a<s;a++){var l=t[a];e.removeEventListener?e.removeEventListener(l,n,eventPassiveSupported?{passive:o,capture:r}:r):e.detachEvent&&e.detachEvent("on"+l,n)}}function preventEvent(e){return!!(e=e||window.event)&&((e=e.originalEvent||e).preventDefault&&e.preventDefault(),e.returnValue=!1,!1)}function stopEvent(e){return!!(e=e||window.event)&&((e=e.originalEvent||e).stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1)}function cancelEvent(e){return!!(e=e||window.event)&&((e=e.originalEvent||e).preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1)}function checkEvent(e){var t=window.PointerEvent;return(e=e||window.event)&&(!t||!(e instanceof t))&&("click"==e.type||"mousedown"==e.type||"mouseup"==e.type)&&(e.which>1||e.button>1||e.ctrlKey||e.shiftKey||e.metaKey)}function onCtrlEnter(e,t,n){var i=window.browser;if(10==(t=t||window.event).keyCode||13==t.keyCode&&(t.ctrlKey||t.metaKey&&i.mac)){if((0,_common.isUndefined)(n)){var r=submitBtn(e);r&&r.click()}else n.call(e);cancelEvent(t)}}function submitBtn(e){if(!e)return!1;var t="form"==tag(e)?e:e.form||gpeByTag("form",e);if(!t)return!1;for(var n in t){var i=t[n];if("input"==tag(i)&&"submit"==i.type&&/(^|\\s)(small_)?button(\\s|$)/i.test(i.className)&&!i.name)return i}return!1}function createIframe(e,t){var n=ce("iframe",e=extend(e||{},{border:"0"}),t=extend(t||{},{position:"absolute",width:1,height:1,left:10}));return append(n,"vk_utils"),n}function winToUtf(e){return e.replace(/&#(\d\d+);/g,function(e,t){return(t=intval(t))>=32?String.fromCharCode(t):e}).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}function shortCurrency(){var e={};(0,_common.each)(geByClass("_short_currency"),function(){var t=this.getAttribute("data-short")||"",n=winToUtf(t).length,i=getStyle(this,"fontFamily")||"tahoma,arial,sans-serif";if(!t)return!0;if((0,_common.isUndefined)(e[i])){for(var r="",o=n-1;o>=0;o--)r+="&#8399;";var a=ce("div",{innerHTML:"<b>"+t+"</b><b>"+r+"</b>"},{fontFamily:i,fontSize:"24px"}),s=ge("vk_utils");s&&s.appendChild(a),e[i]=Math.abs(a.firstChild.offsetWidth-a.lastChild.offsetWidth)>=2*n,remove(a)}e[i]&&val(this,t)})}function checkNav(e,t){if(!(e=ge(e)))return!1;do{if(checkElementNav(e,t))return e}while(e=e.parentNode);return!1}function checkElementNav(e,t){var n=window.al;if(!n||!n.ver)return!1;if(!e)return!1;if(t=t||{},"a"==tag(e)){if((t.skip_onclick||e.getAttribute("data-skiponclick")||!e.getAttribute("onclick"))&&(e.getAttribute("href")||e.getAttribute("data-href"))||hasClass("al_nav",e)){if(e.hostname)var i=e.hostname;else{var r=e.href||attr(e,"data-href");i=(/^(https?:)\/\/([^:\/]+)?(?::(\d+))?\/?(.*)$/i.exec(r)||[])[2]}if("_blank"===e.target&&t.skip_blank||t.skip_clicable)return!0;if("_blank"!==e.target&&(0,_common.isHttpHref)(r)){if(!i||i==location.hostname)return!0;if(t.allow_post_away&&i&&e.getAttribute("data-post-id")&&e.getAttribute("data-post-click-type"))return e.setAttribute("data-change-location-with-post-away",1),!0}}}else if("input"==tag(e)||"button"===tag(e)&&e.form&&!e.form.getAttribute("onsubmit")){if(e.form&&("submit"==e.type||"image"==e.type)&&(t.skip_onclick||e.getAttribute("data-skiponclick")||!e.getAttribute("onclick"))||hasClass("al_nav",e))return!0}else if("label"==tag(e)&&t.skip_clicable&&(e.htmlFor||geByTag1("input",e)&&(t.skip_onclick||e.getAttribute("data-skiponclick")||!e.getAttribute("onclick"))||hasClass("al_nav",e)))return!0;return!1}function checkTouchHover(e){if(!(e=ge(e)))return!1;do{if("a"==tag(e)||hasClass("al_photo",e))return e;if(hasClass(Btn.className,e))return e;if("label"==tag(e)&&hasClass("option_row",e))return e;if(hasClass("_touched",e))return e;if(e.getAttribute&&"button"===e.getAttribute("role"))return e}while(e=e.parentNode);return!1}function trim(e){return(e||"").trim()}function parseCyr(e,t){for(var n=e,i=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],r=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],o=0,a=i.length;o<a;o++)n=t?n.split(i[o]).join(r[o]):n.split(r[o]).join(i[o]);var s="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ",l="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ";for(o=0,a=s.length;o<a;o++)n=t?n.split(s.charAt(o)).join(l.charAt(o)):n.split(l.charAt(o)).join(s.charAt(o));return n==e?null:n}function parseLat(e){return parseCyr(e,!0)}function parseRusKeys(e,t,n){if(!t)return null;for(var i=e,r="qwertyuiop[]asdfghjkl;'zxcvbnm,./`QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>?~",o="йцукенгшщзхъфывапролджэячсмитьбю.ёЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮ,Ё",a=0,s=r.length;a<s;a++)i=n?i.split(r.charAt(a)).join(o.charAt(a)):i.split(o.charAt(a)).join(r.charAt(a));return i==e?null:i}function parseLatKeys(e,t){return parseRusKeys(e,t,!0)}function scrollLeft(){var e=window,t=e.htmlNode,n=e.bodyNode,i=e.scrollBodyNode;return t&&t.scrollLeft||i&&i.scrollLeft||n&&n.scrollLeft||window.scrollX||0}function scrollTop(e,t){var n=window,i=n.htmlNode,r=n.bodyNode,o=n.scrollBodyNode,a=ge("mcont"),s=hasClass("vk_custom_scroll",r)&&a;if(void 0===e)return s?a&&a.scrollTop||0:i&&i.scrollTop||o&&o.scrollTop||r&&r.scrollTop||window.scrollY||0;t?s?setTimeout(function(){a.scrollTop=Math.max(0,e)},t):setTimeout(function(){window.scrollTo(0,Math.max(0,e))},t):s?a.scrollTop=Math.max(0,e):window.scrollTo(0,Math.max(0,e))}function se(){var e=[],t=Array.prototype.slice.call(arguments);return function(n,i){if(n)if(n.apply)e.push(n);else if("__clear"===n)if(i){for(var r=0,o=e.length;r<o;r++)if(e[r]===i){e.splice(r,1);break}}else e=[];else{var a=Array.prototype.slice.call(arguments);a.shift();var s=0;for(o=e.length;s<o;s++)e[s].apply(window,getValues(t).concat(a))}}}function onBodyScrollForce(e){var t=window,n=t.onBodyScroll,i=t.onDOMReady;e?setTimeout(function(){n(!0)},e):i(function(){n(!0)})}function sgFix(){var e=window,t=e._ua,n=e.ajax,i=e.page,r=e.clog;/galaxy|gt\-/i.test(t)&&(window.vkSGi=0,window.vkAjax=n,window.vkPage=i,function e(){if(!(++window.vkSGi>25))return n!==window.vkAjax||i!==window.vkPage?(n=window.vkAjax,i=window.vkPage,r("SG fixed"),void delete window.vkSGi):void setTimeout(e,200);delete window.vkSGi}())}function hideUnvisibleItems(e){var t=window.cur;if(t.alHiddenObjects){var n=getValues(t.alHiddenObjects);if(n){var i=(e=e||{}).delta||3*getCh(),r=scrollTop(),o=r-i,a=r+getCh()+i,s=[],l=[],u=null,c=null;if((0,_common.each)(n,function(e,t){var n=gpeByClass("ali_wrap",t);if(!n)return!0;var i=n.offsetHeight,r=getY(n),d=r+i,A=isVisible(t);d<o||r>a?A&&s.push([n,t,i]):A?u||(u=n,c=r):l.push([n,t])}),(0,_common.each)(l,function(e,t){var n=t[0],i=t[1];setStyle(n,"height","auto"),show(i)}),(0,_common.each)(s,function(e,t){var n=t[0],i=t[1];setStyle(n,"height",t[2]),hide(i)}),u&&c){var d=getY(u);d!=c&&scrollTop(r+(d-c))}}}}function initObjectsHideByScroll(e,t){var n=window,i=n.cur,r=n.onBodyScroll,o=n.onDOMReady;i&&e&&(i.alHiddenObjects=e,r(function(){hideUnvisibleItems(t)}),o(function(){hideUnvisibleItems(t)}))}function checkPostsSeen(){var e=window,t=e.cur,n=e.pStats;if(t&&t.alPostsStatsObjects){var i=getValues(t.alPostsStatsObjects);if(i){var r=scrollTop(),o=r+getCh(),a=[];i.forEach(function(e,t){if(attr(e,"data-ignore"))return!0;var i=getY(e),s=i+e.offsetHeight,l=(isVisible(e),attr(e,"data-clicked")),u=e.bits||0;return u>=3||(s<r||i>o||(u|=i>=r&&i<o||l?1:0,void((u|=s>=r&&s<o||l?2:0)&&(e.bits=u,3==u&&(a.push(n.postsGetRaws(e)),n.viewed(e))))))}),n.seen(a)}}}function initPostsStats(e){var t=window,n=t.cur,i=t.onBodyScroll,r=t.onDOMReady;n&&e&&(n.alPostsStatsObjects=e,i(function(){checkPostsSeen()}),r(function(){checkPostsSeen()}))}function initAutoScroll(e,t,n){var i=window.onBodyScroll;if(e&&t){var r=(n=n||{}).delta||!1;i(throttle(function(n){var i=e();if(i){var o=getY(i),a=getCh();o>0&&o-n-a<(r||2*a)&&t.call(i)}},33))}}function autoScroll(e,t,n){var i=window.ajax;n=n||{};var r=getValues(e),o=ge("show_more_loading"),a=n.no_cache||!1,s=function(){i.click(this,t,{use_cache:!a})};!r&&o&&s.call(o),initAutoScroll(e,s,n),n.hide_objects&&initObjectsHideByScroll(n.hide_objects)}function scrollToEl(e,t,n){e=ge(e)||window,t=t||0,scrollTop((e===window?1:getY(e))-t,n)}function scrollToHash(e){var t=window.nav;if("#"===(e=e||t.hash||location.hash)[0]&&(e=e.substr(1)),e){var n=geBySel("a[name]");!1===n&&(n=geByTag("a")),(0,_common.each)(n,function(t,n){if(n.name==e)return scrollToEl(n),!1})}}function lockButton(e){var t=ge(e);if(/(^|\s)(small_)?button(\s|$)/i.test(t.className)){var n=ce("button",{id:t.id,className:t.className,innerHTML:'<span class="button_locked"><b class="button_locked_label">'+(0,_common.htsc)(val(t))+"</b></span>",onclick:function(e){return cancelEvent(e)},real_btn:t});t.fake_btn=n,before(n,t),remove(t)}}function unlockButton(e){var t=ge(e);t.real_btn?(before(t.real_btn,t),remove(t),t.real_btn.fake_btn=null,t.real_btn=null):t.fake_btn&&(before(t,t.fake_btn),remove(t.fake_btn),t.fake_btn.real_btn=null,t.fake_btn=null)}function extend(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(!e.length)return t;for(var n=0,i=e.length;n<i;n++)for(var r in e[n])"layerX"!=r&&"layerY"!=r&&(t[r]=e[n][r]);return t}function ge(e){return"string"==typeof e?document.getElementById(e):e}function geByClass(e,t,n){if(t=ge(t)||document,n=n||"*",t.getElementsByClassName){var i=t.getElementsByClassName(e);if("*"==n)return Array.prototype.slice.call(i);var r=[];n=n.toUpperCase();for(var o=0,a=i.length;o<a;o++)i[o].tagName.toUpperCase()==n&&r.push(i[o]);return r}i=geByTag(n,t),r=[];var s=new RegExp("(^|\\s)"+(0,_common.escapeRE)(e)+"(\\s|$)");for(o=0,a=i.length;o<a;o++)s.test(i[o].className)&&r.push(i[o]);return r}function geByClass1(e,t,n){return geByClass(e,t,n)[0]}function gpeByClass(e,t){if(!(t=ge(t)))return null;for(;t=t.parentNode;)if(hasClass(e,t))return t;return null}function geByTag(e,t){return(ge(t)||document).getElementsByTagName(e)}function geByTag1(e,t){return geByTag(e,t)[0]}function gpeByTag(e,t){if(!(t=ge(t)))return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()==e)return t;return null}function geBySel(e,t){return!!(t=ge(t)||document).querySelectorAll&&t.querySelectorAll(e)}function geBySel1(e,t){return!!(t=ge(t)||document).querySelector&&t.querySelector(e)}function append(e,t){return e=ge(e),t=ge(t),e&&t&&t.appendChild(e)||!1}function before(e,t){return(t=ge(t))&&t.parentNode&&t.parentNode.insertBefore(ge(e),t)||!1}function after(e,t){return(t=ge(t))&&t.parentNode&&t.parentNode.insertBefore(ge(e),t.nextSibling)||!1}function replace(e,t){before(e,t)&&remove(t)}function remove(e){return!(!(e=ge(e))||!e.parentNode)&&e.parentNode.removeChild(e)}function clone(e){return!!(e=ge(e))&&e.cloneNode(!0)}function reflow(e){e=ge(e);try{e.offsetWidth,e.offsetHeight}catch(e){}}function tag(e){return((e=ge(e))&&e.tagName||"").toLowerCase()}function outer(e){return(e=ge(e))?val(ce("div").appendChild(clone(e)).parentNode):""}function show(e){var t=ge(e);t&&(t.style.display=t.oldstyle||(hasClass("_ib",t)?"inline-block":hasClass("_i",t)||"span"==tag(t)?"inline":"block"))}function hide(e){var t=ge(e);t&&("none"!=t.style.display&&(t.oldstyle=t.style.display),t.style.display="none")}function isVisible(e){var t=ge(e);return!(!t||!t.style)&&"none"!=t.style.display}function toggle(e,t){void 0===t&&(t=!isVisible(e)),t&&isVisible(e)||(t||isVisible(e))&&(t?show:hide)(e)}function ce(e,t,n){var i=document.createElement(e);return t&&extend(i,t),n&&setStyle(i,n),i}function elfocus(e,t,n){e=ge(e);try{if(e.focus(),void 0!==t&&!1!==t||(t=e.value.length),void 0!==n&&!1!==n||(n=t),e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",n),i.select()}else e.setSelectionRange&&e.setSelectionRange(t,n)}catch(e){}}function elblur(e){(e=ge(e))&&e.blur&&e.blur()}function val(e,t){if(!(e=ge(e)))return"";var n=e.tagName.toLowerCase(),i="input"==n||"textarea"==n||"select"==n,r=i&&("radio"==e.type||"checkbox"==e.type);if(void 0===t)return i?r?e.checked:e.value:e.innerHTML;if(i)r?e.checked=t:e.value=t;else{e.innerHTML=t;var o=window.ajax;"a"!=n&&(o.prepare_nav(e),o.prepare_click(e),o.onPrepared(!0,e))}}function attr(e,t,n){if(e=ge(e))return void 0===n?"data-"==t.substr(0,5)&&e.dataset?e.dataset[t.substr(5).replace(/-([a-z0-9])/,function(e,t){return t.toUpperCase()})]||!1:e.getAttribute&&e.getAttribute(t)||!1:!1===n?e.removeAttribute&&e.removeAttribute(t)||!1:void(e.setAttribute&&e.setAttribute(t,n))}function cssToJs(e,t){return t?t+(e||"").replace(/(?:^|-)([a-z])/g,function(e,t){return(t||"").toUpperCase()}):(e||"").replace(/-([a-z])/g,function(e,t){return(t||"").toUpperCase()})}function getCssPropertyName(e,t,n){e=ge(e)||ce("div");for(var i=["webkit","Moz","ms","O",""],r=["-webkit-","-moz-","-ms-","-o-",""],o=0,a=i.length;o<a;o++){var s=cssToJs(t,i[o]);if(void 0!==e.style[s])return n?r[o]+t:s}return!1}function cssValue(e,t){if("number"==typeof e){e=Math.round(1e7*e)/1e7+(t||"")}return e}function getStyle(e,t,n){if(!(e=ge(e)))return!1;if((0,_common.isArray)(t)){var i={};return(0,_common.each)(t,function(t,n){i[n]=getStyle(e,n)}),i}if((0,_common.isUndefined)(n)&&(n=!0),/transform(-origin)?|transition(-duration)?/i.test(t)&&!(t=getCssPropertyName(e,t)))return!1;var r=window.browser;if(!n&&"opacity"==t&&r.msie)return(l=e.style.filter)?l.indexOf("opacity=")>=0?parseFloat(l.match(/opacity=([^)]*)/)[1])/100+"":"1":"";if(!n&&e.style&&(e.style[t]||"height"==t))return e.style[t];var o,a=document.defaultView||window;if(a.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var s=a.getComputedStyle(e,null);s&&(o=s.getPropertyValue(t))}else if(e.currentStyle){var l;if("opacity"==t&&r.msie)return(l=e.currentStyle.filter)&&l.indexOf("opacity=")>=0?parseFloat(l.match(/opacity=([^)]*)/)[1])/100+"":"1";var u=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});"auto"==(o=e.currentStyle[t]||e.currentStyle[u])&&(o=0),o=(o+"").split(" "),(0,_common.each)(o,function(t,n){if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var i=e.style,r=i.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,i.left=n||0,o[t]=i.pixelLeft+"px",i.left=r,e.runtimeStyle.left=a}}),o=o.join(" ")}if(n&&("width"==t||"height"==t)){var c="width"==t?getW(e):getH(e);o=(intval(o)?Math.max(floatval(o),c):c)+"px"}return o}function setStyle(e,t,n){if((e=ge(e))&&e.style){if((0,_common.isObject)(t))return(0,_common.each)(t,function(t,n){setStyle(e,t,n)});var i="number"==typeof n;i&&/height|width/i.test(t)&&(n=Math.abs(n)),/transform(-origin)?|transition(-duration)?/i.test(t)&&!(t=getCssPropertyName(e,t))||(e.style[t]=i&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?n+"px":n)}}function hasClass(e,t,n){if("string"==typeof t&&"string"!=typeof e){var i=[t,e];e=i[0],t=i[1]}if(t=ge(t))return new RegExp("(^|\\s)"+(n?e:(0,_common.escapeRE)(e))+"(\\s|$)").test(t.className)}function addClass(e,t){if("string"==typeof t&&"string"!=typeof e){var n=[t,e];e=n[0],t=n[1]}(t=ge(t))&&!hasClass(e,t)&&(t.className=(t.className?t.className+" ":"")+e)}function removeClass(e,t,n){if("string"==typeof t&&"string"!=typeof e){var i=[t,e];e=i[0],t=i[1]}(t=ge(t))&&hasClass(e,t,n)&&(t.className=(t.className||"").replace(new RegExp("(^|\\s)"+(n?e:(0,_common.escapeRE)(e))+"(\\s|$)"),function(e,t,n){return t&&n?" ":""}))}function toggleClass(e,t,n){(void 0===n?hasClass(e,t):!n)?removeClass(e,t):addClass(e,t)}function replaceClass(e,t,n,i){removeClass(e,n,i),addClass(t,n)}function switchClass(e,t,n){hasClass(e,n)?replaceClass(e,t,n):replaceClass(t,e,n)}function getXY(e){if(!(e=ge(e)))return[0,0];if("function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=t.left,i=t.top;return[n+scrollLeft(),i+scrollTop()]}var r=0,o=0;if(e.offsetParent)do{r+=e.offsetLeft,o+=e.offsetTop}while(e=e.offsetParent);return[r,o]}function getX(e){return getXY(e)[0]}function getY(e){return getXY(e)[1]}function getW(e){return(e=ge(e))&&e.offsetWidth||0}function getH(e){return(e=ge(e))&&e.offsetHeight||0}function getSize(e){return[getW(e=ge(e)),getH(e)]}function getCw(){return Math.max(window.innerWidth||0,(window.htmlNode||{}).clientWidth||0)}function getCh(){return Math.max(window.innerHeight||0,(window.htmlNode||{}).clientHeight||0)}function evalJs(e){window.execScript?window.execScript(e):eval.call(window,e)}function domData(e,t,n){return e?void 0!==n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t):null}function alLoadingFix(e,t){var n=ge(t=t||"al_loading");if(n){if(!e&&!hasClass("BottomMenu__preloader",n)){var i=ge("m").offsetHeight||0,r=ge("mfoot")&&ge("mfoot").offsetHeight||0;e=getCh()-i+r}n.style.height=e+"px",addClass(t,n)}}function getHref(e){if(!e)return!1;var t=!1;return e.getAttribute&&(t=e.getAttribute("data-href")||e.getAttribute("href")),t||(e.pathname?t=e.pathname+e.search+e.hash:tag(e)||(t=e)),t||!1}function indexOf(e,t,n){for(var i=n||0,r=(e||[]).length;i<r;i++)if(e[i]==t)return i;return-1}function isToday(e){var t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function isYesterday(e){return isToday(new Date(e.getTime()+864e5))}function isTomorrow(e){return isToday(new Date(e.getTime()-864e5))}function isSameDate(e,t){var n=new Date(e),i=new Date(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()&&n.getDate()===i.getDate()}function leadingZero(e){return e>=10?e:"0"+e}function langSex(e,t){if(!(0,_common.isArray)(t))return t;var n=t[1];return window.langConfig?((0,_common.each)(langConfig.sexRules,function(i,r){return"*"==r[0]?(n=t[r[1]],!1):e==r[0]&&t[r[1]]?(n=t[r[1]],!1):void 0}),n):n}function langNumeric(e,t,n){var i,r=window.langConfig;if(!t||!r)return e;if((0,_common.isArray)(t)?(i=t[1],e!=Math.floor(e)?i=t[r.numRules.float]:(0,_common.each)(r.numRules.int,function(n,r){if("*"==r[0])return i=t[r[2]],!1;var o=r[0]?e%r[0]:e;return-1!=indexOf(r[1],o)?(i=t[r[2]],!1):void 0})):i=t,n){for(var o=e.toString().split("."),a=[],s=o[0].length-3;s>-3;s-=3)a.unshift(o[0].slice(s>0?s:0,s+3));o[0]=a.join(r.numDel),e=o.join(r.numDec)}return i=(i||"%s").replace("%s",e)}function langWordNumeric(e,t,n){return(0,_common.isArray)(t)&&e<t.length?t[e]:langNumeric(e,n)}function langDate(e,t,n,i,r,o){var a,s=window.langConfig;if(o||(o=""),(0,_common.isArray)(t)||(t=["",t,t,t,t]),"number"==typeof e||"string"==typeof e?(e>2147483646e3&&(e=0),e+=n,a=new Date(e)):a=e,r)t=t[1];else{var l="";!(l=isToday(a)?t[3]:isYesterday(a)?t[2]:isTomorrow(a)?t[4]:t[1])&&t[1]&&(l=t[1]),t=l}var u="",c={hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds(),day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()};switch(3===s.id&&(u=a.getHours()>11?"pm":"am",c.hours=a.getHours()%12==0?12:a.getHours()%12),s.id){case 1:switch(a.getHours()){case 11:t=t.replace(" о "," об ");break;case 0:t=t.replace(" о "," в ")}break;case 3:!isToday(a)||isYesterday(a)||isTomorrow(a)||(t=o+t);break;case 12:case 73:1==a.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===s.id&&(c.year=c.year+543),t.replace("{hour}",c.hours).replace("{num_hour}",leadingZero(c.hours)).replace("{minute}",leadingZero(c.minutes)).replace("{day}",c.day).replace("{num_day}",leadingZero(c.day)).replace("{month}",i[c.month]).replace("{year}",c.year).replace("{short_year}",c.year%100).replace("{second}",leadingZero(c.seconds)).replace("{am_pm}",u)}function setNotify(e){var t=intval(e),n=ge("header_msgs"),i=geByClass1("pcont","l");if(n&&(window.isNewMail?val(n,'<div class="hb_btn mhi_notify">'+(t>0?'<em class="mh_notify_counter">'+t+"</em>":"")+"</div>"):val(n,'<div class="hb_btn mhi_notify">'+(t>0?'<em class="mh_notify_counter">'+t+"</em>":"&nbsp;")+"</div>"),t>0?removeClass("mhb_no_notify",n):addClass("mhb_no_notify",n),i)){var r=geByClass1("mmi_mail",i),o=geByClass1("mmi_wrap",r),a=geByClass1("mm_counter",o);if(!r)return;t>0?a?val(a,t):append(ce("em",{className:"mm_counter",innerHTML:t}),o):remove(a)}}function getNotify(){var e=ge("header_msgs");return e?intval(val(geByTag1("em",e))):0}function canUploadFile(){return(window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder)))}function uploadFile(e,t,n){var i=window.XDomainRequest||window.XMLHttpRequest,r=new i;r.open("POST",e,!0),r.upload.addEventListener("progress",n.onProgress||rf,!1),r.onload=n.onComplete||rf,r.onerror=n.onError||rf;var o=n.onStart||rf;if(window.FormData){var a=new FormData;for(var s in t)a.append(s,t[s]);return r.send(a),o(r),r}try{if(i&&!i.prototype.sendAsBinary&&window.ArrayBuffer&&window.Uint8Array){var l=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;l&&(i.prototype.sendAsBinary=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t,0),i=0;i<e.length;i++)n[i]=255&e.charCodeAt(i);var r=new l;r.append(t);var o=r.getBlob();this.send(o)})}var u="----VkComFormBoundary-"+(0,_common.srand)(),c="",d=0,A=function(e,t,n){n+="--"+t+"--",e.setRequestHeader("Content-type",'multipart/form-data; boundary="'+t+'"'),e.sendAsBinary(n),o(e)};for(var s in t)if("function"==typeof t[s].getAsBinary){d++;var f=new FileReader,p=t[s],_=p.fileName||p.name||"";f.onload=function(){c+="--"+u+'\r\nContent-Disposition: form-data; name="'+(0,_common.utf2win)(s)+'"; filename="'+(0,_common.utf2win)(_)+'"\r\nContent-Type: application/octet-stream\r\n',f.result,--d||A(r,u,c)},f.readAsBinaryString(p)}else c+="--"+u+'\r\nContent-Disposition: form-data; name="'+(0,_common.utf2win)(s)+'"\r\n\r\n'+(0,_common.utf2win)(t[s])+"\r\n";return d||A(r,u,c),r}catch(e){return!1}return!1}function readFile(e,t){if(window.FileReader&&window.vk.iu_ex){var n=new FileReader;n.onload=function(){t&&t(n.result),n=null},n.readAsDataURL(e)}}function formatTime(e){var t,n,i,r=e<0;return t=(n=(e=Math.round(r?-e:e))%60)<10?"0"+n:n,t=(i=(e=Math.floor(e/60))%60)+":"+t,(e=Math.floor(e/60))>0&&(i<10&&(t="0"+t),t=e+":"+t),r&&(t="-"+t),t}function domClosestOverflowHidden(e){for(var t,n,i,r,o=e=ge(e);o&&o.tagName&&o!==bodyNode&&(t=getStyle(o,"position"),n=getStyle(o,"overflow"),i=getStyle(o,"transform"),o===e||"visible"===n||("static"===t?r&&"relative"!==r:"fixed"===r));)"none"!==i?r=void 0:"static"!==t&&"fixed"!==r&&(r=t),o=(o||{}).parentNode;return o}function copyToClipboard(e){var t;(0,_select.default)(e);try{t=document.execCommand("copy")}catch(e){t=!1}return t}function blinkItem(e,t){setStyle(e,{opacity:1}),setTimeout(function(){return setStyle(e,{opacity:0})},t)}function domPN(e){return(e||{}).parentNode}function matchesSelector(e,t){return!(!(e=ge(e))||e==document)&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(e){for(var t=(this.parentNode||this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1}).call(e,t)}function domCA(e,t){do{e=domPN(e)}while(e&&!matchesSelector(e,t));return e}function getLang(){try{var e=Array.prototype.slice.call(arguments),t=e.shift();if(!t)return"...";var n=window.cur&&window.cur.lang&&window.cur.lang[t]||window.lang&&window.lang[t]||window.langpack&&window.langpack[t]||window[t];if(!n){var i=t.split("_");return i.shift(),i.join(" ")}return(0,_common.isFunction)(n)?n.apply(null,e):void 0===e[0]&&!(0,_common.isArray)(n)||"raw"===e[0]?n:langNumeric(e[0],n,e[1])}catch(e){console.log("lang error:"+e.message+"("+Array.prototype.slice.call(arguments).join(", ")+")")}}function throttle(e,t){var n;return function(){n||(e.apply(this,arguments),n=setTimeout(function(){n=!1},t))}}function debounce(e,t){return function n(){n._timer&&clearTimeout(n._timer);var i=this,r=arguments;n._timer=setTimeout(function(){n._timer=null,e.apply(i,r)},t)}}function scrollGetX(){return window.pageXOffset||scrollNode.scrollLeft||document.documentElement.scrollLeft}function scrollGetY(){return window.pageYOffset?window.pageYOffset:window.scrollNode?window.scrollNode.scrollTop:document.documentElement?document.documentElement.scrollTop:0}function domEL(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}function domPS(e){return domEL((e||{}).previousSibling,1)}function domNS(e){return domEL((e||{}).nextSibling)}function domFC(e){return domEL((e||{}).firstChild)}function domInsertAfter(e,t){var n=domPN(t);return n&&n.insertBefore(e,domNS(t))}function domInsertBefore(e,t){var n=domPN(t);return n&&n.insertBefore(e,t)}function domChildIndex(e){for(var t=0;null!=(e=domPS(e));)t++;return t}function domChildren(e){for(var t=[],n=e.childNodes,i=0;i<n.length;i++)n[i].tagName&&t.push(n[i]);return t}function safeGet(e,t){for(var n=t.split("."),i=n.length,r=e,o=0;o<i;o++)if(!(r=r[n[o]]))return;return r}function alwaysArray(e){return Array.isArray(e)?e:[e]}function disableFlex(){var e=(0,_Dollars.$)(".vk"),t=Array.from((0,_Dollars.$$)("*")),n=["A","IMG","SPAN"];e.classList.remove("vk_flex_yes"),e.classList.add("vk_flex_no"),t.filter(function(e){return e instanceof Element&&"flex"===getComputedStyle(e).display}).forEach(function(e){n.includes(e.tagName)?e.style.display="inline":e.style.display="block"})}function flatArray(e){return Array.isArray(e)?flatten(e):[e]}function domQuery1(e,t){return(t||document).querySelector(e)}function domQuery(e,t){return(t||document).querySelectorAll(e)}function flatten(e){var t=[];return e.forEach(function(e){(0,_common.isArray)(e)?t=t.concat(flatten(e)):t.push(e)}),t}function ariaMode(){(0,_Dollars.$)("html").classList.add("vk_ariaMode"),(0,_Dollars.$$)("*").forEach(function(e){if(e.style.opacity=1,e.style.fontSize="9px",e.style.backgroundImage="none","true"===e.getAttribute("aria-hidden")&&(e.style.display="none"),"IMG"===e.tagName){var t=e.getAttribute("alt")||"[?]";e.insertAdjacentHTML("afterend","<div>".concat(t,"</div>")),e.style.display="none"}else e.innerHTML.trim()&&!e.getAttribute("aria-label")||(e.innerHTML=e.getAttribute("aria-label")||e.getAttribute("alt")||e.getAttribute("href")||"[?]")})}function ceFromString(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function isIosWebView(){return window.webkit&&window.webkit.messageHandlers}function isAndroidWebView(){return window.AndroidBridge}function isVkWebView(){return isIosWebView()?"function"==typeof window.webkit.messageHandlers.VKWebAppInit:!!isAndroidWebView()&&"function"==typeof window.AndroidBridge.VKWebAppInit}function acquireLock(e,t,n){var i="lock_"+e;if(lsCheck()){if(!0!==lsGet(i)){lsSet(i,!0);try{t()}catch(e){}return void lsSet(i,!1)}n||setTimeout(acquireLock.bind(window,e,t,!0),100)}else t()}function statlogsValueEvent(e,t){if(void 0!==e&&void 0!==t){var n,i=[].slice.call(arguments,2);acquireLock("m_stats_cookie_lock",function(){try{n=(n=JSON.parse(getCookie("remixmsts"))).data}catch(e){n=[]}n.push([Math.round(Date.now()/1e3),e,t].concat(i)),n=n.slice(n.length-100);var r=Math.round((0,_common.rand)(0,1e9));setCookie("remixmsts",JSON.stringify({data:n,uniqueId:r}),.01)})}}function ajaxRequest(e,t,n,i){n||(n=function(){}),t._ajax=1;var r=nav.getQuery("community");return r&&!t.community&&(t.community=r),ajax.post(e,t,{onDone:n,onFail:i})}function asc(e,t){return e-t}function desc(e,t){return t-e}function unique(e,t,n){return n.indexOf(e)===t}function first(e,t){return 1===arguments.length?e[0]:t.slice(0,e)}function last(e,t){return 1===arguments.length?e[e.length-1]:t.slice(-e)}function toInt(e){return parseInt(e,10)}function toArray(e){return"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map(function(t){return e[t]}):Array.isArray(e)?e:[e]}function groupBy(e,t){var n={};return e.forEach(function(e){var i=t(e);(n[i]||(n[i]=[])).push(e)}),n}function domInsert(e,t,n){var i="string"==typeof t?domCreate(t):t;n>=0&&e.children[n]?e.insertBefore(i,e.children[n]):e.appendChild(i)}function openApp(e){e.startsWith("/")?window.location="vk://vk.com".concat(e):window.location="vk://".concat(e),setTimeout(function(){window.location="/?act=go2app"},25)}function domCreate(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]}function rs(e,t){return e.replace(/%([^%]+?)%/g,function(e){return e=e.slice(1,-1),t.hasOwnProperty(e)?t[e]:""})}function getPreloadData(){var e=ge("preload_data");return e?JSON.parse(e.innerHTML.replace("\x3c!--","").replace("--\x3e","")):[]}function base64ToArrayBuffer(e){0===e.indexOf("data:")&&(e=e.split(",")[1]);for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function getImageOrientation(e){var t=base64ToArrayBuffer(e),n=new DataView(t);if(65496!==n.getUint16(0,!1))return-2;for(var i=n.byteLength,r=2;r<i;){var o=n.getUint16(r,!1);if(r+=2,65505===o){if(1165519206!==n.getUint32(r+=2,!1))return-1;var a=18761===n.getUint16(r+=6,!1);r+=n.getUint32(r+4,a);var s=n.getUint16(r,a);r+=2;for(var l=0;l<s;l++)if(274===n.getUint16(r+12*l,a))return n.getUint16(r+12*l+8,a)}else{if(65280!=(65280&o))break;r+=n.getUint16(r,!1)}}return-1}function isTablet(){return window.innerWidth>=882}function isVKUISupported(){if(isTablet())return!1;if((_browser.default.ios||_browser.default.ipad)&&_slicedToArray(_browser.default.version.split(".").map(function(e){return Number(e)}),1)[0]>=9)return!0;if(_browser.default.android&&_browser.default.android_version){var e=_slicedToArray(_browser.default.android_version.split(".").map(function(e){return Number(e)}),2),t=e[0],n=e[1];if(t>4||4===t&&n>=4)return!0}return!1}extend(getStyle,{transform:function(e){var t,n=getStyle(e,"transform");return n?{scale:(t=n.match(/(^|\s+)scale\(([0-9.]+)\)(\s+|$)/))&&t[2]||1,scale3d:(t=n.match(/(^|\s+)scale3d\(([0-9.]+,\s+([0-9.]+),\s+([0-9.]+))\)(\s+|$)/))&&t[2]||1,rotate:(t=n.match(/(^|\s+)rotate\(([0-9.-]+)(deg)?\)(\s+|$)/))&&+t[2]||0,translate:(t=n.match(/(^|\s+)translate\(([0-9.-]+)(px)?(?:,\s+([0-9.-]+)(px)?)\)(\s+|$)/))&&[+t[2],+t[4]]||[0,0],translate3d:(t=n.match(/(^|\s+)translate3d\(([0-9.-]+)(px)?(?:,\s+([0-9.-]+)(px)?)(?:,\s+([0-9.-]+)(px)?)\)(\s+|$)/))&&[+t[2],+t[4],+t[6]]||[0,0,0]}:{scale:1,rotate:0,translate:[0,0]}}}),extend(setStyle,{animate:function(e,t,n,i){if(getCssPropertyName(e,"transition")){if(!t)return e.onAnimationEnd?e.onAnimationEnd():setStyle.transition(e),setStyle;var r=((0,_common.isObject)(n)?n.duration:n)||200,o=n.func||"ease";setStyle.transition(e,t,r,o);var a=window.browser;e.onAnimationEnd&&(a.opera?e.removeEventListener("oTransitionEnd",e.onAnimationEnd):removeEvent(e,"transitionend webkitTransitionEnd oTransitionEnd otransitionend msTransitionEnd",e.onAnimationEnd)),e.onAnimationEnd=function(){return a.opera?e.removeEventListener("oTransitionEnd",e.onAnimationEnd):removeEvent(e,"transitionend webkitTransitionEnd oTransitionEnd otransitionend msTransitionEnd",e.onAnimationEnd),e.onAnimationEnd=null,setStyle.transition(e),i&&i(e),!1},a.opera?e.addEventListener("oTransitionEnd",e.onAnimationEnd):addEvent(e,"transitionend webkitTransitionEnd oTransitionEnd otransitionend msTransitionEnd",e.onAnimationEnd)}return setStyle},transform:function(e,t,n,i){var r=window.has3d,o=[];if((0,_common.isObject)(t)){r&&(t.scale3d=t.scale,t.translate3d=t.translate);var a=extend(getStyle.transform(e),t);t=r?a.scale3d:a.scale,i=a.rotate,n=r?a.translate3d:a.translate}if((0,_common.isArray)(t)?r?o.push("scale3d("+cssValue(t[0])+", "+cssValue(t[1])+", 1)"):o.push("scale("+cssValue(t[0])+", "+cssValue(t[1])+")"):void 0!==t&&(r?o.push("scale3d("+cssValue(t)+", "+cssValue(t)+", 1)"):o.push("scale("+cssValue(t)+")")),void 0!==i&&o.push("rotate("+cssValue(i,"deg")+")"),void 0!==n&&(r?o.push("translate3d("+cssValue(n[0],"px")+", "+cssValue(n[1],"px")+", 0)"):o.push("translate("+cssValue(n[0],"px")+", "+cssValue(n[1],"px")+")")),!o.length)return setStyle(e,"transform","none");setStyle(e,"transform",o.join(" "))},transformOrigin:function(e,t,n){(0,_common.isArray)(t)&&(n=t[1],t=t[0]),setStyle(e,"transform-origin",cssValue(t,"px")+" "+cssValue(n,"px"))},transition:function(e,t,n,i){var r=[];if(!t)return setStyle(e,"transition","none");(0,_common.isArray)(t)||(t=t.split(/\s*,\s*/)),n=cssValue(n,"ms"),(0,_common.each)(t,function(){var t=getCssPropertyName(e,this,!0),o=[];t&&(o.push(t),o.push(n),i&&o.push(i),r.push(o.join(" ")))}),setStyle(e,"transition",r.join(","))}}),function(){var e=!1,t=[],n=function(){if(!e&&(e=!0,window.htmlNode=geByTag1("html"),window.bodyNode=geByTag1("body"),t)){for(var n=null;n=t.shift();)n.call(document);t=null}};document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),n()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function e(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),n())}),window.addEventListener?window.addEventListener("load",n,!1):window.attachEvent?window.attachEvent("onload",n):window.onload=n,window.onDOMReady=function(n){e?n.call(document):t.push(n)}}(),window.cdf=function(e){var t=e.createDocumentFragment(),n=e.createElement("div"),i=e.createRange&&e.createRange();return t&&t.appendChild(n),i&&i.selectNodeContents&&i.selectNodeContents(n),t?i&&i.createContextualFragment?function(t){return t?i.createContextualFragment(t):e.createDocumentFragment()}:function(t){if(!t)return e.createDocumentFragment();n.innerHTML=t;for(var i=e.createDocumentFragment();n.firstChild;)i.appendChild(n.firstChild);return i}:function(e){return ce("div",{innerHTML:e})}}(document),onDOMReady(function(){_browser.default.chrome||_browser.default.msie_edge?window.scrollNode=document.scrollingElement||bodyNode:window.scrollNode=_browser.default.safari?bodyNode:htmlNode})},Ogzf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onLongpress=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,a=arguments.length>2?arguments[2]:void 0,s=function(r){var s=r.target;(0,i.addEvent)(e,o,l,{passive:!0}),(0===r.button||isUndefined(r.button))&&(t=setTimeout(function(n){var r,s;n.touches?(r=n.touches[0].pageX,s=n.touches[0].pageY):(r=n.pageX,s=n.pageY);a({pageX:r,pageY:s}),(0,i.removeEvent)(e,o,l,{passive:!0}),clearTimeout(t)}.bind(s,r),n))},l=function n(){clearTimeout(t),(0,i.removeEvent)(e,o,n,{passive:!0})};return(0,i.addEvent)(e,r,s,{passive:!0}),function(){clearTimeout(t),(0,i.removeEvent)(e,r,s,{passive:!0})}};var i=n("OcsD"),r="touchstart mousedown",o="touchcancel touchend touchmove mouseout mouseup mousemove scroll"},OmnB:function(e,t){!function(t){var n=[],i=void 0!==t&&!t.AndroidBridge&&!t.webkit,r=i?"message":"VKWebAppEvent";void 0!==t&&(t.CustomEvent||function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=t.Event.prototype,t.CustomEvent=e}(),t.addEventListener(r,function(){var e=Array.prototype.slice.call(arguments),t=n.slice();i?t.forEach(function(t){t({detail:e[0].data})}):t.forEach(function(t){t.apply(null,e)})})),e.exports={send:function(e,n){n||(n={});var i=void 0!==t,r=i&&t.AndroidBridge,o=i&&t.webkit&&t.webkit.messageHandlers,a=!r&&!o;r&&"function"==typeof r[e]&&r[e](JSON.stringify(n)),o&&o[e]&&"function"==typeof o[e].postMessage&&o[e].postMessage(n),a&&parent.postMessage({handler:e,params:n,type:"vk-connect"},"*")},subscribe:function(e){n.push(e)},unsubscribe:function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)},supports:function(e){var n=void 0!==t,i=n&&t.AndroidBridge,r=n&&t.webkit&&t.webkit.messageHandlers;return!(!i||"function"!=typeof i[e])||(!(!r||!r[e]||"function"!=typeof r[e].postMessage)||!(r||i||!~["VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppGetGeodata","VKWebAppGetUserInfo","VKWebAppGetPhoneNumber","VKWebAppGetClientVersion","VKWebAppOpenPayForm","VKWebAppShare","VKWebAppAllowNotifications","VKWebAppDenyNotifications","VKWebAppShowWallPostBox","VKWebAppGetEmail","VKWebAppAllowMessagesFromGroup","VKWebAppJoinGroup","VKWebAppOpenApp","VKWebAppSetLocation","VKWebAppScroll","VKWebAppResizeWindow"].indexOf(e)))}}}(window)},OnSo:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("MESj"));window.uOpenInNativeAppFloatBtn=i.default},OsAp:function(e,t,n){"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r})},"P+Xc":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var r,o,a,s,l,u=window,c=u.page,d=u.nav,A=u.menu,f=u.zlayer,p=window,_=p.onDOMReady,h=p.onBodyScroll,m=p.onBodyResize,v=window,g=v.geByClass1,y=v.addClass,w=v.removeClass,b=(v.getW,v.getH),E="groupCover-vk_animationYes",k="groupCover-vk_animationStep",C=function(){return{vk:g("vk"),basis:g("basis"),header:g("basis__header"),headerTitle:g("mh_header",g("basis__header")),cover:g("groupCover"),coverImage:g("groupCover__image"),coverDimmer:g("groupCover__dimmer")}},D=!1;function S(){D||(r=C()).cover&&(D=!0,y(r.vk,E),o=!i.default.chrome||Number(i.default.version.split(".")[0])>50,a="fixed"===getStyle(r.header,"position"),s=b(r.header),l=b(r.cover),h(P),m(I),P(),window.cur.destroy.push(M),d.onBeforeGo(T))}function T(e){(e||A.opened())&&(w(r.vk,k),w(r.vk,E)),h("__clear",P),m("__clear",I),d.onBeforeGo.off(T),D=!1}function M(){T(!0)}function P(){var e=scrollTop();if(a)if(e<0)setStyle(r.header,"top",-e),y(r.vk,k),setStyle(r.coverDimmer,"opacity",0),setStyle(r.coverImage,"top",0);else{var t=document.body,n=Math.min(1,e/(l-s)),i=t&&t.classList.contains("vk_tabbar_top")&&!r.header.classList.contains("basis__header_noBottomMenu")?48:0;setStyle(r.header,"top",i),setStyle(r.headerTitle,"display","block"),n<=.9?(y(r.vk,k),o&&setStyle(r.coverImage,"top",.5*e),setStyle(r.coverDimmer,"opacity",n/.9),setStyle(r.headerTitle,"opacity",0)):(setStyle(r.headerTitle,"opacity",1),w(r.vk,k))}else Math.min(1,e/l)<1?(y(r.vk,k),setStyle(r.coverDimmer,"opacity",0),o&&setStyle(r.coverImage,"top",.5*e),setStyle(r.headerTitle,"display","none")):w(r.vk,k)}function I(){M(),S()}_(function(){(i.default.chrome||i.default.safari&&i.default.ios>=9)&&(S(),c.onChange(S),f.onClose(function(){setTimeout(S,0)}))})},P3wa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("wTbK")),r=function(e){return e&&e.__esModule?e:{default:e}}(n("Y6JH"));var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.lang;return(0,i.default)({on_overlay_click:"return false;",class:"Popup_open",body:{class:"WarningModal",inner:[{class:"WarningModal__icon",inner:(0,r.default)("groups/common","hide_outline_56")},{class:"WarningModal__title",inner:e.title},{class:"WarningModal__text",inner:e.text}]},items:[(0,i.ModalMenuBtn)({url:"/groups",class:"WarningModal__button",theme:"regular",size:"large",inner:t.mobile_back,onclick:["WarningModal.leave","this","event"],attrs:{"data-id":e.id,"data-hash":e.hash,"data-gid":e.gid,"data-uid":e.user_id}}),(0,i.ModalMenuBtn)({url:e.proceed_url,class:"WarningModal__button",theme:"secondary",size:"large",inner:t.mobile_groups_warning_notification_proceed,onclick:["WarningModal.close","this","event"],attrs:{"data-id":e.id,"data-hash":e.hash,"data-gid":e.gid,"data-uid":e.user_id}})]})};t.default=o},Pfrj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("bZ/P")),r=o(n("Mc5h"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n,o=e.photos||[e.photo],s=(o=Array.isArray(o)?o:[o]).length,c="";if(s>1)for(var d=0;d<s;d++)c+=l(o[d],d);n=40===e.size?"m":36===e.size?"s":e.size?e.size:"xl";return(0,r.default)({mix:i.default.class(e.mix,"Avatar",(t={},a(t,s,!0),a(t,"size",n),t)),url:e.url,attrs:1===s?u(o[0]):"",inner:c})};function l(e,t){return(0,r.default)({mix:i.default.class("Avatar__image",a({},t,!0)),attrs:u(e)})}function u(e){return i.default.attr("style","background-image: url('".concat(e,"')"))}t.default=s},"Po+v":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(e.on_overlay_click_native)t=e.on_overlay_click_native;else{var n=!0;"boolean"==typeof e.hide_on_overlay_click&&(n=e.hide_on_overlay_click),t=["Popup._onOverlayClick","this",e.on_overlay_click||null,n]}return{id:e.id,class:[e.mix?e.mix:e.class,Bem.class("Popup",{open:e.open,scrollable:e.scrollable})],ontouchmove:["Popup._onTouchMove","event"],inner:[e.rel?e.rel:null,{class:"Popup__overlay",onclick:t},{class:"Popup__wrap",inner:{tag:"div",class:"Popup__content","aria-modal":"true",inner:[e.header?{class:"Popup__header",inner:[e.header.title?{class:"Popup__headerTitle",inner:e.header.title}:null,e.header.corner?{class:["Popup__headerCorner",e.header.corner.class],inner:e.header.corner.text,href:e.header.corner.url,onclick:e.header.corner.onclick,attrs:e.header.corner.attrs}:null]}:null,e.scrollable?{class:"Popup__scroll ScrollView",inner:{class:"Popup__scrollContent",inner:e.content}}:e.content,e.footer?{class:"Popup__footer",inner:e.footer}:null]}}]}};t.default=i},PovR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUSH_NOTIFIER_PERMISSION_DENIED=t.PUSH_NOTIFIER_PERMISSION_DEFAULT=t.PUSH_NOTIFIER_PERMISSION_GRANTED=t.DAY=t.HOUR=t.MINUTE=t.SECOND=void 0;t.SECOND=1e3;t.MINUTE=6e4;t.HOUR=36e5;t.DAY=864e5;t.PUSH_NOTIFIER_PERMISSION_GRANTED="granted";t.PUSH_NOTIFIER_PERMISSION_DEFAULT="default";t.PUSH_NOTIFIER_PERMISSION_DENIED="denied"},PuTx:function(e,t,n){"use strict";var i=n("OcsD"),r=a(n("wMVj")),o=a(n("kr3z"));function a(e){return e&&e.__esModule?e:{default:e}}window.uCloseProfileSwitcher={},uCloseProfileSwitcher._onConfirmClick=l;var s=null;function l(e,t){var n=t.checked;r.default.clear();var a={is_closed:n?"1":"0",_ajax:1};o.default.post(e,a,{onDone:function(){r.default.reload();var e=window.cur;s=(0,i.scrollTop)(),e.destroy.push(u)}})}function u(){(0,i.scrollTop)(s),requestAnimationFrame(function(){(0,i.scrollTop)(s),requestAnimationFrame(function(){(0,i.scrollTop)(s)})})}},Q8gl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Au5b"));var r=i.default;t.default=r,window.Control=i.default},QBkA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("ZoJ6"));n("yguo");var r=i.default;t.default=r,window.MailFilter=i.default},QD50:function(e,t,n){"use strict";function i(e,t){function n(e){var t=["Webkit","Moz","O","ms"],n=document.createElement("div");if(void 0!==n.style[e])return!0;for(var i in e=e.charAt(0).toUpperCase()+e.slice(1),t)if(void 0!==n.style[t[i]+e])return!0;return!1}function i(e,t){new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t)}function o(e,t){e.className=e.className.replace(new RegExp("(\\s+|^)"+t+"(\\s+|$)","g")," ").replace(/^\s+|\s+$/g,"")}function a(e,t){0>e?e=0:e>v-1&&(e=v-1);for(var n=k.dots.length-1;n>=0;n--)o(k.dots[n],T.activeDot);return i(k.dots[e],T.activeDot),D=e,s(-e*k.width,void 0===t?S.speed:t),f(),S.onSlideChange&&S.onSlideChange(e),e}function s(e,t){var n=t?t+"ms":"";y.style.webkitTransitionDuration=y.style.MozTransitionDuration=y.style.msTransitionDuration=y.style.OTransitionDuration=y.style.transitionDuration=n,u(e)}function l(e,t){if(E&&clearInterval(E),t){var n=+new Date,i=k.left;E=setInterval(function(){function r(e,t){return(t-e)*s+e}var o,a,s=(+new Date-n)/t,l=[0,.7,1,1];return s>=1?(u(e),void clearInterval(E)):(o=e-i,a=r(r(r(l[0],l[1]),r(l[1],l[2])),r(r(l[1],l[2]),r(l[2],l[3]))),void u(Math.floor(a*o+i)))},15)}else u(e)}function u(e){y.style.webkitTransform="translate("+e+"px,0) translateZ(0)",y.style.msTransform=y.style.MozTransform=y.style.OTransform=y.style.transform="translateX("+e+"px)",k.left=e}function c(e){y.style.left=e+"px",k.left=e}function d(){var e=D+1;return e>v-1&&(e=0),a(e)}function A(){b=!0,f()}function f(){b&&(w&&clearTimeout(w),w=setTimeout(function(){d()},S.slideshowInterval))}function p(){w&&clearTimeout(w)}function _(){b=!1,w&&clearTimeout(w)}function h(){k.width=e.offsetWidth,y.style.width=k.width*v+"px";for(var t=0;v>t;t++)k.slides[t].style.width=k.width+"px";s(-D*k.width)}function m(e,t,n,i){t&&(e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n))}var v,g,y,w,b,E,k={slides:[],dots:[],left:0},C=200,D=0,S={speed:300,touchSpeed:300,slideshow:!1,slideshowInterval:4e3,stopSlideshowAfterInteraction:!1,startSlide:0,mouseDrag:!0,disableIfOneSlide:!0,cssPrefix:"peppermint-",dots:!1,dotsPrepend:!1,dotsContainer:void 0,slidesContainer:void 0,onSlideChange:void 0,onSetup:void 0};t&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(S,t);var T={inactive:S.cssPrefix+"inactive",active:S.cssPrefix+"active",mouse:S.cssPrefix+"mouse",drag:S.cssPrefix+"drag",slides:S.cssPrefix+"slides",dots:S.cssPrefix+"dots",activeDot:S.cssPrefix+"active-dot",mouseClicked:S.cssPrefix+"mouse-clicked"},M={transforms:n("transform"),transitions:n("transition")};return function(){var t=S.slidesContainer||e,n=S.dotsContainer||e;if(!(S.disableIfOneSlide&&t.children.length<=1)){(!M.transforms||window.opera)&&(u=c),(!M.transitions||window.opera)&&(s=l),i(y=S.slidesContainer||document.createElement("div"),T.slides);for(var d=0,f=t.children.length;f>d;d++){var w=t.children[d],b=document.createElement("li");k.slides.push(w),b.setAttribute("tabindex","0"),b.setAttribute("role","button"),b.innerHTML="<span></span>",function(t,n){m(n,"click",function(){a(t),S.stopSlideshowAfterInteraction&&_()}),m(n,"keyup",function(e){13==e.keyCode&&(a(t),S.stopSlideshowAfterInteraction&&_())}),m(n,"mouseup",function(){i(n,T.mouseClicked)}),m(n,"blur",function(){o(n,T.mouseClicked)},!0),m(w,"focus",w.onfocusin=function(){e.scrollLeft=0,setTimeout(function(){e.scrollLeft=0},0),a(t)},!0)}(d,b),k.dots.push(b)}for(v=k.slides.length,100/v,i(e,T.active),o(e,T.inactive),S.mouseDrag&&i(e,T.mouse),k.width=e.offsetWidth,y.style.width=k.width*v+"px",d=0;v>d;d++)k.slides[d].style.width=k.width+"px",y.appendChild(k.slides[d]);if(S.slidesContainer||e.appendChild(y),S.dots&&v>1){for(i(g=document.createElement("ul"),T.dots),d=0,f=k.dots.length;f>d;d++)g.appendChild(k.dots[d]);S.dotsPrepend?n.insertBefore(g,n.firstChild):n.appendChild(g)}m(window,"resize",h),m(window,"orientationchange",h),setTimeout(function(){a(S.startSlide,0)},0),S.slideshow&&A(),r(y,{mouse:S.mouseDrag,start:function(){i(e,T.drag)},move:function(e,t,n){p(),n.x=n.x/(!D&&n.x>0||D==v-1&&n.x<0?Math.abs(n.x)/k.width*2+1:1),s(n.x-k.width*D)},end:function(t,n,i){if(i.x){var r=Math.abs(i.x)/k.width,s=Math.floor(r)+(r-Math.floor(r)>.25?1:0);s+=i.time<C+C*s/1.8&&Math.abs(i.x)-s*k.width>(s?-k.width/9:20)?1:0,i.x<0?a(D+s,S.touchSpeed):a(D-s,S.touchSpeed),S.stopSlideshowAfterInteraction&&_()}o(e,T.drag)}}),setTimeout(function(){S.onSetup&&S.onSetup(v)},0)}}(),{slideTo:function(e,t){return a(parseInt(e,10),t)},next:d,prev:function(){var e=D-1;return 0>e&&(e=v-1),a(e)},start:A,stop:_,pause:p,getCurrentPos:function(){return D},getSlidesNumber:function(){return v},recalcWidth:h}}function r(e,t){function n(e,t,n,r){return t?(e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent("on"+t,n),{remove:function(){i(e,t,n,r)}}):void 0}function i(e,t,n,i){t&&(e.removeEventListener?e.removeEventListener(t,n,!!i):e.detachEvent("on"+t,n))}function r(e){}function o(e){if((h={x:(A?e.clientX:e.touches[0].clientX)-_.x,y:(A?e.clientY:e.touches[0].clientY)-_.y,time:Number(new Date)-_.time}).time-v[v.length-1].time){for(var t=0;t<v.length-1&&h.time-v[t].time>80;t++);m={x:(h.x-v[t].x)/(h.time-v[t].time),y:(h.y-v[t].y)/(h.time-v[t].time)},v.length>=5&&v.shift(),v.push({x:h.x,y:h.y,time:h.time})}}function a(e,t){y=!0,E[A=t](e)||(n(document,b[A][1],s),n(document,b[A][2],l),n(document,b[A][3],l),c.preventDefault,_={x:A?e.clientX:e.touches[0].clientX,y:A?e.clientY:e.touches[0].clientY,time:Number(new Date)},d=void 0,h={x:0,y:0,time:0},m={x:0,y:0},v=[{x:0,y:0,time:0}],c.start(e,_))}function s(e){!c.preventScroll&&d||E[A](e)||(o(e),(Math.abs(h.x)>c.clickTolerance||Math.abs(h.y)>c.clickTolerance)&&(y=!1),void 0===d&&3!==A&&(d=Math.abs(h.x)<Math.abs(h.y)&&!c.preventScroll)||(c.preventDefault,c.move(e,_,h,m)))}function l(e){A&&o(e),!y&&e.target&&e.target.blur&&e.target.blur(),i(document,b[A][1],s),i(document,b[A][2],l),i(document,b[A][3],l),c.end(e,_,h,m)}var u=function(){},c={preventDefault:!0,clickTolerance:0,preventScroll:!1,mouse:!0,start:u,move:u,end:u,click:u};t&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(c,t);var d,A,f=!!window.navigator.pointerEnabled,p=!!window.navigator.msPointerEnabled,_={},h={},m={},v=[],g=[],y=!0,w=f?1:p?2:0,b=[["touchstart","touchmove","touchend","touchcancel"],["pointerdown","pointermove","pointerup","pointercancel"],["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],["mousedown","mousemove","mouseup",!1]],E=[function(e){return e.touches&&e.touches.length>1||e.scale&&1!==e.scale},function(e){return!e.isPrimary||e.buttons&&1!==e.buttons||!c.mouse&&"touch"!==e.pointerType&&"pen"!==e.pointerType},function(e){return!e.isPrimary||e.buttons&&1!==e.buttons||!c.mouse&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH&&e.pointerType!==e.MSPOINTER_TYPE_PEN},function(e){return e.buttons&&1!==e.buttons}];return g.push(n(e,b[w][0],function(e){a(e,w)})),g.push(n(e,"dragstart",r)),c.mouse&&!w&&g.push(n(e,b[3][0],function(e){a(e,3)})),g.push(n(e,"click",function(e){y&&c.click(e)})),{getClicksAllowed:function(){return y},kill:function(){for(var e=g.length-1;e>=0;e--)g[e].remove()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,window.jQuery&&function(e){e.fn.Peppermint=function(t){return this.each(function(){e(this).data("Peppermint",i(this,t))}),this}}(window.jQuery),window.Peppermint=i,window.EventBurrito=r;var o=i;t.default=o},QMH7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.healScroll=c,t.unhealScroll=function(e){if(!e[s])return;e[s]=null,e.style.paddingTop="",e.style.paddingBottom="",(0,o.cleanScrollView)(e),removeEvent(e,"scroll",f),removeEvent(e,"scroll",A)};var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M")),o=n("MjTa");(r.default.ios||r.default.ipad||r.default.ipod)&&window.MutationObserver&&document.addEventListener("DOMContentLoaded",l);var a={scrollView:".ScrollView"},s="_scrollViewHealed";function l(){(u(),document.body)&&new MutationObserver(u).observe(document.body,{childList:!0,subtree:!0})}function u(){(0,i.$$)(a.scrollView).forEach(c)}function c(e){if(!e[s]){e[s]={};var t=getComputedStyle(e),n=parseInt(t.paddingTop,10),i=parseInt(t.paddingBottom,10);e.style.paddingTop=n+1+"px",e.style.paddingBottom=i+1+"px",d(e),(0,o.setScrollView)(e,{override:!1}),hasClass("messenger__body",e)||addEvent(e,"scroll",f),addEvent(e,"scroll",A)}}function d(e){var t=e.scrollTop;t<0||(0===t?e.scrollTop+=1:t+e.offsetHeight===e.scrollHeight&&(e.scrollTop-=1))}function A(e){var t=e.target,n=t[s];n&&(n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){t[s]&&d(t)},50))}function f(){onBodyScroll(!0)}},QQoL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("HwqD"));n("M6/v");var r=i.default;t.default=r,window.Bell=i.default},QWbq:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.processThumbs=function(e,t,n,i){var r=function(e){var t=0;return each(e,function(e,n){t+=n}),t},o=function(e,t,n){return(t-(e.length-1)*n)/r(e)},a=(i=C(i)?i:{}).wide,s=[],u=0,c=[],d=[];each(n,function(e,t){E(t.type)&&(c[c.length]=t[t.type]),t.type===l&&s.push(u),u++});var A="",f=[],p=c.length;each(c,function(n,i){var r=b(i,e,t),o=r>1.2?"w":r<.8?"v":"q";A+=o,f[f.length]=r});var w,D,S=f.length>0?r(f)/f.length:1,T=_;window.isMVK&&(T=window.innerWidth>=480?h:m);var M=T;i.force?(w=e,D=t):(a?(w=v,D=g):e>=381?(w=381,D=1==p?361:237):(w=337,D=1==p?320:214),e<w&&(w=e,D=t),window.isMVK&&(w=Math.min(v,window.innerWidth),D=Math.min(g,w)));var P=w/D,I=0,x=0;if(1==p){var O={lastColumn:1,lastRow:1,single:1};c[0].thumb?(I=279,x=185):f[0]>=1*P?(I=w,x=Math.min(I/f[0],D)):(x=D,I=Math.min(x*f[0],w));var L=y(c[0],I,x,O);!L.unsized&&(L.image.width<I&&L.image.height<=D||L.image.height<x&&L.image.width<=w)&&(I=L.image.width,x=L.image.height,L=y(c[0],I,x,O)),d[0]=L}else if(2==p){var B,N;switch(A){case"ww":if(S>1.4*P&&f[1]-f[0]<.2){N=w,B=Math.min(N/f[0],N/f[1],(D-M)/2),d[0]=y(c[0],N,B,{lastColumn:1}),d[1]=y(c[1],N,B,{lastColumn:1,lastRow:1}),I=w,x=2*B+M;break}case"vv":case"qv":case"vq":case"qq":N=(w-T)/2,B=Math.min(N/f[0],N/f[1],D),d[0]=y(c[0],N,B,{lastRow:1}),d[1]=y(c[1],N,B,{lastRow:1,lastColumn:1}),I=w,x=B;break;default:var R=intval((w-T)/f[1]/(1/f[0]+1/f[1])),F=w-R-T;B=Math.min(D,R/f[0],F/f[1]),d[0]=y(c[0],R,B,{lastRow:1}),d[1]=y(c[1],F,B,{lastColumn:1,lastRow:1}),I=w,x=B}}else if(3==p)if((f[0]>1.2*P||S>1.5*P)&&"www"==A){var j,H=w,U=Math.min(H/f[0],.66*(D-M));if(d[0]=y(c[0],H,U,{lastColumn:1}),"www"==A){var V=intval(w-T)/2;j=Math.min(D-U-M,V/f[1],V/f[2]),d[1]=y(c[1],V,j,{lastRow:1}),d[2]=y(c[2],w-V-T,j,{lastColumn:1,lastRow:1})}else{var z=intval((w-T)/f[2]/(1/f[1]+1/f[2])),$=w-z-T;j=Math.min(D-U-M,z/f[2],$/f[1]),d[1]=y(c[1],z,j,{lastRow:1}),d[2]=y(c[2],z,j,{lastRow:1,lastColumn:1})}I=w,x=U+j+M}else{var q=D,W=intval(Math.min(q*f[0],.75*(w-T)));d[0]=y(c[0],W,q,{lastRow:1});var Y=f[1]*(D-M)/(f[2]+f[1]),G=D-Y-M,Q=Math.min(w-W-T,intval(Y*f[2]),intval(G*f[1]));d[1]=y(c[1],Q,G,{lastColumn:1}),d[2]=y(c[2],Q,Y,{lastColumn:1,lastRow:1}),I=W+Q+T,x=D}else if(4==p)if((f[0]>1.2*P||S>1.5*P)&&"wwww"==A){var X=w,K=Math.min(X/f[0],.66*(D-M));d[0]=y(c[0],X,K,{lastColumn:1});var J=(w-2*T)/(f[1]+f[2]+f[3]),Z=intval(J*f[1]),ee=intval(J*f[2]),te=X-Z-ee-2*T;J=Math.min(D-K-M,J),d[1]=y(c[1],Z,J,{lastRow:1}),d[2]=y(c[2],ee,J,{lastRow:1}),d[3]=y(c[3],te,J,{lastColumn:1,lastRow:1}),I=w,x=K+J+M}else{var ne=D,ie=Math.min(ne*f[0],.66*(w-T)),re=(D-2*M)/(1/f[1]+1/f[2]+1/f[3]),oe=intval(re/f[1]),ae=intval(re/f[2]),se=ne-oe-ae-2*M;re=Math.min(w-ie-T,re),ie+re+T<w&&ne*f[0]>ie&&(ie=Math.min(ne*f[0],w-T-re)),d[0]=y(c[0],ie,ne,{lastRow:1}),d[1]=y(c[1],re,oe,{lastColumn:1}),d[2]=y(c[2],re,ae,{lastColumn:1}),d[3]=y(c[3],re,se,{lastColumn:1,lastRow:1}),I=ie+re+T,x=D}else{var le=[],ue=0;S>(s.length?1.3:1.1)?each(f,function(e,t){le[le.length]=Math.max(1,t)}):each(f,function(e,t){~s.indexOf(ue)?le[le.length]=t:le[le.length]=Math.min(1,t),ue++});var ce,de,Ae={};for(Ae[p+""]=[o(le,w,T)],ce=1;ce<=p-1;ce++)Ae[ce+","+(de=p-ce)]=[o(le.slice(0,ce),w,T),o(le.slice(ce),w,T)];for(ce=1;ce<=p-2;ce++)for(de=1;de<=p-ce-1;de++)Ae[ce+","+de+","+(p-ce-de)]=[o(le.slice(0,ce),w,T),o(le.slice(ce,ce+de),w,T),o(le.slice(ce+de),w,T)];var fe,pe=null,_e=0;for(var he in Ae)if(Ae.hasOwnProperty(he)){var me=Ae[he],ve=r(me)+M*(me.length-1),ge=Math.abs(ve-D);if(~he.indexOf(",")){for(var ye=he.split(","),we=0;we<ye.length;we++)ye[we]=intval(ye[we]);(ye[0]>ye[1]||ye[2]&&ye[1]>ye[2])&&(ge+=50,ge*=1.5)}(null===pe||ge<_e)&&(pe=he,_e=ge,fe=ve)}for(var be=k(c),Ee=k(le),ke=pe.split(","),Ce=Ae[pe],De=ke.length-1,Se=0;Se<ke.length;Se++){var Te=parseInt(ke[Se]),Me=be.splice(0,Te),Pe=Ce.shift(),Ie=Me.length-1,xe={};De==Se&&(xe.lastRow=!0);for(var Oe=w,Le=0;Le<Me.length;Le++){var Be=Me[Le],Ne=Ee.shift(),Re=xe,Fe=void 0;Ie==Le?(Fe=Math.ceil(Oe),Re.lastColumn=!0):(Fe=intval(Ne*Pe),Oe-=Fe+T),d[d.length]=y(Be,Fe,Pe,Re)}}I=w,x=fe}return{width:intval(I),height:intval(x),thumbs:d}},t.compute=y,t.getSize=w,t.move=function(e,t,n){if(n>=e.length)for(var i=n-e.length;1+i--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},t.scale=function(e,t,n,i){n=intval(n),i=intval(i)||n;var r=e,o=t;e>=t&&e>n?(r=intval(n),o=intval(t/(e/n))):e<t&&t>i&&(o=intval(i),r=intval(e/(t/i)));return[r,o]},t.crop=function(e,t,n){var i=t,r=n,o=0,a=0;if(!e.vid&&e.image.width&&e.image.height){var s=e.image.width/e.image.height;s<t/n?(e.single&&e.image.width<t&&(t=e.image.width,n=Math.min(n,e.image.height)),(r=(i=t)/s)>n&&(a=-intval((r-n)/2))):(e.single&&e.image.height<n&&(n=e.image.height,t=Math.min(t,e.image.width)),(i=(r=n)*s)>t&&(o=-intval((i-t)/2)))}return{width:i,height:r,marginLeft:o,marginTop:e.orig&&(e.type===c||e.type===u)&&e.single?0:a}},t.getRatio=b,t.convert=function(e,t,n,i){var d=o(t.split("_"),2),A=d[0],f=d[1],p=r({owner_id:A,ownerId:A,itemId:f,type:e,remove:n.remove,click:n.click,temp:"temp"in n.sizes},i);switch(e){case a:p.data={sizes:n.sizes,ratio:n.ratio,label:n.label,href:n.href},p.doc=p.data;break;case s:p.data={pid:f,sizes:n.sizes},p.photo=p.data;break;case l:p.data={vid:f,duration:n.duration,platform:n.platform,play_icon:n.play_icon,active_live:n.active_live,ratio:n.ratio,sizes:n.sizes,name:n.name},p.video=p.data;break;case u:p.data={aid:f,title:n.title,size:n.size,thumb:{sizes:n.sizes}},p.album=p.data;break;case c:p.data={type:c,aid:f,title:n.title,msize:n.msize,thumb:{sizes:n.sizes}},p.market_album=p.data}return p.data.type=e,p.data.id=p.temp?"".concat(e,"temp_").concat(A):"".concat(e).concat(p.ownerId,"_").concat(p.itemId),p},t.isValidThumbType=E,t.THUMBS_MESH_GAP_MVK_SMALL=t.THUMBS_MESH_GAP_MVK=t.THUMBS_MESH_GAP=t.THUMBS_CONTAINER_MAX_WIDTH_WIDE=t.THUMBS_CONTAINER_DEFAULT_RATIO=t.THUMB_VIDEO_DEFAULT_RATIO=t.THUMB_DRAG_ANIMATION_DURATION=t.THUMB_DEFAULT_RATIO=t.THUMB_ALBUM_DEFAULT_RATIO=t.THUMBS_CONTAINER_MAX_HEIGHT_WIDE=t.THUMB_TYPE_VIDEO=t.THUMB_TYPE_PHOTO=t.THUMB_TYPE_MARKET_ALBUM=t.THUMB_TYPE_DOC=t.THUMB_TYPE_ALBUM=void 0,!window.isMVK&&(window.vkExpand=window.vkExpand||"VK"+ +new Date,window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{});var a="doc";t.THUMB_TYPE_DOC=a;var s="photo";t.THUMB_TYPE_PHOTO=s;var l="video";t.THUMB_TYPE_VIDEO=l;var u="album";t.THUMB_TYPE_ALBUM=u;var c="market_album";t.THUMB_TYPE_MARKET_ALBUM=c;t.THUMBS_CONTAINER_DEFAULT_RATIO=1.5;var d=1;t.THUMB_DEFAULT_RATIO=d;var A=1.777;t.THUMB_VIDEO_DEFAULT_RATIO=A;var f=1.5;t.THUMB_ALBUM_DEFAULT_RATIO=f;var p=window.isMVK?200:120;t.THUMB_DRAG_ANIMATION_DURATION=p;var _=5;t.THUMBS_MESH_GAP=_;var h=6;t.THUMBS_MESH_GAP_MVK=h;var m=3;t.THUMBS_MESH_GAP_MVK_SMALL=m;var v=window.isMVK?604:537;t.THUMBS_CONTAINER_MAX_WIDTH_WIDE=v;var g=window.isMVK?360:343;function y(e,t,n,i){var r={id:e.id,width:intval(t),height:intval(n),lastColumn:i.lastColumn,lastRow:i.lastRow,single:i.single,image:w(e,t,n,i.single),unsized:e.unsized,type:e.type,orig:e};return e.title&&void 0!==e.size?extend(r,{title:e.title,size:e.size}):e.title&&void 0!==e.msize?extend(r,{title:e.title,msize:e.msize}):e.type===l&&e.name&&void 0!==e.name&&extend(r,{name:e.namem}),"number"==typeof e.duration&&(e.duration=formatTime(e.duration)),r.unsized?r.ratio=d:r.ratio=r.image.width/r.image.height,r}function w(e,t,n,i){if(!e)return{};t=intval(t),n=intval(n);var r,o=window.devicePixelRatio||1;if(e.type===l||e.type===a){(e.vid?["x","y","l","s","m"]:["o","z","y","x","m","s","temp"]).forEach(function(i){e.sizes[i]&&(!r||t*o<=e.sizes[i][1]&&n*o<=e.sizes[i][2])&&(r=e.sizes[i])})}else{var s=e.thumb?e.thumb.sizes:e.sizes,u=s.x||s[s.length-1],c=u?(u[1]||1)/(u[2]||1):d,A=0;c>t/n?(A=n,c>1&&(A*=c)):(A=t,c<1&&(A/=c)),n*=o,t*=o;var f=!i&&s.o,p="";p=s.temp?"temp":A<75?"s":A<130?"m":f&&s.o&&s.o[1]>=t&&s.o[2]>=n?"o":f&&s.p&&s.p[1]>=t&&s.p[2]>=n?"p":f&&s.q&&s.q[1]>=t&&s.q[2]>=n?"q":f&&s.r&&s.r[1]>=t&&s.r[2]>=n?"r":"x",r=s[p]}return r[1]=intval(r[1]),r[2]=intval(r[2]),r[1]&&r[2]||(e.unsized=!0),{src:r[0],width:r[1],height:r[2]}}function b(e,t,n){var i;switch(e.type){case a:i=e.ratio;break;case l:i=e.ratio||A;break;case u:case c:i=f;break;default:if(e.sizes&&e.sizes.x){var r=o(e.sizes.x,3),s=r[1],p=r[2];s&&p&&(i=s/p)}if(e.sizes&&e.sizes.temp){var _=o(e.sizes.temp,3),h=_[1],m=_[2];h&&m&&(i=h/m)}}return i||d}function E(e){return!!~[a,s,l,u,c].indexOf(e.toString())}function k(e,t){var n=C(e)||void 0===e.length?{}:[];for(var r in e)(!/webkit/i.test(_ua)||"layerX"!=r&&"layerY"!=r&&"webkitMovementX"!=r&&"webkitMovementY"!=r)&&(t&&"object"===i(e[r])&&"prototype"!==r&&null!==e[r]?n[r]=k(e[r]):n[r]=e[r]);return n}t.THUMBS_CONTAINER_MAX_HEIGHT_WIDE=g;var C=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},QcsT:function(e,t,n){"use strict";var i=n("UxAg"),r=window.page,o=window.photoview;r.onChange(c),o.onHide(c),o.onShow(d);var a,s="#5181b8",l="#000",u=(0,i.$)('meta[name="theme-color"]');function c(){A(s)}function d(){A(l)}function A(e){a||(a=(0,i.$)("#theme_color_shim")),u&&u.setAttribute("content",e),a&&(a.style.backgroundColor=e)}},Qg0H:function(e,t,n){"use strict";var i=n("UxAg"),r=a(n("TYsd")),o=a(n("+cqQ"));function a(e){return e&&e.__esModule?e:{default:e}}window.Voting={cls:"Voting",setLoading:f,setHtml:function(e,t){c(e).forEach(function(e){e.outerHTML=t}),c(e).forEach(function(e){e.classList.add(l.beforeAnimation)}),setTimeout(function(){c(e).forEach(function(e){e.classList.remove(l.beforeAnimation),Voting.onHtmlUpdate(e)})},30)},getVotingsById:c,onHtmlUpdate:(0,o.default)("$voting")},Voting._onSubmit=p,Voting._onSingleAnswerClick=A,Voting._onCheckboxClick=d,Voting._onRevoteClick=_;var s="_Voting_singleAnswerAction",l={loading:"Voting_loading",beforeAnimation:"Voting_beforeAnimation",hasCheckedOptions:"Voting_hasCheckedOptions"},u={voting:".Voting",votingById:function(e){return'.Voting[data-id="'.concat(e,'"]')},optionControl:".Voting__optionControl",submit:".Voting__submit"};function c(e){return(0,i.$$)(u.votingById(e))}function d(e){var t=e.closest(u.voting),n=Array.from((0,i.$$)(u.optionControl)).some(function(e){return e.checked});t.classList.toggle(l.hasCheckedOptions,n)}function A(e){var t=e.name,n=e.value,i=e.closest("form"),r=i.getAttribute("action");i[s]=r+"&"+t+"="+encodeURIComponent(n)}function f(e){e.classList.add(l.loading)}function p(e,t,n){var i;if(e.preventDefault(),t[s])i=t[s],f(t);else{var o=Array.from(t.$$("input:checked"));if(0===o.length)return;var a=o[0].name,l=o.map(function(e){return e.value}).join(","),c=t.getAttribute("action"),d=c.includes("?")?"&":"?";t.$(u.submit);f(t);var A=t.$('input[name="is_board"]').value;i="".concat(c).concat(d).concat(a,"=").concat(l,"&is_board=").concat(A)}r.default.handle(n,{$voting:t,url:i})}function _(e,t){var n=e.closest(u.voting);r.default.handle(t,{$voting:n})}},Qwnw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("gMTq")),r=o(n("29dZ"));function o(e){return e&&e.__esModule?e:{default:e}}Object.assign(i.default,{rejectAll:function(e,t){r.default.setLoading(t,!0),i.default.onRejectAll(t)},onRejectAll:befall()});var a=i.default;t.default=a},QySK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("pQDp");var i=n("sWID"),r=n("ywff"),o=n("lkNA");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l,u,c,d=window,A=d.geByTag,f=d.geByTag1,p=d.each,_=d.nav,h=d.removeClass,m=d.intval,v=d.toggleClass,g=d.domData,y=d.domQuery1,w=d.getW,b=d.getXY,E=d.getH,k=d.geByClass,C=d.ge,D=d.matchesSelector,S={};window._articleCarouselGlobalId=window._articleCarouselGlobalId||1;var T=function(){function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._article=t,this._options=n,this._readTO=null,this._scrollStatEvent=!1,this._openTime=0,this._els={view:C("article_view_".concat(t.raw_id))},window.cur&&cur.destroy&&cur.destroy.push(function(){r.deinit()}),window.cur&&cur.destroy.push(function(){r.deinit()}),window.addEventListener("VKWebAppEvent",function(e){if(e&&e.detail&&void 0!==e.detail.index){var t=e.detail.index;if(c){var n=S[g(c,"id")];n&&n(t)}}}),i&&this.ready()}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"getEl",value:function(){return this._els.view}},{key:"getArticle",value:function(){return this._article}},{key:"getScrollNode",value:function(){return this._options.getScrollNode?this._options.getScrollNode():document}},{key:"_getScrollTop",value:function(){return this._options.getScrollTop?this._options.getScrollTop():window.scrollNode?window.scrollNode.scrollTop:window.document.documentElement.scrollTop}},{key:"getTimeSpent",value:function(){return Math.round((Date.now()-this._openTime)/1e3)}},{key:"deinit",value:function(){this._scrollEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollEvent),this._scrollEvent=!1),this._scrollStatEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),this._scrollStatEvent=!1),clearTimeout(this._readTO)}},{key:"_onViewScroll",value:function(){var e=this,t=this._options.mobile?scrollGetY():window.scrollNode.scrollTop,n=window.innerHeight;p(A("figure",this._els.view),function(i,r){var o=m(g(r,"done"));if(!o){var a=E(r),s=b(r)[1],l=m(g(r,"type")),u=101==l?-200:100,c=s<=t+n-u&&t+u<=s+a;(o=e._onObjectView(c,l,r))&&g(r,"done",1)}}),p(A("figure",this._els.view),function(i,r){var o,a=E(r),s=b(r)[1],l=m(g(r,"type")),u=s,c=s+a,d=t,A=t+n;if(u>A||d>c)o=!1;else{var f=Math.max(u,d);o=(Math.min(c,A)-f)/a>.7}e._onObjectPartialView(o,l,r)})}},{key:"_initObjects",value:function(){var e=this;this._initedObjects=this._initedObjects||{},p(k("_article_unmute_button",this._els.view),function(t,n){e._initedObjects[t]||(e._initedObjects[t]=!0,n.addEventListener("click",function(){var e=n.parentNode,t=f("video",e);t.muted=!t.muted,v(e,"article_object_unmuted",!t.muted)}))}),p(A("figure",this._els.view),function(t,n){if(!e._initedObjects[t])switch(e._initedObjects[t]=!0,parseInt(g(n,"type"))){case i.ParagraphType.ObjectPhoto:var o=(0,r.initPhotoCarousel)(n,{mobile:e._options.mobile,moderDeletePhoto:e._options.moderDeletePhoto,onClick:function(t){e.sendStats({type:t})}});if(e._initPhoto(n),o){var a=window._articleCarouselGlobalId++;n.setAttribute("data-carousel-id",a),S[a]=o}break;case i.ParagraphType.ObjectAudio:case i.ParagraphType.ObjectAudioPlaylist:geByClass1("article_figure_content",n).addEventListener("click",function(){e.sendStats({type:i.ArticleStatsEvents.clickOnAudio})},!0);break;case i.ParagraphType.ObjectGIF:case i.ParagraphType.ObjectVideo:if(e._options.mobile){var s=f("video",n);s&&(s.addEventListener("play",function(){e.sendStats({type:i.ArticleStatsEvents.clickOnVideo})}),s.addEventListener("pause",function(){e.sendStats({type:i.ArticleStatsEvents.clickOnVideo})}))}else{geByClass1("article_figure_content",n).addEventListener("click",function(){e.sendStats({type:i.ArticleStatsEvents.clickOnVideo})},!0)}}}),this._els.view.addEventListener("click",function(t){var n=t.target;if(D(n,'a[href^="/away"]')){var r=decodeURIComponent(unescape(n.href)).split("vk.com/away.php?to=")[1];r&&e.sendStats({type:i.ArticleStatsEvents.clickOnExternalLink,domain:encodeURIComponent(e._getUrlDomain(r))})}})}},{key:"_initPhoto",value:function(e){var t=this;geByClass1("article_figure_content",e).addEventListener("click",function(){var n=y("[data-sizes]",e),r=JSON.parse(g(n,"sizes")),o=m(g(e,"photo-carousel-index"));t._options.onImageOpen&&t._options.onImageOpen.call(t,r,e,o),t.sendStats({type:i.ArticleStatsEvents.clickOnPhoto})})}},{key:"_initStats",value:function(){if(this._statsInited)this._scrollStatEvent&&this._scrollStatEvent();else{this._statsInited=!0,this._openTime=Date.now();var e,t=-1,n=[];this._scrollStatEvent&&this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),clearTimeout(this._readTO);var r=this;this.getScrollNode().addEventListener("scroll",this._scrollStatEvent=function(){var i=r.getCurrentScrollRatio();if(!(i<0)){var a=1;i>=.95?a=4:i>.66?a=3:i>.33&&(a=2),function(i){if(r._isReady&&(r._article.has_more&&(i=Math.min(i,1)),!(t>=i))){for(var a=t+1;a<=i;a++)n.push(a);if(t=i,clearTimeout(e),e=setTimeout(o,300),3==i&&r._article.ttr){var s=r._article.ttr-r.getTimeSpent();s>0&&(r._readTO=setTimeout(function(){if(!document.hidden){var e=r.getCurrentScrollRatio();if(!(e<0||e>1.3)){var i=4==t;n=[t=4],o(i)}}},1e3*s))}}}(a),4!=a||r._article.has_more||(r.getScrollNode().removeEventListener("scroll",r._scrollStatEvent),r._scrollStatEvent=!1)}},{passive:!0}),this._scrollStatEvent&&this._scrollStatEvent()}function o(e){if(n.length){var t=r._article,o=r._options,a="";if(t.ref)a=t.ref;else if(window.cur){if("feed"===(a=window.cur.module)&&cur.articlePrevLoc&&!o.mobile)"search"===_.fromStr(cur.articlePrevLoc).section&&(a="feed_search")}var s={act:"stats",scroll:n.join(","),spent:r.getTimeSpent(),hash:t.access_hash,article_owner_id:t.owner_id,article_id:t.id,is_web_view:o.isWebView?1:0,post_id:o.sourcePostId,is_widget:o.isWidget,is_delayed_scroll_4:m(e),track_code:o.trackCode,ref:a};ajax.post(o.mobile?"article.php":"al_articles.php",s),t.mailru_stats_data&&n.forEach(function(e){(0,i.mailruStatsPixel)("scroll_".concat(e),t.mailru_stats_data)}),n=[]}}}},{key:"_initGoogleAnalytics",value:function(){var e=this._options.googleAnalyticsId;if(e)if(window.dataLayer=window.dataLayer||[],window.gtag)gtag("config",e,{page_location:window.location.href});else{var t=document.createElement("script");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=".concat(e)),t.setAttribute("async","true"),document.head.appendChild(t),window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}}},{key:"_onObjectPartialView",value:function(e,t,n){if(t==i.ParagraphType.ObjectPhoto){var r=y("[data-sizes]",n);if(JSON.parse(g(r,"sizes")).length>1){var o=n.getAttribute("data-carousel-id");e?u!=o&&(clearTimeout(l),l=setTimeout(function(){var e=S[o];e&&e(1,!0)},400),u=o):o==u&&(u=-1,clearTimeout(l))}}}},{key:"_onObjectView",value:function(e,t,n){var r=!1;switch(t){case i.ParagraphType.ObjectPhoto:if(e){var o=f("img",n),s=w(o)||this._options.width,l=y("[data-sizes]",n),u=JSON.parse(g(l,"sizes")),c=A("img",n);u.forEach(function(e,t){var n=a((0,i.getAppropriateImage)(u[t],s,!0),1)[0];(0,i.preloadImage)(n,function(){var e=c[t];h(e,"article_object_photo__image_blur"),e.src=n})}),r=!0}break;case i.ParagraphType.ObjectGIF:if(!this._options.mobile){var d=f("video",n);if(d)if(e){if(d.hasAttribute("autoplay")){var p=d.play();p&&p.catch(function(){})}}else d.pause();else r=!0}break;case i.ParagraphType.ObjectTwitter:case i.ParagraphType.ObjectFacebook:case i.ParagraphType.ObjectInstagram:case i.ParagraphType.ObjectVK:case i.ParagraphType.ObjectTelegram:this.initEmbed(t,n),r=!0}return r}},{key:"initEmbed",value:function(e,t){switch(e){case i.ParagraphType.ObjectTwitter:var n=y("[data-tweet-id]",t),r=g(n,"tweet-id");(0,o.loadScript)("https://platform.twitter.com/widgets.js",{onLoad:function(){twttr.widgets.createTweet(r,n,{align:"center",lang:window.vk&&0==window.vk.lang?"ru":"en",dnt:!0})}});break;case i.ParagraphType.ObjectFacebook:var s=window.vk&&0==window.vk.lang?"ru_RU":"en_US";(0,o.loadScript)("https://connect.facebook.net/".concat(s,"/all.js#xfbml=1&amp;version=v2.8"),{onLoad:function(){FB.XFBML.parse()}});break;case i.ParagraphType.ObjectInstagram:(0,o.loadScript)("https://www.instagram.com/embed.js",{onLoad:function(){window.instgrm.Embeds.process(),addEvent(window,"message",i.changeHeightInstagramEmbed)}});break;case i.ParagraphType.ObjectVK:var l=y("[data-raw-id]",t),u=g(l,"raw-id"),c=g(l,"index"),d=a(u.split(";"),2),A=d[0],f=d[1];(0,o.loadScript)("/js/api/openapi.js",{onLoad:function(){ajax.post("dev.php",{act:"a_get_post_hash",post:"".concat(A,"_").concat(f)},{onDone:function(e){e&&window.VK&&window.VK.Widgets&&window.VK.Widgets.Post("vk_post_".concat(u,"_").concat(c),A,f,e)}})}});break;case i.ParagraphType.ObjectTelegram:(0,o.loadScript)("https://telegram.org/js/telegram-widget.js?5",{})}}},{key:"getCurrentScrollRatio",value:function(){var e=E(this._els.view),t=b(this._els.view)[1]-b(this.getScrollNode().firstElementChild)[1];return(this._getScrollTop()+window.innerHeight-t)/e}},{key:"getScreenVisibilityRatio",value:function(){var e=E(this._els.view),t=b(this._els.view)[1]-b(this.getScrollNode().firstElementChild)[1],n=this._getScrollTop(),i=window.innerHeight,r=t,o=t+e,a=n,s=n+i;if(a>o||r>s)return 0;var l=Math.max(r,a);return(Math.min(o,s)-l)/i}},{key:"update",value:function(){this._initObjects(),this._initStats(),this._options.onScroll&&this._options.onScroll.call(this,this.getCurrentScrollRatio())}},{key:"ready",value:function(){var e=this;(this._isReady=!0,this._initObjects(),this._initStats(),this._initGoogleAnalytics(),setTimeout(function(){var t=(0,i.getUrlParam)("anchor");if(t){e._options.isWebView||e.scrollToAnchor(t);var n=e.getScrollNode();n.click&&n.click(),n.focus()}},0),!this._options.mobile&&window.AudioPlaylist)&&(this._article.audios_list&&this._article.audios_list.length>0&&new AudioPlaylist(AudioPlaylist.TYPE_TEMP,this._article.owner_id,"article_"+this._article.id).mergeWith({list:this._article.audios_list}));this.getScrollNode().addEventListener("scroll",this._scrollEvent=function(){e._onViewScroll(),e._options.onScroll&&e._options.onScroll.call(e,e.getCurrentScrollRatio())}),setTimeout(function(){e._scrollEvent()},this._options.objectsInitDelay||0)}},{key:"scrollToAnchor",value:function(e){e=e||(0,i.getUrlParam)("anchor");var t=this.getScrollNode(),n=this._options;e&&function(){var i=document.getElementById(e);if(i){"scrollRestoration"in history&&(history.scrollRestoration="manual");var r=n.isWebView?0:25,o=i.parentNode.parentNode.offsetTop-r;window.setTimeout(function(){browser.msie&&!t.scrollTo?t.scrollTop=o:t.scrollTo(0,o)},0)}}()}},{key:"sendStats",value:function(e){var t=this._article,n=this._options,i={act:"stats",spent:this.getTimeSpent(),article_id:t.id,article_owner_id:t.owner_id,hash:t.access_hash,is_web_view:n.isWebView?1:0};Object.assign(i,e),ajax.post(n.mobile?"article.php":"al_articles.php",i)}},{key:"_getUrlDomain",value:function(e){var t=document.createElement("a");return t.href=e,t.hostname}}]),e}();t.default=T},RC9X:function(e,t,n){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}})},RHkR:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("myok"));function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}window.groupInvitationClick=function(e,t){var n=t.$btn,i=n.getAttribute("href");(n.nextElementSibling||n.previousElementSibling).remove(),ajax.post(i,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n    <div class="notification__tempText">'.concat(e,"</div>\n  ")},window.apiCallAction=function(e,t,n,r,o,a,s){var l=s.$btn,u=l.getAttribute("href"),c=l.nextElementSibling||l.previousElementSibling,d=t?'<span class="notification__tempIcon '.concat(t,'Icon"></span>'):"";r&&!confirm(r)||(i.default.setLoading(l,!0),ajax.post(u,{_ajax:1},{onDone:function(){i.default.setLoading(l,!1),c&&c.remove(),l.closest(".BtnStack").outerHTML='<div class="notification__tempText">'.concat(d).concat(e,"</div>")}}))},window.NotifyItem={_onPhotoTagAcceptClick:function(e,t,n){var i=n.$btn,r=i.getAttribute("href");i.nextElementSibling||i.previousElementSibling;ajax.post(r,{_ajax:1},{onDone:function(){}}),i.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(t,"</div>\n    ")},_onPhotoTagDeclineClick:function(e,t,n){var i=n.$btn,r=i.getAttribute("href");i.nextElementSibling||i.previousElementSibling;ajax.post(r,{_ajax:1},{onDone:function(){}}),i.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(t,"</div>\n    ")},_onHideClick:function(e,t,n){e.preventDefault();var i=e.target,r=i.getAttribute("href"),o=r+"&action=hide",a=r+"&action=restore";(!n||confirm(n))&&ajax.post(o,{_ajax:1},{onDone:function(){var e=i.closest(".notificationList__items")||i.closest(".notificationList"),n=i.closest(".notification"),r=n.getAttribute("id"),o=e.closest(".notificationList");if(hide(n),NotifyItem._onBodyScroll(),o.classList.contains("notificationList_type_unread")){var s=o.$(".Pad__title"),l=parseInt(s.innerText,10)-1;s.innerText=langNumeric(l,lang.mobile_notifications_new)}var u=!0;each(geByClass("notification",e),function(e,t){isVisible(t)&&(u=!1)}),u&&o.classList.add("Pad_empty");var c=window.Snackbar;c&&c.init&&c.init({text:t,action:{url:a,text:lang.mobile_notifications_restore,callback:["NotifyItem._onRestoreClick","event",r]}})}})},_onRestoreClick:function(e,t,n){var i=n.id,r=n.url;e.preventDefault();var o=ge(t);ajax.post(r,{_ajax:1},{onDone:function(){ge(t).style.display="",Snackbar.close(i);var e=o.closest(".notificationList__items")||o.closest(".notificationList"),n=e.closest(".notificationList");if(n.classList.contains("notificationList_type_unread")){var r=n.$(".Pad__title"),a=parseInt(r.innerText,10)+1;r.innerText=langNumeric(a,lang.mobile_notifications_new)}var s=!0;each(geByClass("notification",e),function(e,t){isVisible(t)&&(s=!1)}),s||n.classList.remove("Pad_empty")}})},_onBodyScroll:function(){$$(".notification_actionsOpen").forEach(function(e){e.classList.remove("notification_actionsOpen")}),window.removeEventListener("scroll",NotifyItem._onBodyScroll)},_onActionTriggerClick:function(e){window.addEventListener("scroll",NotifyItem._onBodyScroll);var t=e.closest(".notification");t.classList.remove("notification_reverse"),t.classList.toggle("notification_actionsOpen"),$$(".notification_actionsOpen").forEach(function(e){e!==t&&e.classList.remove("notification_actionsOpen")}),t.$(".notification__actionsBubble").getBoundingClientRect().y<50&&t.classList.add("notification_reverse")}},window.FriendRequest={_onAcceptClick:function(e,t){var n=t.$btn,i=n.getAttribute("href"),r=n.nextElementSibling||n.previousElementSibling;r&&r.remove(),ajax.post(i,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(e,"</div>\n    ")},_onDeclineClick:function(e,t){var n=t.$btn,i=n.getAttribute("href"),r=n.nextElementSibling||n.previousElementSibling;r&&r.remove(),ajax.post(i,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(e,"</div>\n    ")}},window.GroupNotify={deleteSource:function(e,t){return ajax.post("feed.php",{gid:e,hash:t,act:"group_notify_delete_source"},{onDone:function(){}}),!1},addSource:function(e,t,n){this.processQuery("group_notify_add_source",e,t,n)},editSource:function(e,t){this.processQuery("group_notify_edit_source",e,t)},processQuery:function(e,t,n,i){var o=$(".group_notify_general .Control_type_switcher input.Control__native").checked?1:0,a={};$$(".group_notify_params .Control_type_switcher input.Control__native").forEach(function(e){a["type_"+e.name]=e.checked?1:0}),ajax.post("feed.php",r({gid:t,hash:n,unmuted:o,from:i},a,{act:e}),{onDone:function(){}})},gn_grProcess:function(e,t,n,i){ajax.post("club"+e,{act:"user_action",mid:t,hash:n,from:"top_notifier",action:i},{onDone:function(){}})}}},RVJ9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"open",{enumerable:!0,get:function(){return i.open}}),Object.defineProperty(t,"init",{enumerable:!0,get:function(){return i.init}});var i=n("Mf5j");window.ZeroVKPopup={open:i.open,init:i.init}},RikE:function(e,t,n){"use strict";var i=n("UxAg");window.TabRow={setSelectedTab:function(e,t){var n=(0,i.$)(o.tabRowById(e)),a=(0,i.$)(o.tabSelected,n),s=(0,i.$)(o.tabById(t),n);a&&a.classList.remove(r.selected),s&&s.classList.add(r.selected)},setTabUrl:function(e,t,n){var r=(0,i.$)(o.tabRowById(e)),a=(0,i.$)(o.tabById(t),r);a&&a.setAttribute("href",n)}};var r={selected:"TabRow__tab_selected"},o={tabRowById:function(e){return'.TabRow[data-id="'.concat(e,'"]')},tabById:function(e){return'.TabRow__tab[data-id="'.concat(e,'"]')},tabSelected:".TabRow__tab_selected"}},RkGL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));var r={_onMouseDown:(0,i.default)(),_onCancelClick:(0,i.default)()};window.MoneyTransferButton=r;var o=r;t.default=o},SRbS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={}},T24x:function(e,t,n){"use strict";var i=n("BZzM"),r=n("QMH7"),o=window,a=o.se,s=o.qs2obj,l=o.obj2qs,u=o.scrollTop,c=o.remove,d=o.each,A=o.geByClass,f=o.geByClass1,p=o.addClass,_=o.removeClass,h=o.after,m=o.ce,v=o.val,g=o.append,y=o.evalJs,w=o.extend,b=o.scrollToHash,E=o.onBodyResize,k=o.onBodyScroll,C=o.hasClass,D=o.escapeAttr,S=(o.before,window.thover),T={onChange:a(),onRestore:a(),fast_load:!1,need_hard_go:!1,getHash:function(e){if("#player"===e.hash)return!!window.isNewNavigation&&e.path+e.hash;var t=s(e.params);return delete t.z,e.path+l(t)},getAlias:function(e){if(!e)return!1;var t=(e||"").split("?"),n=t[0],i=s(t[1]);return i.from&&delete i.offset,delete i.from,delete i.z,n+l(i)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=window,s=a.zlayer,l=a.cur,k=a.nav,D=a.menu,M=a.audioplayer,P=u(),I=null;window.isNewMail&&toggleClass("vk__page_mail",window.bodyNode,"/mail"===e),s.opened()&&(P=s._st);var x=n.forceUpdate&&t.newHTML,O=!x&&k.hasUpdate(o,e,t),L=!!O||k.needUpdate(o,e,t),B=0;if(!n.force&&!O&&L||x?(B=u(),I=c("m"),d(A("_cntr",I),function(){c(this)}),d(A("ScrollView",I),function(){(0,r.unhealScroll)(this)}),c(f("_cntrs",I))):d(A("ScrollView",f("m")),function(){(0,r.unhealScroll)(this)}),!n.after&&!T.fast_load){var N=T.getHash(k),R=o||t.options||{};o&&o.is_native_back&&(R.prev_tab=R.native_prev),T.save(N,{html:null,st:P,page:I,state:T.stash(),cur:window.cur,options:R},!0)}if(n.before||T.clear(),(n.before||!n.before&&!n.after)&&(window.lm_qsearch_counter?window.lm_qsearch_counter++:window.lm_qsearch_counter=1),n.before){var F=o&&o.target;T.fast_load=!0,F&&p("__al_target",F);var j=I.cloneNode(!0);F&&_("__al_target",F);var H=f("__al_target",j);_("__al_target",H),n.beforeAppend&&n.beforeAppend(j,H),h(j,"l"),u(B),l.toggleHeaderSearch&&l.toggleHeaderSearch(!1),n.afterAppend&&n.afterAppend(j),D&&D.clear_hover(),D&&D.closeSearch(),D&&D.enabled(!0)}else{o&&o.zProcess&&o.zProcess(0,!0)&&delete o.zProcess;var U=!1;if(o&&k.set(o),T.need_hard_go)return k.hard_go(k.cur,null,{replace:!0});if(!n.force&&!O&&L||x){var V;if(t.title&&(document.title=t.title),x?(V=m("div",{className:"layout__basis",id:"m"}),v(V,t.newHTML)):(V=t.page)?U=!0:(V=m("div",{className:"layout__basis",id:"m"}),v(V,t.html)),D.opened()){var z=m("div",{id:"m_helper",onclick:D.close});g(z,V)}h(V,"l")}T.fast_load=!1,S.clear(),!O&&L&&(t.lm&&D.refresh(t.lm),t.bc&&(window.bodyNode.className=t.bc),s.opened(),o&&o.zProcess?o.zProcess(0,!1)&&delete o.zProcess:s.close()),n.force||(U&&(window.qsearch.isCachedPage=!0),t.js&&y(t.js),U&&(window.qsearch.isCachedPage=!1),t.state&&T.stash(t.state),t.cur&&w(window.cur,t.cur),o&&(t.options=o),post.wallActionsHide(),T.save(e,t));var $=o?o.nav&&o.nav.hash:k.hash;if(O||L)if(O)Tabbar.showUpdateButton(O.currentCache.d.page);else if(t.st||!$){var q=window.isCustomScroll&&C("ScrollView","mcont")?1:0;u(t.st||q),u(t.st||q,10)}else $?b($):n.no_scroll&&!n.force?(u(P),u(P,10)):b();else;M&&M.initAudio(),AudioMessagePlayer&&AudioMessagePlayer.redrawWaves()}var W=window.Tabs;E(W.actualizeShowMoreVisibility),W.actualizeShowMoreVisibility(),(0,i.resizePosters)(),T.onChange(!0,o&&o.nav&&o.nav.push)},save:function(e,t,n){if(e){var i=window.nav,r=n?i.page_get(e,t.options.prev_tab):{};r&&i.page_set(e,w(r,t),T.getAlias(e))}},restore:function(e){var t=window.nav,n=t.page_get(e);return n||(n=t.page_get(T.getAlias(e))),!!n&&(T.onRestore(!0),n)},stash:function(e){var t=window.cur;return window.cur&&t.stash&&t.stash(e)||!1},clear:function(){var e=window.cur,t=window.zlayer,n=window.menu,i=window.tooltip;k("__clear"),E("__clear"),n&&n.initEvents(),t.isReady&&t.initEvents(),i&&i.clear(),window.cur&&e.destroy&&d(e.destroy,function(){this()}),window.cur={destroy:[]}},hideHeader:function(e){var t=f("mhead",e);hide(t)},setMhead:function(e,t,n,i){var r=f("mhead",e),o=f("mhb_logo",r),a=f("mh_header",e),s=!1,l=window.nav,u=document.body,d=f("SliderTabs",r),A=f("header__right",r),p=f("header__gear",r);if(d&&c(d),A&&c(A),p&&c(p),_("vk_header_tabs",u),n){!0===n?s=l.path+(l.params?"?"+l.params:""):n&&(s=n),t||(t=v(a)||"&nbsp;");var h=f("mhb_back",e),m="",g=C("mh_nobr",h)?" mh_nobr":"",y=i?' onclick="'+i+'"':"";if(m="/"==s?'<div class="hb_wrap mhb_back'+g+'"'+y+'><h1 class="hb_btn mh_header">'+t+"</h1></div>":'\n        <div class="header__center hb_wrap mhb_back '.concat(g,'">\n          <a class="header__back al_back" href="').concat(D(s),'" accesskey="0" ').concat(y,'></a>\n          <h1 class="header__title hb_btn mh_header mhi_back">').concat(t,"</h1>\n        </div>\n      "),r&&o){var w=f("mhb_notify",e);v(r,(window.al&&window.al.menu?'<a href="/" class="hb_wrap mhb_home" accesskey="*" onclick="return menu.toggle(event);"><div class="hb_btn mhi_home">&nbsp;</div></a>':'<a href="/" class="hb_wrap mhb_home mhb_vkhome" accesskey="*"><div class="hb_btn mhi_home mhi_vkhome">&nbsp;</div></a>')+'<div id="header_msgs" class="hb_wrap mhb_notify'+(!w||C("mhb_no_notify",w)?" mhb_no_notify":"")+'">'+v(w)+"</div>"+m)}else h&&(h.outerHTML=m)}else t&&v(a,t)}};window.page=T},T9Df:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("gD36"));var r=i.default;t.default=r,window.BookmarksPageItem=i.default},TAKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POPUP_NAV_PREFIX=t.POPUP_DISAPPEAR_TIME=t.default=void 0;var i=s(n("1By4")),r=s(n("Po+v")),o=n("UxAg"),a=s(n("j80l"));function s(e){return e&&e.__esModule?e:{default:e}}var l=window,u=l.addClass,c=l.removeClass,d=l.getCh,A=l.removeEvent,f=l.addEvent,p=l.setStyle,_="pop_";t.POPUP_NAV_PREFIX=_;var h=200;t.POPUP_DISAPPEAR_TIME=h,Object.assign(r.default,{open:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.hash;k=Boolean(n.forceScrollDisable),t&&(e=e.cloneNode(!0),document.body.appendChild(e),e.appendedToBody=!0);e.classList.add(g.open);var r=e.$(y.scroll);if(function(e){if(window.MutationObserver&&!w){var t=document.body;b=t.style.overflow,w=!0,t.style.overflow="hidden",k&&(t.style.height="100%",document.documentElement.style.overflow="hidden"),E=new MutationObserver(function(){t.contains(e)||M()}),v=scrollTop(),document.body&&(document.body.classList.add("fixed"),p(document.body,{top:"-".concat(v,"px")}),browser.safari&&getCw()<882&&(document.body.scrollTop=v,setTimeout(function(){document.body.scrollTop=v},100))),E.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}}(e),r){if(S(e,r),e.onResizeHandler=function(){S(e,r)},f(window,"resize",e.onResizeHandler),!window.MutationObserver)return e;e.scrollContentObserver=new MutationObserver(e.onResizeHandler),e.scrollContentObserver.observe(r,{childList:!0,subtree:!0})}if(i){var o="#".concat(_).concat(i);nav.saveScrollPosition(),nav.set({nav:extend({},nav,{path:nav.path,push:"#".concat(_).concat(i)})}),C[o]=e}return e},close:T});var m=r.default;t.default=m,r.default._onOverlayClick=D,r.default._onTouchMove=function(){};var v,g={popup:"Popup",open:"Popup_open",wrap:"Popup__wrap",hasScroll:"Popup_hasScroll",scrollView:"ScrollView",closing:"Popup--closing"},y={open:".".concat(g.open),popup:".".concat(g.popup),wrap:".".concat(g.wrap),scroll:".Popup__scroll",header:".Popup__header",footer:".Popup__footer"},w=!1,b=null,E=null,k=!1,C={};function D(e,t,n){var r=e.closest(y.popup);t&&i.default.handle(t,{$popup:r}),n&&T(r)}function S(e,t){var n=e.$(y.header),i=e.$(y.footer);t.scrollHeight-6>t.offsetHeight?(u(e,g.hasScroll),u(t,g.scrollView),ContentScrollView.restore()):(c(e,g.hasScroll),c(t,g.scrollView),t.scrollTop=0);var r=d(),o=0,a=0;n&&(o=n.offsetHeight),i&&(a=i.offsetHeight);var s=Math.min(r-o-a-100,420);p(t,"max-height","".concat(s,"px"))}function T(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).smooth;e&&!e.classList.contains(g.popup)&&(e=e.closest(y.popup));var n=(0,o.$)(y.wrap,e);if(t)return e.classList.add(g.closing),p.transform(n,1,[0,"100%"]),setTimeout(function(){T(e,!1)},h);if(e||(e=(0,o.$)(y.open)),e.classList.remove(g.open),e.appendedToBody&&document.body.contains(e)&&document.body.removeChild(e),e.classList.remove(g.closing),p.transform(n),A(window,"resize",e.onResizeHandler),e.scrollContentObserver&&e.scrollContentObserver.disconnect(),(0,o.$)(y.open)||M(),nav.cur&&nav.cur.startsWith("#"+_)){var i=a.default.make(nav.path,qs2obj(nav.params));nav.set({nav:extend({},nav,{cur:nav.path,path:nav.path||"",push:i||""})})}}function M(){window.MutationObserver&&w&&(document.body.style.overflow=b,k&&(document.documentElement.style.overflow="initial"),E.disconnect(),document.body&&(document.body.classList.remove("fixed"),p(document.body,{top:""}),scrollTop(v)),w=!1)}nav.onPopState&&nav.onPopState(function(){var e=C[nav.cur];e&&(T(e),delete C[nav.cur])})},TORN:function(e,t,n){"use strict";var i=window,r=i.onDOMReady,o=i.onBodyResize,a=i.geByClass1,s=i.removeClass,l=i.addClass,u=i.gpeByClass,c=i.hasClass,d=i.toggleClass,A=window,f=A.clearCookie,p=A.setCookie;!function(){function e(){if(a("tabs_block_hideable")){var e=a("tabs_block");a("tabs_list").offsetHeight>a("tabs_list_more").offsetHeight?s("tabs_block_without_show_more",e):l("tabs_block_without_show_more",e)}}r(e),o(e),window.Tabs={actualizeShowMoreVisibility:e,toggle:function(e){var t=u("tabs_block",e);c("tabs_block_opened",t)?f("remixm_tabs_expanded"):p("remixm_tabs_expanded",1),d("tabs_block_opened",t)}}}()},TYsd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("1By4"));var r=i.default;t.default=r,window.Wd=i.default},Tjn9:function(e,t,n){"use strict";var i=window,r=i.ge,o=i.getXY,a=i.getCh,s=i.qs2obj,l=i.getSize,u=i.addClass,c=i.scrollTo,d=i.scrollGetY,A=i.removeClass;function f(e){(e=r(e))&&(u(e,"profileEdit_selected"),setTimeout(function(){u(e,"profileEdit_animated"),setTimeout(function(){A(e,"profileEdit_selected"),A(e,"profileEdit_animated")},1e3)},1500))}function p(e){(e=r(e))&&setTimeout(function(){var t=o(e)[1],n=l("mhead")[1],i=d(),r=a();t<n+i||t>i+r?setTimeout(function(){c(0,t-n),f(e)},0):f(e)},0)}window.ProfileEditor={init:function(){var e=(s(nav.params)||{}).hl;e&&p(geByClass1("_"+e))},highlightRow:f,scrollHighlightRow:p}},TuGt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Yaig")).default;t.default=i},U34x:function(e,t,n){"use strict";var i=window,r=i.preventEvent,o=i.stopEvent,a=i.gpeByClass,s=i.toggleClass,l=i.removeClass,u=i.addEvent,c=i.removeEvent,d="dropdown_open",A={_onTogglerClick:function(e,t){r(e),o(e);var n=a("dropdown",t);if(s(n,d),!1!==n.isFirstClick){n.isFirstClick=!1;var i=function(){l(n,d)};u(window,"click",i),window.cur.destroy.push(function(){c(window,"click",i),n.isFirstClick=!0})}}};window.Dropdown=A},UH2D:function(e,t,n){"use strict";s(n("+cqQ"));var i=n("irqS"),r=n("BZzM"),o=(s(n("s0aB")),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("FZH1"))),a=s(n("GR/G"));function s(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.default,{updateClass:f,clearSystemMessage2:function(){remove(geByClass1("service_msg_box"))},onSystemMessageClick:function(){!function(){var e=store.mail,t=e.cur;e.peers[t.peerId].systemMessageCode=null,f("peer"),p()}()},resetPrevScraps:function(){l={folder:[],search:[],peer:[]}},redrawPeer:function(){A("peer",store.mail.scraps.peer),$$(".mailScrap_peer").forEach(function(e){return e.className=(0,o.MailScrap_class)("peer")}),$$(".mailScrap__empty_peer").forEach(function(e){return e.innerHTML=(0,o.MailScrap_EmptyInner)("peer")})},redrawFolder:function(e){var t=store.mail,n=t.cur,i=t.scraps;n.folder;A("folder",i.folder,e),$$(".mailScrap_folder").forEach(function(e){return e.className=(0,o.MailScrap_class)("folder")}),$$(".mailScrap__empty_folder").forEach(function(e){return e.innerHTML=(0,o.MailScrap_EmptyInner)("folder")})},redrawSearch:function(){$$(".mailScrap__items_search").forEach(function(e){return e.innerHTML=(0,o.MailScrap_ItemsInner)("search")}),$$(".mailScrap_search").forEach(function(e){return e.className=(0,o.MailScrap_class)("search")}),$$(".mailScrap__empty_search").forEach(function(e){return e.innerHTML=(0,o.MailScrap_EmptyInner)("search")})},redrawMRs:function(e){A("mrs",store.mail.scraps.mrs,e),$$(".mailScrap_mrs").forEach(function(e){return e.className=(0,o.MailScrap_class)("mrs")}),$$(".mailScrap__empty_mrs").forEach(function(e){return e.innerHTML=(0,o.MailScrap_EmptyInner)("mrs")})},redrawSystemMessage:p,folderSetItems:function(e){$$(".mailScrap__items_folder").forEach(function(t){return t.innerHTML=d(e,!0)}),$$(".mailScrap_folder").forEach(function(e){return e.className=(0,o.MailScrap_class)("folder")}),$$(".mailScrap__empty_folder").forEach(function(e){return e.innerHTML=(0,o.MailScrap_EmptyInner)("folder")})},folderAddItems:function(e){$$(".mailScrap__items_folder").forEach(function(t){return t.insertAdjacentHTML("beforeend",d(e))})},folderCutItems:function(e){$$(".mailScrap_folder .mailScrap__items").forEach(function(t){var n=[].slice.call(t.children);n.slice(e).forEach(function(e){return t.removeChild(e)})})},peerAddElemAfter:function(e,t){var n=$(".mailScrap__items_peer");if(!n)return;var i=ceFromString(c([e],!0));n.appendChild(t),(0,a.default)(t,i),f("peer")},peerAddItemsBefore:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f("peer"),e=e.filter(unique).filter(function(e){return!$(".msg_id_".concat(e))});var n=i.Messenger.getConvoBody();n.scrollHeight,n.scrollTop,n.offsetHeight;window._preventedCheckTop=!0,setTimeout(function(){return window._preventedCheckTop=!1});var r=c(e,t),o='\n    <div class="load_before load_before_closed">\n      '.concat(r,"\n    </div>\n  ");return $$(".mailScrap__items_peer").forEach(function(e){return e.insertAdjacentHTML("afterbegin",o)}),void uMessenger.expandPeerBefore()},peerAddItemsAfter:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&arguments[2];e=e.filter(unique).filter(function(e){return!$(".msg_id_".concat(e))}),$$(".mailScrap__items_peer").forEach(function(n){n.insertAdjacentHTML("beforeend",c(e,t))}),f("peer"),(0,r.resizePosters)()},peerReplaceItems:function(e){e.forEach(function(e){var t=$(".msg_id_".concat(e)),n=ceFromString(c([e],!0));(0,a.default)(t,n)}),(0,r.resizePosters)()},peerSetItems:function(e){e=e.filter(unique),$$(".mailScrap__items_peer").forEach(function(t){return t.innerHTML=c(e)})},peerGoToBottom:function(){var e=i.Messenger.getConvoBody();e.scrollTop=e.scrollHeight},removeDivider:u,checkDivider:function(){var e=last($(".mailScrap__items_peer").children);e&&e.classList.contains("msg__newMsgsDivider")&&u()}}),uVK.onReady(function(){if(store.mail&&store.mail.scraps){var e=store.mail.scraps;l.folder=e.folder.slice(),l.search=e.search.slice(),l.peer=e.peer.slice()}});var l={folder:[],search:[],peer:[]};function u(){remove($(".msg__newMsgsDivider"))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e.filter(unique);var n,i=store.mail,r=i.cur,a=i.msgs,s=!!$(".msg__newMsgsDivider");return e.map(function(e,i){var l=a[e];return i>0&&!s&&!t&&!n.isUnread&&l.isUnread&&l.authorId!==r.viewerId?(n=l,s=!0,(0,o.MailScrap_Item)("peer",e,!0)):(n=l,(0,o.MailScrap_Item)("peer",e))}).join("")}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e=e.filter(unique)).map(function(e){return $(".mailScrap__items_folder .convo_id_".concat(e))&&!t?"":(0,o.MailScrap_Item)("folder",e)}).join("")}function A(e,t,n){!function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=[];if(!e)return;i||(e.innerHTML="",i=[]);if(0===n.length)return void(e.innerHTML="");n.forEach(function(n,r){var o=i.indexOf(n);-1===o?(i.splice(r,0,n),domInsert(e,t(n),r)):o!==r&&(i.splice(o,1),i.splice(r,0,n),before(e.children[o],e.children[r]))}),i.forEach(function(t,i){-1===n.indexOf(t)&&r.push(e.children[i])}),r.forEach(remove)}($(".mailScrap__items_".concat(e)),function(t){return(0,o.MailScrap_Item)(e,t)},t,n)}function f(e){$$(".mailScrap_".concat(e)).forEach(function(t){return t.className=(0,o.MailScrap_class)(e)})}function p(){$$(".mailScrap__systemMessage").forEach(function(e){e.innerHTML=store.mail.cur.notification||""})}},URgk:function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},USu8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uTyping_getPeerTyping=function(e){var t=store.mail.cur.typings[e];if(!t)return null;return t.mixed||t.audio||t.text},t.uTyping_getNames=function(e){if(!e)return[];for(var t=store.mail.members,n=e.users,i=n.length,r=[],o=0;o<i;o++){var a=t[n[o]];if(a){var s=1===i?a.name:a.shortName;r.push(s)}}return r},t.default=void 0;!function(e){e&&e.__esModule}(n("rKUZ"));var i=function(){};t.default=i},UUtA:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadAlgorithm=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"push",value:function(e){this._count++,this._accum+=e,this._accum_q+=e*e}},{key:"get",value:function(){return 1==this._count?this._accum:Math.sqrt((this._accum_q-this._accum*this._accum/this._count)/this._count)}},{key:"clear",value:function(){this._count=0,this._accum=0,this._accum_q=0}}]),e}();t.QuadAlgorithm=r},UlUB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i,r=!1;return function o(){if(r)return n=arguments,void(i=this);e.apply(this,arguments);r=!0;setTimeout(function(){r=!1,n&&(o.apply(i,n),n=i=null)},t)}}},UvyM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("z9sQ")),r=n("fdw3");var o=function(e){var t=e.url,n=e.inner,o=e.is_icon,a=e.on_click;a&&!e.use_native_onclick&&(a=["Btn._onClick","event","this",a]);var s={class:[e.class,i.default.class("Btn",{theme:e.theme||"regular",size:e.size||"",stretch:e.stretch})],onclick:a,attrs:e.attrs},l=e.hide?"; display: none;":"",u=e.style?e.style+l:l;if(t)return(0,r.mergeObjects)(s,{tag:"a",href:t,role:"button",style:u,inner:o?n:{class:"Btn__text",inner:n},target:e.open_in_new_tab?"_blank":null});var c=e.is_submit?"submit":null,d=e.type||c;return(0,r.mergeObjects)(s,{"aria-label":e["aria-label"],tag:"button",style:u,disabled:e.disabled,type:d,inner:o?n:{class:"Btn__text",inner:n}})};t.default=o},UxAg:function(e,t,n){"use strict";function i(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function r(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.$=i,t.$$=r,window.$=i,window.$$=r,function(){HTMLElement.prototype.$=HTMLElement.prototype.querySelector,HTMLElement.prototype.$$=HTMLElement.prototype.querySelectorAll;try{SVGElement.prototype.$=SVGElement.prototype.querySelector,SVGElement.prototype.$$=SVGElement.prototype.querySelectorAll}catch(e){}}()},V1Rh:function(e,t,n){"use strict";var i=n("UxAg");window.Pad={addContent:function(e,t){t&&(0,i.$$)(r.pad(e)).forEach(function(e){var n=e.$(r.content)||e;e.classList.remove(o.empty),n.insertAdjacentHTML("beforeend",t)})}};var r={pad:function(e){return'.Pad[data-id="'.concat(e,'"]')},content:".Pad__content"},o={empty:"Pad_empty"}},V4qE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"init",{enumerable:!0,get:function(){return r.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return r.close}}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("hclJ")),r=n("40dl");var o=i.default;t.default=o,window.SnackbarItem=i.default},VLMK:function(e,t,n){"use strict";var i=n("z8PJ");!function(){var e="",t=function(){e=nav.cur,(0,i.gemiusTrackPage)()};onDOMReady(function(){t(),window.page.onChange(function(){e!==nav.cur&&t()})})}()},VRji:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initAutogrow",{enumerable:!0,get:function(){return r.initAutogrow}}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("4azy")),r=n("bvP/");var o=i.default;t.default=o},VnbJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearWorkerTimeout=function(e){if(!e)return!1;isFinite(e)?clearTimeout(e):e.terminate()}},W0P9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=a,t.warn=function(){var e;o()&&(window.console.warn?(e=window.console).warn.apply(e,arguments):a.apply(void 0,arguments))},t.error=function(){var e;o()&&(window.console.error?(e=window.console).error.apply(e,arguments):a.apply(void 0,arguments))},t.debug=function(){var e;o()&&(window.console.debug?(e=window.console).debug.apply(e,arguments):a.apply(void 0,arguments))};var i=n("W9Tc"),r="js_console_logs";function o(){return window.console&&(0,i.partConfigEnabled)(r)}function a(){var e;o()&&(window.console.log&&(e=window.console).log.apply(e,arguments))}},W0fz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPodcast=function(e){if(!e)return!1;var t=isObject(e)?e.extra:e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];isObject(t)||(t=JSON.parse(t||"{}"));return!!t.podcast};var i=n("uk5P")},W12k:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.questions=this.store.questions[t]||[]}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"render",value:function(){return i.default.elem({class:Bem.class("Questions",{}),inner:[{class:"Questions__header",inner:[{class:"Questions__table",inner:[{class:"Questions__cell",inner:{class:"Questions__title",inner:lang.mobile_stories_question_title}}]},{class:"Questions__close",onclick:"Stories.hideQuestions();"}]},{class:"Questions__body",inner:[{class:"Questions__inner",ontouchmove:"event.stopPropagation();",inner:this.questions.map(function(e){return{class:"Question","data-id":e.id,inner:[{class:"Question__content",inner:[{href:e.author.link,class:"Question__author",inner:e.isAnonymous?lang.mobile_stories_question_anonymous:e.author.name},{class:Bem.class("Question__text",{small:e.text.length>40}),inner:e.text}]},{class:"Question__actions",inner:lang.mobile_stories_question_actions,onclick:["Stories.openQuestionActions",e.id]}]}})}]}]})}}]),e}();t.default=o},W38l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e,t){var n=Date.now(),a=(0,i.getNetworkType)(),s=r.default.isLongPollingEnabled(),l={action:t,startTime:n,networkType:a,lpState:s};o[e]=l},t.mark=function(e,t){if(!o[e])return;var n=o[e],i=n.startTime,r=n.action,a=n.lpState,s=n.networkType;statlogsValueEvent("mvk_mail_send_time",Date.now()-i,r,t,a,s)},t.error=function(e,t,n){if(!o[e])return;var i=o[e],r=i.action,a=i.lpState,s=i.networkType;statlogsValueEvent("mvk_mail_send_error",0,r,t,n,a,s)},t.clean=function(e){delete o[e]},t.logQueueSize=function(e){statlogsValueEvent("mvk_mail_send_queue_size",e,(0,i.getNetworkType)())};var i=n("jE2t"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("WwUR"));var o={}},W9Tc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partConfigEnabled=function(e){var t=window.vk.pe;return!!(void 0===t?{}:t)[e]}},WCKs:function(e,t,n){"use strict";var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("p5n7"));var o=need("Btn"),a=need("Control"),s=window.Join||(window.Join={});s._onCountryChange=c,s._onPhoneChange=d,s._onTermsAcceptChange=d;var l={eu:"Join_eu"},u={join:".Join",phone:".Join__phone",accept:".Join__accept",submit:".Join__submit"};function c(e){var t=e.$option,n=(0,i.$)(u.join),o="1"===t.getAttribute("data-eu");n.classList.toggle(l.eu,o);var s=(0,i.$)(u.phone),c=t.value;r.default.setPrefix(s,c),cur.calledPhoneExcludeCountries&&val((0,i.$)(".join_desc"),getLang(-1==indexOf(cur.calledPhoneExcludeCountries,t.getAttribute("data-id"))?"mobile_join_about_phone_with_call":"mobile_join_about_phone")),(0,i.$$)(u.accept).forEach(function(e){return a.setChecked(e,!1)}),d()}function d(){var e=Array.prototype.slice.call((0,i.$$)(u.accept)),t=(0,i.$)(u.phone),n=(0,i.$)(u.submit);if(n){var s=e.some(a.isChecked)&&r.default.getValue(t).trim().length>0;o.setDisabled(n,!s)}else(n=(0,i.$)('.button[type="submit"]')).disabled=!a.isChecked(e[0])}},WDxS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("QD50")).default;t.default=i},WTJf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OvalIsHidden=r,t.default=void 0;var i=function(e){return Wd.html({class:[Bem.class("Oval",{type:e.gray?"minor":e.type,hidden:r(e.value)}),e.mix],inner:e.value})};function r(e){return!e||e<=0}t.default=i},WeE2:function(e,t,n){"use strict";var i=c(n("zEUu")),r=n("OcsD"),o=n("Ogzf"),a=c(n("TYsd")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("t7Ww")),l=c(n("r/ag")),u=(c(n("29dZ")),n("QWbq"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var f={drag:{curEl:null},cachedPhoto:{}};window.ThumbsEdit={initialized:!1,_init:function(){onDOMReady(function(){window.ThumbsEdit.init(!1),page.onChange(function(){window.ThumbsEdit.init(!1,"/wall")})})},init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nav.path;if(e||(e=$("#feed_add_form .cp_attached_wrap")),!e||0!==n.indexOf("/wall"))return this.initialized=!1,removeClass(document.body,"te_i"),void(f.destroyLongpress&&f.destroyLongpress());if(addClass(document.body,"te_i"),!geByClass1("ThumbsEdit",e)){var i=(0,r.ceFromString)(a.default.html({class:"ThumbsEdit",style:"width: 100%; height: 100%",id:"ThumbsEdit"})),o=(0,r.ceFromString)(a.default.html({class:["ThumbsEdit-wrap"," _preventMenuOpen"],inner:i}));o.appendChild(i),e.insertBefore(o,e.firstChild),f=A({},f,{previews:[],loaders:{},attachEl:i});var s=this.parsePreviews((0,r.getPreloadData)());this.initialized=!0,s.length&&(f.previews=s,this.draw(),(0,r.onBodyResize)(function(){return t.draw()}))}},parsePreviews:function(e){return e.map(function(e){return u.convert.apply(void 0,d(e))}).filter(function(e){var t=e.type;return(0,u.isValidThumbType)(t)})},draw:function(){var e=this,t=f,n=t.previews,i=t.attachEl,r=n[0]?(0,u.getRatio)(n[0]):u.THUMBS_CONTAINER_DEFAULT_RATIO,o={width:i.parentNode.offsetWidth,height:Math.min(Math.round(i.parentNode.offsetWidth/r),360),wide:!0},a=(0,u.processThumbs)(o.width,o.height,n,o),s=a.thumbs,l=a.height,c=a.width;f=A({},f,{thumbs:s,height:l,options:o});var d=document.createDocumentFragment();s.forEach(function(t,n){d.appendChild(e.createThumbEl(t,n))}),this.updateIds();var p=ce("div");p.id="ThumbsEdit-splitter",val(i,""),i.style.width=c+"px",i.parentNode.style.height=l+"px",i.appendChild(d),ge("ThumbsEdit-splitter")||i.parentNode.appendChild(p),mediaUpload.refreshUploadState(),this.updatePhotos()},update:function(e,t){var n=this;if(e=ge(e)){var i=e.id,o=ge(i),s=f.thumbs,l=f.height,c=f,d=c.options,A=c.drag,p=t[0]?(0,u.getRatio)(t[0]):u.THUMBS_CONTAINER_DEFAULT_RATIO,_=d.width,h=d.height;_&&h||(_=e.parentNode.offsetWidth,h=Math.min(Math.round(_/p),360)),d.width=_,d.height=h,d.wide=!0;var m=(0,u.processThumbs)(_,h,t,d),v=m.thumbs,g=m.height,y=m.width,w=(0,r.ceFromString)(a.default.html({class:"ThumbsEdit",style:"width: ".concat(y,"px; height: ").concat(g,"px; position: fixed; left: ").concat(A.wpos[0],"px; top: ").concat(A.wpos[1],"px; visibility: hidden")}));v.forEach(function(e,t){w.appendChild(n.createThumbEl(e,t,!0))}),document.body.appendChild(w);var b=this.getCoords(w,A.wpos);re(w),b.forEach(function(e,t){var n=f.drag.coords.find(function(t){return t.id===e.id});if(n){var i=geByClass1("Thumb",n.node),o=$("img",i),a=s[n.index],l=v.find(function(e){return e.id===a.id});f.drag.toIndex!==t&&r.setStyle.transform(i,1,[0,0]),n.height===e.height&&e.x===n.x&&e.y===n.y&&n.index!==f.drag.i||setTimeout(function(){r.setStyle.animate(i,"margin-left, margin-top, height, width, opacity, transform",{duration:u.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,r.setStyle)(i,{"margin-left":0,"margin-top":0,height:e.height,width:e.width,opacity:1}),r.setStyle.transform(i,1,[e.x-n.x,e.y-n.y]),r.setStyle.animate(i.parentNode,"background",{duration:u.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,r.setStyle)(i.parentNode,{func:"ease-in",background:"transparent"});var t=(0,u.crop)(l,e.width,e.height);o&&(r.setStyle.animate(o,Object.keys(t).join(),u.THUMB_DRAG_ANIMATION_DURATION+"ms"),(0,r.setStyle)(o,t))})}}),l!==g&&setTimeout(function(){[o,o.parentNode].forEach(function(e){r.setStyle.animate(e,"height",{duration:u.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,r.setStyle)(e,{height:g})})}),y>=_&&(r.setStyle.animate(o,"width",{duration:u.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,r.setStyle)(o,{width:y})),setTimeout(function(){(0,r.setStyle)(o,{width:y}),f.thumbs=v,f.previews=t,f.height=g;var e=document.createDocumentFragment();v.forEach(function(t,i){e.appendChild(n.createThumbEl(t,i))}),o.innerHTML="",o.appendChild(e),f.drag.updating=!1,n.updatePhotos()},u.THUMB_DRAG_ANIMATION_DURATION)}else console.error("empty el to update")},createThumbEl:function(e,t){var n=e.image,s=e.width,l=e.height,c=e.type,d=(0,u.crop)(e,s,l),A=["Thumb-wrap","".concat("Thumb-wrap","--").concat(c)],p=0===e.id.indexOf("phototemp_"),_=p||s<=30||l<=60;p&&A.push("".concat("Thumb-wrap","--temp")),e.lastColumn&&A.push("last_column"),e.lastRow&&A.push("last_row");var h=f.previews[t],m=null;h.label&&(m=a.default.wrap(h.label));if(p&&h.orientation>1){var v=(s-l)/2;"\n        position: absolute;\n        right: ".concat(v,"px;\n        bottom: ").concat(-v,"px;\n        height: ").concat(s,"px;\n        width: ").concat(l,"px;\n       ")}var g=this.getCached(e.id,n.src);this.cachePhoto(e.id,n.src);var y=[{tag:"img",src:g?g.src:n.src,width:"".concat(Math.round(d.width)),height:"".concat(Math.round(d.height)),style:"margin-left: ".concat(d.marginLeft,"px; margin-top: ").concat(d.marginTop,"px;")},{class:"Thumb__overlay",inner:[!_&&{class:"Thumb__overlay-closeBtn",onclick:"ThumbsEdit.remove(null, ".concat(t,")")},m]},{tag:"input",type:"hidden",name:"attach"+(t+1)+"_type",value:c},{tag:"input",type:"hidden",name:"attach"+(t+1),value:e.id.slice(c.length,e.id.length)}];if(p){var w,b=Math.min(Math.min((d.width-24)/2,30),Math.min((d.height-24)/2,30));f.loaders[e.id]&&(w=f.loaders[e.id]);var E=i.default.init(w,b),k=E.component,C=E.id;f.loaders[e.id]=C,y.push(k)}var D=(0,r.ceFromString)(a.default.html({class:"Thumb",style:"width: ".concat(Math.round(s),"px; height: ").concat(Math.round(l),"px"),inner:y})),S=(0,r.ceFromString)(a.default.html({class:A.join(" "),style:"width: ".concat(Math.round(s),"px; height: ").concat(Math.round(l),"px"),"data-media":e.id,"data-index":t,"data-upload":h.upload}));return f.destroyLongpress=(0,o.onLongpress)(D,350,this.startDrag.bind(this,D)),addEvent(S,"click",this.showPopup.bind(this)),S.appendChild(D),S},addTempPreview:function(e){var t;if(f.attachEl){var n=this.parsePreviews([e]);(t=f.previews).push.apply(t,d(n)),this.draw()}},replaceTemp:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=f.previews.findIndex(function(t){return t.ownerId===e}),a=f.previews[o],s=t.split("_").ownerId,l=t.split("_").itemId;a.ownerId=s,a.owner_id=s,a.itemId=l,a.temp=!1,a.upload=e,a.list=n,a.photo.sizes=r,a.photo.id="photo"+t,a.photo.pid=l,a.data=a.photo,i.default.ready(f.loaders["phototemp_"+e]),this.draw()},onUploadProgress:function(e,t){i.default.update(f.loaders["phototemp_"+e],t)},preventScroll:function(e){preventEvent(e)},startDrag:function(e,t){if(addEvent(window,"touchmove",this.preventScroll),e.classList.contains("Thumb")&&!e.classList.contains("Thumb--moving")){window.navigator.vibrate&&navigator.vibrate(50),(0,r.setStyle)(document.body,"overflow","hidden"),(0,r.setStyle)(document.body,"max-height","100%"),(0,r.setStyle)(document.body,"user-select","none");var n=this.onDrag.bind(this),i=this.onDrop.bind(this);addEvent(window,"mousemove touchmove",n),addEvent(window,"mouseup touchend touchcancel",i),statlogsValueEvent("mvk_thumb_edit_interaction",""),f.drag=A({},f.drag,{curEl:e,curIndex:e.parentNode.dataset.index,dragListener:n,dropListener:i});var o=e.offsetWidth>=40&&e.offsetHeight>=80,a=e.parentNode.parentNode,s=$("img",e),l=intval(e.parentNode.getAttribute("data-index")),c=f.thumbs[l],d=getXY(a),p=getXY(e.parentNode),_=this.getCoords(a,d);f.drag.id=a.id,f.drag.i=l,f.drag.toIndex=l,f.drag.x=(t.pageX||t.detail.pageX)-p[0],f.drag.y=(t.pageY||t.detail.pageY)-p[1],f.drag.t=c,f.drag.w=c.width,f.drag.h=c.height,f.drag.pos=p,f.drag.wpos=d,f.drag.crop=(0,u.crop)(c,c.width,c.height),f.drag.coords=_,f.drag.needScale=o;var h=o?(0,u.scale)(c.width,c.height,.9*e.offsetWidth,.9*e.offsetHeight):[c.width,c.height],m=h[0],v=h[1],g=intval((c.width-m)*(browser.android?.5:f.drag.x/c.width)),y=intval((c.height-v)*(browser.android?.5:f.drag.y/c.height));addClass(e,"Thumb--moving"),(0,r.setStyle)(e,{zIndex:100}),(0,r.setStyle)(e.parentNode,{zIndex:100});var w=(0,u.crop)(c,m,v);(0,r.setStyle)(e,{opacity:.75,width:m,height:v,marginLeft:g,marginTop:y}),s&&(0,r.setStyle)(s,w),f.drag.state=!0}},onDrag:function(e){var t=f.drag.curEl;if(e.touches&&e.touches.length>1)return this.drop();var n=this._getClickCoord(e),i=n.x,o=n.y,a=f.drag,s=i-(a.pos[0]+a.x),l=o-(a.pos[1]+a.y);r.setStyle.transform(t,1,[s,l]);var c=a.wpos,d=s=a.pos[0]+intval(t.style.marginLeft)+s-c[0],A=l=a.pos[1]+intval(t.style.marginTop)+l-c[1],p=(t.offsetWidth,t.offsetHeight,a.i),_=!1,h=a.i,m=-1,v=window.innerWidth>=480?u.THUMBS_MESH_GAP_MVK:u.THUMBS_MESH_GAP_MVK_SMALL,g={};if(a.coords.forEach(function(e,t){if(t!==a.i&&t!==m){e.offsetX=e.node.offsetWidth+v,e.offsetY=e.node.offsetHeight+v;var n=a.coords[t-1],i=a.coords[t+1],o=d+a.x,s=A+a.y,l=e.x+e.offsetX/2,u=e.y+e.offsetY/2,c=e.x+e.offsetX,f=e.y+e.offsetY,y=(n&&n.x===e.x&&n.y!=e.y&&0!=e.y||i&&i.x===e.x&&i.y!=e.y)&&0!=e.x,w=o>=l&&(i&&(o<=i.x+i.offsetX/2&&(i.offsetY===e.offsetY||o<c)||i.y!=e.y)||!i&&d<=c)&&s>e.y&&s<f,b=o<l&&o>=e.x&&(!n||n.y!=e.y&&!(n.x===e.x&&!i))&&s>e.y&&s<f,E=y&&s>=u&&s<f&&o>e.x&&o<c,k=y&&s<u&&s>=e.y&&o>e.x&&o<c;w=w&&!y,b=b&&!y&&!w,(w||b||E||k)&&(_=!0,h=e.index<a.i&&(w||E)?e.index+1:p<e.index&&(k||b)?e.index-1:e.index),h!==a.i?(r.setStyle.transform(e.node,1,[w?-5:b?5:0,E?-5:k?5:0]),w?(g.side="right",g.toIndex=e.index):b&&(g.side="left"),E?(g.side="down",g.toIndex=e.index):k&&(g.side="up")):r.setStyle.transform(e.node,1,[0,0]),w&&i&&i.y===e.y&&i.x>e.x&&p>e.index&&(r.setStyle.transform(e.node,1,[0,0]),r.setStyle.transform(e.node,1,[0,0]),r.setStyle.transform(i.node,1,[5,0]),m=t+1,g.side="left",g.toIndex=h),E&&i&&i.x===e.x&&i.y>e.y&&s<=u&&(r.setStyle.transform(i.node,1,[0,0]),m=t+1),k&&n&&n.x===e.x&&n.y<e.y&&s<=u&&(r.setStyle.transform(n.node,1,[0,-5]),r.setStyle.transform(e.node,1,[0,0]),g.side="down",g.toIndex=n.index),h===t&&"number"!=typeof g.toIndex&&(g.toIndex=e.index)}}),g&&(!a.split||a.split.toIndex!==g.toIndex||a.split.side!==g.side)){var y=ge("ThumbsEdit-splitter");if((0,r.setStyle)(y,{opacity:0}),a.split=g,"number"==typeof g.toIndex){var w=a.coords[g.toIndex].node,b=v===u.THUMBS_MESH_GAP_MVK_SMALL;"left"===a.split.side&&(0,r.setStyle)(y,{left:Math.max(0,w.offsetLeft-(b?0:1)),top:w.offsetTop+8,height:w.offsetHeight-16,width:"2px",opacity:1}),"right"===a.split.side&&(0,r.setStyle)(y,{left:Math.min(w.offsetLeft+w.offsetWidth-(b?2:1),f.options.width-2),top:w.offsetTop+8,height:w.offsetHeight-16,width:"2px",opacity:1}),"up"===a.split.side&&(0,r.setStyle)(y,{left:w.offsetLeft+8,top:w.offsetTop,height:"2px",width:w.offsetWidth-16,opacity:1}),"down"===a.split.side&&(0,r.setStyle)(y,{left:w.offsetLeft+8,top:w.offsetTop+w.offsetHeight-1,height:"2px",width:w.offsetWidth-16,opacity:1})}}return a.toIndex=_?h:a.i,cancelEvent(e)},onDrop:function(e){var t=f.drag;t.state=!1,t.updating=!0;var n=t.curEl,i=$("img",n),o="touchcancel".split(" ").includes(e.type);if(removeEvent(window,"mousemove touchmove",t.dragListener),removeEvent(window,"mouseup touchend touchcancel",t.dropListener),removeEvent(window,"touchmove",this.preventScroll),document.body.contains(t.curEl)){if((0,r.setStyle)(document.body,"overflow",null),(0,r.setStyle)(document.body,"max-height",null),(0,r.setStyle)(document.body,"user-select",null),r.setStyle.transform(n.parentNode,1,[0,0]),t.split)delete t.split,ge("ThumbsEdit-splitter").removeAttribute("style");if(!hasClass(n,"Thumb--moving"))return t.updating=!1,cancelEvent(e);if(o){var a=t.coords[t.toIndex].node;r.setStyle.transform(a,1,[0,0])}if(t.toIndex===t.i||o){var s=t.crop;r.setStyle.animate(n,"transform, margin-top, margin-left, width, height, opacity",{duration:"100ms"},function(){removeClass(n,"Thumb--moving")}),r.setStyle.animate(i,"transform, margin-top, margin-left, width, height, opacity",{duration:"100ms"});var l=f.thumbs[t.i];r.setStyle.transform(n,1,[0,0]),(0,r.setStyle)(n,{"margin-top":0,"margin-left":0,width:l.width,height:l.height,opacity:1,zIndex:null}),(0,r.setStyle)(n.parentNode,{zIndex:null}),i&&(0,r.setStyle)(i,s)}else{var c=f.previews;c=(0,u.move)(c,t.i,t.toIndex),this.update(t.id,c)}return cancelEvent(e)}},getCoords:function(e,t){var n=[];return t=t||getXY(e),d(e.childNodes).forEach(function(e,i){var r=getXY(e);n[i]={id:e.getAttribute("data-media"),x:intval(r[0]-t[0]),y:intval(r[1]-t[1]),width:intval(e.offsetWidth),height:intval(e.offsetHeight),index:intval(e.getAttribute("data-index")),node:e}}),n},remove:function(e,t){var n=f.previews[t];e&&l.default.close(e.target),mediaUpload.reset(null,null,n.remove,function(){f.previews=f.previews.filter(function(e,n){return n!==t}),ThumbsEdit.draw()})},showPopup:function(e){var t=e.target;if(!f.drag.state&&!t.classList.contains("Thumb--moving")&&!t.classList.contains("Thumb__overlay-closeBtn")){e.cancelable&&cancelEvent(e);var n=t.closest(".Thumb-wrap").getAttribute("data-index"),i=(0,r.ceFromString)(a.default.html(this.getPopup(n)));l.default.open(i,!0)}},getPopup:function(e){var t=f.previews[e],n=null;switch(t.type){case"doc":n='\n          Gif.openPopup(null, null, {\n            raw: "'.concat(t.doc.id.slice(3,t.doc.id.length),'",\n            hasVideo: ').concat(Gif.isMp4Support(),"\n          });\n          Popup.close(this);\n        ");break;case"photo":n='\n          photo.zopen(null, null, "'.concat(t.data.id.slice(5,t.data.id.length),'", "').concat(t.list,'", {\n            hideOverlay: true,\n            single: true,\n          });\n          Popup.close(this);\n        ')}var i=(0,s.ModalMenuBtn)({inner:getLang("mobile_delete"),onclick:"ThumbsEdit.remove(event, ".concat(e,")")}),r=null;return n&&!t.temp&&(r=(0,s.ModalMenuBtn)({inner:getLang("mobile_open"),onclick:"".concat(n)})),(0,s.default)({class:"ThumbsEdit__modal",close:!0,items:[r,i]})},_getClickCoord:function(e){return{x:e.touches?e.touches[0].pageX:e.pageX,y:e.touches?e.touches[0].pageY:e.pageY}},cachePhoto:function(e,t,n){var i=ce("img");if(i.src=t,f.cachedPhoto[e]){var r=f.cachedPhoto[e].find(function(e){return e.src===t});r?n&&n(r.src):i.onload=function(){f.cachedPhoto[e].push({width:i.width,height:i.height,src:t}),f.cachedPhoto[e].sort(function(e,t){return e.width>t.width?-1:e.width<t.width?1:0}),n&&n(t)}}else f.cachedPhoto[e]=[]},updatePhotos:function(){var e=this;f.thumbs.forEach(function(t){var n=$("[data-media=".concat(t.id,"] img"));n.src!==t.image.src&&e.cachePhoto(t.id,t.image.src,function(e){n.src=e})})},getCached:function(e,t){var n=ce("img");return n.src=t,n.complete?t:f.cachedPhoto[e]&&0!==f.cachedPhoto[e].length?f.cachedPhoto[e].find(function(e){var t=e.src,n=ce("img");return n.src=t,n.complete}):null},getThumbsCount:function(){return(f.thumbs||[]).length},updateIds:function(){var e=$$(".mr_x_wrap"),t=this.getThumbsCount()+1;e.forEach(function(e,n){var i=$$("input",e),r=t+n;i[0].name="attach".concat(r,"_type"),i[1].name="attach".concat(r)})}}},WgE6:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=Object.assign({},{tick:100,onEnd:function(){},onTick:function(){},onStart:function(){},onPause:function(){},onStop:function(){}},n);this.left=t,this.initialTime=t,this.tick=i.tick,this.onEnd=i.onEnd,this.onTick=i.onTick,this.onStart=i.onStart,this.onPause=i.onPause,this.onStop=i.onStop,this.started=!1}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.started&&(this.pause(e),this.left=this.initialTime,e||this.onStop())}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.timer&&(this.timer=clearInterval(this.timer),this.started=!1,e||this.onPause())}},{key:"start",value:function(){var e=this;if(this.started)return!1;var t=new Date(Date.now()+this.left).getTime();this.started=!0,this.timer=setInterval(function(){var n=(new Date).getTime();e.left=t-n,e.left<=0?(e.onTick(0),e.onEnd(),e.stop(!0)):e.onTick(e.left)},this.tick),this.onStart()}},{key:"isStarted",value:function(){return this.started}},{key:"getTimeLeft",value:function(){return this.left}}]),e}();t.default=r},WwUR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("OcsD"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ")),o=n("XK78"),a=n("EUzL"),s=n("BxOC"),l=n("f01n");var u=window.clog,c={onNewMsg:(0,r.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags, isService }"),onEditMsg:(0,r.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags }"),onMsgReadByMe:(0,r.default)("msgId","dialogId"),onMsgReadByOther:(0,r.default)("msgId","dialogId"),onOnlineChange:(0,r.default)("{ userId, isOnline, onlinePlatform, lastActionTime }"),onTyping:(0,r.default)("dialogId","authorId"),onMultiTyping:(0,r.default)("peerId","userIds","totalCount"),onRecordingAudio:(0,r.default)("peerId","userIds","totalCount"),onMsgImportantRemove:(0,r.default)("msgId"),onMsgImportantAdd:(0,r.default)("msgId"),onMsgRequestChange:(0,r.default)("peerId","type"),onMsgRemove:(0,r.default)("msgId"),onMsgListen:(0,r.default)("msgId"),onMsgRestore:(0,r.default)("msgId"),onPeerKeyboard:(0,r.default)("peerId"),onPeerBanner:(0,r.default)("peerId"),onPeerConvert:(0,r.default)("peerId","convertId"),onPeerAdmin:(0,r.default)("peerId","userId","isAdmin"),onDialogImportant:(0,r.default)("peerId","isImportant"),onDialogRemove:(0,r.default)("peerId"),onUnreadCount:(0,r.default)("count"),onResync:(0,r.default)(),_onLpEvents:(0,r.default)("Array<Object>"),init:function(e){c._lpConnect&&(c._onLpEvents.off(),c._lpConnect.stopConnection(),c._lpQueue=null,c._lpConnect=null),c._lpConfig=e},isLongPollingEnabled:function(){return!(!c._lpConnect||c._lpConnect.isStopped())},on:function(){u("[longpoll] start"),window.addEventListener("online",A),window.addEventListener("offline",A),c._lpConnect?c._lpConnect.reinitConnection():c._createLongpoll(c._lpConfig)},off:function(){u("[longpoll] stop"),window.removeEventListener("online",A),window.removeEventListener("offline",A),c._lpConnect&&c._lpConnect.stopConnection()},pause:function(){u("[longpoll] pause"),c._lpQueue&&c._lpQueue.pause()},resume:function(){u("[longpoll] resume"),c._lpQueue&&c._lpQueue.resume()},abortWaiting:function(){u("[longpoll] abort waiting"),c._lpConnect.abortWaiting()},_createLongpoll:function(e){if(!c._lpConnect){var t=(0,a.createLongpollEventsQueue)(e.ts,function(e){c._onLpEvents(e)}),n=(0,o.createLongpollConnect)(e,{onEvents:function(e,n,i){i.forEach(function(i){t.onLp(e,n,[i])})},onHistoryLost:function(){u("[longpoll] ts expired")},onKeyExpired:function(e){return u("[longpoll] key expired"),(0,s.post)("/mail",{act:"get_key",user_id:e.id})},onLpBroken:function(){u("[longpoll] broken, reload"),window.location.reload()}});c._lpQueue=t,c._lpConnect=n,c._onLpEvents(function(e){try{e.forEach(c._onEvent)}catch(e){console.error(e)}})}},_onEvent:function(e){var t=e.type;switch(t){case l.REPLACE_FLAGS:var n=e.flags,r=e.messageId;e.peerId;n&l.FLAG_IMPORTANT?c.onMsgImportantAdd(r):c.onMsgImportantRemove(r),n&l.FLAG_DELETED||n&l.FLAG_SPAM?c.onMsgRemove(r):c.onMsgRestore(r);break;case l.SET_FLAGS:var o=e.flags,a=e.messageId,s=e.peerId;o&l.FLAG_IMPORTANT&&c.onMsgImportantAdd(a),(o&l.FLAG_DELETED||o&l.FLAG_SPAM)&&c.onMsgRemove(a,s),o&l.FLAG_AUDIO_MESSAGE_LISTENED&&c.onMsgListen(a);break;case l.RESET_FLAGS:var u=e.flags,d=e.messageId;e.peerId;u&l.FLAG_IMPORTANT&&c.onMsgImportantRemove(d),(u&l.FLAG_DELETED||u&l.FLAG_SPAM)&&c.onMsgRestore(d);break;case l.ADD_MESSAGE:case l.EDIT_MESSAGE:case l.REPLACE_MESSAGE:var A=e.messageId,f=e.peerId,p=e.randomId,_=e.text,h=e.flags,m=e.attaches,v=e.kludges,g=e.date,y=(0,i.toInt)(v.from_admin)||null,w=function(e){if(e.flags&l.FLAG_OUTBOUND)return c._lpConfig.id;return e.userId}(e),b=!!v.source_act,E=t===l.EDIT_MESSAGE||t===l.REPLACE_MESSAGE,k=h&l.FLAG_OUTBOUND,C=!!(h&l.FLAG_STEALTH),D=v.keyboard,S=function(e,t){t&l.FLAG_HAS_REPLY&&function(e){e.fwd_count}(e)}(v,h),T={peerId:f,id:A,authorId:w,attaches:m,text:_,ts:g,flags:h,adminId:y,randomId:p,isService:E?void 0:b,edited:!!E||void 0,replaced:t===l.REPLACE_MESSAGE,keyboard:D,isStealth:C,isOut:k,hasReply:S};E?c.onEditMsg(T):c.onNewMsg(T);break;case l.READ_INBOUND:case l.READ_OUTBOUND:var M=e.peerId,P=e.upToId;e.unread;t===l.READ_INBOUND?c.onMsgReadByMe(P,M):c.onMsgReadByOther(P,M);break;case l.GOT_ONLINE:case l.GOT_OFFLINE:var I=e.userId,x=e.platform,O=(e.reason,e.lastSeenTs),L="mobile";x&&6!==x&&7!==x||(L="desktop"),c.onOnlineChange({userId:I,isOnline:t===l.GOT_ONLINE,onlinePlatform:L,lastActionTime:O});break;case l.RESET_DIRECTORIES:case l.SET_DIRECTORIES:var B=e.mask,N=e.peerId;e.local;B&l.FOLDER_IMPORTANT&&c.onDialogImportant(N,t===l.SET_DIRECTORIES);break;case l.REPLACE_DIRECTORIES:var R=e.mask,F=e.peerId;e.local;c.onDialogImportant(F,!!(R&l.FOLDER_IMPORTANT));break;case l.DELETE_DIALOG:var j=e.peerId;c.onDialogRemove(j);break;case l.CONVERSATION_UPDATED:var H=e.peerId,U=e.updateType,V=e.updateArg;if(11===U&&c.onPeerKeyboard(H),10===U&&c.onPeerBanner(H),13===U&&c.onPeerConvert(V,H),12===U){var z="";switch(V){case 3:z="created";break;case 2:z="rejected";break;case 1:z="accepted";break;case 0:z="canceled"}c.onMsgRequestChange(H,z)}3===U&&c.onPeerAdmin(H,V,!0),9===U&&c.onPeerAdmin(H,V,!1);break;case l.TYPING:var $=e.peerId,q=e.userIds,W=e.totalCount;e.ts;c.onMultiTyping($,q,W);break;case l.RECORDING_AUDIO:var Y=e.peerId,G=e.userIds,Q=e.totalCount;e.ts;c.onRecordingAudio(Y,G,Q);break;case l.VIDEO_CALL:break;case l.UNREAD_COUNT:var X=e.count,K=e.countNotMuted,J=e.showOnlyNotMuted;c.onUnreadCount(J?K:X);break;case l.NOTIFY_SETTINGS_CHANGED:break;case l.RESYNC:c.onResync()}}},d=c;function A(e){"online"===e.type?(u("[longpoll] online"),c._lpConnect.reinitConnection()):(u("[longpoll] offline"),c._lpConnect.stopConnection())}t.default=d},X6as:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var r=35;void 0===window.isTouch&&(window.isTouch=!1);var o=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("No element was provided for Slider");t=ge(t),this.options=n||{size:1},void 0===this.options.logfbase&&(this.options.logfbase=r),this.options.backValue=this.options.backValue||0;var i=100*this.options.backValue,o='<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> '+(this.options.withBackLine?'<div class="slider_back" style="width:'+i+'%"></div>':"")+' <div class="slider_amount"></div> <div class="slider_handler"></div> </div>';this._el=ce("div",{innerHTML:o,className:"slider",id:t.getAttribute("id")||""});var a=this;if(t.classList)for(var s=t.classList,l=0,u=s.length;l<u;l++)addClass(this._el,s[l]);else this._el.className=t.className;each(this._el.attributes,function(e,t){"id"==t.name&&"class"==t.name||a._el.setAttribute(t.name,t.value)}),t.parentNode.replaceChild(this._el,t),this._amountEl=geByClass1("slider_amount",this._el),this._handlerEl=geByClass1("slider_handler",this._el),this._slideEl=geByClass1("slider_slide",this._el),this._backEl=geByClass1("slider_back",this._el),this._progressEl=geByClass1("slider_loading_bar",this._el),this.options.color&&(setStyle(this._amountEl,{backgroundColor:this.options.color}),setStyle(this._handlerEl,{backgroundColor:this.options.color})),this.options.backColor&&setStyle(this._slideEl,{backgroundColor:this.options.backColor}),addClass(this._el,"slider_size_"+this.options.size),this.options.debounce&&(this._onValueChangeDebounced=debounce(this._onValueChange,this.options.debounce)),!isTouch&&n.formatHint&&(addEvent(this._el,"mousemove",this._ev_onMouseOver=this._onMouseOver.bind(this)),addEvent(this._el,"mouseleave",this._ev_onMouseLeave=this._onMouseLeave.bind(this))),addEvent(this._el,isTouch?"touchstart":"mousedown",this._ev_onMouseDown=this._onMouseDown.bind(this)),addEvent(this._el,"click",cancelEvent),this.setValue(this.options.value||0,!this.options.fireChangeEventOnInit,!1),this.setBackValue(this.options.backValue)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"toggleLoading",value:function(e){e=!!e,toggle(this._progressEl,e),setStyle(this._progressEl,"opacity",e?1:0)}},{key:"destroy",value:function(){!isTouch&&this.options.formatHint&&(removeEvent(this._el,"mousemove",this._ev_onMouseOver),removeEvent(this._el,"mouseleave",this._ev_onMouseLeave),removeEvent(this._el,"mousedown",this._ev_onMouseDown));var e=window.re||window.remove;e(this._el),e(this._currHintEl)}},{key:"_updateHint",value:function(e,t){this._currHintEl||(this._currHintEl=ce("div",{className:"slider_hint",id:"slider_hint"}),this.options.hintClass&&addClass(this._currHintEl,this.options.hintClass),this._el.appendChild(this._currHintEl));var n=this._getPos(),i=Math.round((e.pageX||e.touches[0].pageX)-n[0]),r=this._width;if((i=t?Math.min(Math.max(0,i),r):i)>=0&&i<=r){var o=i/r;this._currHintEl.innerHTML=this.options.formatHint?this.options.formatHint.call(this,o):o;var a=this._currHintEl.getBoundingClientRect();setStyle(this._currHintEl,{left:this._slideEl.offsetLeft+i-(a.right-a.left)/2,top:this._slideEl.offsetTop-(a.bottom-a.top)-10}),!t&&this._toggleHint(!0)}else!t&&this._toggleHint(!1);this.options.formatHint||this._toggleHint(!1)}},{key:"_toggleHint",value:function(e){toggleClass(this._currHintEl,"visible",e)}},{key:"_onMouseOver",value:function(t){e._currenSliderDrag||hasClass(this._el,"active")||this._updateHint(t)}},{key:"_onMouseLeave",value:function(e){hasClass(this._el,"active")||this._toggleHint(!1)}},{key:"_onMouseDown",value:function(t){(0==t.button||t.touches)&&(delete cur._sliderMouseUpNowEl,addEvent(window,isTouch?"touchmove":"mousemove",this._ev_onMouseMove=this._onMouseMove.bind(this)),addEvent(window,isTouch?"touchend touchcancel":"mouseup",this._ev_onMouseUp=this._onMouseUp.bind(this)),this._onMouseMove(t),e._currenSliderDrag=this,addClass(this._el,"active"),cancelEvent(t))}},{key:"_onMouseUp",value:function(t){cur._sliderMouseUpNowEl=this._el,removeEvent(window,isTouch?"touchmove":"mousemove",this._ev_onMouseMove),removeEvent(window,isTouch?"touchend touchcancel":"mouseup",this._ev_onMouseUp),this._onValueChange(),removeClass(this._el,"active"),e._currenSliderDrag=!1,this._toggleHint(!1),this.options.onEndDragging&&this.options.onEndDragging(this._currValue),cancelEvent(t)}},{key:"_onMouseMove",value:function(e){var t=this._getPos(),n=t[0];n=void 0!==e.touches&&e.touches.length>0?e.touches[0].pageX:e.pageX,n=Math.max(n,t[0]),n=Math.min(n,t[0]+this._width),n-=t[0],this.setValue(n/this._width,!0,!0),this._onValueChangeDebounced?this._onValueChangeDebounced():this._onValueChange(),this._toggleHint(!0),this._updateHint(e,!0),cancelEvent(e)}},{key:"_getPos",value:function(){return this._slidePos=getXY(this._slideEl)}},{key:"_logf",value:function(e){if(!this.options.log)return e;var t=this.options.logfbase;return(Math.pow(t,e)-1)/(t-1)}},{key:"_unlogf",value:function(e){if(!this.options.log)return e;var t=this.options.logfbase;return function(e,t){return Math.log(t)/Math.log(e)}(t,1+e*(t-1))}},{key:"setValue",value:function(e,t,n){if(!hasClass(this._el,"active")||n){var i=n?this._logf(e):e;if(this._currValue!=i){this._currValue=i;var r=n?e:this._unlogf(e);r=100*r+"%",setStyle(this._amountEl,{width:r}),setStyle(this._handlerEl,{left:r}),!t&&this._onValueChange()}}}},{key:"setBackValue",value:function(e){toggleClass(this._backEl,"slider_back_transition",e>this._backValue),this._backValue=e;var t=100*e+"%";setStyle(this._backEl,{width:t})}},{key:"_onValueChange",value:function(){this._lastValue=this._lastValue||0,this._lastValue!=this._currValue&&(this._lastValue=this._currValue,this.options.onChange&&this.options.onChange(this._currValue))}},{key:"_width",get:function(){if(!this._widthCache){var e=this._el.getBoundingClientRect();this._widthCache=e.right-e.left}return this._widthCache}}]),e}();t.Slider=o},XBHu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioAds=void 0;var i=n("lkNA"),r=n("rEJs"),o=n("W0fz"),a=n("VnbJ"),s=n("YvCB");function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isPlaying=!1,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=t||{},this.playerVersion=n||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(i),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"isPlaying",value:function(){return this._isPlaying}},{key:"setAdsConfig",value:function(e){this._adsConfig=e}},{key:"getCurrentProgress",value:function(){return this._adsCurrentProgress}},{key:"getDuration",value:function(){return this._duration}},{key:"loadAdman",value:function(t){var n=this,r=function(e){return t&&t(e)};if(this._admanLoaded)r();else{var o=0;(0,i.loadScript)(e.ADMAN_SRC,{onLoad:function(){n._admanLoaded=!0,r()},onError:function(){window.abp?(n._admanLoaded=!0,r()):(3===(o+=1)&&(n._admanLoaded=!0),r("script_load_fail"))}})}}},{key:"_fetchAd",value:function(t,n,i,o,a){var s=this;this.loadAdman(function(l){if(!window.AdmanHTML)return s._sendEvent("no_adman",n,e.AD_TYPE,l),o&&o();s._adman=new AdmanHTML;var u={_SITEID:276,ver:251116,vk_id:vk.id,duration:t.duration,content_id:function(e,t){var n=e.toString(16),i=t.toString(16);for(;i.length<8;)i="0"+i;return n+i}(t.ownerId,t.id),vk_catid:e.CAT_IDS[n]||e.CAT_IDS.other};extend(u,t.ads||{}),nav.objLoc&&nav.objLoc.preview&&(u.preview=intval(nav.objLoc.preview)),cur.adsPreview&&(u.preview=1,u.vk_id=398724832),s._adman.setDebug(!!u.preview),s._adman.onError(function(){return o&&o()}),s._adman.onReady(function(){if(s._adman){var t=s._adman.getBannersForSection(e.AD_TYPE);t&&t.length?"statistics"===t[0].type?(s._play(!0,n),o&&o()):(s._sendEvent("received",n),i?(s._sendEvent("rejected",n,e.AD_TYPE,a),s.deinit(),o&&o()):(s._sendEvent("ready",n),s.player.notify(r.events.AD_READY),s._play(!1,n,o))):(i||s._sendEvent("not_received",n),o&&o())}}),s._adman.init({slot:3514,wrapper:s.isMvk?ce("div"):se("<div></div>"),params:u,browser:{adBlock:!!window.abp,mobile:!1}}),s._sendEvent("requested",n)})}},{key:"_sendEvent",value:function(e,t,n,i){var r=this,o=n?"/"+n:"",a=i?"/"+i:"";this._adEvents.push(e+"/"+t+o+a),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout(function(){ajax.post(r.adsStatUrl,{act:"ad_event",events:r._adEvents.join(","),v:r.playerVersion,abp:intval(window.abp)}),r._adEvents=[]},500)}},{key:"_play",value:function(t,n,i){var o=this;this._adman.onCompleted(function(){o.deinit(!0),t?o._sendEvent("statistics",n):(o.player.notify(r.events.PROGRESS,0),o.player.notify(r.events.AD_COMPLETED),o._isPlaying=!1,o._adsCurrentProgress=0,o._sendEvent("completed",n),window.setDocumentTitle&&window.setDocumentTitle(o._adsPrevTitle),i&&i())}),this._adman.onStarted(function(){t||(o.player.setIsPlaying(!0),o.player.notify(r.events.PROGRESS,0),o.player.notify(r.events.AD_STARTED),o.updateVolume(),o._sendEvent("started",n))});var a=[.25,.5,.75];if(this._adman.onTimeRemained(function(e){o._duration=isNaN(e.duration)?0:e.duration,o._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,o.player.notify(r.events.PROGRESS,o._adsCurrentProgress,o._duration),each(a,function(e,t){if(o._adsCurrentProgress>=t)return a.shift(),o._sendEvent("progress_"+intval(100*t),n),!1})}),this._adman.start(e.AD_TYPE),t)return i&&i();this._isPlaying=!0,this.player.notify(r.events.PLAY),this.player.notify(r.events.PROGRESS,0),this._adsPrevTitle=document.title,this.isMvk||setDocumentTitle(getLang("global_audio_ad"))}},{key:"updateVolume",value:function(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}},{key:"deinit",value:function(e){this._adman=null,!e&&this.player.notify(r.events.AD_DEINITED)}},{key:"pause",value:function(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause(),this.player.notify(r.events.PAUSE))}},{key:"resume",value:function(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(r.events.PLAY))}},{key:"checkPlay",value:function(t,n){var i=this.player._getPlayingContextSection(),r=this._isAllowed(t),o=r.type,a=r.reason,s=function(){return n&&n()};switch(o){case e.ALLOW_ALLOWED:this._fetchAd(t,i,!1,s);break;case e.ALLOW_DISABLED:s();break;case e.ALLOW_REJECT:this._fetchAd(t,i,!0,!1,a),s()}}},{key:"_isAllowed",value:function(t){if(vk.widget)return{type:e.ALLOW_DISABLED};if((0,o.isPodcast)(t))return{type:e.ALLOW_DISABLED};if(window.browser&&window.browser.safari)return{type:e.ALLOW_DISABLED};if(cur.adsPreview)return{type:e.ALLOW_ALLOWED};var n=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(n){if(!n.enabled)return{type:e.ALLOW_DISABLED};if(n.day_limit_reached)return{type:e.ALLOW_REJECT,reason:e.REJECT_REASON_LIMIT};var i=this.player._getPlayingContextSection();return n.sections.indexOf(i)>-1?{type:e.ALLOW_ALLOWED}:{type:e.ALLOW_REJECT,reason:e.REJECT_REASON_SECTION}}return{type:e.ALLOW_REJECT,reason:e.REJECT_REASON_UNKNOWN}}},{key:"startPlay",value:function(e,t,n){var i=this;this._startAdsTO&&(0,a.clearWorkerTimeout)(this._startAdsTO),t?this._startAdsTO=(0,s.setWorkerTimeout)(function(){return i.checkPlay(e,n)},200):this.checkPlay(e,n)}}]),e}();t.AudioAds=u,u.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",u.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},u.AD_TYPE="preroll",u.ALLOW_DISABLED=1,u.ALLOW_ALLOWED=2,u.ALLOW_REJECT=3,u.REJECT_REASON_UNKNOWN="unknown",u.REJECT_REASON_LIMIT="track_limit_exceeded",u.REJECT_REASON_SECTION="section_not_allowed"},XK78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLongpollConnect=function(e,t){var n=!!e.stopped,i={id:e.id,key:e.key,ts:e.ts,url:e.url,lpstat:e.lpstat||0,version:e.version||l,mode:s,waitTimeout:2,waitAbortFns:[],isStoppedFn:function(){return n},onResult:function(e){e.ts&&a(i.ts,e.ts,function(e){return e.map(function(e){switch(e[0]){case 0:return o.deleteEvent(e);case 1:return o.replaceFlagsEvent(e);case 2:return o.setFlagsEvent(e);case 3:return o.resetFlagsEvent(e);case 4:return o.addMessageEvent(e);case 5:return o.editMessageEvent(e);case 6:return o.readInboundEvent(e);case 7:return o.readOutboundEvent(e);case 8:return o.gotOnlineEvent(e);case 9:return o.gotOfflineEvent(e);case 10:return o.resetDirectoriesEvent(e);case 11:return o.replaceDirectoriesEvent(e);case 12:return o.setDirectoriesEvent(e);case 13:return o.deleteDialogEvent(e);case 18:return o.replaceMessageEvent(e);case 51:return o.chatChangedEvent(e);case 52:return o.chatUpdatedEvent(e);case 63:return o.typingEvent(e);case 64:return o.recordingAudioEvent(e);case 70:return o.videoCallEvent(e);case 80:return o.unreadCountEvent(e);case 114:return o.notifySettingsChangedEvent(e);case 116:return o.refreshMessageEvent(e);case 117:return o.audioStartEvent(e);case-1:return o.resyncEvent();case-2:return o.refreshLpKeyEvent(e);case c:return o.waitingForReconnectEvent(e);case d:return o.reconnectingEvent();case A:return o.reconnectedEvent();default:return o.emptyEvent(e)}})}(e.updates))},onData:m(t.onData),onRequestError:m(t.onRequestError),onHistoryLost:v(t.onHistoryLost),onKeyExpired:v(t.onKeyExpired),onLpBroken:v(t.onHistoryLost)},r=t.onEvents;function a(e,t,n){i.ts=t;for(var a=0;a<n.length;++a)n[a].type===o.REFRESH_LP_KEY&&(i.key=n[a].key,i.url=n[a].url);r(e,t,n)}var u={options:i,isStopped:function(){return n},stopConnection:function(){n=!0,i.stopFn&&i.stopFn(),i.stopFn=void 0,this.abortWaiting()},reinitConnection:function(){this.stopConnection(),h(i,d),n=!1,_(i)},abortWaiting:function(){i.waitAbortFns.forEach(function(e){return e()}),i.waitAbortFns=[],i.waitTimeout=2},onLp:a};return _(i),u};var i=n("DM26"),r=n("BxOC"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("f01n"));function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=202,l=7,u=4,c=-3,d=-4,A=-5;function f(e,t){e.waitAbortFns.push(t)}function p(e){if(e.isStoppedFn())return Promise.resolve({ts:0,updates:[]});var t=(0,r.plaingetCancelable)(e.url,{act:"a_check",key:e.key,version:e.version,ts:e.ts,wait:25,mode:e.mode}),n=t.request,o=t.cancel;return e.stopFn=o,n.then(function(t){var n=a(t,2),i=n[0],r=n[1];return e.onData(e,r),e.waitTimeout=2,JSON.parse(i)}).catch(function(t){var n=a(t,2),i=(n[0],n[1]);throw e.onData(e,i),""}).then(function(t){return function(e,t){var n=t.failed?(0,i.abortablePause)(u,null):{},r=n.abort,o=n.pause;switch(t.failed){case 1:return f(e,r),e.onHistoryLost(e,t).then(function(){return e.onResult({ts:t.ts,updates:[[-1]]})}).then(o).then(function(){return p(e)});case 2:return f(e,r),e.onKeyExpired(e,t).then(function(t){var n=a(t,4),i=n[0],r=n[1],o=n[2],s=n[3];return e.onResult({ts:+s,updates:[[-2,i,"".concat(r,"/").concat(o)],[-1]]})}).then(o).then(function(){return p(e)});case 3:return e.onLpBroken(e,t);default:return t}}(e,t)})}function _(e){e.isStoppedFn()||p(e).then(e.onResult).then(function(){return e.isReconnecting&&h(e,A)}).catch(function(t){return function(e,t){if(e.isStoppedFn())return;e.onRequestError(t),e.waitTimeout=Math.min(60,2*e.waitTimeout),h(e,c);var n=(0,i.abortablePause)(e.waitTimeout,null),r=n.abort,o=n.pause;return f(e,r),o().then(function(){return h(e,d)})}(e,t)}).then(function(){return _(e)})}function h(e,t){e.isReconnecting=t===d,e.onResult({ts:e.ts,updates:[[t,e.waitTimeout]]})}function m(e){return e||function(){}}function v(e){return e?function(){return Promise.resolve(e.apply(void 0,arguments))}:function(){return Promise.reject()}}},XLP4:function(e,t,n){"use strict";var i=window,r=i.Friends,o=i.domData,a=i.FeedAssistanceStats,s=i.getLang;window.FeedAssistanceImportContacts={importContacts:function(e,t,n){if(!window.XMLHttpRequest||n)return;var i=o(e,"service-id");return window.open(t),l[i]=e,!1}};var l={},u="feedAssistanceImportContacts__desc",c=!1;a.registerTrackingCls("feedAssistance_importContacts"),a.onStartViewElement(function(e){a.getElementType(e)===a.BLOCKS.BLOCK_TYPE_IMPORT_CONTACTS&&(c=!0)}),r.onImportSuccess(function(){var e=arguments[0],t=arguments[2],n=l[e];n&&(geByClass1(u,n).textContent=s("mobile_join_friends_found_count",t));c&&a.dispatchEvent({type:a.EVENTS.EVENT_FEED_ASSISTANCE,data:a.serializeEventData(a.EVENTS.EVENT_FEED_ASSISTANCE,n,"m_mp",a.EVENTS.SUB_EVENT_FILLED)})}),r.onImportFailed(function(e){var t=l[e];t&&(geByClass1(u,t).textContent=s("mobile_friends_import_error"))})},XLUH:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStatsPlayerAdapter=t.APP_STATE=t.FULL_SCREEN_STATE=t.BACKGROUND_STATE=t.UNKNOWN_STATE=void 0;t.UNKNOWN_STATE=0;t.BACKGROUND_STATE=1;t.FULL_SCREEN_STATE=2;t.APP_STATE=3;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.listeners=[]}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"listen",value:function(e,t,n){var i=t.bind(n||this);this.listeners.push({event:e,fn:t,listener:i}),this.playerListen(e,i)}},{key:"unListen",value:function(e,t){var n=-1;if(each(this.listeners,function(i,r){if(r.event===e&&r.listener===t)return n=i,!1}),!(n<0)){var i=this.listeners[n];this.playerUnListen(e,i.listener),this.listeners.splice(n,1)}}},{key:"unListenAll",value:function(){for(var e;e=this.listeners[0];)this.unListen(e.event,e.listener)}},{key:"listenPlay",value:function(e,t){this.listen("play",e,t)}},{key:"listenPause",value:function(e,t){this.listen("pause",e,t)}},{key:"listenProgress",value:function(e,t){this.listen("progress",e,t)}},{key:"listenVolume",value:function(e,t){this.listen("volume",e,t)}},{key:"listenSeek",value:function(e,t){this.listen("seek",e,t)}},{key:"listenPlaylistChanged",value:function(e,t){this.listen("pl_changed",e,t)}},{key:"listenEnded",value:function(e,t){this.listen("ended",e,t)}},{key:"listenPlayNext",value:function(e,t){this.listen("play_next",e,t)}},{key:"listenAdCompleted",value:function(e,t){this.listen("ad_completed",e,t)}},{key:"playerListen",value:function(e,t){this.player.on(e,t)}},{key:"playerUnListen",value:function(e,t){this.player.off(e,t)}},{key:"useNewStats",value:function(){return!1}},{key:"getPausedBy",value:function(){return null}},{key:"getState",value:function(){return document.hidden?1:3}},{key:"getProgress",value:function(){return this.player.playerGetProgress()}},{key:"getProgressInSeconds",value:function(){return this.player.getProgressInSeconds()}},{key:"getVolume",value:function(){return this.player.getVolume()}},{key:"getAudioId",value:function(){return this.player.getAudioId()}},{key:"getAudioTrackCode",value:function(){return this.player.getAudioTrackCode()}},{key:"getPrevAudioId",value:function(){return this.player.getPrevAudioId()}},{key:"getPrevPlaylistId",value:function(){return this.player.getPrevPlaylistId()}},{key:"getPlaylistId",value:function(){return this.player.getPlaylistId()}},{key:"getContext",value:function(){return this.player.getContext()}},{key:"getSequence",value:function(){return this.player.getSequence()}},{key:"getType",value:function(){return this.player.getType()}},{key:"getListenedTime",value:function(){return this.player.getListenedTime()}},{key:"getSearchParams",value:function(){return this.player.getSearchParams()}},{key:"isPlaying",value:function(){return this.player.isPlaying()}},{key:"isAutoPlayed",value:function(){return this.player.isAutoPlayed()}},{key:"isRepeatCurrentAudio",value:function(){return this.player.isRepeatCurrentAudio()}},{key:"isRepeatAll",value:function(){return this.player.isRepeatAll()}},{key:"isShuffledPlaylist",value:function(){return this.player.isShuffledPlaylist()}},{key:"isRealPlaylist",value:function(){return this.player.isRealPlaylist()}},{key:"isRealPrevPlaylist",value:function(){return this.player.isRealPrevPlaylist()}},{key:"isPodcast",value:function(){return this.player.isPodcast()}},{key:"isAdPlaying",value:function(){return this.player.ads.isPlaying()}},{key:"isLastTrack",value:function(){return this.player.isLastTrack()}},{key:"hasPrevAudio",value:function(){return this.player.hasPrevAudio()}},{key:"hasPrevPlaylist",value:function(){return this.player.hasPrevPlaylist()}},{key:"hasPlaylist",value:function(){return this.player.hasPlaylist()}},{key:"hasSearchParams",value:function(){return this.player.hasSearchParams()}},{key:"isDebug",value:function(){return!1}},{key:"sendListenedData",value:function(e){return this.player.sendListenedData(e)}}]),e}();t.AudioStatsPlayerAdapter=r},XRdp:function(e,t,n){"use strict";n("B34N")},XUaJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.close=function(e,t){t&&t.preventDefault(),ModalMenu.close(e),r.default.post("/groups",{_ajax:1,act:"hide_warning_notification",notification_id:(0,i.domData)(e,"id"),group_id:(0,i.domData)(e,"gid"),hash:(0,i.domData)(e,"hash")})},t.leave=function(e,t){t&&t.preventDefault(),ModalMenu.close(e),$("#m .header__back").click()};var i=n("OcsD"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("kr3z"))},Xeoq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showCaptcha=function(e,t){a.default.open({body:u(e),title:lang.mobile_captcha_enter_code,confirmText:lang.mobile_captcha_send_btn,cancelText:lang.mobile_cancel,class:"MailCaptcha__dialog",onConfirm:function(n,i){var s=(0,r.$)('[name="'.concat(e.key,'"]'),i);s=s&&s.value||"",a.default.close(),(0,o.mailRequest)(e.location,Object.assign({},e.post,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},e.key,s))).then(function(e){t(Promise.resolve(e))},function(e){t(Promise.reject(e))})},onClose:function(){a.default.close(),t(null)}})},t.renderBody=u;var i=l(n("TYsd")),r=n("UxAg"),o=n("qHA9"),a=l(n("iS9e")),s=l(n("p5n7"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return i.default.html({inner:[{class:"captcha_img",src:e.img,tag:"img"},{inner:[(0,s.default)({name:e.key})],class:"MailCaptcha__input",tag:"div"}],class:"MailCaptcha__box",tag:"div"})}},XlF1:function(e,t,n){"use strict";var i=window.Popup,r=window.Btn;window.AuthCheck={},AuthCheck._onDropConfirmationClick=s,AuthCheck._onResetSessionSubmit=l,AuthCheck._onCurBrowserDropClick=u;var o={popupByIndex:function(e){return".AuthCheck__popup_index_".concat(e)},dropConfirmation:function(e){return'.AuthCheck__dropConfirmation[data-index="'.concat(e,'"]')},dropConfirmationSubmit:".AuthCheck__dropConfirmationSubmit"},a={dropConfirmationSuccess:"AuthCheck__dropConfirmation_success"};function s(e){var t=$(o.popupByIndex(e));i.open(t)}function l(e,t){e.preventDefault();var n=e.target,s=$('iframe[name="'.concat(e.target.target,'"]')),l=n.$(o.dropConfirmationSubmit);n.submit(),r.setLoading(l,!0),addEvent(s,"load",function(){$(o.dropConfirmation(t)).classList.toggle(a.dropConfirmationSuccess),i.close(),r.setLoading(l,!1)})}function u(e){var t=e.$btn;r.setLoading(t,!0),ajax.click(t,{onDone:function(){$(o.dropConfirmation("0")).classList.toggle(a.dropConfirmationSuccess),i.close(),r.setLoading(t,!1)}})}},Xrg9:function(e,t,n){"use strict";function i(){return void 0!==window.localStorage&&null!==window.localStorage&&void 0!==window.JSON}function r(e){try{localStorage.removeItem(e)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={checkVersion:i,remove:r,get:function(e){if(!i())return!1;try{return JSON.parse(localStorage.getItem(e))}catch(e){return!1}},set:function(e,t){r(e);try{return!!i()&&localStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}}};t.default=o},Y6JH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("1HYu")).default;t.default=i},YBdB:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r=1,o={},a=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){c(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&c(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){c(e.data)},i=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;i=function(t){var n=s.createElement("script");n.onreadystatechange=function(){c(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():i=function(e){setTimeout(c,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[r]=a,i(r),r++},l.clearImmediate=u}function u(e){delete o[e]}function c(e){if(a)setTimeout(c,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{u(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("yLpj"),n("8oxB"))},YDEi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uConvo_getLastMsg=p,t.uConvo_getOnline=d,t.uConvo_getUnreadCount=A,t.uConvo_getTyping=_,t.uConvo_msgPreview=c,t.uConvo_getLastMsgId=f,t.default=void 0;l(n("bZ/P"));var i=l(n("TYsd")),r=(l(n("Mc5h")),l(n("s0aB"))),o=n("7jQU"),a=n("/Id8"),s=n("fdw3");function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="last"===t,i=store.mail,o=i.peers[e],a=o.url,s=null;if(t){var l;n||(a="".concat(a,"&msg=").concat(t)),(l=n?p(e):i.msgs[t])&&(s={text:c(l),date:l.dateShort,unreadCount:A(e),muted:o.isMuted,typing:_(e),pending:l.pending,failed:l.failed})}return(0,r.default)({id:e,url:a,photos:o.avatarImages,title:o.title,online:d(o),important:o.isImportant,profileUrl:o.profileUrl,isLast:n,more:s})};function c(e){var t=window.lang,n=store.mail,r=!!e.attaches.call;if(e.isService&&!r)return i.default.html({tag:"span",inner:[i.default.wrap(e.serviceText)]});var o=e.body?i.default.wrap((0,a.Msg__textPreview)(e.body)):function(e){return{tag:"span",class:"convo__msgAttach",inner:(0,a.Msg__attachPreview)(e)}}(e),l="";return e.authorId===n.cur.userId&&e.peerId!==n.cur.userId?l=t.mobile_mail_you:(0,s.isChatPeer)(e.peerId)&&(l=(l=n.members[e.authorId].shortName).replace(/\.$/,"")),l&&(l+=": "),i.default.html({tag:"span",inner:[i.default.wrap(l),o]})}function d(e){return!!e.isOnline&&("desktop"===e.onlinePlatform?"desktop":"mobile")}function A(e){var t=function(e){return store.mail.peers[e]}(e).countUnread;if(0===t){var n=store.mail,i=p(e);i&&i.isUnread&&i.authorId===n.cur.viewerId&&(t=-1)}return t}function f(e){var t=store.mail,n=t.rolls.peer[e],i=t.presend&&t.presend.pending[e],r=t.presend&&t.presend.failed[e];if(i&&i.length)for(var o=i.length-1;o>=0;o--){var a=i[o];if(-1===a.indexOf("edit"))return a}if(r&&r.length)for(var s=r.length-1;s>=0;s--){var l=r[s];if(-1===l.indexOf("edit"))return l}return n&&n.length?last(n):null}function p(e){var t=store.mail.msgs,n=store.mail.presend,i=n&&n.msgs,r=f(e);return i&&i[r]?i[r]:r?t[r]:null}function _(e){var t,n,i=(0,o.uTyping_getPeerTyping)(e),r=i&&1===i.count&&i.users[0]===e;return i?("mixed"===i.type?(t="simple-dots",n="mixed"):"audio"===i.type?(t="audio",n="audio"):"text"===i.type&&(t="simple-dots",n=""),{typing:!!r||(0,o.uTyping_getNames)(i),typingCount:i.count,animation:t,text:n,dimmed:!1,compact:!0}):""}t.default=u},Yaig:function(e,t,n){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={_onCloseClick:function(e){e.stopPropagation(),e.preventDefault(),remove(geByClass1(r.class.btn))},class:{btn:"FloatBtn"}};r.class=i({},r.class,{open:r.class.btn+"_open"});var o=r;t.default=o},YhgQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TuGt")),r=n("OcsD"),o=n("fKzu");var a,s=["/restore","/login","/authorize*","/join*","/","/settings","/album*","/terms","/privacy","/payments*","/attachments*","/page*","/blog*","/about","/privacy","/jobs","/dev","/legal","/data_protection","/safety","/activation*","/licence","/agelimits"];function l(){a&&a.classList.remove(i.default.class.open)}function u(){a&&a.classList.add(i.default.class.open)}onDOMReady(function(){!function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,r.isIosWebView)()||(0,r.isAndroidWebView)()||(0,r.isVkWebView)()||(n||(a=geByClass1(i.default.class.btn),page.onChange(e.bind(this))),t=t?t.split("?")[0]:nav.path,!/^\/photo/.test(t)&&l(),(0,o.isForbiddenPage)(t,s)||nav.getQuery("z")?l():u())}(null,!1)});var c={_onCloseClick:function(e){i.default._onCloseClick(e),setCookie("remixregbtn",0,0)},show:u,hide:l};t.default=c},YvCB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setWorkerTimeout=function(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);var n=new Blob(["\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ".concat(t,");\n        }\n      }\n    ")]);try{var i=new Worker(window.URL.createObjectURL(n));return i.onmessage=function(){i.terminate(),e()},i.postMessage("start"),i}catch(n){return setTimeout(e,t)}}},Ziv7:function(e,t,n){"use strict";var i=n("UxAg"),r=S(n("+cqQ")),o=S(n("bZ/P")),a=S(n("TYsd")),s=S(n("jk6M")),l=S(n("rKp0")),u=(S(n("Mc5h")),S(n("gy8s"))),c=(S(n("u33z")),D(n("V4qE"))),d=D(n("HGMY")),A=S(n("/Id8")),f=D(n("t7Ww")),p=S(n("r/ag")),_=S(n("29dZ")),h=n("hOuX"),m=n("9M99"),v=D(n("sdz3")),g=n("MjTa"),y=n("hw56"),w=n("j80l"),b=S(n("wcVR")),E=D(n("dVvW")),k=n("DgYJ"),C=D(n("HdGT"));n("qHA9");function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}Object.assign(E.default,{onToBottomClick:(0,r.default)(),onAttachedMsgsRemove:(0,r.default)(),onReplyClose:(0,r.default)(),onMessage:(0,r.default)(),showToBottom:function(){if(R)return;F&&(clearTimeout(F),F=null);addClass("uMailWrite__toBottom_visible",(0,i.$)(".uMailWrite__toBottom"))},hideToBottom:function(){clearTimeout(j),F=setTimeout(function(){removeClass("uMailWrite__toBottom_visible",(0,i.$)(".uMailWrite__toBottom"))},100)},preventShowToBottom:function(){R=!0,setTimeout(function(){R=!1},300)},openStickersPanel:ee,redrawReply:Ae,uiRedrawAttachments:fe,redrawToBottom:function(){(0,i.$$)(".uMailWrite__toBottom").forEach(function(e){return e.innerHTML=(0,E.uMailWrite_ToBottomInner)()})},drawStickers:K,setModifiers:function(e){(0,i.$$)(".uMailWrite").forEach(function(t){var n=o.default.parseClass("uMailWrite",t.getAttribute("class"));t.setAttribute("class",o.default.class("uMailWrite",Object.assign({},n,e)))})},hideStickersPanel:Z,setText:Ie,renderKeyboardIfNeeded:Oe,openKeyboard:Be,init:function(){var e=store.mail,t=e.cur,n=(e.msgs,e.pendingReplies),r=t&&(0,y.getPeerDraft)(t.viewerId,t.peerId);r&&!t.editing&&r.text&&function(e){var t=document.createElement("textarea");t.innerHTML=e;var n=t.value;(0,i.$$)(".uMailWrite__textarea").forEach(function(e){return e.value=n});var r=(0,i.$)(".uMailWrite__textareaGhost");r.innerText=n,"\n"===last(n)&&(r.innerHTML+="&nbsp;");$()}(r.text);"templates"===(0,y.getKeyboardType)()?se():Oe();(function(){var e=store.mail,t=e.cur,n=e.presend,i=e.pendingReplies,r=[],o=n.failed[t.peerId]||[],a=n.pending[t.peerId]||[];(o.length||a.length)&&(o.concat(a).map(function(e){var t=n.msgs[e];if(t)if(0===t.sendId.indexOf("edit"))E.default.onMessage(t);else{if(t.reply){var o=A.default.getReplyDataFromHTML(t.reply);o&&(i[t.reply]=o)}r.push(t)}}),d.setMsgs(r))})(),W(),r&&!t.editing&&Array.isArray(r.msgs)&&(t.msgAttached[t.peerId]=r.msgs);if(r&&!t.editing&&isFinite(r.reply)){var o=A.default.getReplyDataFromHTML(r.reply);o&&(t.msgReply[t.peerId]=r.reply,n[r.reply]=o)}Ae(),fe(t.peerId),(0,i.$$)(".uMailWrite__textarea").forEach(function(e){(0,g.setScrollView)(e,{topBanner:!1,overscrollY:!1})}),(0,i.$$)(".uMailWrite__attachments").forEach(function(e){(0,g.setScrollView)(e,{topBanner:!1,allowY:!1})})},reset:function(){(0,y.setKeyboardType)("")},loadTemplatePage:function(e,t,n){e.preventDefault(),uMessenger.loadMailPage(n)}}),uVK.onReady(q),E.default._onBlur=ke,E.default._onKeyUp=he,E.default._onKeyDown=we,E.default._onFocus=Ee,E.default._onInput=me,E.default._onSubmit=pe,E.default._onClick=be,E.default._onAttachClick=ue,E.default._onStickersClick=J,E.default._onKeyboardClick=te,E.default._onKeyboardButtonClick=ne,E.default._onDeleteTemplate=Re,E.default._onConfirmDeleteTemplate=Fe,E.default._onSendTouchEnd=_e,E.default._onRetryFailedMsg=Ve,E.default._onDeleteFailedMsg=ze,E.default._onCancelPendingMsg=$e,E.default._onConfirmSendGeo=ie,mediaUpload.onRemove(Y),mediaUpload.onComplete(X),mediaUpload.onStart(G),mediaUpload.onError(Q),post.onStickersTabSelected(ce),post.onStickerClick(de),C.onSent(He),C.onErrorMessage(qe),A.default.onPendingClick(Ue),u.default.onOpen("uMailWrite_attachments")(z),E.default.onToBottomClick(function(){var e=(0,i.$)(".uMailWrite__toBottom_visible");e&&e.classList.remove("uMailWrite__toBottom_visible"),l.default.removeDivider()}),E.default.onReplyClose(function(){var e=store.mail.cur;e.msgReply[e.peerId]=null,(0,y.setPeerDraft)(e.viewerId,e.peerId,{reply:void 0},e.editing),e.editing||ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),Ae()}),E.default.onTemplateClick=function(e,t,n){var i;n&&(store.mail.cur.templates.some(function(e){if(e.id===n)return i=e,!0}),i&&Ie((0,k.prepareTemplateText)(i.text)))},Mention.onOpen(function(){if(store.mail.cur){var e=store.mail.cur,t=e.peerMembers,n=e.peerId;t[n]||(t[n]=!0,ajaxRequest("/mail",{act:"get_members",peer_id:n},function(e){Object.assign(store.mail.members,e);var t=ve(n);Mention.update({items:t,defaultItems:t})},function(){t[n]=!1}))}});var T,M,P="uMailWrite__popupAttach_open",I="uMailWrite__popupStickers_open",x="uMailWrite__keyboard_open",O="uMailWrite__templates_open",L=!1,B={canAttachPoll:"uMailWrite_canAttachPoll"},N={mailWrite:".uMailWrite",pollAttachment:".attachment_type_poll"},R=!1,F=null,j=null,H=[],U=debounce(De,100),V=debounce(Ce,1e3);function z(){function e(e,t){return e=e.replace(/&edit_msg_id=\d+/,"").replace(/=mailedit(-?\d+)/,"=mail$1"),store.mail.cur.editing&&(e=e.replace(/=mail(-?\d+)/,"=mailedit$1"),e+=t?"&edit_msg_id="+store.mail.cur.editing:""),e}(0,i.$$)("a.Unfold__item").forEach(function(t){var n=e(t.getAttribute("href"),!0);t.setAttribute("href",n)}),(0,i.$$)("input.inline_upload").forEach(function(t){t.setAttribute("data-upload-url",e(t.getAttribute("data-upload-url")))})}function $(){var e=(0,i.$)(".uMailWrite__textareaGhost").offsetHeight;(0,i.$$)(".uMailWrite__textarea").forEach(function(t){return setStyle(t,"height",e)}),(0,i.$$)(".uMailWrite__main").forEach(function(t){return setStyle(t,"height",e)}),De()}function q(){if("/mail"===location.pathname||0===location.pathname.indexOf("/write")){var e=store.mail.cur;if(e&&e.peerId){var t=geBySel(".uMailWrite__attachments .medias_thumb").length,n=geBySel(".uMailWrite__attachments .medias_row").length,r=(e.msgAttached[e.peerId]||[]).length?1:0;e.hasAttachments=t+n+r>0,(0,i.$$)(".uMailWrite__attachments").forEach(function(t){toggleClass("uMailWrite__attachments_hasAttachments",t,e.hasAttachments)}),function(){var e=(0,i.$)(".uMailWrite__buttonAttach");if(!e)return;var t=function(){var e=(0,i.$)(".uMailWrite__attachments");return e?e.$$(".thumb_item").length+e.$$(".medias_row").length-e.$$(".fwd_item").length:0}()>=10;e.classList.add("uMailWrite__button_disabled",t),t?e.addEventListener("mousedown",Pe,!0):e.removeEventListener("mousedown",Pe,!0)}()}}}function W(){var e=store.mail.cur;e&&e.peerId&&(H=ve(e.peerId),Mention.init({defaultItems:H,items:H,appendTo:geByClass1("uMailWrite__main"),url:null,params:{},preferDomain:!0,afterInsert:function(t){var n=(0,i.$)(".uMailWrite__textareaGhost"),r=t.value;n.innerText=r,$(),Ce(r,e.viewerId,e.peerId)}}))}function Y(e){if(store.mail.cur){var t=store.mail,n=t.cur,r=t.peers,o=n.peerId;if(o&&(r[o].attachmentsHTML=geBySel1(".uMailWrite__attachments_".concat(o," .cp_attached_wrap")).outerHTML,fe(o)),e.closest(N.pollAttachment))(0,i.$)(N.mailWrite).classList.add(B.canAttachPoll)}}function G(){store.mail.cur&&(q(),De())}function Q(){if(store.mail.cur){var e=store.mail,t=e.cur,n=(e.peers,t.peerId);n&&(fe(n),Messenger.scrollConvoToBottom())}}function X(){var e=store.mail,t=e.cur,n=e.peers;if(t){var i=t.peerId;i&&(n[i].attachmentsHTML=geBySel1(".uMailWrite__attachments_".concat(i," .cp_attached_wrap")).outerHTML,De())}}function K(){var e=store.mail.cur,t=(0,i.$)(".uMailWrite__popupStickers");e&&t&&!t.childElementCount&&(t.innerHTML=e.stickersPanelHTML.replace(/mail0/g,"mail".concat(e.peerId)),(0,i.$$)(".sp_body",t).forEach(function(e){(0,g.setScrollView)(e,{topBanner:!1})}),(0,i.$$)(".scroller_wrap",t).forEach(function(e){(0,g.setScrollView)(e,{topBanner:!1,allowY:!1})}),post.stickersSelectTab(null,-1))}function J(e){var t=(0,i.$)(".uMailWrite__popupStickers"),n=hasClass(I,t);e.preventDefault(),K(),Ne("stickers"),n?Z():ee()}function Z(){"stickers"===(0,y.getKeyboardType)()&&(0,y.setKeyboardType)("");var e=(0,i.$)(".uMailWrite__popupStickers");removeClass(I,e),Se(!1);var t=ge("stickers_panel");t&&"block"===t.style.display&&(t.style.display="none")}function ee(){(0,y.setKeyboardType)("stickers");var e=(0,i.$)(".uMailWrite__popupStickers");addClass(I,e),post.stickersInit(),Se(!0)}function te(e){var t=(0,i.$)(".uMailWrite__keyboard"),n=hasClass(x,t);e.preventDefault(),Ne("buttons"),n?re({store:!0}):oe({store:!0})}function ne(e,t,n){var i,r=n.authorId,a=n.action,s=a.type,l=a.payload,u=a.rawLabel,d=store.mail,A=d.cur,f=d.members,p=d.peers,m=f[r],v=p[A.peerId],g=(0,h.random)();if(A.peerId>=2e9)if(m.domain)i="@".concat(m.domain," ").concat(u);else{var y=m.url.replace(/^\//,"");i="@".concat(y," (").concat(m.firstName,") ").concat(u)}else i=u;if(statlogsValueEvent("message_send_from_keyboard",0,A.viewerId,A.peerId,r),"vkpay"!==s)if("open_app"!==s){if("location"!==s)Me({act:"send",to:A.peerId,from:"dialog",hash:v.hashSend,message:i,media:"",_af:A._af,random_id:g,payload:l});else b.default.init()?(_.default.setLoading(e,!0,"blue"),b.default.getCurrentPosition(function(t){var n=t.coords,i=n.latitude,r=n.longitude;_.default.setLoading(e,!1),MailDialog.open({body:lang.mobile_mail_geo_send_question,confirmText:lang.mobile_mail_geo_send_confirm,cancelText:lang.mobile_cancel,onConfirm:o.default.onClick("uMailWrite._onConfirmSendGeo",i,r,l)})},function(){_.default.setLoading(e,!1),c.init({text:lang.mobile_mail_geo_not_available})},{maximumAge:100,enableHighAccuracy:!0,timeout:1e4})):c.init({text:lang.mobile_mail_geo_not_available})}else{var E=n.action,k=E.app_id,C=E.hash,D=(0,w.makeUrl)("/app".concat(k),{from:nav.cur.slice(1)});nav.hard_go("".concat(D,"#").concat(C))}else{var S=n.action.hash,T=(0,w.makeUrl)("/app6217559",{from:nav.cur.slice(1)});nav.hard_go("".concat(T,"#").concat(S))}}function ie(e,t,n){var i=store.mail,r=i.cur,o=i.peers[r.peerId],a=(0,h.random)();Me({act:"send",to:r.peerId,from:"dialog",hash:o.hashSend,message:"",media:"",_af:r._af,random_id:a,payload:n,attach1_type:"map",attach1:"".concat(e,"_").concat(t)}),MailDialog.close()}function re(e){"buttons"===(0,y.getKeyboardType)()&&(0,y.setKeyboardType)("");var t=(0,i.$)(".uMailWrite__keyboard");if(removeClass(x,t),Te(!1),e&&e.store){var n=store.mail.cur.peerId,r=store.mail.peers[n];r&&r.keyboard&&(T[n]=r.keyboard.chat_local_id,lsSet("mail_keyboard_hidden",T))}}function oe(e){(0,y.setKeyboardType)("buttons");var t=(0,i.$)(".uMailWrite__keyboard"),n=e&&e.forceRender;addClass(x,t),Te(!0);var r=(0,y.getKeyboardState)(store.mail.cur.peerId);!n&&!!r.rendered||function(){var e=store.mail,t=e.cur,n=e.peers,r=t.peerId&&n[t.peerId];if(!r||!r.keyboard||!r.keyboard.buttons)return;var o=r.keyboard.buttons.map(function(e){var t=e.map(function(e){return(0,E.uMailWrite_KeyboardButton)(e,r.keyboard)});return(0,E.uMailWrite_KeyboardRow)(t.join(""))}).join(""),a=(0,i.$)(".uMailWrite__keyboard");a.innerHTML=o,(0,g.setScrollView)(a,{topBanner:!1}),(0,y.getKeyboardState)(t.peerId).rendered=!0}(),e&&e.store&&ae()}function ae(){var e=store.mail.cur.peerId;T&&(delete T[e],lsSet("mail_keyboard_hidden",T))}function se(){(0,y.setKeyboardType)("templates");var e=(0,i.$)(".uMailWrite__templates");addClass(O,e),De(),Le()}function le(){"templates"===(0,y.getKeyboardType)()&&(0,y.setKeyboardType)("");var e=(0,i.$)(".uMailWrite__templates");removeClass(O,e),De()}function ue(e){var t=(0,i.$)(".uMailWrite__popupAttach"),n=(0,i.$)(".uMailWrite__popupStickers");e.preventDefault(),e.stopPropagation(),hasClass(I,n)&&removeClass(I,n),hasClass(P,t)?removeClass(P,t):(addClass(P,t),addEvent(window,"click",function e(n){removeClass(P,t);removeEvent(window,"click",e)}))}function ce(){store.mail.cur&&(geByClass1("sp_body")&&(cur.scroller&&cur.scroller.destroy(),geByClass1("sp_body").scrollTop=0,removeClass("scroller_wrap",geByClass1("sp_cont")),geByClass("sp_page").forEach(function(e){return removeClass("scroller_page",e)})))}function de(e,t){if(store.mail.cur){var n=store.mail,r=n.cur,o=n.peers,a=(geByClass1("uMailWrite"),(0,i.$)(".uMailWrite__popupStickers")),s=(0,h.random)(),l=0===t.indexOf("suggestion"),u={act:"send",to:r.peerId,from:"dialog",hash:o[r.peerId].hashSend,message:"",media:"sticker".concat(e),_af:r._af,random_id:s,sticker_referrer:t},c=r.msgReply[r.peerId];if(c&&(u.attached_messages=c,u.has_reply=!0,(0,y.setPeerDraft)(r.viewerId,r.peerId,{reply:void 0}),ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),r.msgReply[r.peerId]=null),l){var d=(0,i.$)(".uMailWrite__textarea");d.value="",Ce("",r.viewerId,r.peerId),me({},d)}return Me(u),De(),Ae(),L&&(removeClass(I,a),Se(!1)),!0}}function Ae(){var e=store.mail,t=e.cur,n=e.replies,r=t.msgReply[t.peerId],o="";if(t.editing){var a=n[r];a&&(o=a.preview_url)}else{var s=r&&A.default.getElem(r);if(s){var l=(0,i.$)(".thumbs_map .thumb_map_img_as_div",s);(o=l&&l.style.backgroundImage)&&(o=o.replace(/^url\((['"])?/,"").replace(/(['"])?\)$/,""))}}(0,i.$$)(".uMailWrite__reply").forEach(function(e){e.outerHTML=(0,E.uMailWrite_Reply)(o)})}function fe(e){(0,i.$$)(".uMailWrite__attachments_".concat(e)).forEach(function(t){t.outerHTML=(0,E.uMailWrite_Attachments)(e)}),q(),(0,i.$)(".uMailWrite__textarea")&&De();var t=(0,i.$)(N.mailWrite);if(t){var n=!!t.$(N.pollAttachment);t.classList.toggle(B.canAttachPoll,!n)}}function pe(e){if(e&&e.preventDefault(),!mediaUpload.checkUploading())return!1;var t=(0,i.$)(".uMailWrite__textarea"),n=store.mail,r=n.cur,o=n.peers,a=(0,h.random)(),u=store.mail.cur.editing,c=u&&store.mail.msgs[u],d=c?{act:"edit_message",id:u,peerId:c.peerId,hash:o[r.peerId].hashSend}:{act:"send",to:r.peerId,from:"dialog",hash:o[r.peerId].hashSend,_af:r._af,random_id:a,entrypoint:store.mail.cur.mvk_entrypoint||""};if(!xe())return c?MsgDeleteDialog.open({isEditing:!0}):r.groupId&&function(){var e=(0,i.$)(".uMailWrite__templates");Ne("templates"),hasClass(O,e)?le():se()}(),!1;each(geByClass1("uMailWrite"),function(e,t){return!(t.name&&!t.disabled)||("radio"===t.type&&!t.checked||("checkbox"===t.type&&!t.checked||("button"===t.type||("submit"===t.type||("image"===t.type||void(d[t.name]=t.value))))))}),u?(uMailHat.onCancelEditing(!0),Me(d)):(Me(d),store.mail.cur.mvk_entrypoint="",(0,y.popPeerAttachments)(r.peerId),t.value="",Ce("",r.viewerId,r.peerId),(0,y.setPeerDraft)(r.viewerId,r.peerId,{msgs:void 0,reply:void 0},r.editing),r.msgReply[r.peerId]&&!r.editing&&ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),r.msgAttached[r.peerId]=[],r.msgReply[r.peerId]=null,me({},t)),l.default.onSystemMessageClick(),fe(r.peerId),Ae(),StickersHints.actualizeVisibility(),s.default.safari_mobile?(t.focus(),setTimeout(function(){return t.focus()})):s.default.msie_edge||(t.focus(),requestAnimationFrame(function(){return t.focus()}))}function _e(e){s.default.msie_edge&&(e.preventDefault(),pe(e))}function he(){var e=he,t=e.typingData||(e.typingData={});if(0!==(0,i.$)(".uMailWrite__textarea").value.length&&!store.mail.cur.editing){var n=Date.now(),r=store.mail,o=r.cur,a=r.peers,s=o.peerId;s<=-2e9||t[s]&&n-t[s]<5e3||(t[s]=n,ajaxRequest("/mail",{_ajax:1,act:"typing",peer:s,hash:a[s].hashTyping,community:nav.getQuery("community")}))}}function me(e,t){var n=(0,i.$)(".uMailWrite__textareaGhost"),r=t.value;n.innerText=r,"\n"===last(r)&&(n.innerHTML+="&nbsp;");var o=store.mail.cur,a=n.offsetHeight;(0,i.$$)(".uMailWrite__textarea").forEach(function(e){return setStyle(e,"height",a)}),(0,i.$$)(".uMailWrite__main").forEach(function(e){return setStyle(e,"height",a)}),U(),o&&V(r,o.viewerId,o.peerId),ye(e,t,function(){Mention.onKeyUp(e,t)})}function ve(e){var t=store.mail,n=t.peers,i=t.members,r=t.cur,o=[],a=[];return(n[e].memberIds||[]).forEach(function(e,t){if(e!==r.viewerId){var n=i[e];if(n){var s=[n.id,n.name,n.url.replace("/","@"),n.avatar,n.url.replace("/",""),null,null,null,n.firstName,n.domain];o.push(s)}else{var l=["fake"+t,"...","@...",i[0].avatar,"",null,null,null,"...",null];a.push(l)}}}),o.concat(a)}function ye(e,t,n){H.length&&(!hasClass("Mention_inited",geByClass1("uMailWrite__main"))&&W(),n(e,t))}function we(e,t){ye(e,t,function(){Mention.onKeyDown(e,t)}),(10==e.keyCode||13==e.keyCode&&(e.ctrlKey||e.metaKey))&&pe()}function be(e,t){ye(e,t,function(){Mention.onClick(e,t)})}function Ee(e,t){(0,y.setKeyboardType)("text");var n=function(){K(),Ne("text"),StickersHints.init(),ye(e,t,function(){Mention.onFocus(e,t)})};s.default.ios?n():requestAnimationFrame(function(){requestAnimationFrame(function(){n()})}),v.onOpen("bottom"),s.default.msie_edge&&(window.scrollTo(0,99999),requestAnimationFrame(function(){window.scrollTo(0,99999)}),setTimeout(function(){window.scrollTo(0,99999)}))}function ke(e,t){if("text"===(0,y.getKeyboardType)()&&(0,y.setKeyboardType)(""),v.onClose(),V._timer&&clearTimeout(V._timer),store.mail&&store.mail.cur){var n=store.mail.cur,i=n.viewerId,r=n.peerId;Ce(t.value,i,r)}}function Ce(e,t,n){var i=store.mail.cur.editing;(0,y.setPeerDraft)(t,n,{text:e},i)}function De(){var e=store.mail,t=e.cur,n=(e.queue,e.flags);if(t.peerId){var r=!xe(),a=!mediaUpload.checkUploading(),s=!!t.editing,l={sendActive:!r&&!s&&!a,loading:a,editAccept:s&&!r,editRemove:s&&r},u=n.templates&&!(s||!t.groupId||!r||l.loading||l.uploading);l.templates=u&&"templates"!==(0,y.getKeyboardType)(),l.templatesActive=u&&"templates"===(0,y.getKeyboardType)();var c=!(l.sendActive||l.loading||l.editAccept||l.editRemove||l.templates||l.templatesActive);l.disabled=c;var d=o.default.class("uMailWrite__button","uMailWrite__buttonSend",l);(0,i.$$)(".uMailWrite__buttonSend").forEach(function(e){return e.className=d})}}function Se(e){var t=o.default.class("uMailWrite__button","uMailWrite__buttonStickers",{active:e});(0,i.$$)(".uMailWrite__buttonStickers").forEach(function(e){return e.className=t})}function Te(e){var t=o.default.class("uMailWrite__button","uMailWrite__buttonKeyboard",{active:e});(0,i.$$)(".uMailWrite__buttonKeyboard").forEach(function(e){return e.className=t})}function Me(e){if(store.mail.cur){var t=store.mail.cur,n=t.peerId,i=t.ref,r=t.refSource;if(n){r&&(e.ref_source=r,e.ref=i,store.mail.refSource=void 0,store.mail.ref=void 0),C.send(e);var o=store.mail.peers[n];if(o&&o.keyboard&&o.keyboard.one_time)o.keyboard=null,(0,y.getKeyboardState)(n).updateTime=Date.now(),Oe()}De()}}function Pe(e){e.stopPropagation(),alert(lang.mobile_mail_attachments_limit)}function Ie(e){var t=document.createElement("textarea");t.innerHTML=e;var n=t.value,r=(0,i.$$)(".uMailWrite__textarea");r.forEach(function(e){return e.value=n}),me({},r[0])}function xe(){return function(){var e=store.mail,t=e.cur;e.peers;return!!t&&t.hasAttachments}()||!!(0,i.$)(".uMailWrite__textarea").value.trim()}function Oe(e){if((0,i.$)(".uMailWrite__keyboard")){var t,n=store.mail,r=n.cur,a=n.peers,s=r.peerId&&a[r.peerId];t=!(r.groupId||!s||s.closed||s.kicked)&&!(!s.keyboard||!s.keyboard.buttons.length);var l=(0,i.$)(".uMailWrite"),u=o.default.parseClass("uMailWrite",l.className);if(u.keyboard!==t&&(l.className=o.default.class("uMailWrite",Object.assign({},u,{keyboard:t}))),(0,y.getKeyboardState)(r.peerId).rendered=!1,t){T||(T=lsGet("mail_keyboard_hidden")||{});var c=s.keyboard,d=T[r.peerId],A=(e&&e.update,!(0,y.getKeyboardType)()||"buttons"===(0,y.getKeyboardType)()||"text"===(0,y.getKeyboardType)()),f=!1;d&&(d==c.chat_local_id?A=!1:f=!0),A?Be("buttons",{store:f}):f&&ae()}else re()}}function Le(){var e=store.mail,t=e.cur,n=e.peers,r=t.peerId&&n[t.peerId];if(t.groupId&&r&&!r.closed&&!r.kicked){var o=(0,i.$)(".uMailWrite__templatesBody"),a=t.templates;if(o)return a?void function(e,t){e.innerHTML=(0,k.uMailWrite_TemplatesContent)(t)}(o,a):(function(e){e.innerHTML=(0,k.uMailWrite_TemplatesLoading)()}(o),M||(M=new Promise(function(e){ajaxRequest("/mail",{act:"get_templates"},function(t){e(t)},function(t){e()})})),void M.then(function(e){M=null,store.mail&&store.mail.cur&&(store.mail.cur.templates=e),Le()}))}}function Be(e,t){switch(Ne(e),e){case"stickers":ee();break;case"buttons":oe(t);break;case"text":!function(){var e=(0,i.$)(".uMailWrite__textarea");e&&e.focus()}();break;case"templates":se()}}function Ne(e){"stickers"!==e&&Z(),"buttons"!==e&&re(),"text"!==e&&function(){var e=(0,i.$)(".uMailWrite__textarea");e&&document.activeElement===e&&e.blur()}(),"templates"!==e&&le()}function Re(e){var t=store.mail.cur.templates.find(function(t){return t.id===e});if(t){var n=lang.mobile_mail_templates_delete_popup_text;n=n.replace("{name}",(0,m.emojiToHTML)(t.name)),MailDialog.open({body:n,confirmText:lang.mobile_mail_delete_popup_delete,cancelText:lang.mobile_mail_delete_popup_cancel,onConfirm:o.default.onClick("uMailWrite._onConfirmDeleteTemplate",e)})}}function Fe(e){var t=store.mail.cur.templates,n=t.findIndex(function(t){return t.id===e});if(-1!==n){var r=t[n],o=(0,i.$)(".uMailWrite__templatesRow".concat(r.id));r.deleting=!0,o.classList.add("uMailWrite__templatesRow_hidden"),ajaxRequest("/mail",{act:"delete_template",hash:store.mail.hash.templateDelete,id:e},function(n){if(n.error)je(e);else{var i=t.findIndex(function(t){return t.id===e});t.splice(i,1),Le()}},function(){je(e)})}MailDialog.close()}function je(e){var t=store.mail.cur.templates,n=(0,i.$)(".uMailWrite__templatesRow".concat(e)),r=t[t.findIndex(function(t){return t.id===e})];r.deleting=!1,n.classList.remove("uMailWrite__templatesRow_hidden");var o=lang.mobile_mail_templates_delete_error;o=o.replace("{name}",r.name),c.init({text:o,action:{text:lang.mobile_mail_templates_toast_action_ok,callback:function(e,t){var n=t.id;c.close(n)}}})}function He(){l.default.clearSystemMessage2(),remove(geByClass1("message__newMsgsDivider")),remove(geByClass1("Unfold__item_returnToChat"))}function Ue(e,t,n){var i;n?i=[(0,f.ModalMenuBtn)({inner:lang.mobile_mail_presend_menu_retry,onclick:["uMailWrite._onRetryFailedMsg","this",t]}),(0,f.ModalMenuBtn)({inner:lang.mobile_mail_presend_menu_delete,onclick:["uMailWrite._onDeleteFailedMsg","this",t]})]:i=[(0,f.ModalMenuBtn)({inner:lang.mobile_mail_presend_menu_cancel,onclick:["uMailWrite._onCancelPendingMsg","this",t]})];var r=(0,f.default)({class:"",close:!0,closeText:lang.mobile_mail_presend_menu_close,items:i});p.default.open(a.default.elem(r),!0)}function Ve(e,t){f.default.close(e);var n=store.mail.presend.msgs[t];(0,y.removeFailedMsg)(n),C.retry(t,function(e){var t=store.mail.cur.peerId,n=store.mail.peers[t];return e.data.hash=n.hashSend,e})}function ze(e,t){f.default.close(e),C.remove(t)}function $e(e,t){f.default.close(e),C.remove(t)}function qe(e){c.init({duration:0,text:e,action:{text:lang.mobile_mail_templates_toast_action_ok,callback:function(e,t){var n=t.id;c.close(n)}}})}},ZoJ6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("bZ/P")),r=a(n("9y81")),o=n("fdw3");function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=window.lang,n=(0,o.isNewNavigation)(),a=e.query;return Wd.html({class:[Bem.class("mailFilter",{hasQuery:!!a}),e.mix],inner:[Wd.wrap((0,r.default)({icon:"search"})),{class:"mailFilter__input",tag:"input",placeholder:t.mobile_search,value:a,oninput:["MailFilter._onInput","this"],attrs:i.default.onFocus("MailFilter._onFocus")},{class:"mailFilter__right",inner:[n?null:Wd.wrap((0,r.default)({mix:"mailFilter__create",icon:"plus",url:e.createUrl})),Wd.wrap((0,r.default)({mix:"mailFilter__clear",icon:"close12",attrs:i.default.onMouseDown("MailFilter._onClearMouseDown","this")}))]}]})};t.default=s},Zoa4:function(e,t,n){"use strict";var i=u(n("+cqQ")),r=u(n("jk6M")),o=u(n("CkGd")),a=u(n("QBkA")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("lQx8")),l=n("MjTa");function u(e){return e&&e.__esModule?e:{default:e}}function c(){(0,l.cleanScrollView)(s.Messenger.getConvoBody()),removeEvent(s.Messenger.getConvoBody(),"touchstart",d,{passive:!0})}function d(e){var t=e.target.closest(".msg__sticker");t&&Msg.onStickerTouchStart(e,t),(t||e.target.closest(".msg"))&&Msg._onTouchStart()}function A(e,t){$$(".messenger__layer_".concat(e)).forEach(function(e){e.classList.toggle("messenger__layer_loading",t)})}function f(e){return $(".messenger__layer_".concat(e," .messenger__body"))}function p(e){s.Messenger.onMainScroll(e)}function _(e){s.Messenger.onConvoScroll(e),e._isScrolling=!0,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!window._preventedCheckTop&&(e&&function(e){return e.scrollHeight&&e.scrollTop<=2.5*window.innerHeight}(e))}(e)&&s.Messenger.onConvoAtTop(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&function(e){return e.scrollHeight&&e.scrollHeight-e.scrollTop-e.offsetHeight<=1.5*window.innerHeight}(e)}(e)&&s.Messenger.onConvoAtBottom(),e._scrollingTimer&&clearTimeout(e._scrollingTimer),e._scrollingTimer=setTimeout(function(){e._isScrolling=!1},100)}function h(){var e=s.Messenger.getConvoBody();e&&(e.prevHeight&&e.prevHeight!==e.offsetHeight&&function(e,t){e.scrollTop=e.scrollHeight-e.offsetHeight-t}(e,e.scrollBottom),e.prevHeight=e.offsetHeight,e.scrollBottom=function(e){return e.scrollHeight-e.scrollTop-e.offsetHeight}(e),m&&requestAnimationFrame(h))}Object.assign(s.Messenger,{scrollMainBodyToTop:function(){$(".messenger__layer_main .messenger__body").scrollTop=0},onMainScroll:(0,i.default)("scrollElem"),onQueryChange:a.default.onChange,onQueryClear:a.default.onClear,onSearchMsgsClick:(0,i.default)(),setQuery:a.default.setQuery,setQuerySilently:a.default.setQuerySilently,getMainBody:function(e){return f("main")},setMainLoading:function(e){return A("main",e)},onConvoAtTop:(0,i.default)(),onConvoAtBottom:(0,i.default)(),onConvoScroll:(0,i.default)("scrollElem"),setConvoLoading:function(e){return A("convo",e)},getConvoBody:function(){return f("convo")},scrollConvoToBottom:function(){var e=s.Messenger.getConvoBody();e&&(e.scrollTop=e.scrollHeight)},redrawConvoLayer:function(){var e=(0,s.Messenger_renderConvoLayer)();c(),$$(".messenger__layer_convo").forEach(function(t){t.innerHTML=e})},cleanConvoBody:c,setupConvoBody:function(){(0,l.setScrollView)(s.Messenger.getConvoBody(),{topBanner:!1}),addEvent(s.Messenger.getConvoBody(),"touchstart",d,{passive:!0})},getPageLayer:function(){return $(".messenger__layer_page")}}),s.Messenger._onMainScroll=p,s.Messenger._onConvoScroll=_,s.Messenger._onSearchMsgsClick=s.Messenger.onSearchMsgsClick;var m=!1;if(s.default.startPolling=function(){m=!0,h()},s.default.stopPolling=function(){m=!1},Object.assign(s.default,{redraw:function(){$$(".uMessenger").forEach(function(e){return e.outerHTML=(0,s.default)()})},redrawView:function(){$$(".uMessenger").forEach(function(e){return e.className=(0,s.uMessenger_class)()});var e=store.mail,t=e.cur,n=e.peers;t.peerId&&(y(),o.default.togglePin(n[t.peerId].canPin));w()},redrawMailActions:function(){var e=(0,s.uMessenger_hasSelectedMsgs)();$$(".messenger__layer_convo").forEach(function(t){t.$(".messenger__footer").classList.toggle("messenger__footer_actionsOpen",e),o.default.update();var n=store.mail,i=n.cur,r=n.peers;if(!i.peerId||!r[i.peerId].isIncomingMR){var a=t.$(".messenger__write").offsetHeight,s=t.$(".messenger__acts").offsetHeight,l=s-a,u=t.$(".messenger__body");requestAnimationFrame(function(){!u._fixed&&l&&(u.style.paddingBottom=l+"px",u._fixed=!0),l<=0&&(u.style.paddingBottom=0,u._fixed=!1)})}})},redrawPinnedMsg:y,setPinnedVisibility:function(e){var t=store.mail,n=t.peers,i=t.cur,r=n[i.peerId].hasPinnedMsg;$$(".messenger").forEach(function(t){t.classList.toggle("messenger_pinnedVisible",r&&e),t.classList.toggle("messenger_pinnedHidden",r&&!e)})},redrawBanner:function(){var e=(0,s.uMessenger_getBanner)();$$(".messenger__banner").forEach(function(t){t.innerHTML=e,t.classList.toggle("messenger__bannerVisible",!!e)})},redrawMRsHint:w,expandPeerBefore:function(){if(!$(".load_before_closed"))return;var e=s.Messenger.getConvoBody();if(r.default.safari_mobile){var t=function(){var t=e.scrollHeight-e.scrollTop-e.offsetHeight;setStyle(e,"overflow","hidden"),$$(".load_before_closed").forEach(function(e){return e.classList.remove("load_before_closed")}),e.scrollTop=e.scrollHeight-t-e.offsetHeight,setStyle(e,"overflow","auto")};e.isScrolling?(g&&clearInterval(g),g=setInterval(function(){e.isScrolling||(clearInterval(g),t())},10)):t()}else if(e.scrollTop<=184){var n=e.scrollHeight-e.scrollTop-e.offsetHeight;$$(".load_before_closed").forEach(function(e){return e.classList.remove("load_before_closed")}),e.scrollTop=e.scrollHeight-n-e.offsetHeight}},scrollToMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Msg.getElem(e);if(!i)return!1;var r=s.Messenger.getConvoBody();if($(".mailScrap__loading_before"),t)r.scrollTop=i.offsetTop-.18*r.offsetHeight;else{var o=$(".typing_id_curConvo").offsetHeight;r.scrollTop=i.offsetTop-.5*(r.offsetHeight+2)+(i.offsetHeight+o)/2,i.offsetHeight>r.offsetHeight&&(r.scrollTop=i.offsetTop)}return n&&(addClass("msg_highlight",i),setTimeout(function(){removeClass("msg_highlight",i)},1500)),!0},loadMailPage:(0,i.default)()}),r.default.safari_mobile){var v=null;s.Messenger.onConvoScroll(function(e){e.isScrolling=!0,v&&clearTimeout(v),v=setTimeout(function(){return e.isScrolling=!1},50)})}var g=null;function y(){var e=store.mail,t=e.peers,n=e.cur,i=(0,s.uMessenger_getPinnedMsg)(),r=t[n.peerId].hasPinnedMsg;$(".messenger__pinned").innerHTML=i,MailHat_convo.setHasPinnedMsg(r)}function w(){var e=store.mail.cur,t=e.countMR,n=t&&"all"===e.folder&&!e.query&&!e.forwardFromId,i=$(".messenger__mrsHint");if(n){var r=t?(0,s.uMessenger_renderMRsHint)(t):"";i.innerHTML=r}i.classList.toggle("messenger__mrsHint_hidden",!n)}},a0wW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLAG_GIF_AUTOPLAY=t.FLAG_MP4=t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M")),r=n("gqEf");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a={};t.FLAG_MP4=0;t.FLAG_GIF_AUTOPLAY=1;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,null,[{key:"getFeatures",value:function(){return a}},{key:"detectMp4Support",value:function(){var e=i.default.meizu||i.default.mi||i.default.uc_mini||0!==i.default.ios&&i.default.ios<10||i.default.chrome&&i.default.version.split(".")[0]<53,t=!1,n=document.createElement("video");return n.canPlayType&&""!==n.canPlayType("video/mp4")&&(t=!0),a.mp4=t,this.setFlag(0,t&&!e),t}},{key:"detectAutoplay",value:function(){var e=this;return new Promise(function(t){if(a.autoplay)t(!0);else{if(i.default.ios&&i.default.safari_mobile&&parseInt(i.default.version,10)>=10)return a.autoplay=!0,void t(!0);a.autoplay=!1;var n=ce("video"),r=ce("source");r.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var o=ce("source");o.src="data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM",append(o,n),append(r,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),append(n,document.body);var s=ge("base64testvideo");if(i.default.mobile&&i.default.ios&&i.default.ios<10)return a.autoplay=!1,remove(n),t(!1),void clearTimeout(e.autoDetectTimeout);if(!i.default.safari_mobile||i.default.safari_mobile&&parseInt(i.default.version,10)>=10){var l=n.play();void 0!==l&&l.then(function(){a.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)}).catch(function(i){a.autoplay=!1,remove(n),t(!1),clearTimeout(e.autoDetectTimeout)})}s.onplay=function(){a.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout(function(){s.paused||(a.autoplay=!0),remove(n),t(a.autoplay)},250)}})}},{key:"getFlags",value:function(){return((0,r.getCookie)("remixff")||"").split("").map(function(e){return+e?"1":"0"}).join("")}},{key:"getFlag",value:function(e){var t=this.getFlags();return!!toInt(t[e])}},{key:"setFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=((0,r.getCookie)("remixff")||"").split("");e>=n.length&&(n=Array.from(Array(e),function(e,t){return n[t]||"0"})),n[e]=t?"1":"0";var i=n.join("");setCookie("remixff",i,10,!0,!1)}}]),e}();s.detectMp4Support();var l=s;t.default=l},aXJN:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("function"!=typeof o&&("object"!==i(o)||null===o))throw new TypeError("Object.keys called on non-object");var a,s,l=[];for(a in o)e.call(o,a)&&l.push(a);if(t)for(s=0;s<r;s++)e.call(o,n[s])&&l.push(n[s]);return l}}())},aXSb:function(e,t,n){"use strict";var i=10;window.CreatePost={setMaxAttach:function(e){i=e},checkAttaches:function(){CreatePost.toggleEnableAttaches(mediaUpload.getAttachesCount()<i)},toggleEnableAttaches:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];geByClass("cp_attach_btn","feed_add_form").forEach(function(t){t.classList.toggle("cp_disabled_btn",!e)}),["photo","video","audio","doc","poll"].forEach(function(t){Unfold.toggleItemEnabled(Unfold.getByName("attaches"),t,e)})}}},bRFj:function(e,t,n){"use strict";var i=window,r=i.ajax,o=i.obj2qs,a=i.parseJSON,s=i.autoScroll,l=i.ImportedFriends;window.Friends={onImportSuccess:befall("serviceId","friendsHtml","total"),onImportFailed:befall("serviceId"),accept:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:A,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:A;g(c,e,t,n,i,r,o,a,s)},decline:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:A,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:A;g(d,e,t,n,i,r,o,a,s)},makeImportRequest:function(e,t,n){if(!window.XMLHttpRequest)return void(window.location=e);r.plainpost(e,{_ajax:1},function(e){return y(e,t,n)},function(){return b(n)},!0)}};var u="/friends",c="accept",d="decline",A=null,f="/friends.php?act=save_contacts&type=",p="friendsImport__loading",_=p+"_hidden",h="friendsImport__result",m=h+"_shown",v="friendsList__footerBtn_showMore";function g(e,t,n,i,a,s,l,c,d){var A={act:e,hash:n,id:t};i&&(A.from=i),a&&(A.block_id=a),s&&(A.ref=s),l&&(A.track_code=l);var f=u+o(A);r.post(f,{_ajax:1},{onDone:c,onFail:d})}function y(e,t,n){var i=a(e),o=i.user,s=i.user_hash,l=i.contacts,u=f+n,c;if(i.error){b(n);return}r.post(u,{_ajax:1,user:o,userhash:s,hash:t,contacts:l},{onDone:function e(t,i){return w(n,t,i)},onFail:function e(){return b(n)}})}function w(e,t,n){var i=geByClass1(p),r=geByClass1(h);if(addClass(_,i),r){r.innerHTML=t;addClass(m,r)}if(s(function(){return geByClass1(v)},l,{no_cache:!0}),Friends.onImportSuccess(e,t,n),window.opener){window.opener.Friends.onImportSuccess(e,t,n)}}function b(e){Friends.onImportFailed(e),window.opener&&(window.opener.Friends.onImportFailed(e),window.close())}},bYEY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("iGfS"));var r=i.default;t.default=r,window.uBell=i.default},"bZ/P":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SRbS"));n("zb1z"),n("dbQR"),n("l90V"),n("c0X5");var r=i.default;t.default=r,window.q=i.default},blmJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("0Zid"));var r=i.default;t.default=r,window.PrometheusEditConfirm=i.default},"bvP/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAutogrow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=ce("span");setStyle(n,{width:"".concat(e.clientWidth,"px")}),n.innerText="_",append(n,e.parentNode);var i=n.clientHeight;addEvent(e,"input",function(){n.innerText=e.value,e.rows=Math.max(1,Math.min(t,Math.ceil(n.clientHeight/i)))})}},c0X5:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SRbS"));Object.assign(i.default,{class:function(){for(var e=[],t=null,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.forEach(function(n){"string"==typeof n?(e.push(n),t=n):n&&(e=e.concat(function(e,t){var n=[];return"string"==typeof t&&(t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,!0)),Object.keys(t).forEach(function(i){var r=t[i];!0===r?n.push("".concat(e,"_").concat(i)):r&&n.push("".concat(e,"_").concat(i,"_").concat(r))}),n}(t,n)))}),e.join(" ")},parseClass:function(e,t){var n={};return t.trim().split(/\s+/).forEach(function(t){if(t!==e){var i=t.replace("".concat(e,"_"),"").split("_");n[i[0]]=!(i.length>1)||i[1]}}),n}})},cGUQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromQueryString=function(e){if(!e)return{};var t={};return e=e.split("&"),(0,i.each)(e,function(e,n){var i=n.split("=");if(i[0]){var r=a(i[1]+"");if("[]"===i[0].substr(i.length-2)){var o=a(i[0].substr(0,i.length-2));t[o]||(t[o]=[]),t[o].push(r)}else t[a(i[0])]=r}}),t},t.toQueryString=function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&null!=e[r]&&!(0,i.isFunction)(e[r]))if((0,i.isArray)(e[r]))for(var a=0,s=0,l=e[r].length;a<l;++a)null==e[r][a]||(0,i.isFunction)(e[r][a])||(n.push(o(r)+"["+s+"]="+o(e[r][a])),++s);else n.push(o(r)+"="+o(e[r]));t||n.sort();return n.join("&")};var i=n("jE6c"),r={},o=function(e){if(r[e])return e;try{return encodeURIComponent(e)}catch(e){return""}},a=function(e){try{return decodeURIComponent(e)}catch(t){return r[e]=1,e}}},cLcH:function(e,t,n){"use strict";var i=window,r=i.Groups,o=i.Friends,a=i.FeedAssistanceStats,s=i.hasClass,l=(i.each,i.geByClass1),u=i.nav,c=i.domCA,d=i.domPN,A=i.page,f=i.ge,p=i.addEvent,_=i.attr,h=i.escapeAttr;window.FeedAssistanceExploreBait={onSubscribeLinkClick:function(e,t,n,i,u,d){var A=s(e,m),f=A?i:n,p=A?getLang(b):getLang(w),D=!A,S=l(y,e),M=function(e){var t=c(e,C);return intval(domData(t,"block-id"))}(e);S&&(toggleClass(v,S,D),toggleClass(g,S,!D));_(e,"aria-label",h(p)),toggleClass(m,e,D),u===k?function(e,t,n,i){var o=n?r.leave:r.enter,s=n?a.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:a.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;i&&T(s),o.call(r,e,t,E)}(t,f,A,d):function(e,t,n,i,r){var s=n?o.decline:o.accept,l=n?a.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:a.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;r&&T(l),s.call(o,e,t,E,i)}(t,f,A,M,d);return!1}},a.registerTrackingCls("post_exploreBait"),a.onStartViewElement(function(e){if(a.getElementType(e)===a.BLOCKS.BLOCK_TYPE_EXPLORE_BAIT){if(e._exploreBaitClickHandlerAdded)return;D=!0,p(e,"click",function(e){!function(e){for(var t=e.target,n=0,i=M;n<i.length;n++){var r=i[n];if(!0===r.call(null,t))return}}(e)}),e._exploreBaitClickHandlerAdded=!0}}),u.onBeforeGo(function(e){if(!D)return void(S=!1);if(!function(e){return e.tagName&&"explore-bait"===domData(e,"post-type")}(e))return;S=s("item_replies",e),function(e){for(var t=0,n=["pi_text_more","wi_date","pi_text","i_replies","v_replies","item_replies"];t<n.length;t++){var i=n[t];if(s(i,e))return T(a.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPENED),!0}}(e)}),A.onChange(function(){if(!D)return;S&&function(){var e=f("nc_submit");p(e,"click",function(){T(a.EVENTS.SUB_EVENT_EXPLORE_BAIT_COMMENT)})}()});var m="post__subscribeBtn_unsubscribe",v="post__subscribeBtnIcon_unsubscribe",g="post__subscribeBtnIcon_subscribe",y="post__subscribeBtnIcon",w="mobile_groups_you_are_in_public",b="mobile_groups_public_subscribe",E="feed",k="group",C=".post_exploreBait",D=!1,S=!1;function T(e){a.dispatchEvent({type:a.EVENTS.EVENT_EXPLORE_BAIT,data:a.serializeEventData(a.EVENTS.EVENT_EXPLORE_BAIT_SUB,e)})}var M=[function(e){if("A"!==e.tagName||!s("item_sel",e))return s("item_like",e)?(T(a.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE),!0):!s("i_like",e)&&!s("v_like",e)||s("item_sel",d(e))?void 0:(T(a.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE),!0)},function(e){if(domData(e,"post-owner-type"))return T("user"===domData(e,"post-owner-type")?a.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_USER:a.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP),!0},function(e){var t={report:a.EVENTS.SUB_EVENT_EXPLORE_BAIT_REPORT,hide:a.EVENTS.SUB_EVENT_EXPLORE_BAIT_HIDE}[domData(e,"post-action")];if(t)return T(t),!0}]},ciqL:function(e,t,n){"use strict";var i=window.geByClass1,r={show:function(e,t){window.grecaptcha?grecaptcha.reset():(window.recaptchaCallback=function(){r.onCallback(e)},document.body.appendChild(ce("script",{type:"text/javascript",src:"https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+t})))},onResponse:function(e){ge("field_recaptcha").value=e,ge("recaptcha_form").submit()},onCallback:function(e){if(grecaptcha&&e){var t=i("recaptcha_box"),n=i("recaptcha",t);n&&(val(n,""),grecaptcha.render(n,{sitekey:e,callback:r.onResponse}))}}};window.ReCaptcha=r},cq4b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayContains=function(e,t){return-1!==e.indexOf(t)},t.arrayRemove=function(e,t){for(;;){var n=e.indexOf(t);if(!(n>=0))break;e.splice(n,1)}},t.arrayIntersects=function(e,t){return e.some(function(e){return-1!==t.indexOf(e)})}},dFlO:function(e,t,n){"use strict";String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}})},dVvW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uMailWrite_Reply=P,t.uMailWrite_Attachments=I,t.uMailWrite_ToBottomInner=T,t.uMailWrite_KeyboardRow=function(e){return i.default.html(g(),e)},t.uMailWrite_KeyboardButton=function(e,t){var n,o=window.lang,a=e.action.type,s=i.default.class("uMailWrite__keyboardButton",{primary:"primary"===e.color||"vkpay"===a,positive:"positive"===e.color,negative:"negative"===e.color}),l=i.default.onClick("uMailWrite._onKeyboardButtonClick","this","event",{action:e.action,authorId:t.author_id});n="vkpay"===a?[{class:"uMailWrite__keyboardButtonInner",inner:[r.default.wrap(o.mobile_mail_keyboard_label_vkpay),"  ",(0,c.default)("mail/bot_buttons","vkpay")]}]:"location"===a?[{class:"uMailWrite__keyboardButtonInner",inner:[(0,c.default)("mail/bot_buttons","place_24")," ",r.default.wrap(o.mobile_mail_keyboard_label_location)]}]:"open_app"===a?[{class:"uMailWrite__keyboardButtonInner",inner:[(0,c.default)("mail/bot_buttons","service_24")," ",r.default.wrap(e.action.label)]}]:[r.default.wrap(e.action.label)];return r.default.html((0,u.default)({class:s,attrs:l,inner:n,theme:"none",size:"normal",type:"button"}))},t.default=void 0;var i=A(n("bZ/P")),r=A(n("TYsd")),o=A(n("Mc5h")),a=A(n("9y81")),s=A(n("AXyT")),l=A(n("gy8s")),u=A(n("29dZ")),c=A(n("Y6JH")),d=n("/Id8");A(n("BoyB"));function A(e){return e&&e.__esModule?e:{default:e}}function f(){var e=D(['\n    <input type="hidden" name="attached_messages" value="','" />\n  ']);return f=function(){return e},e}function p(){var e=D(['\n    <div class="uMailWrite__attachedMsgs">\n      ',"\n      ","\n      ",'\n      <div class="uMailWrite__attachedMsgsText">',"</div>\n    </div>\n  "]);return p=function(){return e},e}function _(){var e=D(['\n    <div class="',' _preventMenuOpen">\n      ',"\n      ","\n    </div>\n  "]);return _=function(){return e},e}function h(){var e=D(['\n    <div class="','">\n      ',"\n      ","\n      ","\n    </div>\n  "]);return h=function(){return e},e}function m(){var e=D(['\n    <div class="uMailWrite__templates">\n      <div class="uMailWrite__templatesHeader">\n        ','\n        <a class="uMailWrite__templatesAdd" href="','" ',">\n          ",'\n        </a>\n      </div>\n      <div class="uMailWrite__templatesBody ScrollView"></div>\n    </div>\n  ']);return m=function(){return e},e}function v(){var e=D(['\n    <div class="uMailWrite__buttonKeyboardIcon"></div>\n  ']);return v=function(){return e},e}function g(){var e=D(['\n    <div class="uMailWrite__keyboardRow">\n      ',"\n    </div>\n  "]);return g=function(){return e},e}function y(){var e=D(['\n    <div class="uMailWrite__keyboard ScrollView">\n\n    </div>\n  ']);return y=function(){return e},e}function w(){var e=D(['\n    <div class="uMailWrite__SVGIcon uMailWrite__SVGIcon_','"></div>\n  ']);return w=function(){return e},e}function b(){var e=D(['\n    <div class="uMailWrite__main">\n      <div class="uMailWrite__button uMailWrite__buttonAttach">','</div>\n      <div class="uMailWrite__button uMailWrite__buttonKeyboard" ',">",'</div>\n      <div class="uMailWrite__button uMailWrite__buttonStickers" ',">","",'</div>\n      <button class="','" type="submit" ',">\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ",'\n      </button>\n      <div class="uMailWrite__textareaContainer">\n        <textarea\n          class="uMailWrite__textarea"\n          name="message"\n          placeholder="','"\n          maxlength="4096"\n          ',"\n          ","\n          ","\n          ","\n          ","\n          ","\n          ",'\n        ></textarea>\n        <div class="uMailWrite__textareaGhost"></div>\n      </div>\n    </div>\n  ']);return b=function(){return e},e}function E(){var e=D(["\n    ","\n    ","\n  "]);return E=function(){return e},e}function k(){var e=D(['\n    <form\n      class="','"\n      method="POST"\n      action="/mail?act=send&to=',"&hash=","&from=dialog",'"\n      ','\n    >\n      <div class="uMailWrite__toBottom" ',">","</div>\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n    </form>\n  "]);return k=function(){return e},e}function C(){var e=D(['\n      <div class="uMailWrite uMailWrite_unableToWrite">\n        ','\n        <div class="uMailWrite__unableToWriteText">\n          ',"\n        </div>\n      </div>\n    "]);return C=function(){return e},e}function D(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=function(){var e=window.lang,t=store.mail,n=t.cur.peerId;if(!n)return'<form class="uMailWrite"></form>';var r=t.peers[n];if(r.unableToWrite){if(r.isChannel)return"";var s=r.kickedMessage||e.mobile_msg_mail_privacy_error,u=(0,a.default)({mix:"uMailWrite__unableToWriteIcon",icon:"warning"});return i.default.html(C(),u,s)}var d=i.default.onSubmit("uMailWrite._onSubmit","event","this"),A=i.default.onClick("uMailWrite.onToBottomClick"),f=(0,o.default)({mix:"uMailWrite__popupStickers _preventMenuOpen",inner:""}),p=P(null),_=I(n),h=function(e){var t=window.lang,n=store.mail,r=n.cur,o=n.queue,s=("/attachments?act=stickers&target=mail".concat(e),i.default.onMouseDown("uMailWrite._onStickersClick","event")),u=i.default.onMouseDown("uMailWrite._onKeyboardClick","event"),d=n.peers[e],A=r.groupId,f=Math.abs(A),p=A?"&community=".concat(f):"",_=(0,l.default)({icon:"attach",name:"uMailWrite_attachments",position:"bottomLeft",items:[{text:r.inlineUploadHTML.replace(/mail\d+/g,"mail".concat(e)),icon:(0,c.default)("mail-attachments","camera_24")},{text:t.mobile_attachments_add_photo_vk,url:"/attachments?act=choose_photo&target=mail".concat(e).concat(p),icon:(0,c.default)("mail-attachments","gallery_24")},{text:t.mobile_attachments_add_video,url:"/attachments?act=choose_video&target=mail".concat(e).concat(p),icon:(0,c.default)("mail-attachments","video_24")},{text:t.mobile_attachments_add_audio,url:"/attachments?act=choose_audio&target=mail".concat(e).concat(p),icon:(0,c.default)("mail-attachments","music_24")},{text:t.mobile_attachments_add_doc,url:"/attachments?act=choose_doc&target=mail".concat(e).concat(p),icon:(0,c.default)("mail-attachments","document_24")},d.canSendGift?{text:t.mobile_attachments_add_gift,url:"/gifts".concat(e,"?act=send&from=mail&ref=media_selector"),icon:(0,c.default)("mail-attachments","gift_24")}:null,d.canAttachMoney?{text:t.mobile_attachments_add_money,url:"/attachments?act=attach_money&target=mail".concat(e).concat(p),icon:(0,c.default)("mail-attachments","money_transfer_24")}:null,d.canAttachPoll?{text:t.mobile_attachments_add_poll,url:"/attachments?act=attach_poll&target=mail".concat(e).concat(p),icon:(0,c.default)("mail-attachments","poll_24"),mix:"uMailWrite__pollUnfoldItem"}:null]}),h=i.default.onKeyUp("uMailWrite._onKeyUp"),m=i.default.onInput("uMailWrite._onInput","event","this"),g=i.default.onKeyDown("uMailWrite._onKeyDown","event","this"),y=i.default.onFocus("uMailWrite._onFocus","event","this"),w=i.default.onBlur("uMailWrite._onBlur","event","this"),E=i.default.onClick("uMailWrite._onClick","event","this"),k=i.default.onTouchEnd("uMailWrite._onSendTouchEnd","event","this"),C=(0,a.default)({mix:"uMailWrite__buttonSendIcon",icon:"send"}),D=(0,a.default)({mix:"uMailWrite__buttonSendIcon",icon:"send",active:!0}),S=M("accept"),T=M("remove"),P=M("templates"),I=M("templatesActive"),x=(0,a.default)({mix:"uMailWrite__buttonSendIcon",icon:"spinner"}),O=(0,a.default)({mix:"uMailWrite__buttonStickersIcon",icon:"sticker"}),L=(0,a.default)({mix:"uMailWrite__buttonStickersIcon",icon:"sticker",active:!0}),B=i.default.html(v()),N=d.attachmentsHTML.length,R=r.msgAttached[r.peerId],F=R&&R.length,j=!!(o[r.peerId]||[]).length,H=i.default.class("uMailWrite__button","uMailWrite__buttonSend",{send:!0,sendActive:!!(N>150||F),loading:j});return i.default.html(b(),_,u,B,s,O,L,H,k,C,D,x,S,T,P,I,t.mobile_mail_message_placeholder,y,h,m,g,y,w,E)}(n),g=i.default.html(y()),w=function(){var e=window.lang,t=(0,a.default)({icon:"plus"}),n=store.mail.cur.peerId,r=store.mail.cur.communityParam,o="/mail?act=template&from="+n+r,s=i.default.onClick("uMailWrite.loadTemplatePage","event","this",o);return i.default.html(m(),e.mobile_mail_templates_panel_title,o,s,t)}(),E=T(),D=i.default.class("uMailWrite",{canAttachMoney:!!r.canAttachMoney,canAttachPoll:!0});return i.default.html(k(),D,n,r.hashSend,t.cur.communityParam,d,A,E,p,_,h,f,g,w)};function T(){var e=store.mail,t=e.cur,n=e.peers,r=n[t.peerId]?n[t.peerId].countUnread:null,o=r?(0,s.default)({mix:"uMailWrite__toBottomValue",value:r}):"",l=(0,a.default)({mix:"uMailWrite__toBottomIcon",icon:"arrowDown"});return i.default.html(E(),o,l)}function M(e){return i.default.html(w(),e)}function P(e){var t=store.mail.cur,n=store.mail.members,r=t.peerId,o=t.msgReply[r],a=null;o&&(a=store.mail.forwards[o]||store.mail.msgs[o]);var s="",l="";if(a){var u=(0,d.Msg__authorName)(n[a.authorId],r,t.userId);s=(0,d.Msg__reply)(a,u,e),l='\n      <input type="hidden" name="attached_messages" value="'.concat(o,'" />\n      <input type="hidden" name="has_reply" value="true" />\n    '),t.editing&&(l+='\n        <input type="hidden" name="mail_edit_attach_fwd" value="1" />\n      ')}var c=i.default.class("uMailWrite__reply",{visible:!!s}),A=MailButton({class:"uMailWrite__replyClose",onClick:i.default.onClick("uMailWrite.onReplyClose")});return i.default.html(h(),c,s,A,l)}function I(e){var t=store.mail,n=t.cur,r=t.peers[e].attachmentsHTML,o=i.default.class("uMailWrite__attachments",function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,!0)),s=n.msgAttached[e]||[],l=s.length,u="";l>0&&(u=function(e,t){var n=window.lang,r=i.default.onClick("uMailWrite.onAttachedMsgsRemove"),o=(0,a.default)({mix:"uMailWrite__attachedMsgsIcon",icon:"msgMini"}),s=(0,a.default)({mix:"uMailWrite__attachedMsgsRemove",icon:"close9",attrs:r}),l=langNumeric(e,n.mobile_mail_messages),u=function(e){return i.default.html(f(),e)}(t);return i.default.html(p(),u,s,o,l)}(l,s.join(";")));return i.default.html(_(),o,u,r)}t.default=S},dbQR:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SRbS"));function r(e,t){return"".concat(e,'="').concat(t,'"')}function o(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(e,function(e){var t=e[0],n=e.slice(1).map(a).join(", ");return"".concat(t,"(").concat(n,")")}(n))}}function a(e){return"number"==typeof e||"event"===e||"this"===e?e:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(JSON.stringify(e))}Object.assign(i.default,{attr:r,onBlur:o("onblur"),onClick:o("onclick"),onFocus:o("onfocus"),onInput:o("oninput"),onKeyDown:o("onkeydown"),onKeyPress:o("onkeypress"),onKeyUp:o("onkeyup"),onMouseDown:o("onmousedown"),onMouseUp:o("onmouseup"),onScroll:o("onscroll"),onSubmit:o("onsubmit"),onTouchEnd:o("ontouchend"),onTouchMove:o("ontouchmove"),onTouchStart:o("ontouchstart"),onWheel:o("onwheel"),onChange:o("onchange")})},eFmH:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));function r(e,t,n){if(i.default.wkwebview){attr(t,"onclick",""),attr(t,"href","vk://vk.com/write"+(2e9+e));var r=new Event("click");return t.dispatchEvent(r),void setTimeout(function(){attr(t,"href","/mail?act=show&chat="+e),t.textContent=n})}i.default.android?location.href="https://vk.com/write"+(2e9+e):i.default.ios?(attr(t,"onclick",""),attr(t,"href","/mail?act=show&chat="+e),t.textContent=n,location.href="vk://vk.com/write"+(2e9+e)):location.href="/mail?act=show&chat="+e}window.ChatPreview={join:function(e,t,n){return ajax.post(e,{},{onDone:function(e){r(e,t,n)}}),!1},open:function(e,t,n){return setTimeout(function(){r(e,t,n)}),!1}}},eGQV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){if(!window.addEventListener)return;(function(){if(window.isPWAStart){f=!0,(0,s.clearCookie)(_);try{sessionStorage.setItem("mode_standalone","1")}catch(e){}return}if(!(f=!0===navigator.standalone||window.matchMedia&&matchMedia("(display-mode: standalone)").matches))try{f="1"===sessionStorage.getItem("mode_standalone")}catch(e){}})(),function(){if(!i.default.isSupported())return;navigator.serviceWorker.addEventListener("message",function(e){var t=e.data;t&&t.action&&"update-ready"===t.action&&(hasUpdate=!0)})}(),window.addEventListener("beforeinstallprompt",function(e){e.preventDefault()}),window.addEventListener("appinstalled",function(){statlogsValueEvent("pwa_installed_event",1)}),"complete"===document.readyState?v():window.addEventListener&&window.addEventListener("load",function(){v()}),function(){if(!0!==navigator.standalone)return;var e=history.pushState,t=history.replaceState;history.pushState=function(t,n,i){e.call(this,t,n,i),c=location.pathname+location.search+location.hash,A()},history.replaceState=function(e,n,i){t.call(this,e,n,i),c=location.pathname+location.search+location.hash,A()},window.addEventListener("popstate",function(){c=location.pathname+location.search+location.hash,A()})}(),function(){var e=h(),t=function(){e?(0,s.setCookie)(p,1,30):(0,s.clearCookie)(p)};t(),window.addEventListener("focus",t)}()},t.isStandalone=h,t.isOfflineCapable=m;var i=l(n("i/4A")),r=l(n("50sn")),o=l(n("OGfC")),a=n("OcsD"),s=n("gqEf");function l(e){return e&&e.__esModule?e:{default:e}}var u=new i.default;window.sw_client=u,window.SWClient=i.default,window.initPushNotifier=function(){try{window.PushNotifier=o.default,window.pushNotifier=new o.default(u,i.default)}catch(e){}};var c,d,A=(0,a.debounce)(function(){if(!c)return;navigator.standalone&&m()&&navigator.serviceWorker.controller.postMessage({action:"set-last-page",data:{lastPage:c}})},1e3),f=!1,p="remixmpwa",_="remixmpwastart";function h(){return f}function m(){return void 0===d&&(d=!(!i.default.isSupported()||!navigator.serviceWorker.controller)),d}function v(){window.vk.sw&&(u.register().then(function(e){navigator.standalone&&m()&&navigator.serviceWorker.controller.postMessage({action:"set-user-id",data:{userId:vk.id}}),!navigator.standalone&&vk.pwa_hash&&m()&&navigator.serviceWorker.controller.postMessage({action:"set-pwa-hash",data:{hash:vk.pwa_hash}}),A()},function(e){if(e!==i.default.SW_NOT_AVAILABLE_ERROR)throw e}),i.default.isSupported()&&navigator.serviceWorker.getRegistration().then(function(e){!function(e){if(!m())return;e.active&&e.installing&&e.installing.postMessage({action:"activate"})}(e)}),(0,r.default)())}},eR1x:function(e,t,n){"use strict";var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("NSb7"));Object.assign(i.default,{setTyping:function(e,t){var n="string"==typeof e?$(".typing_id_".concat(e)):e,r=n.$(".typing__names");n.classList.toggle("typing_empty",(0,i.Typing_isEmpty)(t.typingCount)),r.innerHTML=(0,i.Typing_renderNames)(t)},getElem:function(e){return $(".typing_id_".concat(e))}})},eTng:function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.parseFwd=s,t.convertKludgesToAttaches=function(e,t){var n=[];e.fwd_count?n.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&n.push({type:"mail",id:-t,object:{fwd_count:s(e.fwd).length}});for(var i=1;e["attach"+i+"_type"];++i)"call"===e["attach"+i+"_type"]?n.push({type:e["attach"+i+"_type"],id:e["attach"+i],initiatorId:r(e["attach"+i+"_call_initiator_id"]),state:e["attach"+i+"_call_state"],duration:r(e["attach"+i+"_call_duration"]),receiverId:r(e["attach"+i+"_call_receiver_id"])}):n.push({type:e["attach"+i+"_type"],id:e["attach"+i],kind:e["attach"+i+"_kind"],productId:e["attach"+i+"_product_id"]});e.geo&&n.push({type:"geo",id:e.geo});return n},t.isReservedPeer=function(e){if(0==e)return!0;return!1},t.isUserPeer=function(e){return e>0&&e<2e9},t.isChatPeer=function(e){return e>2e9};var r=window.intval;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=i(e.split("_"),2);return[n[0],n[1],t]}var a={};function s(e){if(a[e])return a[e];for(var t=e?e.length:0,n=[],r=[],s="",l=0;l<t;l++){var u=e[l],c=u.charCodeAt(0);c>=48&&c<=57||"_"===u||"-"===u?s+=u:"("!==u&&")"!==u&&":"!==u&&","!==u||(""!==s&&(r.push(s),n.push("id"),s=""),r.push(u),n.push(u))}s.length>0&&(r.push(s),n.push("id"));var d=i(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(a>50)return[[],t.length];for(var s=[],l="";r<t.length;){var u=t[r];if("id"===u)l=n[r];else if(","===u&&l)s.push(o(l)),l="";else if("("===u){var c=i(e(t,n,r+1,a+1),2),d=c[0];r=c[1],s.push(o(l,d)),l=""}else if(")"===u)return""!==l&&s.push(o(l)),[s,r];r++}return l&&s.push(o(l)),[s,r]}(n,r),1)[0];return Object.keys(a).length>300&&(a={}),a[e]=d,d}},eoxF:function(e,t,n){"use strict";var i=window,r=i.hide,o=i.ge,a=i.ce,s=i.append,l=i.geByClass1,u=i.val,c=i.addClass,d=i.show,A=i.obj2qs,f=i.unescapeAttr,p=i.elfocus,_=i.lockButton,h=i.unlockButton,m=i.extend,v=i.scrollToEl,g=i.remove,y=i.gpeByTag,w=i.each,b=i.removeClass,E=window.geo,k=window.ajax,C=window.nav,D=function(){var e=null,t=!1,n=!1,i={},S=[],T=0,M=null,P="",I="";function x(e,t){return!t&&H(e)}function O(e){n=!1;var i=o("medias_map"),r=o("attached_wrap");i||(i=a("div",{id:"medias_map",className:"pi_medias"}),s(i,r));var A=+e[1]||0,f=e[3]||"",p=e[4]||"",_=e[5]||"",h=(+e[6].lat||0)+"_"+(+e[6].lng||0),m=l("medias_map",i),v='<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">'+f+(_?", "+_:p?", "+p:"")+"</div>",g='<input type="hidden" name="place_id" value="'+A+'"><input type="hidden" name="place" value="'+h+'">';m?u(m,v+g):u(i,v='<div class="medias_map">'+v+g+"</div>");c("cp_geo_btn_sel","geo_btn"),t=!0,d(i)}function L(t){return H(e)}function B(){u("place_add_box",""),r("place_add_box"),d("places_box")}function N(t,n){R();var r=i[n];r&&(e={latitude:+r[6].lat||0,longitude:+r[6].lng||0},n?O(r):F(e,r))}function R(e){if(!M)return!0;u("m",M),M=null,v(l("create_post_extra","mcont"));var t=C.path+(C.params?"?"+C.params:"");return C.go(t,null,{push_only:!0,no_push:e}),!1}function F(e,i){n=!0;var r=o("medias_map"),s=o("attached_wrap");r||(r=a("div",{id:"medias_map",className:"pi_medias"}),s.appendChild(r));var A=e.latitude,f=e.longitude,p=(window.devicePixelRatio,i&&i[4]||!1),_=l("medias_map",r),h=p?'<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">'+p+"</div>":"",m='<input type="hidden" name="map" value="'+(A+"_"+f+"_0")+'">';_?u(_,h+""+m):u(r,'<div class="medias_map">'+h+m+"</div>");t=!0,c("cp_geo_btn_sel","geo_btn"),d(r)}function j(){e=null,i={},S=[],T=0,k.post(I,{_ajax:1}),g("medias_map")}function H(e){var t=window.al;g("feed_extra_field");var n=Math.round(1e8*e.latitude)/1e8,i=Math.round(1e8*e.longitude)/1e8,r=y("form","geo_btn"),o=a("input",{id:"feed_extra_field",type:"hidden",name:"add_place",value:n+","+i});if(!r)return C.go(C.path+"?act=places&lat="+n+"&lng="+i);var l=!1;return w(r,function(e,t){if("submit"===t.type)return l=t,!1}),l?(s(o,r),window.al&&t.ver?C.go(l):r.submit()):void 0}function U(t){t&&t.coords&&x(e={latitude:+t.coords.latitude||0,longitude:+t.coords.longitude||0})}function V(e){D.remove(),r("geo_waiting")}return{toggle:function(){t?D.remove():D.add()},addNewPlace:function(){var t=u("place_name_fld"),n=u("place_address_fld");return t?(_("place_add_btn"),k.post("/places.php",{_ajax:1,act:"add_place",latitude:e.latitude,longitude:e.longitude,title:t,address:n,hash:P},{onDone:function(e,t){if(h("place_add_btn"),e){var n={};n[e]=t,m(i,n),S.splice(S[0]?0:1,0,e),B(),N(0,e)}},onFail:function(){h("place_add_btn");var e=Array.prototype.slice.call(arguments).shift(),t=o("place_add_form");switch(e){case 2:t&&t.submit()}}}),!1):(p("place_name_fld"),!1)},addPlaceShow:function(t,n){var i=window.lang,o="/places.php"+A({act:"add_place",latitude:e.latitude,longitude:e.longitude,hash:P});u("place_add_box",'<h4 class="sub_header">'+i.mobile_geo_new_place_header+'</h4><div class="form_item fi_fat"><form id="place_add_form" action="'+o+'" method="post"><dl class="fi_row"><dt class="fi_label">'+i.mobile_geo_place_name_label+'</dt><dd class="iwrap"><input type="text" class="textfield" id="place_name_fld" name="title" /></dd></dl><dl class="fi_row"><dt class="fi_label">'+i.mobile_geo_place_address_label+'</dt><dd class="iwrap"><input type="text" class="textfield" id="place_address_fld" name="address" /></dd></dl><dl class="fi_row"><dd><input class="button" type="submit" id="place_add_btn" value="'+i.mobile_geo_place_add_btn+'" onclick="return checkin.addNewPlace(this);" /><a class="near_btn" onclick="checkin.addPlaceCancel(); return false;">'+i.mobile_cancel+"</a></dd></dl></form></div>"),u("place_name_fld",f(t)||""),u("place_address_fld",f(n)||""),r("places_box"),d("place_add_box"),p(t?"place_address_fld":"place_name_fld")},addPlaceCancel:B,selectPlace:N,changePlace:L,back:R,refreshCurrentPosition:function(){E.getCurrentPosition(U,V)},getCurrentAddress:function(){return i[0]&&i[0][5]||""},savePlaces:function(e){m(i,e)},add:function(n){if(!n&&t)return L();n&&(n.latitude||n.longitude)&&n.place?(e={latitude:+n.latitude||0,longitude:+n.longitude||0},n.place[1]?O(n.place):F(e,n.place),x(e,!0)):(E.getCurrentPosition(U,V),d("geo_waiting"))},add_place:function(n){if(!n&&t)return L();n&&(n.latitude||n.longitude)&&n.place?(e={latitude:+n.latitude||0,longitude:+n.longitude||0},n.place[1]?O(n.place):F(e,n.place),x(e,!0)):(E.getCurrentPosition(U,V),d("geo_waiting"))},remove:function(){t=!1,b("cp_geo_btn_sel","geo_btn"),j()},stash:function(r){if(!r)return[e,t,n,i,S,T,M];e=r[0],t=r[1],n=r[2],i=r[3],S=r[4],T=r[5],M=r[6]},init:function(o,a,s){return r("geo_waiting"),e=null,t=!1,n=!1,i={},S=[],T=0,M=null,P=a||"",I=s||"",o&&D.add(o),E.init()}}}();window.checkin=D},eyw1:function(e,t,n){"use strict";var i=window,r=i.ajax,o=i.obj2qs,a=function(){var e="/club",t="enter",n="leave",i=null;function a(t,n,i,a,s,l){var u=e+n+o({act:t,hash:i,id:n,from:a});r.post(u,{_ajax:1},{onDone:s,onFail:l})}return{enter:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;a(t,e,n,r,o,s)},leave:function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;a(n,e,t,r,o,s)}}}();window.Groups=a},f01n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteEvent=function(e){var t=r(e,2)[1];return{type:o,localId:t}},t.replaceFlagsEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:s,messageId:n,mask:i,peerId:o}},t.setFlagsEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:a,messageId:n,flags:i,peerId:o}},t.resetFlagsEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:l,messageId:n,flags:i,peerId:o}},t.addMessageEvent=U,t.editMessageEvent=function(e){var t=U(e);return t.type=B,t},t.replaceMessageEvent=function(e){var t=U(e);return t.type=N,t},t.editMessageLocallyEvent=function(e){return extend({},e,{type:B})},t.readInboundEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:c,peerId:n,upToId:i,unread:o}},t.readOutboundEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:d,peerId:n,upToId:i,unread:o}},t.gotOnlineEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:A,userId:-n,platform:i,lastSeenTs:o}},t.gotOfflineEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:f,userId:-n,reason:i,lastSeenTs:o}},t.resetDirectoriesEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:b,peerId:n,mask:i,local:void 0!==o&&o}},t.replaceDirectoriesEvent=function(e){var t=r(e,3),n=t[1],i=t[2];return{type:E,peerId:n,mask:i}},t.setDirectoriesEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:k,peerId:n,mask:i,local:void 0!==o&&o}},t.deleteDialogEvent=function(e){var t=r(e,3),n=t[1],i=t[2];return{type:L,peerId:n,localId:i}},t.chatChangedEvent=function(e){var t=r(e,3),n=t[1],i=t[2];return{type:p,chatId:n,self:i}},t.chatUpdatedEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:_,peerId:i,updateType:n,updateArg:o}},t.typingEvent=function(e){var t=r(e,5),n=t[1],i=t[2],o=t[3],a=t[4];return{type:h,peerId:n,userIds:i,totalCount:o,ts:a}},t.recordingAudioEvent=function(e){var t=r(e,5),n=t[1],i=t[2],o=t[3],a=t[4];return{type:m,peerId:n,userIds:i,totalCount:o,ts:a}},t.videoCallEvent=function(e){var t=r(e,3),n=t[1],i=t[2];return{type:v,userId:n,callId:i}},t.unreadCountEvent=function(e){var t=r(e,4),n=t[1],i=t[2],o=t[3];return{type:g,count:n,countNotMuted:i,showOnlyNotMuted:o}},t.notifySettingsChangedEvent=function(e){var t=r(e,2)[1],n=void 0===t?{}:t;return{type:y,peerId:n.peer_id,sound:n.sound,disabledUntil:n.disabled_until}},t.refreshMessageEvent=function(e){var t=r(e,2)[1],n=void 0===t?{}:t,i=U([!1,n.id,n.flags,n.peer_id,n.date,n.message,extend(n.kludges,{title:n.title||""}),{},n.random_id,n.chat_local_id,n.update_time]);return i.type=B,i},t.audioStartEvent=function(e){var t=r(e,2)[1],n=void 0===t?{}:t;return{type:R,uuid:n.uuid,deviceName:n.device_name||""}},t.emptyEvent=function(e){return{type:w,params:e}},t.transitionEvent=function(e){return{type:S,state:e}},t.resyncEvent=function(){return{type:C}},t.refreshLpKeyEvent=function(e){var t=r(e,3),n=t[1],i=t[2];return{type:D,key:n,url:i}},t.waitingForReconnectEvent=function(e){var t=r(e,2)[1];return{type:F,timeout:t}},t.reconnectingEvent=function(){return{type:j}},t.reconnectedEvent=function(){return{type:H}},t.resetPeer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:T,cancelSearch:e,removeActivePeer:t}},t.changePeer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{type:P,peerId:e,msgid:t,forward:n,cancelSearch:i,entryPoint:r}},t.changeTab=function(e){return{type:I,tab:e}},t.failedMessage=function(e,t,n){return{type:x,message:t,peer:e,error:n}},t.mutexEvent=function(e){var t=r(e,6),n=(t[0],t[1]),i=t[2],o=t[3],a=t[4],s=t[5];return{type:M,free:!!intval(n)||intval(a)===vk.id,resource:i,peerId:intval(o),who:intval(a),name:s}},t.resendEvent=function(e,t){return{type:O,message:t,peerId:e}},t.MESSAGE_REQUEST_STATUS_NEW=t.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED=t.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED=t.MAIL_CHAT_UPDATE_TYPE_USER_KICKED=t.MAIL_CHAT_UPDATE_TYPE_USER_LEFT=t.MAIL_CHAT_UPDATE_TYPE_USER_JOINED=t.MAIL_CHAT_UPDATE_TYPE_PINNED=t.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED=t.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED=t.FOLDER_HAS_BANNER=t.FOLDER_UNRESPOND=t.FOLDER_IMPORTANT=t.FLAG_AUDIO_MESSAGE_LISTENED=t.FLAG_HAS_REPLY=t.FLAG_STEALTH=t.FLAG_MEDIA=t.FLAG_DELETED=t.FLAG_SPAM=t.FLAG_FRIENDS=t.FLAG_CHAT=t.FLAG_IMPORTANT=t.FLAG_OUTBOUND=t.FLAG_UNREAD=t.RECONNECTED=t.RECONNECTING=t.WAITING_FOR_RECONNECT=t.AUDIO_START=t.REPLACE_MESSAGE=t.EDIT_MESSAGE=t.DELETE_DIALOG=t.RESEND=t.FAILED_MESSAGE=t.CHANGE_TAB=t.CHANGE_PEER=t.MUTEX=t.RESET_PEER=t.TRANSITION=t.REFRESH_LP_KEY=t.RESYNC=t.SET_DIRECTORIES=t.REPLACE_DIRECTORIES=t.RESET_DIRECTORIES=t.EMPTY=t.NOTIFY_SETTINGS_CHANGED=t.UNREAD_COUNT=t.VIDEO_CALL=t.RECORDING_AUDIO=t.TYPING=t.CONVERSATION_UPDATED=t.CHAT_CHANGED=t.GOT_OFFLINE=t.GOT_ONLINE=t.READ_OUTBOUND=t.READ_INBOUND=t.ADD_MESSAGE=t.RESET_FLAGS=t.REPLACE_FLAGS=t.SET_FLAGS=t.DELETE=void 0;var i=n("eTng");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o="event_delete";t.DELETE=o;var a="event_set_flags";t.SET_FLAGS=a;var s="event_replace_flags";t.REPLACE_FLAGS=s;var l="event_reset_flags";t.RESET_FLAGS=l;var u="event_add_message";t.ADD_MESSAGE=u;var c="event_read_inbound";t.READ_INBOUND=c;var d="event_read_outbound";t.READ_OUTBOUND=d;var A="event_got_online";t.GOT_ONLINE=A;var f="event_got_offline";t.GOT_OFFLINE=f;var p="event_chat_changed";t.CHAT_CHANGED=p;var _="event_chat_updated";t.CONVERSATION_UPDATED=_;var h="event_typing";t.TYPING=h;var m="event_recoding_audio";t.RECORDING_AUDIO=m;var v="event_video_call";t.VIDEO_CALL=v;var g="event_unread_count";t.UNREAD_COUNT=g;var y="event_notify_settings_changed";t.NOTIFY_SETTINGS_CHANGED=y;var w="event_empty";t.EMPTY=w;var b="event_reset_directories";t.RESET_DIRECTORIES=b;var E="event_replace_directories";t.REPLACE_DIRECTORIES=E;var k="event_set_directories";t.SET_DIRECTORIES=k;var C="event_resync";t.RESYNC=C;var D="event_refresh_lp_key";t.REFRESH_LP_KEY=D;var S="transition_event";t.TRANSITION=S;var T="reset_peer";t.RESET_PEER=T;var M="mutex";t.MUTEX=M;var P="change_peer";t.CHANGE_PEER=P;var I="event_change_tab";t.CHANGE_TAB=I;var x="event_failed_message";t.FAILED_MESSAGE=x;var O="event_resend";t.RESEND=O;var L="event_delete_dialog";t.DELETE_DIALOG=L;var B="event_edit_message";t.EDIT_MESSAGE=B;var N="event_replace_message";t.REPLACE_MESSAGE=N;var R="event_audio_start";t.AUDIO_START=R;var F="event_waiting_for_reconnect";t.WAITING_FOR_RECONNECT=F;var j="event_reconnecting";t.RECONNECTING=j;var H="event_reconnected";t.RECONNECTED=H;t.FLAG_UNREAD=1;t.FLAG_OUTBOUND=2;t.FLAG_IMPORTANT=8;t.FLAG_CHAT=16;t.FLAG_FRIENDS=32;t.FLAG_SPAM=64;t.FLAG_DELETED=128;t.FLAG_MEDIA=512;t.FLAG_STEALTH=65536;t.FLAG_HAS_REPLY=1<<21;t.FLAG_AUDIO_MESSAGE_LISTENED=4096;t.FOLDER_IMPORTANT=1;t.FOLDER_UNRESPOND=2;t.FOLDER_HAS_BANNER=8;t.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED=1;t.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED=2;t.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED=3;t.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED=4;t.MAIL_CHAT_UPDATE_TYPE_PINNED=5;t.MAIL_CHAT_UPDATE_TYPE_USER_JOINED=6;t.MAIL_CHAT_UPDATE_TYPE_USER_LEFT=7;t.MAIL_CHAT_UPDATE_TYPE_USER_KICKED=8;t.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED=9;t.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED=10;t.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED=11;t.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED=12;t.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED=13;function U(e){var t=r(e,11),n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],d=t[7],A=t[8],f=t[9],p=t[10],_=extend(c,d||void 0);return{type:u,messageId:intval(n),flags:intval(o),peerId:intval(a),date:intval(s),attaches:(0,i.convertKludgesToAttaches)(_,n),subject:c.title||"",text:l,kludges:_,randomId:intval(A),userId:(0,i.isChatPeer)(a)?intval(_.from):intval(a),update_time:p,chat_local_id:f}}t.MESSAGE_REQUEST_STATUS_NEW=3},fKzu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForbiddenPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find(function(t){return"*"===t[t.length-1]?e.startsWith(t.slice(0,t.length-1)):e===t})}},fOXz:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Artist=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"follow",value:function(t,n,i,r){lockButton(r),ajax.post("/audio",{_ajax:1,act:"artist_follow",ref:n,hash:i,artist_id:t},{onDone:function(i){unlockButton(r),r.classList.add("ArtistCover__followBtn__followed"),r.onclick=function(o){o.preventDefault(),e.unfollow(t,n,i,r)}},onFail:function(){return unlockButton(r)}})}},{key:"unfollow",value:function(t,n,i,r){lockButton(r),ajax.post("/audio",{_ajax:1,act:"artist_unfollow",ref:n,hash:i,artist_id:t},{onDone:function(i){unlockButton(r),r.classList.remove("ArtistCover__followBtn__followed"),r.classList.contains("ArtistCover__followBtn__canFollow")&&(r.onclick=function(o){o.preventDefault(),e.follow(t,n,i,r)})},onFail:function(){return unlockButton(r)}})}}]),e}();t.Artist=r},fP8X:function(e,t,n){"use strict";var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("j80l")),o=n("W9Tc");var a=need("nav"),s=need("page"),l=need("ajax"),u=need("audioplayer"),c=need("TabRow"),d=need("AudioSerp");window.uAudioSerp={},uAudioSerp._onQueryChange=v,uAudioSerp._init=m;var A=300,f={},p=!1,_=null,h=null;function m(){var e=need("cur");!function(){var e=y(a.getQuery("q"));e&&(f[e]=d.getFoundHtml())}(),e.processNav=g,u.onAdd(w),u.onDel(w)}function v(e){var t=e.query;if(trim(t)){var n=y(t);h&&h.abort(),_&&clearTimeout(_),d.toggleTabs(!0),n in f||!n?i():(d.setView("spinner"),_=setTimeout(i,A))}function i(){var e=!0;n||(e=!1),!n&&p&&(cur.processNav=null,d.toggleTabs(!1),d.setView("spinner"),p=!1),a.go(r.default.make(a.path,{q:t,tab:e})),cur.processNav=g}}function g(e){var t=a.path,n=e.nav.path,A=qs2obj(a.params),_=qs2obj(e.nav.params);if(t!==n||_.act)return s.save(a.cur,{title:document.title,bc:(0,i.$)("body").className,html:(0,i.$)(".basis").outerHTML,js:a.getPageJs()}),f={},p=!0,u.onAdd.off(w),u.onDel.off(w),h&&h.abort(),!1;if(!(0,o.partConfigEnabled)("audio_recommendations_new_catalog")&&A.tab!==_.tab){var m=_.tab||"owned";d.setTab(m),c.setSelectedTab("uAudioSerp",m)}var v=_.q||"",g=y(v);if(t.q!==_.q&&h&&h.abort(),!(0,o.partConfigEnabled)("audio_recommendations_new_catalog")){var b=r.default.make(t,{q:v,tab:null}),E=r.default.make(t,{q:v,tab:"global"});c.setTabUrl("uAudioSerp","owned",b),c.setTabUrl("uAudioSerp","global",E)}return SearchPanel.setQuery("uAudioSerp",v),v?g in f?(d.setFoundHtml(f[g]),d.setView("found")):(d.setView("spinner"),h=l.post(t,{q:v,_ajax:1},{onDone:function(e){d.setFoundHtml(e),d.setView("found"),f[g]=e}})):d.setView("owned"),!0}function y(e){return(e||"").trim().toLowerCase()}function w(){f={},p=!0}},fWqt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("vkUM"));var r=i;t.default=r,window.MsgDeleteDialog=i},fYoA:function(e,t,n){"use strict";window.SettingsNotifyGroup={},SettingsNotifyGroup._onChange=r;var i={notifyGroup:".settingsNotifyGroup",description:".settingsNotifyGroup__description"};function r(e,t){t.$control.closest(i.notifyGroup).$(i.description).innerHTML=e}},fdw3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return(0,o.isObject)(e)},t.isJS=function(){return!0},t.log=function(){var e;(e=console).log.apply(e,arguments)},t.mergeObjects=function(e,t){return Object.assign(e,t)},t.concatValues=function(e,t){return e+t},t.isNewNavigation=function(){return window.isNewNavigation},t.isFinite=function(e){return window.isFinite(e)},t.wrapCommunityMailUrl=function(e){return(0,r.wrapCommunityUrl)(e)},t.mailReplaceMentions=function(e,t){return e.replace(r.MENTION_REGEXP,t)},t.mailReplaceDomainMentions=function(e,t){return e.replace(r.MENTION_DOMAIN_REGEXP,t)},t.getLang=function(e){return window.getLang(e)},Object.defineProperty(t,"emojiToHTML",{enumerable:!0,get:function(){return i.emojiToHTML}}),Object.defineProperty(t,"isChatPeer",{enumerable:!0,get:function(){return r.isChatPeer}}),Object.defineProperty(t,"extend",{enumerable:!0,get:function(){return o.extend}}),Object.defineProperty(t,"makeUrl",{enumerable:!0,get:function(){return a.makeUrl}});var i=n("9M99"),r=n("qHA9"),o=n("OcsD"),a=n("j80l")},fntf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoryAuthor=t.StickerTypes=t.ERROR_CLASS=t.VIDEO_MUTED_CLASS=void 0;var i=s(n("TYsd")),r=n("jk6M"),o=s(n("oHC7")),a=s(n("WgE6"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=window.setStyle;t.VIDEO_MUTED_CLASS="StoryAuthor_videoMuted";t.ERROR_CLASS="StoryAuthor_error";t.StickerTypes={hashtag:1,mention:2,question:3,place:4,music:5};var d=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.data=n,this.state={authorIndex:t};var a=this.getCurrentStoryIndex();this.setCurrentStoryIndex(a),this.story=new o.default(this.data.items[a],this.data.author,t,a),this.authorStoriesHTML=i.default.html(this.story.render()),this.progressItemElems=null,Stories.onRender(function(){r.updateStory()})}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(e,[{key:"getCurrentStory",value:function(){if(this.story)return this.story}},{key:"destroy",value:function(){this.story&&this.story.destroy()}},{key:"update",value:function(){var e=this.data.index;this.destroy(),this.story=new o.default(this.data.items[e],this.data.author,this.state.authorIndex,e),this.authorStoriesHTML=i.default.html(this.story.render())}},{key:"updateHeader",value:function(){this.authorElems=Stories.getAuthorElems(),this.authorElem=this.authorElems[this.state.authorIndex],this.progressItemElems=Array.from(geByClass("StoryAuthor__progressItem",this.authorElem)),this.drawFilledProgressItems()}},{key:"updateStory",value:function(){var e=this;this.authorElems=Stories.getAuthorElems(),this.authorElem=this.authorElems[this.state.authorIndex];var t=geByClass1("Story__body",this.authorElem);this.story.update(t),this.story.onVideoData(function(n){n.authorIndex,n.storyIndex;var i=e.story.getDuration(),r=e.story.getType(),o=e.store.isStopped;if(e.countdown=new a.default(i,{tick:13,onTick:function(t){var n=(100-Math.min(t/i*100,100))/100;e.drawCurrentProgress(n)},onEnd:function(){"video"!==r&&(e.drawCurrentProgress(100),Stories.nextStory(!0),removeClass(e.authorElem,"StoryAuthor_paused"))},onPause:function(){e.story.pause(),addClass(e.authorElem,"StoryAuthor_paused")},onStart:function(){e.story.play(),removeClass(e.authorElem,"StoryAuthor_videoHold"),removeClass(e.authorElem,"StoryAuthor_paused")}}),"photo"!==r&&"broken"!==r||o){if("video"===r){var s=e.story.getVideoState(),l=e.story.getVideo();addClass(t,"Story__body_video"),4!==s||o||l.paused||e.countdown.start()}}else e.countdown.start()}),this.story.onVideoEndedEvent(function(){e.drawCurrentProgress(100),Stories.nextStory(!0)}),this.story.onVideoPauseEvent(function(){e.countdown&&e.countdown.pause()}),this.story.onVideoBuffering(function(){e.countdown&&e.countdown.pause()}),this.story.onVideoPlayEvent(function(){e.countdown&&!e.store.isStopped&&e.countdown.start()}),this.story.onAutoPlay(function(){var t=window.lang,n=e.story.getVideo();Stories.pauseAudio();var i=geByClass1("Story__body",e.authorElem),r=Stories.isGoodBrowser();n.play(),n.paused&&!r?e.story.renderError(e.authorElem,i,t.mobile_stories_inline_video_error):!e.countdown||e.store.isStopped||n.paused?r&&n.paused&&addClass(e.authorElem,"StoryAuthor_videoHold"):e.countdown.start(),n.muted&&addClass(e.authorElem,"StoryAuthor_videoMuted")}),this.story.onDestroy(function(){e.countdown&&(e.countdown.stop(),e.countdown=null)})}},{key:"getCountDown",value:function(){if(this.countdown)return this.countdown}},{key:"getFirstUnreadStoryIndex",value:function(){if(Stories._hasContext("all"))return 0;var e=this.data.items.findIndex(function(e){return!0===e.unread});return-1!==e?e:0}},{key:"getCurrentStoryIndex",value:function(){if(!this.data.index){var e=this.getFirstUnreadStoryIndex();this.setCurrentStoryIndex(e)}return this.data.index}},{key:"drawCurrentProgress",value:function(e){if(this.progressItemElems){var t=this.progressItemElems[this.data.index];c.transform(geByClass1("StoryAuthor__progressItemCurrent",t),[e,1])}}},{key:"drawFilledProgressItems",value:function(){var e=this.data.index;if(this.progressItemElems)for(each(this.progressItemElems,function(e,t){removeClass(t,"StoryAuthor__progressItem_filled")});e>=0;)addClass(this.progressItemElems[--e],"StoryAuthor__progressItem_filled")}},{key:"setCurrentStoryIndex",value:function(e){this.data.index=e,this.drawFilledProgressItems()}},{key:"renderEmpty",value:function(){var e=this.story.getPreview(),t=Stories.getWidth();return i.default.html({class:"StoryAuthor StoryAuthor_empty",style:"width: ".concat(t,"px;"),attrs:{"data-src":e}})}},{key:"render",value:function(){var e,t,n,o=window.lang,a=Stories.getWidth(),s=r.isTouch?"ontouchstart":"onmousedown",u=r.isTouch?"ontouchend":"onmouseup";return i.default.html({class:"StoryAuthor StoryAuthor_inited",style:"width: ".concat(a,"px;"),inner:[{class:"StoryAuthor__header",inner:{class:"StoryAuthor__progress",inner:this.data.items.map(function(){return{class:"StoryAuthor__progressItem",inner:{class:"StoryAuthor__progressItemBar",inner:{class:"StoryAuthor__progressItemCurrent"}}}})}},(e={class:"StoryAuthor__muted"},l(e,s,"Stories.unMute(this, event);"),l(e,"inner",[{class:"Story__icon Story__icon_unmute"},{class:"StoryAuthor__muted_text",inner:o.mobile_stories_unmute}]),e),(t={class:"StoryAuthor__next"},l(t,s,"Stories.onTouchStart(event);"),l(t,u,"Stories.onTouchEnd(event);"),l(t,"ontouchcancel","Stories.onTouchEnd(event);"),t),(n={class:"StoryAuthor__prev"},l(n,s,"Stories.onTouchStart(event);"),l(n,u,"Stories.onTouchEnd(event, true);"),l(n,"ontouchcancel","Stories.onTouchEnd(event, true);"),n),{class:"StoryAuthor__body",inner:this.authorStoriesHTML}]})}}]),e}();t.StoryAuthor=d},gD36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));var r=function(e){var t=!(!e.tags||!e.tags.length)&&e.tags;return{class:"Owner__tags",inner:t?[{class:"Owner__tags_icon Icon Icon_tagLabel"},t.map(function(e){return{class:"Owner__tag",inner:i.default.wrap(e.name)}})]:null}};t.default=r},gF8j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.getVisibilityState=u,t.getVisiblityEvent=c;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("uQjJ")),r=n("JuPy");var o=browser.iphone||browser.ipad||browser.ipod;function a(e){this.started=!1,this.is_idle=!0,this.activeTimeStart=null,this.cbActiveB=this.cbActive.bind(this),this.cbInactiveB=this.cbInactive.bind(this),this.onVisiblityChange=this.onVisiblityChange.bind(this),this.opts=extend({triggerEvents:"mousemove keydown",onIdleCb:function(){},onUnIdleCb:function(){},focusElement:e.element,element:null,idleTimeout:3e4},e)}function s(e,t,n){(0,r.isMvk)()?window.addEvent(e,t,n,{passive:!0}):window.addEvent(e,t,n)}function l(e,t,n){(0,r.isMvk)()?window.removeEvent(e,t,n,{passive:!0}):window.removeEvent(e,t,n)}function u(){return document.visibilityState||document.webkitVisibilityState}function c(){var e="visibilitychange";return document.visibilityState||(document.webkitVisibilityState?e+="webkit":e=""),e}extend(a.prototype,i.default.prototype),extend(a.prototype,{stop:function(){this.started=!1,l(this.opts.element,this.opts.triggerEvents,this.cbActiveB),(0,r.isMvk)()&&this._isTopLevel()&&c()&&l(document,c(),this.onVisiblityChange),(0,r.isMvk)()&&o||(l(this.opts.focusElement,"focus",this.cbActiveB),l(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.setIdleTo),clearTimeout(this.checkIdleCbTo),clearTimeout(this.sendCbTO),this.is_idle=!0,this.opts.parentManager&&this.opts.parentManager.off("idle",this.cbInactiveB)},idle:function(e){this.is_idle=!0,e||this.opts.onIdleCb(),this.emit("idle")},unidle:function(e){this.is_idle=!1,e||this.opts.onUnIdleCb(),this.emit("unidle")},start:function(){this.started=!0,!(0,r.isMvk)()&&browser.mobile||(this.is_idle=!this._isFocused(),this.opts.parentManager&&this.opts.parentManager.on("idle",this.cbInactiveB),(0,r.isMvk)()&&this._isTopLevel()&&c()&&s(document,c(),this.onVisiblityChange),(0,r.isMvk)()&&o||(s(this.opts.focusElement,"focus",this.cbActiveB),s(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.checkIdleCbTo),this.checkIdleCb(),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},checkIdleCb:function(){this.started&&(s(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.setIdleTo),this.setIdleTo=setTimeout(this.cbInactiveB,this.opts.idleTimeout))},cbActive:function(){this.started&&(this.activeTimeStart=(new Date).getTime(),clearTimeout(this.setIdleTo),this.is_idle&&(this.is_idle=!1,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("unidle"),this.opts.onUnIdleCb&&this.opts.onUnIdleCb()}.bind(this),100)),l(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.checkIdleCbTo),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},cbInactive:function(){this.started&&(this.activeTimeStart=null,this.is_idle||(this.is_idle=!0,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("idle"),this.opts.onIdleCb&&this.opts.onIdleCb()}.bind(this),100)),clearTimeout(this.checkIdleCbTo),l(this.opts.element,this.opts.triggerEvents,this.cbActiveB),s(this.opts.element,this.opts.triggerEvents,this.cbActiveB),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout))},getActiveTime:function(){return!this.is_idle&&this.activeTimeStart?(new Date).getTime()-this.activeTimeStart:0},onVisiblityChange:function(){"visible"===u()?this.cbActiveB():this.cbInactiveB()},_isTopLevel:function(){var e=this.opts.focusElement;return e===window||e===document},_isFocused:function(){var e=this.opts.focusElement;if(this._isTopLevel()){var t=u();return"string"==typeof t&&"visible"===t}return document.activeElement===e}})},gMTq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(n("TYsd")),r=n("DkIl"),o=l(n("rKp0")),a=l(n("29dZ")),s=l(n("bZ/P"));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=window.lang,n=(0,r.MailHat)({type:"page",left:(0,r.MailHat__icon)({icon:"back",url:"/mail"}),center:(0,r.MailHat__Title)({title:t.mobile_mail_mrs_page_title})}),l=[{class:"MessageRequestsPage__content ScrollView",inner:[{class:"MessageRequestsPage__info",inner:t.mobile_mail_mrs_page_info},i.default.wrap((0,o.default)({scrap:"mrs"}))]},e.count?{class:"MessageRequestsPage__footer",inner:[(0,a.default)({theme:"negative",size:"large",type:"button",inner:t.mobile_mail_mrs_button_reject_all,attrs:s.default.onClick("MessageRequestsPage.rejectAll","event","this")})]}:null];return{class:"messenger__page MessageRequestsPage",inner:[{class:"messenger__header",inner:i.default.wrap(n)},{class:"messenger__body",inner:l}]}};t.default=u},gNTM:function(e,t,n){"use strict";var i=window,r=i.hide,o=i.ge,a=i.ce,s=i.geByClass1,l=i.val,u=i.show,c=i.remove,d=i.addClass,A=i.removeClass,f=window.geo,p=window.ajax,_=function(){var e=!1;function t(e,t){var n=o("medias_map"),i=o("attached_wrap");n||(n=a("div",{id:"medias_map",className:"pi_medias"}),i.appendChild(n));var r=e.latitude,c=e.longitude,d=(window.devicePixelRatio,s("medias_map",n)),A=t?'<div class="medias_map_close"><i class="i_close">&nbsp;</i></div><div class="medias_map_label">'+t+"</div>":"",f='<input type="hidden" name="map" value="'+(r+"_"+c+"_0")+'">';d?l(d,A+""+f):l(n,'<div class="meias_row medias_map" onclick="geoloc.remove();">'+A+f+"</div>");u(n)}function n(){null,c("medias_map")}function i(e){e&&e.coords&&function(e){p.post("/places.php",{_ajax:1,act:"map_label",lat:e.latitude,lng:e.longitude},{onDone:function(n){r("geo_waiting"),t(e,n)},onFail:h})}({latitude:+e.coords.latitude||0,longitude:+e.coords.longitude||0})}function h(e){_.remove(),r("geo_waiting")}return{toggle:function(){e?_.remove():_.add()},add:function(n){!n&&e||(e=!0,d("cp_geo_btn_sel","geo_btn"),n&&(n.latitude||n.longitude)?t({latitude:+n.latitude||0,longitude:+n.longitude||0},n.label):(f.getCurrentPosition(i,h),u("geo_waiting")))},remove:function(){e&&(e=!1,A("cp_geo_btn_sel","geo_btn"),n())},init:function(e){return e&&_.add(e),f.init()}}}();window.geoloc=_},gTod:function(e,t,n){"use strict";function i(){$(r.self).classList.toggle(o.restCodesShown)}window.ReservedCodes={},ReservedCodes._onShowRestCodesClick=i;var r={self:".ReservedCodes"},o={restCodesShown:"ReservedCodes_restCodesShown"}},gUYQ:function(e,t,n){"use strict";var i=n("UxAg"),r=n("BZzM"),o=n("OcsD"),a=window.cdf,s=window.ajax,l=window.ownerPhotoUpload,u=window.nav;var c={onDone:function(e,t,n,i){var r=(0,o.ge)(e)||(0,o.geByClass1)("like_box","z")||(0,o.geByClass1)("like_box")||(0,o.geByClass1)("wall_item_for_like_"+e);if(r&&e){var a;a=(0,o.hasClass)("wall_item",r)||(0,o.hasClass)("market_item",r)?(0,o.geByClass1)("wi_like_wrap",r):(0,o.geByClass1)("item_like",r);var s=(0,o.geByClass1)("item_repost",r),l=(0,o.geByClass1)("like_wrap",r);a&&(a.innerHTML=t||"",(0,o.toggleClass)("is_empty",a,!t),(0,o.toggle)(a,t)),s&&(s.innerHTML=n||"",(0,o.toggle)(s,n)),l&&(0,o.val)(l,i||"")}},onFail:function(){var e=Array.prototype.slice.call(arguments);switch(e.shift()){case 2:u.hard_go(e[0])}}},d={onDone:function(e,t,n,i,r){var a=window.photo;if(c.onDone.apply(this,arguments),this.photo_id){var s=a.get(this.photo_id);if(s){var l=(0,o.ce)("div",{innerHTML:s.likes});(0,o.val)((0,o.geByClass1)("item_like",l),t),s.likes=(0,o.val)(l),s.publish='<span class="item_repost">'+n+"</span>",s.likes_cnt=(0,o.intval)(((0,o.attr)((0,o.geByClass1)("v_like",l),"data-like_count")||"").replace(/\D+/g,"")),s.likes_me=r;l=(0,o.ce)("div",{innerHTML:s.actions});var u=(0,o.geByClass1)("like_wrap",l);(0,o.val)(u,i),s.actions=(0,o.val)(l),a.save(s)}}},onFail:c.onFail},A={onDone:function(){var e=window.photo;if(this.photo_id){var t=e.get(this.photo_id);t&&(t.tag_info="",e.save(t));var n=(0,o.geByClass1)("photo_view"),i=(0,o.geByClass1)("pv_tag_wrap",n);(0,o.val)(i,"")}}},f={onDone:function(e,t,n){var i=window.photo,r=window.menu,a=(0,o.geByClass1)("photo_view"),s=(0,o.geByClass1)("photo_msg"),l=!!t;if(a&&s){(0,o.val)(s,t||""),(0,o.toggleClass)("photo_deleted",a,l);var u=i.get(e);u&&(u.deleted=t,i.save(u)),n&&r&&r.refresh({pp:n})}}},p={onDone:function(e,t){var n=window.isNewMail&&(0,i.$)(".messenger")&&this.link.closest(".msg");if((0,o.val)(e,t),n){var r=Number(n.className.match(/msg_id_(\d+)/)[1]);store.mail.msgs[r].textFull=n.$(".msg__text").innerHTML}}},_={onDone:function(e){this.link&&((0,o.after)(a(e),(0,o.gpeByClass)("pic_body_wrap",this.link)),(0,o.hide)(this.link))}},h={onStart:function(){(0,o.addClass)("cm_item_loading",this.link)},onDone:function(e){this.link&&(0,o.val)(this.link.parentNode,e)}},m={onDone:function(e,t){if(e){var n=window.photo;(0,o.remove)(e+"_msg");var i=(0,o.ge)(e);if(i){if(t){var r=(0,o.ce)("div",{id:e+"_msg",className:(i.className||"")+" post_message_item"});(0,o.val)(r,'<div class="pi_cont">'+t+"</div>"),(0,o.after)(r,i),(0,o.hide)(i),(0,o.geByClass1)("rtm_reply_wrap",i)&&window.reply&&window.reply.edithide()}else(0,o.show)(e);if(this.photo_id){var a=n.get(this.photo_id);if(a){var s=(0,o.geByClass1)("photoview"),l=(0,o.geByClass1)("comments_wrap",s);a.comments_html=(0,o.val)(l)}}}}}},v={onDone:function(e,t,n,i){if(e){(0,o.remove)(e+"_msg");var r=(0,o.ge)(e);if(r)if(t){var a=(/^([a-z]+)_item$/i.exec(n||"")||[])[1]||"inline",s=(0,o.ce)("div",{id:e+"_msg",className:a+"_item "+a+"_message_item"}),l=i||"message_item_cont";(0,o.val)(s,'<div class="'+l+'">'+t+"</div>"),(0,o.after)(s,r),(0,o.hide)(r)}else!1===t?(0,o.hide)(r):(0,o.show)(r)}}},g={onDone:function(e,t,n){if(e){var i=(0,o.ge)(e),r=(0,o.getY)(i)||(0,o.getY)(e+"_msg"),a=(0,o.getH)(i)||(0,o.getH)(e+"_msg"),s=r+(c<320?a:0)-(0,o.scrollTop)();if((0,o.remove)(e+"_msg"),i){var l=(0,o.hasClass)("wall_item",i)||(0,o.hasClass)("post",i)?"wall":"post";if(n){var u=(0,o.ce)("div",{id:e+"_msg",className:l+"_item post_message_item"});(0,o.val)(u,'<div class="pi_cont">'+n+"</div>"),(0,o.after)(u,i)}if(t){(0,o.each)((0,o.geByClass)(l+"_item"),function(){var e=!!this.id&&this.id.match(/^wall((-?\d+)_(-?\d+)(_\d+)?)$/),i=(0,o.attr)(this,"data-copy"),r=!!i&&i.match(/^(-?\d+)_(-?\d+)$/);if(!e)return!0;(!e[4]&&e[2]==t||e[4]&&e[3]==t||r&&r[1]==t)&&(0,o.toggleClass)("post_item_ignored",this,n)});var c=(0,o.getCw)(),d=(r=(0,o.getY)(i)||(0,o.getY)(e+"_msg"),a=(0,o.getH)(i)||(0,o.getH)(e+"_msg"),r+(c<320?a:0)-s);(0,o.geByClass1)("wall_item")===i&&(d=0),(0,o.scrollTop)(d)}}}}},y={onDone:function(e,t){if(e){var n=(0,o.ge)(e);if((0,o.remove)(e+"_msg"),n&&t){var i=(0,o.hasClass)("wall_item",n)||(0,o.hasClass)("post",n)?"wall":"post",r=(0,o.ce)("div",{id:e+"_msg",className:i+"_item post_message_item"});(0,o.val)(r,'<div class="pi_cont">'+t+"</div>"),(0,o.after)(r,n)}(0,o.toggleClass)("post_item_ignored",n,t)}}},w={onDone:function(e,t,n){if(e){var i=(0,o.ge)(e);if((0,o.remove)(e+"_msg"),i){if(n){var r=(0,o.ce)("div",{id:e+"_msg",className:"wall_item post_message_item"});(0,o.val)(r,'<div class="pi_cont">'+n+"</div>"),(0,o.after)(r,i)}(0,o.toggleClass)("post_item_ignored",i)}}}},b={onStart:function(){var e=(0,o.gpeByClass)("show_more_wrap",this.link),t=(0,o.geByClass1)("show_more",e)||this.link,n=(0,o.ce)("div",{id:"show_more_loading",className:"show_more_loading",innerHTML:'<i class="i_loading">&nbsp;</i>'}),i=(0,o.ce)("div",{id:"show_more_wrap",className:"show_more_wrap"});(0,o.attr)(n,"data-href",(0,o.getHref)(t)),i.appendChild(n),(0,o.before)(i,e),(0,o.remove)(e)},onDone:function(e){var t=window.cur;s.tAlProcess=(new Date).getTime();var n=(0,o.ge)("show_more_wrap"),i=a(e);(0,o.before)(i,n),(0,o.remove)(n),s.prepare_nav("mcont"),s.prepare_click("mcont"),(0,o.onBodyScrollForce)(100),s.tAlModule=t.module,s.tAlRender=(new Date).getTime(),Gif.onUpdate(),(0,r.resizePosters)()}},E={onStart:b.onStart,onDone:function(e,t){b.onDone.apply(null,arguments),Bookmarks.pushItemsToStore(t)}},k={onStart:b.onStart,onDone:function(e,t){var n=window.cur;s.tAlProcess=(new Date).getTime();var i=(0,o.geByClass1)("photos_page","mcont"),l=(0,o.ge)("show_more_wrap"),u=a(t);e=e.replace(/<img src="([^"]+)" class="/gi,'<img data-src="$1" class="_image ');var c=a(e);i&&i.appendChild(c),(0,o.before)(u,l),(0,o.remove)(l),s.prepare_nav("mcont"),s.prepare_click("mcont"),(0,o.onBodyScrollForce)(100),s.tAlModule=n.module,s.tAlRender=(new Date).getTime(),(0,r.resizePosters)()}},C={onStart:b.onStart,onDone:function(e,t){var n=window.cur;s.tAlProcess=(new Date).getTime();var i=(0,o.geByClass1)("audios_block",(0,o.geByClass1)("audios","mcont")),r=(0,o.ge)("show_more_wrap"),l=a(t),u=a(e);i&&i.appendChild(u),(0,o.before)(l,r),(0,o.remove)(r),s.prepare_nav("mcont"),s.prepare_click("mcont"),s.tAlModule=n.module,s.tAlRender=(new Date).getTime()}},D={onDone:function(e){var t=this.link.parentNode;(0,o.val)(t,e)}},S={onStart:function(){(0,o.addClass)("mva_item_loading",this.link)},onDone:function(e,t){(0,o.removeClass)("mva_item_loading",this.link),e.upload_url||t&&u.hard_go(t),l&&l.crop(e)||t&&u.hard_go(t)},onFail:function(){(0,o.removeClass)("mva_item_loading",this.link)}},T={onStart:function(){var e=this.link,t=(0,o.gpeByClass)("notify_lite",e);if(t)return(0,o.remove)(t);for(;e=e.parentNode;)if((0,o.hasClass)("notify_item",e)){(0,o.hasClass)("notify_panel",e.parentNode)?(0,o.remove)(e.parentNode):(0,o.remove)(e);break}}},M={onStart:function(){var e=(0,o.geByClass)("pagination","mcont");(0,o.each)(e,function(e,t){(0,o.before)((0,o.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)})},onDone:function(e,t,n){var i=window.mail,r=(0,o.ge)("messages"+t);r&&((0,o.val)(r,e),i.onMessagesRepainted(!0),!this.save&&(0,o.scrollToEl)()),this.save&&i.saveDialog({messages:e},t),this.clear&&((0,o.val)((0,o.geByTag1)("textarea","write_form"),""),(0,o.remove)((0,o.geByClass1)("pi_medias","write_form"))),(0,o.removeClass)("cp_attach_btn_sel",(0,o.geByClass1)("cp_attach_btn")),window.isNewMail&&MailScrap.clearSystemMessage2(),n&&n.play_animation_msg_id&&StickersSettings.getAutoplay()&&StickersAnimation.loadStickerInMvkIMAndPlay(n.play_animation_msg_id)},onFail:function(){switch(Array.prototype.slice.call(arguments).shift()){case 2:this.link.form&&this.link.form.submit()}}},P={onStart:function(){var e=(0,o.geByClass)("pagination","mcont");(0,o.each)(e,function(e,t){(0,o.before)((0,o.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)})},onDone:function(e,t){var n=window.mail,i=(0,o.ge)("dialogs");i&&((0,o.val)(i,e),!this.no_scroll&&(0,o.scrollToEl)(),n.cacheDialogsPage()),n.save(t)}},I={onFail:function(e,t){if(e===s.RESPONSE_CAPTCHA){var n=this.link&&this.link.form,i=n&&n.code?n.code.value:"";t+="&code=".concat(i),u.hard_go(t)}}},x={onStart:function(){var e=(0,o.gpeByClass)("friendsList__showMoreBtnWrap",this.link),t=(0,o.geByClass1)("friendsList__showMoreBtn",e)||this.link,n=(0,o.ce)("div",{id:"show_more_loading",className:"wait_loading"}),i=(0,o.ce)("div",{id:"show_more_wrap",className:"friendsList__showMoreBtnWrap"});(0,o.attr)(n,"data-href",(0,o.getHref)(t)),i.appendChild(n),(0,o.before)(i,e),(0,o.remove)(e)},onFail:function(){var e=this,t=this.link.getAttribute("data-href")||this.link.getAttribute("href");setTimeout(function(){s.post(t,{_ajax:1},{onDone:x.onDone.bind(e),onFail:x.onFail.bind(e)})},500)},onDone:b.onDone},O={onDone:function(e,t){if(e){var n=(0,o.ge)(e);n&&n.parentNode&&t&&(0,o.replace)(a(t),n.parentNode)}}},L={onDone:function(e,t){if(e){var n=(0,o.geByClass)(e);if(n.length&&t)for(var i=0,r=n.length;i<r;i++)n[i].parentNode&&(0,o.replace)(a(t),n[i].parentNode)}}},B={onDone:function(e,t,n,i,r){if(e){var s=(0,o.geByClass)(e);if(s.length&&t)for(var l=0,u=s.length;l<u;l++)s[l].parentNode&&(0,o.replace)(a(t),s[l].parentNode);Share.setBookmarkState(i,r),n&&Bookmarks.showSuccessSnack(n)}}},N={onDone:function(e,t,n,i){if(e){var r=(0,o.ge)(e);if(r){var a=(0,o.geByClass1)("wia_close",r);if(a&&((0,o.val)(a,n),a.href=t),(0,o.hasClass)("single_wall_item",r)){var s=(0,o.ge)("nc_form"),l=(0,o.geByClass1)("wall_replies");s?(0,o.toggle)(s,!!i):i&&(l?domInsert(l,i):(domInsertAfter((0,o.ce)("div",{innerHTML:i}),r),l=(0,o.geByClass1)("wall_replies"))),(0,o.toggleClass)("closed_comments",l,!i)}}}}};window.Like=c,window.PhotoLike=d,window.PhotoTag=A,window.PhotoDelete=f,window.Poll=p,window.CopyHistory=_,window.ToggleMenu=h,window.Comment=m,window.ItemDelete=v,window.FeedIgnore=g,window.FeedIgnoreItem=y,window.FeedIgnoreComments=w,window.Wall=b,window.Bookmark=E,window.BookmarkToggle=B,window.Photos=k,window.Audios=C,window.FixPost=D,window.ProfileMove=S,window.Notify=T,window.Dialog=M,window.Dialogs=P,window.LoginCheckAuthCodePage=I,window.WallSubscribe=O,window.FeedSubscribe=L,window.ImportedFriends=x,window.CloseComments=N,window.MiniAppsCatalogResetRecent=function(e){if(e.dataset.section){var t={act:"mini_apps_reset_recent",hash:e.dataset.hash||""};s.post("/apps.php",t,{onDone:function(){var t=(0,o.ge)("mini_apps_"+e.dataset.section);t&&t.remove()}})}}},gdug:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initBrowserUtils=function(){window._ua||(window._ua=navigator.userAgent.toLowerCase());window.locDomain||(window.locDomain=location.host.toString().match(/[a-zA-Z]+\.[a-zA-Z]+\.?$/)[0]);window.locHost=location.host,window.locProtocol=location.protocol,window.locHash=location.hash.replace("#/","").replace("#!","")},t.browserFeatures=t.mobPlatforms=t.browser=void 0;var i=n("zxIV"),r=navigator.userAgent.toLowerCase(),o={version:(r.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(r)||/opr/i.test(r),vivaldi:/vivaldi/i.test(r),amigo:/amigo.*mrchrome soc/i.test(r),msie:/msie/i.test(r)&&!/opera/i.test(r)||/trident\//i.test(r)||/edge/i.test(r),msie6:/msie 6/i.test(r)&&!/opera/i.test(r),msie7:/msie 7/i.test(r)&&!/opera/i.test(r),msie8:/msie 8/i.test(r)&&!/opera/i.test(r),msie9:/msie 9/i.test(r)&&!/opera/i.test(r),msie_edge:/edge/i.test(r)&&!/opera/i.test(r),mozilla:/firefox/i.test(r),chrome:/chrome/i.test(r)&&!/edge/i.test(r),safari:!/chrome/i.test(r)&&/webkit|safari|khtml/i.test(r),iphone:/iphone/i.test(r),ipod:/ipod/i.test(r),iphone4:/iphone.*OS 4/i.test(r),ipod4:/ipod.*OS 4/i.test(r),ipad:/ipad/i.test(r),android:/android/i.test(r),bada:/bada/i.test(r),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(r),msie_mobile:/iemobile/i.test(r),safari_mobile:/iphone|ipod|ipad/i.test(r),opera_mobile:/opera mini|opera mobi/i.test(r),opera_mini:/opera mini/i.test(r),mac:/mac/i.test(r),windows7:/windows nt 6.1/i.test(r),windowsVista:/windows nt 6.0/i.test(r),windowsXp:/windows nt (5.2|5.1)/i.test(r),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(r),smart_tv:/smart-tv|smarttv/i.test(r)};t.browser=o;t.mobPlatforms={1:1,2:1,3:1,4:1,5:1,8:1};var a={wheelEvent:"onwheel"in(0,i.ce)("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":o.mozilla?"MozMousePixelScroll":"DOMMouseScroll",hasBoundingClientRect:"getBoundingClientRect"in(0,i.ce)("div"),cmaEnabled:navigator.credentials&&navigator.credentials.preventSilentAccess&&window.vk&&vk.cma};t.browserFeatures=a},giB6:function(e,t,n){"use strict";var i={onClose:(0,function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ")).default)(),inited:!1,width:!1,height:!1,onResize:null,_lastNav:!1,_opened:!1,_destroy:!1,init:function(){i.inited||(i.inited=!0,i.initEvents())},initEvents:function(){var e=function(e){i.fixHeight(vkNow()+2e3,e)};addEvent(window,"orientationchange",e),onBodyResize(e),e(!0)},opened:function(){return hasClass("z_opened",window.bodyNode)!==i.opened&&toggleClass("z_opened",window.bodyNode,i._opened),i._opened},toggle:function(e,t){return!!checkEvent(e)||(i.opened()?i.close(e,t):i.open(e,t),!1)},open:function(e,t){return!!checkEvent(e)||!i.opened()&&(thover.clear(),i.init(),i._st=scrollTop(),i._lastNav=!1,addClass("z_opened",window.bodyNode),i._opened=!0,i.fixHeight(vkNow()+2e3,!0),scrollTop(0),!1)},close:function(e,t){return!!checkEvent(e)||!!i.opened()&&(thover.clear(),val("z",""),removeClass("z_opened",window.bodyNode),i._lastNav={cur:nav.cur,path:nav.path,params:nav.params,hash:nav.hash},i._opened=!1,i._destroy&&(i._destroy(),i._destroy=!1),scrollTop(i._st,1),i._st=!1,i.onResize=null,i.onClose(),!1)},updateSize:function(){var e=ge("z");e&&e.offsetWidth&&e.offsetHeight&&(i.width=e.offsetWidth,i.height=e.offsetHeight,i.onResize&&i.onResize())},fixHeight:function(e,t){if((i._opened||t)&&(e&&!(vkNow()>e)||t)){var n=getCw(),r=getCh();(i._lastWidth!=n||i._lastHeight!=r||t)&&(i._lastWidth=n,i._lastHeight=r,setStyle("z","height",r),i.updateSize(),scrollTop()||scrollTop(0)),clearTimeout(i._fixTo),i._fixTo=setTimeout(i.fixHeight,50,e)}},create:function(e,t){val("z",e),i._destroy=t}};window.zlayer=i},gqEf:function(e,t,n){"use strict";var i;function r(e){return function(){i={};for(var e=document.cookie.split(";"),t=/^[\s]*([^\s]+?)$/i,n=0,r=e.length;n<r;n++){var o=e[n].split("=");2==o.length&&(i[o[0].match(t)[1]]=unescape(o[1].match(t)?o[1].match(t)[1]:""))}}(),i[e]}function o(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=window.locDomain,a="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),a="; expires="+s.toGMTString()}document.cookie=[e,"=",r?escape(t):t,a,"; path=/",o?"; domain=."+o:"",i&&"https:"==window.locProtocol?"; secure":""].join("")}function a(e){o(e,null,-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=r,t.setCookie=o,t.clearCookie=a,window.getCookie=r,window.setCookie=o,window.clearCookie=a},gunf:function(e,t,n){"use strict";window.LoginHistory={_onSubmit:function(e,t,n){var i=geByClass1("loginHistory__iframe");preventEvent(e),t.submit(),addEvent(i,"load",function(){return nav.go(n,null,{isForm:!0})})}}},gvr7:function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}},gy8s:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("9Hyc"));n("hJNM");var r=i.default;t.default=r,window.Unfold=i.default},h1CJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e,t,n){var r=(0,i.default)({class:"CopyrightPopup",header:{title:getLang("mobile_wall_post_copyright_source")},content:{inner:[t,{class:"Popup__buttons",inner:[Btn({class:"Popup__button",inner:getLang("mobile_wall_post_copyright_go"),theme:"regular",use_native_onclick:!0,on_click:"CopyrightPopup.go(this, '".concat(n,"')")})]}]}});i.default.open(Wd.elem(r),!0)},t.go=function(e,t){if(i.default.close(e),t.startsWith("/story"))return void Stories.init(t.substr(1),{source:"view_source"});var n;if(n=/^\/?narrative(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(t))return void Stories.init("".concat(n[1],"/narrative").concat(n[1],"_").concat(n[2]),{source:"view_source"});/^@-?[\d\w._]+-[\d\w.-]+/.test(t.substr(1))&&(t+="?from=".concat(nav.cur));return nav.go(t,null)};n("OcsD");var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("Po+v"));!function(e){e&&e.__esModule}(n("z9sQ"))},h27l:function(e,t,n){"use strict";n("PovR");function i(e){pushNotifier.canBeEnabled().then(function(t){var n=!!e.$control&&geByTag1("input",e.$control);n&&(t?pushNotifier.setupSubscription().then(function(){!function(e){var t=ce("input",{type:"submit"},{display:"none"});e.$control.form.appendChild(t),ajax.click(t),e.$control.form.removeChild(t)}(e)}).catch(function(e){PushNotifier.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS===e?(n.checked=!1,addClass("Popup_open",geByClass1("pageAllowPushPopup"))):n.checked=!1}):n.checked=!1)})}window.SettingsNotifyPush={},SettingsNotifyPush._onSwitch=i},hJNM:function(e,t,n){"use strict";var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("jk6M")),r=a(n("AXyT")),o=a(n("9Hyc"));function a(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.default,{onOpen:befall.kind("unfoldName"),getByName:function(e){return $(l.unfoldByName(e))},setActive:function(e,t){var n,i;1===arguments.length?e=(i=e).closest(l.unfold):i=e.$(l.itemByName(t));if((n=e.$(l.itemActive))&&i){n.classList.remove(s.itemActive),i.classList.add(s.itemActive);var r=e.$(l.triggerText),o=i.$(l.itemText);r.innerText=o.textContent.trim()}},setCount:function(e,t,n){var i=e.$(l.itemCountByName(t));r.default.setValue(i,n)},setTitle:function(e,t,n){e.$(l.itemByName(t)).$(l.itemText).innerText=n},toggleItemEnabled:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.$(l.itemByName(t));i&&i.classList.toggle(s.itemDisabled,!n)}}),o.default._onTriggerMouseDown=c,o.default._onTriggerClick=u;var s={itemActive:"Unfold__item_active",itemDisabled:"Unfold__item_disabled",open:"Unfold_open"},l={unfold:".Unfold",unfoldByName:function(e){return'.Unfold[data-name="'.concat(e,'"]')},itemActive:".".concat(s.itemActive),itemByName:function(e){return".Unfold__item_name_".concat(e)},itemCountByName:function(e){return"".concat(l.itemByName(e)," .Unfold__itemCount")},item:".Unfold__item",itemDisabled:".".concat(s.itemDisabled),triggerText:".Unfold__triggerText",itemText:".Unfold__itemText",popup:".Unfold__popup"};function u(e){preventEvent(e)}function c(e){var t=e.closest(l.unfold),n=i.isTouch?"touchend":"mousedown",r=i.isTouch?"touchend":"mouseup",a=!i.isTouch&&window.innerWidth<882,u=t.getAttribute("data-name"),c=!1;function d(){t.classList.remove(s.open),document.removeEventListener("keydown",f),document.removeEventListener("touchmove",A),document.removeEventListener(n,_,!0),document.removeEventListener(r,p,!0)}function A(e){e.target.closest(l.popup)||d(),c=!0}function f(e){27===e.keyCode&&d()}function p(){document.addEventListener(n,_,!0)}function _(e){if(c)c=!1;else{var t=e.target.closest(l.itemDisabled);if(!t){var n=e.target.closest("".concat(l.item,"[href]"));if(n)return void(i.default.safari&&i.default.safari_mobile&&i.default.version<9?setTimeout(d,500):(cancelEvent(e),nav.onBeforeGo(function(){d()}),nav.go(n)));if(n=e.target.closest("".concat(l.item,"[onmousedown]")))return void setTimeout(d);if(n=e.target.closest("label".concat(l.item)))return void setTimeout(d);if(n=e.target.closest("input[onchange]"))return void(i.default.safari&&i.default.safari_mobile&&i.default.version<9?setTimeout(d,500):setTimeout(d))}(i.isTouch||a||t)&&(e.preventDefault(),e.stopImmediatePropagation()),(a||!i.isTouch&&t)&&document.addEventListener("click",h,!0),t||d()}}function h(e){e.preventDefault(),e.stopImmediatePropagation(),document.removeEventListener("click",h,!0)}u&&o.default.onOpen(u)(),t.classList.add(s.open),document.addEventListener("keydown",f),document.addEventListener("touchmove",A),i.default.msie_mobile?document.addEventListener(r,p,!0):document.addEventListener(n,_,!0)}},hOuX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.random=function(){try{if(window.crypto){var e=new Int32Array(1);return crypto.getRandomValues(e),Math.abs(e.reduce(function(e,t){return e+t}))}}catch(e){}return intval(rand(0,i).toFixed(0))},t.MAX_INTERGER=t.MAX_SAFE_INTEGER=void 0;t.MAX_SAFE_INTEGER=9007199254740991;var i=2147483647;t.MAX_INTERGER=i},hclJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("z9sQ")),r=o(n("29dZ"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{class:"SnackbarItem SnackbarItem_".concat(e.id),inner:[{class:"SnackbarItem__table",inner:[e.text?{class:i.default.class("SnackbarItem__cell",{text:!0}),inner:{class:"SnackbarItem__text",inner:Wd.wrap(e.text)}}:null,e.action?{class:i.default.class("SnackbarItem__cell",{action:!0}),inner:(0,r.default)({theme:"none",class:"SnackbarItem__action",url:e.action.url,on_click:e.action.onclick,use_native_onclick:!0,inner:Wd.wrap(e.action.text),attrs:e.action.attrs})}:null]}]}};t.default=a},hw56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyboardState=function(e){var t=store.mail.cur.keyboards,n=t[e];n||(n=t[e]={});return n},t.getKeyboardType=function(){if(!store.mail.cur)return"";return store.mail.cur.keyboardType||""},t.setKeyboardType=function(e){if(!store.mail.cur)return;store.mail.cur.keyboardType=e},t.loadDrafts=o,t.getPeerDraft=function(e,t){var n=o(e);return n[t]||(n[t]={})},t.setPeerDraft=function(e,t,n,i){var o=store.mail.cur.drafts;o||(o=store.mail.cur.drafts=o||{});if(i){var a=o[t],s=a&&a.editing&&a.editing.id===i?a.editing:void 0;o[t]=r({},a,{editing:r({},s,n,{id:i})})}else o[t]=r({},o[t],n,{editing:void 0});lsSet("mail_drafts_".concat(e),o)},t.pushPeerAttachments=function(e,t){var n=store.mail.peers[e];n.attachmentsStack.push(n.attachmentsHTML),n.attachmentsHTML=t},t.popPeerAttachments=function(e){var t=store.mail.peers[e],n=t.attachmentsStack.pop();n||(n=Brick({mix:"cp_attached_wrap",attrs:'id="attached_wrap"'}));t.attachmentsHTML=n},t.setPeerTyping=function(e,t){var n=store.mail.cur.typings[e];n||(n=store.mail.cur.typings[e]={});"text"!==t.type&&"audio"!==t.type||(t.count?n[t.type]=t:n[t.type]=null);if(n.text&&n.audio){var i=s(n.text,n.audio);n.mixed=i.count>1?i:null}else n.mixed=null},t.removePeerTypingUser=function(e,t){var n=store.mail.cur.typings[e];if(!n)return;var i=n.audio,r=n.text;i&&((i=a(i,t)).count?n.audio=i:n.audio=null);r&&((r=a(r,t)).count?n.text=r:n.text=null);if(n.text&&n.audio){var o=s(n.text,n.audio);n.mixed=o.count>1?o:null}else n.mixed=null},t.filterPeerTypingUser=a,t.replacePeer=function(e,t){var n=store.mail,i=n.scraps.folder,r=i.indexOf(e);-1!==r&&(t?i.splice(r,1,t):i.splice(r,1));Object.keys(n.rolls.folder).forEach(function(i){var r=n.rolls.folder[i],o=r.indexOf(e);-1!==o&&(t?r.splice(o,1,t):r.splice(o,1))}),t&&(n.rolls.peer[t]=n.rolls.peer[e],n.reached.peer.before[t]=n.reached.peer.before[e],n.reached.peer.after[t]=n.reached.peer.after[e]);e!==t&&(n.rolls.peer[e]&&n.rolls.peer[e].forEach(function(i){var r=n.msgs[i];r&&(t?(r.peerId=t,r.authorId===e&&(r.authorId=t)):delete n.msgs[i])}),delete n.rolls.peer[e],delete n.reached.peer.before[e],delete n.reached.peer.after[e],delete n.members[e],delete n.peers[e])},t.removePeer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=store.mail;if(!1!==t.lists){var i=n.scraps.folder,r=i.indexOf(e);-1!==r&&i.splice(r,1),Object.keys(n.rolls.folder).forEach(function(t){var i=n.rolls.folder[t],r=i.indexOf(e);-1!==r&&i.splice(r,1)})}!1!==t.msgs&&n.rolls.peer[e]&&n.rolls.peer[e].forEach(function(e){var t=n.msgs[e];t&&delete n.msgs[e]});!1!==t.lists&&(delete n.rolls.peer[e],delete n.reached.peer.before[e],delete n.reached.peer.after[e]);!1!==t.data&&(delete n.members[e],delete n.peers[e])},t.addPeer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=store.mail;if(t.msgs){var i=t.msgs;n.rolls.peer[e]=i,n.reached.peer.before[e]=!1,n.reached.peer.after[e]=!1}else n.rolls.peer[e]||(n.rolls.peer[e]=[],n.reached.peer.before[e]=!1,n.reached.peer.after[e]=!1);var r=n.msgs[n.rolls.peer[e][0]];n.rolls.folder.all.unshift(e),n.cur.folder&&n.scraps.folder.unshift(e);r&&(r.isUnread&&n.rolls.folder.unread.unshift(e),r.isImportant&&n.rolls.folder.important.unshift(e))},t.addPendingMsg=function(e){var t=store.mail.presend;t.pending[e.peerId]||(t.pending[e.peerId]=[]);t.msgs[e.sendId]=e,t.pending[e.peerId].push(e.sendId)},t.getPendingMsg=function(e,t){var n=store.mail.presend;if(!n.pending[t])return null;return n.msgs[e]},t.removePendingMsg=function(e){var t=store.mail.presend;if(!t.pending[e.peerId])return;var n=e.sendId;delete t.msgs[n],t.pending[e.peerId]=t.pending[e.peerId].filter(function(e){return e!==n})},t.removeFailedMsg=function(e){var t=store.mail.presend;if(!t.failed[e.peerId])return;var n=e.sendId;delete t.msgs[n],t.failed[e.peerId]=t.failed[e.peerId].filter(function(e){return e!==n})},t.failAllPendingMsgs=function(){var e=store.mail.presend,t={};Object.keys(e.msgs).forEach(function(n){var i=e.msgs[n];i.pending=!1,i.failed=!0,t[i.peerId]||(t[i.peerId]=[]),t[i.peerId].push(n)},{}),e.pending={},e.failed=t},t.queueToPresendMsgs=function(e){var t={};Object.keys(e.items).forEach(function(n){var r=e.items[n];t[n]=(0,i.sendDataToMessage)(r.data.data,-1!==e.failed.indexOf(n))});var n={};e.pending.forEach(function(e){var i=t[e];n[i.peerId]||(n[i.peerId]=[]),n[i.peerId].push(e)},{});var r={};e.failed.forEach(function(e){var n=t[e];r[n.peerId]||(r[n.peerId]=[]),r[n.peerId].push(e)},{}),store.mail.presend={msgs:t,pending:n,failed:r}},n("2IoG");var i=n("qHA9");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e){var t=store.mail.cur.drafts;return t||(t=lsGet("mail_drafts_".concat(e)),t=store.mail.cur.drafts=t||{}),t}function a(e,t){var n=e.users.filter(function(e){return e!==t});return n.length!==e.users.length&&(e.count=e.count-(e.users.length-n.length),e.users=n),e}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e.count+=t.count,t.users.reduce(function(e,t){return-1===e.users.indexOf(t)?e.users.push(t):e.count--,e},e)},{users:[],count:0,type:"mixed"})}},hxrZ:function(e,t,n){"use strict";var i=n("7V3f"),r=n("qHA9"),o=window,a=o.preventEvent,s=o.onDOMReady,l=o.lsCheck,u=o.geByClass1,c=o.qs2obj,d=o.geByTag1,A=o.gpeByTag,f=o.addEvent,p=o.onBodyResize,_=o.removeEvent,h=o.hide,m=o.each,v=o.show,g=o.vkNow,y=o.gpeByClass,w=o.attr,b=o.val,E=o.escapeRE,k=(o.hasClass,o.lsGet),C=o.isEmpty,D=o.lsSet,S=o.geByClass,T=o.setStyle,M=window.ajax,P=(window.page,window.post),I=window.Scroller,x=window.Stickers;window.StickersHints=function(){var e,t,n,o,O,L,B,N,R=864e5,F=300,j=30,H=64,U=8,V=4,z=!0,$=0,q={D83DDE0A:[0,":-)"],D83DDE03:[1,":-D"],D83DDE09:[2,";-)"],D83DDE06:[3,"xD"],D83DDE1C:[4,";-P"],D83DDE0B:[5,":-p"],D83DDE0D:[6,"8-)"],D83DDE0E:[7,"B-)"],D83DDE12:[8,":-("],D83DDE0F:[9,";-]"],D83DDE14:[10,"3("],D83DDE22:[11,":'("],D83DDE2D:[12,":_("],D83DDE29:[13,":(("],D83DDE28:[14,":o"],D83DDE10:[15,":|"],D83DDE0C:[16,"3-)"],D83DDE20:[17,">("],D83DDE21:[18,">(("],D83DDE07:[19,"O:)"],D83DDE30:[20,";o"],D83DDE33:[21,"8|"],D83DDE32:[22,"8o"],D83DDE37:[23,":X"],D83DDE1A:[24,":-*"],D83DDE08:[25,"}:)"],2764:[26,"<3"],D83DDC4D:[27,":like:"],D83DDC4E:[28,":dislike:"],"261D":[29,":up:"],"270C":[30,":v:"],D83DDC4C:[31,":ok:"]};function W(){var t=window.cur;if((o=d("textarea",A("form",u("cp_sticker_btn"))))&&!o.initialized){var i=function(t){var n=o.value.length;e=n-$>1,$=n,Y(),z&&(!function(){Z()&&g()-ee()>R*(2+Math.random())&&G();!function(e){M.post("/attachments",{_ajax:1,act:"stickers_hints_change_date"},{onDone:e})}(function(e){e*=1e3,Z()&&e>ee()&&G()})}(),z=!1)};o.initialized=!0,L=u("stickersHints"),O=u("stickersHints__content"),f(o,"focus",Y),f(o,"input",i),f(document,"click",Q),p(X),p(ne),t.destroy.push(function(){L=null,O=null,_(o=null,"focus",Y),_(o,"input",i),_(document,"click",Q),p("__clear",X),p("__clear",ne),n&&n.destroy(),$=0}),document.activeElement===o&&Y()}}function Y(){if(o){t&&clearTimeout(t);var r=function(t){if(t.length>j)return"";m(q,function(e,n){var i=new RegExp("(\\s|^)("+E(n[1])+(")"==n[1][n[1].length-1]?"+":"")+")([\\s\\.,]|$)","g");t=t.replace(i,function(t,n,i,r){return(n||"")+function(e){for(var t=Math.round(e.length/4),n="",i=0;t--;)n+=String.fromCharCode(parseInt(e.substr(i,4),16)),i+=4;return n}(e)+(r||"")})}),0===t.indexOf(N)&&(t=t.replace(N,""));t=t.toLowerCase().replace(/^(\s+)|([\.!\?]+)$/g,"").replace("ё","е"),e&&(t=t.replace(/\s+$/,""));return t=(0,i.emojiRemoveSkinToneModifiers)(t)}(o.value);!function(e){B?e(B):Z()?(B=k("stickers_keywords").keywords,e(B)):J(function(t){B=t,te(t),e(t)})}(function(e){var i=r&&e[r];i?t=setTimeout(function(){var e=i.userStickers||[],t=i.promotedStickers||[];if(e.length>0||t.length>0){var o=[];m(e,function(e,t){o.push(K({stickerId:t,query:r,isPromoted:!1}))}),m(t,function(e,t){o.push(K({stickerId:t,query:r,isPromoted:!0}))}),O.innerHTML=o.join(""),v(L),X(),ne(),(n=new I(L)).init()}},F):(n&&n.destroy(),h(L))})}}function G(){J(function(e){B=e,te(e),Y()})}function Q(e){var n=e.target;n===o||y(n,"stickersHints")||(h(L),t&&clearTimeout(t))}function X(){w(O,"style","")}function K(e){var t=e.isPromoted,n=t?"":"onclick=\"return StickersHints.onStickerThumbClick(event, this, {{stickerId}}, '{{stickerReferrer}}');\"",i=u("sticker_thumb",u("stickers_list")),o=t?'href="/attachments?'+["act=stickers_store","target="+w(L,"data-target"),"sticker_id={{stickerId}}","from=inline","sticker_referrer={{stickerReferrer}}"].join("&")+'"':'href="'+(w(i,"href")||w(i,"data-href")).replace(/media=[\w\d]+/,"media=sticker{{stickerId}}")+'"',a=x.getStickerUrl(e.stickerId,(0,r.getStickerSize)());return('<div class="sticker_item sticker{{stickerId}} {{promotedClass}}">        <a class="sticker_thumb thumb_item" '+o+" "+n+'>          <img class="th_img" src="{{stickerUrl}}" />        </a>      </div>').replace(/{{stickerId}}/g,e.stickerId).replace(/{{stickerUrl}}/g,a).replace("{{promotedClass}}",t?"sticker_item_promoted":"").replace("{{stickerReferrer}}","suggestion_"+e.query)}function J(e){M.post("/attachments",{_ajax:1,act:"stickers_hints_keywords"},{onDone:function(t){e(function(e){var t={};return m(e,function(e,n){var i=n.user_stickers,r=n.promoted_stickers;m(n.words,function(e,n){t[n]={userStickers:i,promotedStickers:r}})}),t}(t))}})}function Z(){return Boolean(k("stickers_keywords"))}function ee(){return k("stickers_keywords").time}function te(e){!e||C(e)?D("stickers_keywords"):D("stickers_keywords",{keywords:e,time:g()})}function ne(){var e=u("stickersHints__callout");if(e){var t=e.offsetWidth-V,n=t/H,i=n%1;i<.3?n=Math.floor(n)-.5:i>.7&&(n=Math.ceil(n)-.5);var r=Math.round(t/n-U);m(S("sticker_item",e),function(e,t){var n=u("sticker_thumb",t),i=u("th_img",t);T(t,"width",r),T(t,"height",r),T(n,"width",r),T(n,"height",r),T(i,"height",r)})}}return s(function(){l()&&!u("vk_stickers_hints_support_no")&&(P.onStickersInit(function(){W()}),u("stickersHints")&&W())}),M.onRedirect(function(e){c(e.split("?")[1]).invalidate_stickers_hints&&G()}),P.onReplyClick(function(e){var t=window.cur;N=e,setTimeout(Y,10),t.destroy.push(function(){N=""})}),{actualizeVisibility:Y,init:W,onStickerThumbClick:function(e,n,i,r){window.isNewMail&&a(e);var s=y("sticker_item",n),l=u("th_img",s);return w(s,"style",""),w(n,"style",""),w(l,"style",""),h(L),o.value="",t&&clearTimeout(t),P.sendSticker(n,i,!0,r)},onCheckboxLabelClick:function(e,t){setTimeout(function(){!function(e,t,n){var i={_ajax:1,act:"stickers_hints_enabled",value:e,hash:t};M.post("/attachments",i,{onDone:n})}(b(d("input",e.parentElement))?1:0,t,G)},0)},onCheckboxAutoAnimationLabelClick:function(e,t){setTimeout(function(){!function(e,t,n){var i={_ajax:1,act:"stickers_auto_animation_enabled",value:e,hash:t};M.post("/attachments",i,{onDone:n})}(b(d("input",e.parentElement))?1:0,t,G)},0)}}}()},"i/4A":function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registration=null,this._handlers=[]}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"register",value:function(){return e.isSupported()?navigator.serviceWorker.register("/js/cmodules/sw/sw_mobile.js",{scope:"/",updateViaCache:"none"}).then(this._onactive.bind(this)).then(function(e){return this.registration||(this.registration=e,this._addEventListener(navigator.serviceWorker,"message",this._onmessage.bind(this),!1)),e}.bind(this)):Promise.reject("SW: serviceWorker is unavailable")}},{key:"getRegistration",value:function(){return e.isSupported()?navigator.serviceWorker.ready.then(this._onactive.bind(this)).then(function(e){return this.registration||(this.registration=e,this._addEventListener(navigator.serviceWorker,"message",this._onmessage.bind(this),!1)),e}.bind(this)):Promise.reject("SW: serviceWorker is unavailable")}},{key:"unregister",value:function(){this.registration&&this.registration.unregister(),this._handlers.forEach(function(e){return e[0].removeEventListener(e[1],e[2])}),this._handlers=[]}},{key:"update",value:function(){this.registration&&this.registration.update()}},{key:"_addEventListener",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!1;this._handlers.forEach(function(i){i[0]===e&&i[1]===t&&i[2]===n&&(r=!0)}),r&&!i||(this._handlers.push([e,t,n]),e.addEventListener(t,n))}},{key:"_onactive",value:function(e){return e.active?Promise.resolve(e):new Promise(function(t){this._addEventListener(e.installing,"statechange",function(n){"activated"===n.currentTarget.state&&t(e)})}.bind(this))}},{key:"action_devicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"action",value:function(e,t){var n=null;return n=Array.isArray(e)?e:[[e,t]],this._message({actions:n}).then(function(e){return e.answers?Promise.resolve(1===n.length?e.answers[0]:e.answers):Promise.reject(new Error("ServiceWorker answer is incorrect"))})}},{key:"_message",value:function(e){var t=this;return this.getRegistration().then(function(){return new Promise(function(t,n){var i=new MessageChannel;i.port1.onmessage=function(e){this._messageCheck(e)?t(e.data.data):n(new Error("ServiceWorker message is incorrect"))}.bind(this),this.registration.active.postMessage(this._messageWrap(e),[i.port2])}.bind(t))})}},{key:"_onmessage",value:function(e){if(this._messageCheck(e)){var t=e.data.data;if(t.actions&&Array.isArray(t.actions)){var n=[];t.actions.forEach(function(t){var i="action_"+t[0],r=t[1],o=this[i]?this[i](r,e):void 0;o instanceof Promise||(o=Promise.resolve(o)),n.push(o)}.bind(this)),Promise.all(n).then(function(t){var n={};t.forEach(function(e,t){void 0!==e&&(n[t]=e)}),Object.keys(n).length&&e.ports[0].postMessage(this._messageWrap({answers:n}))}.bind(this))}}}},{key:"_messageCheck",value:function(e){return(""===e.origin||e.origin.match(/^https:\/\/([a-zA-Z0-9\-\.]+\.)?vk\.com$/))&&e.data&&e.data.data&&"sw"===e.data.type}},{key:"_messageWrap",value:function(e){return{type:"sw",data:e}}}],[{key:"isSupported",value:function(){try{return!(!window.fetch||!navigator.serviceWorker)}catch(e){return!1}}}]),e}();t.default=r,r.SW_NOT_AVAILABLE_ERROR="SW: serviceWorker is unavailable"},"i/qW":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastResample=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"peak";return new l({srcSampleRate:e.length,dstSampleRate:t,normalizeAlgorithm:n,truncateTo:0}).push(e)},t.Resampler=void 0;var i=n("JbZL"),r=n("KFXn"),o=n("UUtA");function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s={avg:i.AverageAlgorithm,peak:r.PeakAlgorithm,quad:o.QuadAlgorithm},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._normalizeAlgorithm=!1,s[t.normalizeAlgorithm]&&(this._normalizeAlgorithm=new s[t.normalizeAlgorithm]),this._srcSampleRate=parseInt(t.srcSampleRate||0),this._dstSampleRate=parseInt(t.dstSampleRate||0),this._truncateTo=1,void 0!==t.truncateTo&&(this._truncateTo=t.truncateTo),this._dstSampleRate>0?this._sampleRate=this._srcSampleRate/this._dstSampleRate:this._sampleRate=0,s[t.algorithm]||(t.algorithm="peak"),this._algorithm=new s[t.algorithm],this._sampleCount=0,this._data=[]}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"push",value:function(e){if(this._sampleRate<=0)return[];for(var t,n=[],i=0;i<e.length;i++)if(this._truncateTo>0&&(e[i]=Math.min(this._truncateTo,Math.abs(e[i]))),this._sampleCount+=1,this._sampleCount>=this._sampleRate)for(;this._sampleCount>=this._sampleRate;)this._sampleCount-=this._sampleRate,this._sampleCount<=.8&&this._algorithm.push(e[i]),t=this._algorithm.get(),n.push(t),this._normalizeAlgorithm&&this._normalizeAlgorithm.push(t),this._algorithm.clear(),this._sampleCount>.2&&this._algorithm.push(e[i]);else this._algorithm.push(e[i]);if(this._normalizeAlgorithm){var r=this._normalizeAlgorithm.get();if(this._normalizeAlgorithm.clear(),r>0)for(var o=0;o<n.length;o++)n[o]=n[o]/r,this._truncateTo>0&&(n[o]=Math.min(this._truncateTo,Math.abs(n[o])))}return n}}]),e}();t.Resampler=l},i0zL:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ")),r=n("K0hv"),o=n("tqgD");var a=window,s=a.hasClass,l=a.ge,u=a.geByClass1,c=a.getCw,d=a.getCh,A=a.attr,f=a.setStyle,p=a.extend,_=a.preventEvent,h=a.isUndefined,m=a.val,v=a.vkNow,g=a.getW,y=a.getH,w=a.scrollTop,b=a.gpeByClass,E=a.toggleClass,k=a.cancelEvent,C=a.qs2obj,D=a.obj2qs,S=a.removeClass,T=a.addClass,M=a.addEvent,P=a.removeEvent,I=a.len,x=a.show,O=a.each,L=a.hide,B=a.escapeAttr,N=a.htsc,R=a.toggle,F=a.formatNum,j=a.remove,H=a.append,U=a.reflow,V=2,z=window.ajax,$=window.thover,q=window.nav,W=window.page,Y=window.PhotoLike,G=window.zlayer,Q=window.photo,X=function(){var e=!1,t=!1,n=!1,a=!1,K=!1,J=!1,Z=!1,ee=!1,te=!1,ne=!1,ie=!1,re=!1,oe=!1,ae=!1,se=!1,le=!1,ue=!1,de=!1,Ae=!1,fe=!1,pe=!1,_e={min_scale:1,max_scale:3,min_scale_limit:.5,max_scale_limit:5,anim_duration:300,inertia_duration:300,bounce_diff:1.5,crop_padding:20,crop_size:250,fps:0};function he(e){var t=c()/2,n=d()/2;if(e.touches){for(var i=0,r=0,o=0,a=Math.min(2,e.touches.length);i<a;i++)r+=e.touches[i].pageX,o+=e.touches[i].pageY,0;return a?{pageX:r/a-t,pageY:o/a-n}:{pageX:-t,pageY:-n}}return{pageX:e.pageX-t,pageY:e.pageY-n}}function me(e){return void 0!==e.naturalWidth?{width:e.naturalWidth,height:e.naturalHeight}:"VIDEO"===e.tagName?(window.v=e,{width:e.clientWidth,height:e.clientHeight}):((new Image).src=e.src,{width:e.width,height:e.height})}function ve(e){var t=A(e,"data-id");return ge((Dn(yn).tags||{})[t]||[])}function ge(e){return e[0]?{coords:{x:e[0][0],y:e[0][1],w:e[0][2],h:e[0][3]},name:e[1],href:e[2],al:e[3]}:{}}function ye(e){f(t,"overflow",e?"visible":"hidden")}var we=null,be=null;function Ee(e,n,i,r,o,a,s,l,u){if(!_e.fps||u){var c=!1,d=!!l&&function(){c||(c=!0,l())};a?(t&&f.animate(t,"transform",{duration:a,func:s},d),ie&&f.animate(ie,!1===o?"transform":"transform, opacity",{duration:a,func:s},d),ae&&f.animate(ae,!1===o?"transform":"transform, opacity",{duration:a,func:s},d),K&&f.animate(K,!1===o?"transform":"transform, opacity",{duration:a,func:s},d),ft=!0):ft&&(t&&f.animate(t),ie&&f.animate(ie),ae&&f.animate(ae),K&&f.animate(K),ft=!1),f.transform(t,{translate:[n,0]}),f.transform(ie,e,[i,r]),ln(e,i,r),!1!==o&&(f(ie,"opacity",o),(Je||Ze)&&(f(ae,"opacity",o),et=!0),function(e,t){var n=window.lang;if(e){var i=G.height,r=i/5,o=i/3.5,a=Math.abs(e),s=a>20?e+(e>0?20-e:-20-e)/_e.bounce_diff:e,l=0===t?0:Math.max(0,Math.min((a-20)/r,.75));t>0&&f.transform(K,{translate:[0,s]}),f(K,"opacity",l);var u=a>o,c=u?"":e>0?" zpv_close_move_down":" zpv_close_move_up",d=u?n.mobile_zphoto_release_to_close:n.mobile_zphoto_move_to_close;m(K,'<div class="zpv_close_msg'+c+'">'+d+"</div>"),(K.is_down&&e<0||!K.is_down&&e>0)&&an(e>0)}else f.transform(K,{translate:[0,0]}),f(K,"opacity",0)}(r,o)),on(e)}else we=[e,n,i,r,o,a,s,l,!0],be||ke()}function ke(){we&&(Ee.apply(window,we),we=null),clearTimeout(be),be=_e.fps?setTimeout(ke,1e3/_e.fps):null}function Ce(e,t,n){Vt(!0),Ee(He,Le,Fe,je,pt,e,t,n),pt=!1}function De(e,t,n,i){Ee(e.currentScale,e.curBodyX,e.currentX,e.currentY,!1,t,n,i)}function Se(e){e=function(e){if(!e)return e;var t=(ie.width||ie.clientWidth)/2,n=(ie.height||ie.clientHeight)/2;return[e[0]+t,e[1]+n]}(e||[0,0]),f.transformOrigin(ie,e)}var Te,Me,Pe,Ie,xe,Oe,Le,Be,Ne,Re,Fe,je,He,Ue,Ve,ze,$e,qe,We,Ye,Ge,Qe,Xe,Ke,Je,Ze,et,tt,nt,it,rt,ot,at,st,lt,ut,ct,dt,At,ft,pt,_t=!1,ht=!1,mt=null;function vt(e){var t=e[1].pageX-e[0].pageX,n=e[1].pageY-e[0].pageY;return{distance:Math.sqrt(t*t+n*n),angle:180*Math.atan2(n,t)/Math.PI}}function gt(e){var t=vt(e);if(_t){var n=t.distance/_t.scale,i=t.angle-_t.rotation;i<-180&&(i+=360),i>180&&(i-=360),p(_t,{startDistance:n,startAngle:i})}else _t={startDistance:t.distance,startAngle:t.angle,scale:1,rotation:0}}function yt(e){return p({originalEvent:e},e,function(e){if(!_t)return{scale:1,rotation:0};if(e.length<2)return{scale:_t.scale,rotation:_t.rotation};var t=vt(e),n=t.distance/_t.startDistance,i=t.angle-_t.startAngle;i<-90&&(i+=360),i>270&&(i-=360);var r={scale:n,rotation:i};return p(_t,r),r}(e.touches),he(e))}function wt(e){var t=e.touches;t&&(t.length>5||t.length<2?_t&&(rn(yt(e)),_t=!1):_t?gt(t):(tn(yt(e)),gt(t)))}function bt(e){var t=e.touches;t&&(t.length>5||t.length<2?_t&&(rn(yt(e)),_t=!1):_t&&nn(yt(e)))}function Et(e){var t=e.touches;t&&((t.length>5||t.length<2)&&_t&&(rn(yt(e)),_t=!1),_t&&gt(t))}function kt(e){_(e);var t=(e.detail?e.detail:e.wheelDelta)>0?1.05:.95,n=p({originalEvent:e},e);ht||(ht=1,Jt(e),tn(p(n,{scale:ht}))),nn(p(n,{scale:ht*=t})),clearTimeout(mt),mt=setTimeout(function(){rn(p(n,{scale:ht})),en(e),ht=!1},200)}function Ct(){Te=0,Me=0,Pe=0,Ie=0,xe=1,Oe=!0,Le=0,Be=0,Ne=0,Re=1,Fe=0,je=0,He=1,Ue=!1,Ve=!1,ze=!1,$e=!1,qe=!1,We=!1,Ye=!1,Ge=!1,Qe=!1,et=!1,tt=!1,nt=!1,it=!1,rt=!1,!1,ut=!1,ct=!1,dt=!1,At=!1}function Dt(){return{lastScale:xe,deltaX:Te,deltaY:Me,pointX:Pe,pointY:Ie,curScale:Re,currentScale:He,curX:Be,curY:Ne,currentX:Fe,currentY:je,curBodyX:Le}}function St(e,t,n){n=n||Dt();var i=p({},n,e=e||{});if(h(e.deltaX)||h(e.deltaY)?h(e.pointX)||h(e.pointY)?h(e.lastScale)?h(e.currentScale)?h(e.curScale)||(i.currentScale=i.lastScale*i.curScale,i.curX=i.pointX-i.deltaX*i.curScale,i.curY=i.pointY-i.deltaY*i.curScale,i.currentX=i.curX/i.currentScale,i.currentY=i.curY/i.currentScale):(i.curScale=i.currentScale/i.lastScale,i.curX=i.pointX-i.deltaX*i.curScale,i.curY=i.pointY-i.deltaY*i.curScale,i.currentX=i.curX/i.currentScale,i.currentY=i.curY/i.currentScale):(i.curScale=1,i.currentScale=i.curScale*i.lastScale):(i.curX=i.pointX-i.deltaX*i.curScale,i.curY=i.pointY-i.deltaY*i.curScale,i.currentX=i.curX/i.currentScale,i.currentY=i.curY/i.currentScale):(i.pointX=i.curX+i.deltaX*i.curScale,i.pointY=i.curY+i.deltaY*i.curScale),h(e.curX)||(i.curX=e.curX,i.currentX=i.curX/i.currentScale),h(e.curY)||(i.curY=e.curY,i.currentY=i.curY/i.currentScale),t)return i;Te=i.deltaX,Me=i.deltaY,Pe=i.pointX,Ie=i.pointY,xe=i.lastScale,Re=i.curScale,He=i.currentScale,Be=i.curX,Ne=i.curY,Fe=i.currentX,je=i.currentY,Le=i.curBodyX}function Tt(){var e=G.width||c(),t=G.height||d();if(pe)var n=e,i=Math.min(_e.crop_size,n-2*_e.crop_padding),r=i,o=i;else r=e,o=t;return{width:r,height:o}}function Mt(e){var t=Tt().width,n=((ie.width||ie.clientWidth)*e-t)/2,i=-n;return n<=0&&(i=n=0),{min:i,max:n}}function Pt(e){var t=Tt().height,n=((ie.height||ie.clientHeight)*e-t)/2,i=-n;return n<=0&&(i=n=0),{min:i,max:n}}function It(){if(pe)var e=1,t=(vn?vn[0]:{max_scale:_e.max_scale}).max_scale;else{var n=me(ie);e=_e.min_scale,t=Math.max(_e.max_scale,n.width/c(),(n.height||n.clientHeight)/d())}return{min:e,max:t}}function xt(e){var t=G.height||d(),i=Math.abs(wn)>=10,r=Math.abs(e)>1,o=t/3.5,a=Math.abs(Ne);return Ne*e<0&&(i=!0),e=e||0,a>o||!i&&r?(function(e){var t=G.height||d(),i=2*Math.abs(je)>t?.85:1.7;St({curY:(e>1?t:e<-1?-t:Ne>0?t:-t)/i}),pt=0,Ce(150,"ease-in",Ot),f(n,"width",0),st=!0}(e),!0):(Xt()&&(pt=1,Ce(300),$e=!1,Ze&&(Ze=!1,cn(!0))),!1)}function Ot(){de&&X.close()}function Lt(){!1!==ot&&(ye(!1),xn(ot),f.transform(re),f.transform(oe),Ee(1,0,0,0,1),Se(),ot=!1)}function Bt(){var e=1.05*(G.width||c());Fe-=(e+Le)/He,Le=-e,ot=yn+1,wn--,Ce(300,"ease-out",Lt),_n(!1,!0),Ze=!1,X.onPhotoChange&&X.onPhotoChange(yn+1,{no_open:!0,local:Ae,crop:pe})}function Nt(){var e=1.05*(G.width||c());Fe+=(e-Le)/He,Le=e,ot=yn-1,wn++,Ce(300,"ease-out",Lt),_n(!1,!0),Ze=!1,X.onPhotoChange&&X.onPhotoChange(yn-1,{no_open:!0,local:Ae,crop:pe})}function Rt(){if(!ct)return!1;var e=function(){if(!ct||ct.length<2)return[0,0,0];for(var e=v(),t=!1,n=ct.pop(),i=ct.length-1;i>=0;i--){var r=e-ct[i][0];if(r>150)break;t=ct[i]}if(!t||!n)return[0,0,0];var o=n[1].pageX-t[1].pageX,a=n[1].pageY-t[1].pageY,s=Math.sqrt(o*o+a*a);return(r=n[0]-t[0])?[s/r,o/r,a/r]:[0,0,0]}(),t=e[0],n=e[1],i=e[2];if(jt(),!t)return!1;var r=ze||$e?5.1:4.7,o=t/r,a=n*o-r*o*o/2,s=i*o-r*o*o/2;if(o*=530,a*=140,s*=140,t<.1||!a&&!s)return!1;if(!$e){var l={};ze||(l.curX=Be+a,l.curY=Ne+s),St(l);var u=Mt(He);l={},Be<u.min?l.curBodyX=Oe?Be-u.min:0:Be>u.max&&(l.curBodyX=Oe?Be-u.max:0),St(l)}return ze?4.7*n:$e?4.7*i:o}function Ft(e){ct||(ct=[]),ct.push([v(),e]),ct=ct.slice(-20)}function jt(){ct=!1}function Ht(e,t){var n=function(e,t,n,i){var r=e[0],o=e[1],a=n[0],s=n[1],l=i/t;return 1!=l&&[r+(r-a)/(l-1),o+(o-s)/(l-1)]}([e.curX,e.curY],e.currentScale,[t.curX,t.curY],t.currentScale);if(!n)return!1;var i=n[0],r=n[1];return e.deltaX=i-e.curX,e.deltaY=r-e.curY,e.currentX=e.curX/e.currentScale+i-i/e.currentScale,e.currentY=e.curY/e.currentScale+r-r/e.currentScale,t.deltaX=i-t.curX,t.deltaY=r-t.curY,t.currentX=t.curX/t.currentScale+i-i/t.currentScale,t.currentY=t.curY/t.currentScale+r-r/t.currentScale,n}function Ut(e,t,n){var i,r,o,a,s,l,A,f,p,_,h,m,v,w,b,E=G.width||c(),k=G.height||d(),C=!1,D=(Math.min(50,E/7),me(ie)),S=E/D.width,T=k/D.height,M=Math.min(1,S,T),P=ve(e).coords,I=u("zpv_tl",e),x=g(I),O=y(I),L=(Math.min((E-30)/Math.max(P.w*D.width*M/100,x),(k-30)/(P.h*D.height*M/100+O+5)),function(){r=D.width*M*n.currentScale,o=D.height*M*n.currentScale,a=E/2-r/2+n.currentX*n.currentScale,s=k/2-o/2+n.currentY*n.currentScale,f=a+P.x*r/100,p=s+P.y*o/100,l=P.w*r/100,A=P.h*o/100,i=f+l/2-x/2,p+A+5,h=Math.min(f,i),_=Math.max(l,x),v=h+_,w=(m=p)+(A+O+5),b={}});return n=(n=St(b,t,n))||Dt(),L(),h<15?(b.curX=n.curX+(15-h),C=!0):v>E-15&&(b.curX=n.curX-(v-E+15),C=!0),m<15&&(b.curY=n.curY+(15-m),C=!0),n=(n=St(b,t,n))||Dt(),L(),w>k-15&&(b.curY=n.curY-(w-k+15),C=!0),n=St(b,t,n),t?n:C}function Vt(e){At&&(At=!1,Se(),e||Ce(),sn(!0,!0))}function zt(e,t,n){var i={};return n=n||Dt(),i.lastScale=e,n=St(i,t,n),!!t&&n}function $t(e,t,n){var i={};if(n=n||Dt(),!Kt())return!!t&&n;i.curScale=e,n=(n=St(i,t,n))||Dt();var r=It();return i={currentScale:n.currentScale},n.currentScale<r.min?i.currentScale=n.currentScale+(r.min-n.currentScale)/_e.bounce_diff:n.currentScale>r.max&&(i.currentScale=n.currentScale+(r.max-n.currentScale)/_e.bounce_diff),n=St(i,t,n),!!t&&n}function qt(e,t){if(!Kt())return!1;var n=!1,i={};t=t||Dt();var r=It();return t.currentScale<r.min?(i.currentScale=r.min,n=!0):t.currentScale>r.max&&(i.currentScale=r.max,n=!0),t=St(i,e,t),e?t:n}function Wt(e){if(!Kt())return!1;var t={pageX:0,pageY:0},n=Dt(),i=null,r=Ht(n,i=Xt(!0,i=Qt(t,!0,i=qt(!0,i=$t(e=1==e?1/xe:e,!0,i=Gt(t,!0,n))))));r&&(Se(r),De(n),At=!0),At&&sn(!1,!0),Gt(t),$t(e),qt(),Qt(t),Xt(),At?De(i,300,!1,Vt):Ce(300),zt(He)}function Yt(e){if(!Kt())return!1;var t=Dt(),n=null,i=Ht(t,n=Xt(!0,n=qt(!0,n=Ut(e,!0,t))));i&&(Se(i),De(t),At=!0),Ut(e)&&(nt||(nt=t)),At&&sn(!1,!0),qt(),Xt(),At?De(n,300,!1,Vt):Ce(300),zt(He)}function Gt(e,t,n){var i={};return n=n||Dt(),i.deltaX=(e.pageX-n.curX)/n.curScale,i.deltaY=(e.pageY-n.curY)/n.curScale,n=St(i,t,n),!!t&&n}function Qt(e,t,n){var i={};n=n||Dt(),i.pointX=e.pageX,i.pointY=e.pageY;var r=Mt(n.currentScale),o=Pt(n.currentScale),a=(!Ue&&!o.max&&!o.min||ze||!Kt())&&!$e;($e||pe&&!Ue&&!r.max&&!r.min)&&(i.curX=0),a&&(i.curY=n.curY),n=St(i,t,n),i={};var s=!1;return(n=n||Dt()).curX<=r.min?qe?(s=!0,i.curBodyX=n.curX-r.min):(i.curX=n.curX+(r.min-n.curX)/_e.bounce_diff,i.curBodyX=Oe?i.curX-r.min:0):n.curX>=r.max&&(We?(s=!0,i.curBodyX=n.curX-r.max):(i.curX=n.curX+(r.max-n.curX)/_e.bounce_diff,i.curBodyX=Oe?i.curX-r.max:0)),n.curY<o.min?a?i.curY=o.min:$e||(i.curY=n.curY+(o.min-n.curY)/_e.bounce_diff):n.curY>o.max&&(a?i.curY=o.max:$e||(i.curY=n.curY+(o.max-n.curY)/_e.bounce_diff)),n=St(i,t,n),t?n:s}function Xt(e,t){var n=!1,i={},r=Mt((t=t||Dt()).currentScale),o=Pt(t.currentScale),a=!Ue&&!o.max&&!o.min||ze||!Kt()&&!$e;return $e&&(i.curX=0),a&&(i.curY=t.curY),t.curX<r.min?(i.curX=r.min,i.curBodyX=0,n=!0):t.curX>r.max&&(i.curX=r.max,i.curBodyX=0,n=!0),t.curY<o.min?(i.curY=o.min,n=!0):t.curY>o.max&&(i.curY=o.max,n=!0),t=St(i,e,t),e?t:n}function Kt(){return!ue&&(!!pe||gn[bn.src])}function Jt(e){if(w()||w(0),!st){if(e&&"mousedown"==e.type&&_(e),e.touches&&e.touches.length||!se){if(Lt(),!Ve&&!Ue){ut=he(e);var t=Mt(He);Be<=t.min&&(qe=!1!==Dn(yn+1)),Be>=t.max&&(We=!1!==Dn(yn-1))}if(Ve||ue)Ye=Ge=Qe=!1,Xe=!1;else{clearTimeout(Ke);var n=he(e);Ye&&v()-Ye<500&&Ge&&function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)}(n,Ge)<50?(Qe=v(),Xe=!1):(Ye=v(),Ge=n,Xe=v())}ue||(Ve=!0)}Ue||(Oe=!0,ye(!0)),it=he(e),jt(),Ft(it),Gt(it)}}function Zt(e){if(!st&&(_(e),Ve)){if(Ye=Ge=Qe=!1,Xe=!1,Ft(it=he(e)),dt){if(!(dt<v()))return void jt();dt=!1,Gt(it),Ce()}if(ut&&!ze&&!$e){var t=Math.abs(it.pageX-ut.pageX),n=Math.abs(it.pageY-ut.pageY),i=Pt(He);if(!(n>5||t>5))return;n>5&&t<=5&&(1!=He||Ue||ue||pe?(i.max||i.min)&&(qe=We=!1):($e=!0,Je&&(Ze=!0),cn(!1),an(it.pageY-ut.pageY>0))),ut=!1,Gt(it)}!Qt(it)||ze||$e||ue||(ze=!0,it.pageX),function(){if(!$e)return;var e=Math.abs(Ne),t=G.height/2;pt=1-.5*e/t}(),Ce(),ze&&Math.abs(Le)>c()&&en(p({originalEvent:e},e,{touches:[]}))}}function en(e){if(!st)if(lt)lt=!1;else{if(_(e),e.touches&&!e.touches.length||!se){var t=Rt();if(ze)(function(e){var t=(G.width||c())/2;return e=e||0,(Le<-t||e<-1)&&qe?(Bt(),!0):(Le>t||e>1)&&We?(Nt(),!0):(Xt()&&Ce(300),!1)})(t)&&(Ct(),ye(!0));else if($e)xt(t);else if(Qe&&v()-Qe<1e3){!function(e){if(!Kt())return!1;var t=It(),n={pageX:Pe,pageY:Ie},i=(He>1?1:t.max)/xe,r=Dt(),o=null;o=Xt(!0,o=Qt(n,!0,o=$t(i,!0))),e&&(o=Xt(!0,o=Ut(e,!0,o)));var a=Ht(r,o);a&&(Se(a),De(r),At=!0),At&&sn(!1,!0),$t(i),Qt(n),Xt(),e&&(Ut(e),Xt()),At?De(o,300,!1,Vt):Ce(300),zt(He),dn()}(o=e&&et&&(s("zpv_tag",e.target)?e.target:b("zpv_tag",e.target))),Ye=Ge=Qe=!1}else Xt()?Ce(300):t&&(Xt(),Ce(t,"cubic-bezier(0, 1, 1, 1)"));if(Xe)if(v()-Xe>700||e&&"touchcancel"==e.type)Xe=!1;else{if(Xe=!1,e)var n=s("zpv_header",e.target)?e.target:b("zpv_header",e.target),i=s("zpv_zoom_btns",e.target)?e.target:b("zpv_zoom_btns",e.target),r=s("zpv_bottom_body",e.target)?e.target:b("zpv_bottom_body",e.target),o=et&&(s("zpv_tag",e.target)?e.target:b("zpv_tag",e.target));e&&(n||i||r||o)?o?function(e,t){if(!at)return!1;if(!et)return!0;ve(e);if(s("zpv_tag_selected",e))return s("zpv_tl_wrap",t.target)||b("zpv_tl_wrap",t.target)?q.go(e,t):(Yt(e),k(t),!1);tt&&(Ye=Ge=Qe=!1),S("zpv_tag_selected",tt),tt=e,un(e),T("zpv_tag_selected",tt);Je&&(Ze=!0);cn(!1),Yt(e),k(t)}(o,e):i&&(Ye=Ge=Qe=!1,s("zpv_zoomin",e.target)||b("zpv_zoomin",e.target)?function(e){!at||($.highlight=!1,$.end(e),Ue||ze||It().max<=He||(k(e),Wt(pe?1.25:1.45)))}(e):function(e){!at||($.highlight=!1,$.end(e),Ue||ze||It().min>=He||(k(e),Wt(pe?.8:1)))}(e)):tt?_n(e):pe||(Ke=setTimeout(function(){cn(),sn(Je)},500))}Ve=!1,ze=qe=We=!1,jt()}e.touches&&(e.touches.length>1||1==e.touches.length&&ze)&&Gt(it=he(e)),(e.touches&&!e.touches.length||!se)&&(ut=!1)}}function tn(e){if(!st&&(_(e),Ye=Ge=Qe=!1,Xe=!1,jt(),!ze&&!$e)){Re=1,xe=He,Ue=!0,qe=We=!1;var t=Mt(He);(t.min>=-5||t.max<=5)&&(Oe=!1,ye(!1)),Gt(he(e)),sn(!1,!0)}}function nn(e){st||(_(e),Ye=Ge=Qe=!1,Xe=!1,jt(),ze||$e||(rt=he(e),$t(e.scale),Qt(rt),Ce(),dn()))}function rn(e){st||(_(e),Ye=Ge=Qe=!1,Xe=!1,jt(),ze||$e||(qt()&&((e.touches&&e.touches.length||!se)&&Qt(rt),Xt(),Ce(100),dt=v()+100),Ue=!1,sn(!0,!0)))}function on(e){var t=It(),n=e<t.max,i=e>t.min;E("zpv_zb_disabled",te,!n),E("zpv_zb_disabled",ne,!i)}function an(e){f(K,e?{top:-35,bottom:"auto"}:{top:"auto",bottom:-35}),K.is_down=e}function sn(e,t){var n=et;if(e){if(!Kt())return;if(!Je&&!Ze||Ue)return}et=e,e&&ln(He,Fe,je,t||n!==e),n!==e&&(e&&un(tt),ae&&f.animate(ae,!t&&"opacity",{duration:200,func:"linear"},function(){f(ae,"visibility",e?"visible":"hidden")}),ae&&f(ae,"visibility",e||!t?"visible":"hidden"),ae&&f(ae,"opacity",e?1:0))}function ln(e,t,n,i){if(!Ue&&et){var r=G.width||c(),o=G.height||d(),a=me(ie),s=r/a.width,l=o/a.height,u=Math.min(1,s,l),A=a.width*u*e,p=a.height*u*e,_=r/2-A/2+t*e,h=o/2-p/2+n*e;i&&ae&&f.animate(ae),f(ae,{width:Math.round(A),height:Math.round(p)}),f.transform(ae,{translate:[Math.round(_),Math.round(h)]})}}function un(e){if(e){var t=me(ie),n=G.width||c(),i=G.height||d(),r=n/t.width,o=i/t.height,a=Math.min(1,r,o),s=t.width*a*He,l=t.height*a*He,A=ve(e).coords,p=u("zpv_tl",e),_=g(p),h=y(p),m=A.x*s/100,v=A.y*l/100,w=A.w*s/100,b=A.h*l/100,E=m+w/2-_/2,k=v+b+5,C=n>s?0-(n-s)/2:0,D=n>s?s+(n-s)/2:s,S=i>l?l+(i-l)/2:l,T=0,M=0;E<C+2?T=C+2-E:E+_>D-2&&(T=D-2-E-_),k+h>S-5&&(M=b>3*h?S-5-k-h:-b-h-10),f.transform(p,{translate:[Math.ceil(T),Math.ceil(M)]})}}function cn(e){if(void 0!==e){if(Je===e)return;Je=!e}else Ze=!1;f(n,"width","auto"),n&&f.animate(n,"opacity",{duration:200,func:"linear"},function(){f.animate(n),f(n,"width",Je?"auto":0)}),Je?(f(n,"opacity",0),Je=!1):(f(n,"opacity",1),Je=!0)}function dn(){G.height<604&&!tt&&!pe&&(He>1.25?(Je&&(Ze=!0),cn(!1)):Ze&&(Ze=!1,cn(!0)))}function An(e){at&&(Ve||Ue||ze||e&&e.touches&&e.touches.length>1||(k(e),X.close()))}function fn(e){if(!(Ve||Ue||ze||!e||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=Mt(He);37==e.keyCode?(k(e),Be>=t.max&&!1!==Dn(yn-1)&&(ye(!0),Nt())):39==e.keyCode?(k(e),Be<=t.min&&!1!==Dn(yn+1)&&(ye(!0),Bt())):27==e.keyCode&&An(e)}}function pn(){pe?Ln():sn(et,!0)}function _n(e,t){return!(!at&&!t)&&(!tt||(S("zpv_tag_selected",tt),tt=!1,Ze&&He<=1.25&&(Ze=!1,cn(!0)),k(e),!1))}function hn(e){"touchstart"==e.type?at=!e.touches||1==e.touches.length:"touchmove"==e.type?(at=!1,_(e)):"click"==e.type&&(at||(k(e),at=!0))}function mn(e){"touchstart"==e.type?st=!0:"touchmove"==e.type?(st=!0,_(e)):(st=e.touches&&e.length,lt=!st)}var vn=!1,gn={},yn=!1,wn=!1,bn=!1,En=!1,kn=!1;function Cn(e,t,n,i){var r=t||I(e);if(e&&!n||(vn=null),vn||(vn=new Array(r)),vn.length!=r){var o=vn;vn=new Array(r),p(vn,o)}p(vn,e);var a=function(e){for(var t in vn)if(vn[t].id==e)return+t;return-1}(bn.id);-1==a&&(a=yn),i||xn(a)}function Dn(e){return!(e>=vn.length)&&(!(e<0)&&(vn[e]||{src:!0}))}function Sn(e,t,n){var i=me(e),r=Tt();pe&&(vn[0].loaded=t,t&&(i.width>i.height?f(e,{height:r.height}):f(e,{width:r.width}),f(e,{minWidth:0,maxWidth:"none"})),Ln(!0));if(In()){if(i.width*V>=r.width){var o=r.width/(i.width||i.clientWidth);if(i.height*o>=r.height)return;Re=o,xe=o,He=o,f.transform(ie,o)}"VIDEO"===e.tagName&&e.play()}x(e),ie===e&&sn(t,!t)}function Tn(e){O([ie,re,oe],function(){var t=A(this,"data-src"),n=b("zpv_thumb_item",this);t===e&&(this.src=t,Sn(this,!0),"VIDEO"!==this.tagName&&S("zpv_ti_loading",n),A(this,"data-src",!1),In()&&statlogsValueEvent("gif_play",0,"VIDEO"===this.tagName?"mp4":"gif"))})}function Mn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=b("zpv_thumb_item",e);i&&(T("zpv_ti_loading",r),setTimeout(function(){f(ie,{display:"block"})})),i&&(n=!1),t?!0!==t?e.src===t?Sn(e,!0):gn[t]?(e.src=t,Sn(e,!0)):(n?(e.src=n,Sn(e,!1)):L(e),A(e,"data-src",t),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(gn[e])Tn(e);else if(t){var n=ce("video",{src:e}),i=!1,r=function(){i||(i=!0,gn[e]=!0,Tn(e),n=null)};M(n,"canplay",r),M(n,"onload",r),n.load()}else{var o=new Image;o.src=e,o.onload=function(){gn[e]=!0,Tn(e),o=null}}}(t,i),T("zpv_ti_loading",r)):(n?(e.src=n,Sn(e,!1)):L(e),T("zpv_ti_loading",r)):L(e)}function Pn(){if(de){!function(){window.lang;var e="";if(In())e=getLang("mobile_gif_popup_title");else{e=getLang("mobile_photos_photoview_header")||"";var t=!1!==ot?ot:yn;e=(e=e.replace("%s",t+1)).replace(/%s|{count}/,vn.length)}m("zpv_summary",e)}(),on(He);var e=Dn(!1!==ot?ot:yn);if(e&&!0!==e.src){var t="";O(e.tags,function(e,n){if(!e||0==e)return!0;var i=ge(n),r=i.coords,o=i.href?' data-href="'+i.href+'" data-name="'+B(i.name)+'"':"",a=i.al?(i.href?" al"+i.al:"")+" "+i.al:"";t+='<div class="zpv_tag'+a+'" style="left: '+r.x+"%; top: "+r.y+"%; width: "+r.w+"%; height: "+r.h+'%;" data-id="'+e+'"'+o+'><div class="fill"></div><div class="zpv_tl_wrap" id="zpv_tl_wrap"><div class="zpv_tl'+(i.href?"":" zpv_tl_plain")+'">'+N(i.name)+"</div></div></div>"}),m(ae,t),m(J,'<div class="zpv_photo_desc">'+(e.caption||"")+'</div><div class="zpv_bottom_bg"></div>'),R(J,!!e.caption);var n="";if(Ae||q.getQuery("community"))n="";else{var i=e.tags&&e.tags[0]||0;n="<tr>"+('<td class="row_table_column"><a href="'+e.like_url+'" class="item_button item_like'+(e.likes_me?" item_likes_me":"")+'" onclick="return photoview.likePhoto(this, \''+e.id+'\');"><i class="i_icon i_like"></i>'+(e.likes_cnt?'<b class="v_value v_like">'+F(e.likes_cnt)+"</b>":"")+"</a></td>")+('<td class="row_table_column"><a href="'+e.photo_url+'#comments" class="item_button item_replies al_photo" onclick="return photoview.openPhoto(this, event, true);"><i class="i_icon i_replies"></i>'+(e.replies_cnt?'<b class="v_value v_replies">'+e.replies_cnt+"</b>":"")+"</a></td>")+('<td class="row_table_last_column"><a href="'+e.photo_url+'" class="item_button item_tags al_photo" onclick="return photoview.openPhoto(this, event);"><i class="i_icon i_tags"></i>'+(i?'<b class="v_value v_tags">'+i+"</b>":"")+"</a></td>")+"</tr>"}m(Z,n),(0,o.appendQRPhotoButton)(e.photo_url),x(a)}else L(a)}}function In(){return bn.isDoc}function xn(e){de&&(yn=Math.max(0,Math.min(e||0,vn.length)),bn=Dn(yn),kn=Dn(yn-1),En=Dn(yn+1),Mn(ie,bn.src,"/images/mobile/blank.gif",bn.hasVideo),Mn(oe,En.src),Mn(re,kn.src),Pn(),X.onUpdate&&X.onUpdate())}function On(){if(de&&fe&&vn){var e=vn[0];if(!e.loaded&&e.progress){var t=u("zpvu_progress","zpv_center");f(t,{width:100*e.progress+"%",visibility:"visible"})}if(!e.read&&e.thumb){e.read=!0;var n=u("zpv_upload_box","zpv_center"),i=u("zpv_upload_img",n);f(i,{backgroundImage:"url("+e.thumb+")"}),S("zpv_thumb_uploading",n)}}}function Ln(t){if(de&&pe&&vn){var n=vn[0],i=!!n.saving;if(E("item_disabled","zpv_save_button",i||!n.loaded),E("item_disabled","zpv_cancel_button",i),E("zpv_crop_saving",e,i),ue=i,t||Mn(ie,n.src,"/images/mobile/blank.gif"),n.loaded&&n.rect&&!n.rect_inited){n.rect_inited=!0;var r=Tt(),o=n.rect[0],a=n.rect[1],s=n.rect[2],l={};l.currentScale=1/s,St(l),qt(),Xt(),l={};var u=(ie.width||ie.clientWidth)*He,c=(ie.height||ie.clientHeight)*He,d=o*u,A=a*c;l.curX=(u-r.width)/2-d,l.curY=(c-r.height)/2-A,St(l),Xt(),Ce(0)}}}function Bn(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];de||(Xe=!1,Ke=!1,Je=!0,Ze=!1,ot=!1,at=!0,st=!1,lt=!1,ft=!1,pt=!1,ue=!1,Ae=!1,fe=!1,pe=!1,Ct(),function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=window.lang,d="";d=i?(0,r._getLayer)(o):'<div id="z_photoview"><div class="zpv_siblings"><div id="zpv_left" class="zpv_thumb_item"><img class="zpv_img" alt=""></div><div id="zpv_right" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_body"><div id="zpv_center" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_close_msg_wrap"><div class="zpv_close_msg">'+c.mobile_zphoto_move_to_close+'</div></div><div class="zpv_controls"><div class="mhead zpv_header"><a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a><div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div></div><div class="zpv_zoom_btns"><a class="zpv_zoom_btn zpv_zoomin"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a><a class="zpv_zoom_btn zpv_zoomout"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a></div><div class="zpv_bottom"><div class="zpv_photo_desc_wrap"></div><div class="zpv_bottom_body"><table class="zpv_values like_box row_table"></table></div></div></div><div class="zpv_tags"></div><div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div></div>';var A="/images/mobile/zpv_icons"+(s("x2",window.bodyNode)?"_2x":"")+".png?2";(new Image).src=A,G.create(d,Nn),e=l("z_photoview"),u("zpv_body",e),t=u("zpv_siblings",e),n=u("zpv_controls",e),ee=u("zpv_zoom_btns",e),K=u("zpv_close_msg_wrap",e),a=u("zpv_bottom",e),J=u("zpv_photo_desc_wrap",e),Z=u("zpv_values",a),te=u("zpv_zoomin",ee),ne=u("zpv_zoomout",ee),ae=u("zpv_tags",e),u("zpv_crop",e),ie=u("zpv_img","zpv_center"),re=u("zpv_img","zpv_left"),oe=u("zpv_img","zpv_right"),"VIDEO"===ie.tagName&&(ie.controls=!1)}(i,o),function(){if(se=void 0!==document.ontouchmove,le=!1,se){var t=u("zpv_header",e),n=u("zpv_bottom_body",e);M(t,"touchstart touchmove touchend touchcancel",mn),M(n,"touchstart touchmove touchend touchcancel",mn),M(e,"touchstart touchmove click",hn),M(e,"touchstart",Jt),M(e,"touchmove",Zt),M(e,"touchend touchcancel",en),le?(M(e,"gesturestart",tn),M(e,"gesturechange",nn),M(e,"gestureend",rn)):(M(e,"touchstart",wt),M(e,"touchmove",bt),M(e,"touchend touchcancel",Et),M(e,"gesturestart gesturechange gestureend",k))}else M(e,"mousedown",Jt),M(e,"mousemove",Zt),M(window,"mouseup",en),M(window,"mousewheel",kt),M(window,"keydown",fn)}(),de=!0,U(e),w()||w(0))}function Nn(){de&&(!function(){if(se){var t=u("zpv_header",e),n=u("zpv_bottom_body",e);P(t,"touchstart touchmove touchend touchcancel",mn),P(n,"touchstart touchmove touchend touchcancel",mn),P(e,"touchstart touchmove click",hn),P(e,"touchstart",Jt),P(e,"touchmove",Zt),P(e,"touchend touchcancel",en),le?(P(e,"gesturestart",tn),P(e,"gesturechange",nn),P(e,"gestureend",rn)):(P(e,"touchstart",wt),P(e,"touchmove",bt),P(e,"touchend touchcancel",Et),P(e,"gesturestart gesturechange gestureend",k))}else P(e,"mousedown",Jt),P(e,"mousemove",Zt),P(window,"mouseup",en),P(window,"mousewheel",kt),P(window,"keydown",fn)}(),e=t=n=K=!1,a=Z=!1,ee=te=ne=!1,ie=re=oe=ae=!1,de=!1,vn=null)}return{onShow:(0,i.default)(),onHide:(0,i.default)(),likePhoto:function(e,t){return!!at&&($.highlight=!1,$.end(),bn.likes_me?(bn.likes_me=!1,--bn.likes_cnt):(bn.likes_me=!0,++bn.likes_cnt),Pn(),z.click(e,p({photo_id:t},Y)))},openPhoto:function(e,t,n){var i=window.cur;if(!at)return!1;var r=i.replyNames,o=i.sticker_panel,a=i.stickers,s=q.go(e,t,{local:!0,fast:!0,beforeAppend:function(e){m(u("mcont",e),'<div class="pcont"><div class="media_view photo_view"><div class="pv_summary"><div class="summary_loading" style="display: none;"><i class="i_loading"></i></div></div><div class="pv_tag_wrap"></div><div class="pv_body pv_touch pv_touch_full pv_hidden_icons"><a class="thumb_item"><div class="pv_photo_wrap" id="pv_photo_tags" onclick="return photo.closeTags(event);"><img src="/images/mobile/blank.gif" class="ph_img" alt="" /></div></a><div class="pv_nav"><table class="row_table pv_nav_cont"><tr><td class="pv_nav_left"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_z"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_right"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td></tr></table></div></div><div class="pv_footer"></div></div></div>'),m("m",e.innerHTML)}});p(i,{replyNames:r,sticker_panel:o,stickers:a,processNav:function(e){var t;if(t=/^\/photo(-?\d+_\d+)$/i.exec(e.nav.path)){var n=C(e.nav.params),i=C(q.params);if(n.act)return!1;if(n.offset!=i.offset)return!1;if(n.list!=i.list&&!i.z)return!1;e.onPreNav&&e.onPreNav();var r=n.list||"",o=n.rev?"/rev":"";return!Q.open(t[1],r+o,null,n.from,!0)}return!1}}),i.destroy.push(function(){Q.clear()});var l=window.lang;if(!s&&!(s=q.go(e,t,{force:!0}))){var c=!0;if(G._lastNav){var d=G._lastNav,A=C(d.params);delete A.z,c=d.path+D(A)+d.hash}W.setMhead("m",l.mobile_photos_photo_head_title,c),Q.showIcons()}return!0},closePhoto:An,savePhoto:function(e,t){if(!at)return!1;if($.highlight=!1,$.end(),s("item_disabled",e))return!1;if(!pe||!vn)return!1;var n=vn[0],i=Tt(),r=ie.width*He,o=(ie.height||ie.clientHeight)*He,a=(r-i.width)/2-Be,l=(o-i.height)/2-Ne,u=1/He,c=a/r,d=l/o;return n.onSelect&&n.onSelect(c,d,u),!1},cancelPhoto:function(e,t){return!!at&&($.highlight=!1,$.end(),!s("item_disabled",e)&&An())},onClose:null,onUpdate:null,onPhotoChange:null,saveSource:Cn,opened:function(){return de},openCrop:function(t,n){n=n||{};var i=!de;fe?fe=!1:Bn(),pe=!0,ue=!1,vn=[t],i&&(G.open(),G.onResize=pn),function(){if(de&&pe){var t=window.lang;m("zpv_summary",t.mobile_zphoto_owner_crop_header),S("zpv_mode_[a-z]+",e,!0),T("zpv_mode_crop",e),on(He),ie.parentNode||(m("zpv_center",""),H(ie,"zpv_center"));var n='<tr><td class="row_table_column"><a class="item_button" id="zpv_save_button" onclick="return photoview.savePhoto(this);"><i class="i_icon i_save"></i><span class="v_value">'+t.mobile_zphoto_save_btn+'</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" id="zpv_cancel_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">'+t.mobile_zphoto_cancel_btn+"</span></a></td></tr>";m(Z,n),x(a),Ln()}}()},updateCrop:function(e){if(!vn)return!1;e=p(vn[0]||{},e),vn=[e],Ln()},openUpload:function(t,n){n=n||{},Bn(),fe=!0,ue=!0,vn=[t],G.open(),G.onResize=pn,function(){if(de&&fe){var t=window.lang;m("zpv_summary",t.mobile_zphoto_upload_header),S("zpv_mode_[a-z]+",e,!0),T("zpv_mode_upload",e),j(ie),m("zpv_center",'<div class="zpva zpv_upload_box zpv_thumb_uploading"><div class="zpv_upload_img"></div><div class="zpvu_progress_wrap"><div class="zpvu_progress"></div></div></div>');var n='<tr><td class="row_table_column" width="50%"><a class="item_button item_disabled" onclick="return false;"><i class="i_icon i_save"></i><span class="v_value">'+t.mobile_zphoto_save_btn+'</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">'+t.mobile_zphoto_cancel_btn+"</span></a></td></tr>";m(Z,n),x(a),On()}}()},updateUpload:function(e){if(!vn)return!1;e=p(vn[0]||{},e),vn=[e],On()},open:function(e,t,n){X.onShow(),Bn((n=n||{}).isDoc,n.hasVideo),Ae=n.local||!1,t&&Cn(t,!1,!1,!0),xn(e),wn=0,G.open(),G.onResize=pn,function(){var e=u("zpv_close_msg",K),t=g(e);f(K,{width:t||250})}()},close:function(){X.onHide(),X.onClose&&X.onClose({local:Ae})||G.close()}}}();window.photoview=X},i8t0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"open",{enumerable:!0,get:function(){return i.open}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return i.go}});var i=n("h1CJ");window.CopyrightPopup={open:i.open,go:i.go}},"iE+E":function(e,t,n){"use strict";var i,r,o,a,s,l=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=window,d=c.throttle,A=c.onDOMReady,f=c.addEvent,p=c.lsSet,_=c.lsGet,h=c.hasClass,m=(c.clog,c.domCA),v=c.scrollGetY,g=c.getCh,y=c.nav,w=c.page,b=c.getCw,E=c.ajax,k=c.extend;window.FeedAssistanceStats=(u(i={register:Ze,forceRegister:function(e,t){e[R]=tt(e),e[j]=t,Ne.push(e)},onScroll:d(it,50),onStartViewElement:(0,l.default)("element"),onEndViewElement:(0,l.default)("element"),onStopTrackElement:(0,l.default)("element"),onViewedElement:(0,l.default)("element"),onBeforePageChange:st,onPageChanged:lt,getElementType:tt,registerElements:Ke,registerTrackingCls:function(e){Ge.push(e)},unregisterTrackingCls:Xe},"unregisterTrackingCls",Xe),u(i,"setParenViewableX",function(e,t){e[X]=t}),u(i,"forceProcessTrack",et),u(i,"dispatchElementEvent",function(e,t){var n=function(e){return Te[e]}(xt(t[R]||tt(t),e));dt({type:e,data:n(t)})}),u(i,"dispatchEvent",function(e){dt(e)}),u(i,"serializeEventData",nt),u(i,"clearElemsCache",function(){Ne.forEach(function(e){e[z]=!1,e[$]=!1})}),u(i,"_debug",function(){return{started:Re,tracking:Ne,events:Ye,blindTop:je,blindBottom:He}}),u(i,"getFromRef",Ht),u(i,"getRoot",Ut),u(i,"BLOCKS",{}),u(i,"EVENTS",{}),i);var C=.5,D=.25,S=500,T=3e5,M=2500,P=1e4,I=6e3,x=2e4,O=3e4,L=5e3,B=36e4,N=100,R="_feedAssistanceStatsType",F="_feedAssistanceStatsIdled",j="_feedAssistanceStatsModule",H="_feedAssistanceStatsStarted",U="_feedAssistanceStatsProcessed",V="_feedAssistanceStatsEventTs",z="_feedAssistanceStatsCachedY",$="_feedAssistanceStatsCachedX",q="_feedAssistanceStatsLeft",W="_feedAssistanceStatsHeight",Y="_feedAssistanceStatsWidth",G="_feedAssistanceStatsTop",Q="_feedAssistanceStatsBottom",X="_feedAssistanceStatsParentViewableX",K="BLOCK_TYPE_RECOMMENDED_SLIDER",J="BLOCK_TYPE_DEFAULT",Z="BLOCK_TYPE_EXPLORE_BAIT",ee="BLOCK_TYPE_PROFILE_PHOTO",te="BLOCK_TYPE_PROMO_BUTTON",ne="BLOCK_TYPE_IMPORT_CONTACTS",ie="BLOCK_TYPE_PUSH_SWITCH",re="explore_bait",oe="feed_assistance",ae="hide",se="promo_button",le="SUB_EXPLORE_BAIT",ue="view",ce="like",de="comment",Ae="opened",fe="subscribe",pe="unsubscribe",_e="open_user",he="open_group",me="hide",ve="report",ye="seen",we="filled",be="enable_push",Ee="decline_push",ke="SUB_PROMO_BUTTON",Ce="clicked",De=(u(r={},K,"view_block"),u(r,te,"view_block"),u(r,Z,re),u(r,ee,oe),u(r,ne,oe),u(r,ie,oe),r),Se=(u(o={},K,500),u(o,Z,S),u(o,ee,S),u(o,ne,S),u(o,ie,S),o),Te=(u(a={},xt(K,"view_block"),function(e){var t=geByClass1("Slider__scroll",e),n=domData(t,"code");return nt("view_block","",e,domData(t,"ref"),n)}),u(a,xt(te,"view_block"),function(e){return nt("view_block",geByClass1("feedAssistancePromoButtonInstallApp__button",e)?"promo_install_app":"promo_button",e)}),u(a,xt(Z,re),function(){return nt(le,ue)}),u(a,xt(ee,oe),function(e){return nt(oe,e,"m_ph",ye)}),u(a,xt(ne,oe),function(e){return nt(oe,e,"m_mp",ye)}),u(a,xt(ie,oe),function(e){return nt(oe,e,"m_push_switch",ye)}),a),Me=(u(s={},"view_block",function(e,t,n,i){return n=n||Ht(t),[e,domChildIndex(t),Vt(t),n,i].join("|")}),u(s,le,function(e){return e}),u(s,oe,function(e,t,n){return[t,n,Ht(e)].join("|")}),u(s,ae,function(e,t){return[e,Vt(t),domChildIndex(t),Ht(t)].join("|")}),u(s,ke,function(e,t,n){return[domChildIndex(e),t,n||""].join("|")}),s),Pe="feed_other",Ie="feedAssistance",xe="feedAssistanceStat.events",Oe="feedAssistanceStat.idled",Le="/feed",Be="assistance_stats",Ne=[],Re=[],Fe=Date.now(),je=0,He=0,Ue=!1,Ve=null,ze=null,$e=null,qe=null,We=null,Ye=[],Ge=[],Qe=!1;function Xe(e){Bt(Ge,e)}function Ke(){var e=[];each(Ge,function(){e=e.concat(geByClass(this))}),each(e,function(){Ze(this,"feed")})}function Je(){Ke();var e=Tt();e.length&&(kt(e),Mt()),et(),mt()}function Ze(e,t){!e[R]&&function(e){return!~Ne.indexOf(e)}(e)&&(e[R]=tt(e),e[j]=t,Ne.push(e))}function et(){ut(v(),g())}function tt(e){return e[R]?e[R]:h("feedAssistance_recommendedFriends",e)?K:h("post_exploreBait",e)?Z:h("feedAssistance_profilePhoto",e)?ee:h("feedAssistance_promoButton",e)?te:h("feedAssistance_importContacts",e)?ne:h("feedAssistance_pushNotificationsSwitch",e)?ie:J}function nt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Me[e].apply(Me,n)}function it(e,t){var n=it;ut(e||v(),t||g()),Ue||Qe?(clearTimeout(n.timer),n.timer=setTimeout(rt,150),Qe=!1):(Ue=!0,ht(),function(){var e=ge("vk_head");je=e&&e.offsetHeight,He=0}())}function rt(){ht(),_t(),Ue=!1}function ot(){ht(),jt(Re),kt(Ye.concat(It(Re))),Rt(Re),Ye=[],Re=[],vt()}function at(){Re.forEach(function(e){e[H]=Date.now()}),Ct(null),Dt(null),_t(),vt(),mt()}function st(){ht(),jt(Re),Ye=Ye.concat(It(Re)),Rt(Re),Re=[],Qe=!0,_t()}function lt(){Ke(),et()}function ut(e,t){var n=[];Ne.forEach(function(i){Lt(i)?n.push(i):!function(e,t,n){return!e[H]&&ft(e,C,t,n)&&pt(e,C)}(i,e,t)?!function(e,t,n){return e[H]&&(!ft(e,D,t,n)||!pt(e,D))}(i,e,t)?At(i)&&(ct(i),FeedAssistanceStats.onViewedElement(i)):(i[F]?delete i[F]:(ct(i),FeedAssistanceStats.onEndViewElement(i)),delete i[H]):(i[H]=Date.now(),Re.push(i),FeedAssistanceStats.onStartViewElement(i))}),n.forEach(function(e){Bt(Ne,e),FeedAssistanceStats.onStopTrackElement(e)})}function ct(e){Bt(Re,e),Ft(e),dt(Ot(e)),Nt(e)}function dt(e){e&&Ye.push(e)}function At(e){return!!e[H]&&Math.min(T,Date.now()-e[H])>function(e){var t=tt(e);return Se[t]||S}(e)}function ft(e,t,n,i){if(!e)return!1;e[z]||(e[z]=!0,e[W]=e.offsetHeight,e[G]=n+e.getBoundingClientRect().top,e[Q]=e[G]+e[W]);var r=i-je-He,o=n+je,a=n+i-He,s=e[W],l=e[G],u=e[Q];return(u>o&&l<a?Math.min(a,u)-Math.max(o,l):0)>=Math.min(r*t,s*t)}function pt(e,t){var n=e[X];n&&!n[$]&&~Ne.indexOf(n)&&(n[$]=!0,n[Y]=n.clientWidth,n[q]=n.getBoundingClientRect().left+n.clientLeft),e[$]||(e[$]=!0,e[Y]=e.offsetWidth);var i=n?n[Y]||n.clientWidth:b(),r=n?n[q]||n.getBoundingClientRect().left+0:0,o=i+r,a=e[Y],s=e.getBoundingClientRect().left,l=a+s,u=a*t,c=a*Math.max(0,1-t);return s+u>=r&&l-c<=o}function _t(){Ve=setTimeout(gt,M),ze=setTimeout(yt,P),$e=setTimeout(wt,I),qe=setTimeout(bt,x)}function ht(){clearTimeout(Ve),clearTimeout(ze),clearTimeout($e),clearTimeout(qe)}function mt(){We=setInterval(Et,O)}function vt(){clearInterval(We)}function gt(){Ye.length&&Ct(Ye)}function yt(){kt(Ye),Ye=[],Ct(null)}function wt(){Re.length&&(Dt(It(Re)),$e=setTimeout(wt,L))}function bt(){clearTimeout($e),jt(Re),kt(It(Re)),Rt(Re),Re.forEach(function(e){e[F]=!0}),Re=[],Dt(null)}function Et(){Ye.length>=N&&yt()}function kt(e){if(e&&e.length){var t={act:Be};t=k(t,function(e){var t={};return each(e,function(){t[this.type]?t[this.type].push(this.data):t[this.type]=[this.data]}),t}(e)),E.post(Le,t)}}function Ct(e){St(xe,e)}function Dt(e){St(Oe,e)}function St(e,t){var n=_(e)||{};t?n[Fe]=t:delete n[Fe],p(e,n)}function Tt(){var e=Tt,t=[],n=_(xe)||{},i=_(Oe)||{};return e.iterator||(e.iterator=function(e){return function(n){Pt(n)&&(t=t.concat(e[n]))}}),Object.keys(n).forEach(e.iterator(n)),Object.keys(i).forEach(e.iterator(i)),t}function Mt(){var e=Mt,t=_(xe)||{},n=_(Oe)||{};e.iterator||(e.iterator=function(e){return function(t){Pt(t)&&delete e[t]}}),Object.keys(t).forEach(e.iterator(t)),Object.keys(n).forEach(e.iterator(n)),p(xe,t),p(Oe,n)}function Pt(e){var t=Number(e);return t!==Fe&&Date.now()-t>=B}function It(e){var t=[];return e.forEach(function(e){var n=Ot(e);n&&t.push(n)}),t}function xt(e,t){return e+"_"+t}function Ot(e){if(Lt(e))return null;if(!At(e))return null;var t=function(e){return De[e[R]]}(e);return{type:t,data:function(e,t){return(0,Te[xt(e[R],t)])(e)}(e,t)}}function Lt(e){return e[U]||!document.body.contains(e)}function Bt(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Nt(e){Lt(e)||At(e)&&(e[U]=!0)}function Rt(e){each(e,function(){Nt(this)})}function Ft(e){e[V]=Date.now()}function jt(e){e.forEach(Ft)}function Ht(e){return(e=Ut(e))&&domData(e,"from-ref")||Pe}function Ut(e){return h(e,Ie)||(e=m(e,"."+Ie)),e}function Vt(e){var t=(new Date).getTime();return e&&(e[V]||e[H])||t}FeedAssistanceStats.BLOCKS={BLOCK_TYPE_RECOMMENDED_SLIDER:K,BLOCK_TYPE_EXPLORE_BAIT:Z,BLOCK_TYPE_PROFILE_PHOTO:ee,BLOCK_TYPE_PROMO_BUTTON:te,BLOCK_TYPE_IMPORT_CONTACTS:ne},FeedAssistanceStats.EVENTS={EVENT_EXPLORE_BAIT:re,EVENT_EXPLORE_BAIT_SUB:le,EVENT_FEED_ASSISTANCE:oe,SUB_EVENT_EXPLORE_BAIT_VIEW:ue,SUB_EVENT_EXPLORE_BAIT_LIKE:ce,SUB_EVENT_EXPLORE_BAIT_COMMENT:de,SUB_EVENT_EXPLORE_BAIT_OPENED:Ae,SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE:fe,SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:pe,SUB_EVENT_EXPLORE_BAIT_OPEN_USER:_e,SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP:he,SUB_EVENT_EXPLORE_BAIT_HIDE:me,SUB_EVENT_EXPLORE_BAIT_REPORT:ve,SUB_EVENT_SEEN:ye,SUB_EVENT_FILLED:we,EVENT_HIDE_BLOCK:ae,SUB_EVENT_ENABLE_PUSH:be,SUB_EVENT_DECLINE_PUSH:Ee,EVENT_PROMO_BUTTON:se,EVENT_PROMO_BUTTON_SUB:ke,SUB_EVENT_PROMO_BUTTON_CLICK:Ce},f(window,"blur",ot),f(window,"focus",at),A(function(){setTimeout(Je,500)}),f(window,"scroll",function(){var e=v(),t=g();it(e,t)}),y.onBeforeGo(function(){return st()}),w.onChange(function(){return lt()})},iGfS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("QQoL"));var r=function(){var e=window.store,t="/feed?section=notifications";return(0,i.default)({url:t,count:e.notificationsCount,onclick:["nav.onMenuItemClick",t]})};t.default=r},iHpm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("OcsD");var i={class:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_",i=[e];return Object.keys(t).forEach(function(o){if(r(o)){var a=t[o];!0===a?i.push("".concat(e).concat(n).concat(o)):r(a)&&i.push("".concat(e).concat(n).concat(o).concat(n).concat(a))}}),i.join(" ")},setMod:function(e,t,n){var i,o=new RegExp("\\s*".concat(t,"(_[-a-zA-Z]+)?"));i=!0===n?" ".concat(t):r(n)?" ".concat(t,"_").concat(n):"";o.test(e.className)?e.className=e.className.replace(o,i):e.className+=i}};function r(e){return"number"==typeof e||"string"==typeof e&&e}t.default=i},iN5q:function(e,t,n){"use strict";n("RkGL"),n("21le"),n("4rnG")},iS9e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("rUE2"));n("pYST");var r=i.default;t.default=r,window.MailDialog=i.default},iUjD:function(e,t,n){"use strict";var i=n("UxAg"),r=l(n("bZ/P")),o=l(n("+cqQ")),a=l(n("gy8s")),s=n("k9Tg");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){(0,i.$$)(".mailHat").forEach(function(t){var n=r.default.parseClass("mailHat",t.getAttribute("class"));t.setAttribute("class",r.default.class("mailHat",Object.assign({},n,e)))})}Object.assign(s.MailHat_main,{onUnreadClick:(0,o.default)(),onBurgerClick:(0,o.default)(),onCancelForwardTap:(0,o.default)(),setFolder:function(e){(0,i.$$)(".mailHat__folder").forEach(function(t){a.default.setActive(t,e)})},setUnreadCount:function(e){(0,i.$$)(".mailHat_type_main").forEach(function(t){var n=t.$(".mailHat__unread"),i=t.$(".mailHat__unreadCount");n.classList.toggle("mailHat__unread_hasUnread",e>0),i.outerHTML=(0,s.MailHat__unreadCount)(e)})},setImportantCount:function(e){(0,i.$$)(".mailHat__folder").forEach(function(t){a.default.setCount(t,"important",e)})},setForwarding:function(e){(0,i.$$)(".mailHat_type_main").forEach(function(t){return t.classList.toggle("mailHat_forwarding",e)})},setModifiers:u}),Object.assign(s.MailHat_convo,{onBackTap:(0,o.default)(),onCancelEditingTap:(0,o.default)(),setOnline:function(e,t){var n=(0,s.MailHat_getOnlineText)(e,t);(0,i.$$)(".mailHat__convoDetailsText").forEach(function(e){return e.innerText=n})},setMobile:function(e){(0,i.$$)(".mailHat__convo").forEach(function(t){return t.classList.toggle("mailHat__convo_mobile",e)})},setHasPinnedMsg:function(e){(0,i.$$)(".mailHat_type_convo").forEach(function(t){return t.classList.toggle("mailHat_hasPinnedMsg",e)})},setModifiers:u})},irqS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Messenger",{enumerable:!0,get:function(){return i.Messenger}}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("lQx8"));n("Zoa4"),n("FLY7");var r=i.default;t.default=r,window.uMessenger=i.default,window.Messenger=i.Messenger},"is+u":function(e,t,n){"use strict";var i=need("Voting");function r(e){a(e.$voting,e.url)}function o(e,t){a(t.$voting,e,!0)}function a(e,t,n){var r=setTimeout(function(){i.setLoading(e)},140);ajax.post(t,{_ajax:1},{onDone:function(t,o){domData(e,"is-web-view")&&i._onPollChanged&&i._onPollChanged(e,n),clearTimeout(r),i.setHtml(t,o)}})}window.uVoting={},uVoting._onSubmit=r,uVoting._onRevoteClick=o},j80l:function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.makeUrl=o,t.default=void 0;var r=window.Url={make:o};function o(e,t){var n=need("nav");if(!t)return e;var r=i(e.split("?"),2),o=r[0],a=r[1],s={},l=[];return a&&a.split("&").map(function(e){var n=i(e.split("="),2),r=n[0],o=n[1];r in t||(t[r]=o)}),Object.keys(t).forEach(function(e){var i=t[e];!0===i&&(i=n.getQuery(e)),(function(e){return"string"==typeof e&&e}(i)||function(e){return"number"==typeof e&&!isNaN(e)}(i))&&(s[e]=i)}),Object.keys(s).forEach(function(e){l.push("".concat(e,"=").concat(encodeURIComponent(s[e])))}),0===l.length?o:"".concat(o,"?").concat(l.join("&"))}t.default=r},jE2t:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNetworkType=function(){if(!1===navigator.onLine)return"none";var e=navigator.connection||navigator.webkitConnection||navigator.mozConnection;if(!e)return"unknown";if(e.effectiveType)return e.effectiveType;var t=+(e.downlinkMax||e.downlink);if(t)return t<50?"slow-2g":t<70?"2g":t<700?"3g":"4g";return i[e.type]||"unknown"};var i={bluetooth:"2g",cellular:"2g",ethernet:"4g",mixed:"unknown",none:"none",other:"unknown",unknown:"unknown",wifi:"3g",wimax:"4g"}},jE6c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpHref=function(e){var t=(e+"").split(":"),n=t[1]&&t[0]?t[0]+":":location.protocol;return"http:"===n||"https:"===n},t.each=function(e,t){if(!e)return e;if(o(e)||void 0===e.length){for(var n in e)if(e.hasOwnProperty(n)&&!1===t.call(e[n],n,e[n]))break}else for(var i=0,r=e.length;i<r;i++){var a=e[i];if(!1===t.call(a,i,a))break}return e},t.copy=function(e){if(r(e))return e.concat([]);if(o(e))return extend({},e);return e},t.stripTags=t.srand=t.utf2win=t.unescapeAttr=t.locBase=t.vkNow=t.htsc=t.escapeStr=t.escapeRE=t.escapeAttr=t.irand=t.isUndefined=t.isString=t.isObject=t.isFunction=t.isEmpty=t.isArray=t.replaceEntities=t.rand=void 0;t.locBase=function(){return location.toString().replace(/#.+$/,"")};var i=function(e,t){return Math.random()*(t-e+1)+e};t.rand=i;t.isUndefined=function(e){return void 0===e};t.isFunction=function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)};t.isString=function(e){return"string"==typeof e};var r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.isArray=r;var o=function(e){return"[object Object]"===Object.prototype.toString.call(e)};t.isObject=o;t.isEmpty=function(e){if(!o(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};t.escapeRE=function(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""};t.htsc=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;")};t.escapeAttr=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;")};t.unescapeAttr=function(e){return e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'")};t.replaceEntities=function(e){return ce("textarea",{innerHTML:(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}).value};t.escapeStr=function(e){return e.replace(/\'/g,"\\'")};t.stripTags=function(e){return e.replace(/<[^>]+>/g,"")};t.srand=function(){return Math.random().toString(36).substr(2)};t.irand=function(e,t){return Math.floor(i(e,t))};t.utf2win=function(e){return unescape(encodeURIComponent(e))};t.vkNow=function(){return+new Date}},jLRy:function(e,t,n){"use strict";var i=n("UxAg"),r=need("nav");window.PinnedMsg={onHideClick:befall(),getByMsgId:function(e){return(0,i.$)(o.pinnedMsg(e))}};var o={pinnedMsg:function(e){return'.pinnedMsg[data-msg-id="'.concat(e,'"]')}};function a(e,t){r.go(t,e,{force:!0})}PinnedMsg._onClick=a,PinnedMsg._onHideClick=PinnedMsg.onHideClick},jXv2:function(e,t,n){"use strict";var i=s(n("pOpT")),r=s(n("T9Df")),o=s(n("HON1")),a=s(n("TYsd"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var d=window.Popup,A=window.ActionMenu,f=window.attr,p=window.val,_=window.ajax,h=window.replace,m=window.scrollTop,v=window.ceFromString,g=window.Btn;window.Bookmarks={hideTagsList:T,showTagsList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e.stopPropagation();var n=C(y.tagsListPopup),r=L();if(n.classList.remove("BookmarksPopup__hideCorner"),t){var o=t.closest(y.bookmarkItem),s=f(o,"id"),l=B(s);r=r.filter(function(e){return l.includes(e.id)}),n.classList.add("BookmarksPopup__hideCorner")}var u=qs2obj(nav.params),c=Object.keys(r).reduce(function(e,t){var n=r[t];return e.push((0,i.default)({tag:n,current_id:parseInt(u.tag)})),e},[]),d=a.default.html(c);p(n.$(".Popup__scrollContent"),d);var A=$$(y.tagsListLinks,n);A&&A.forEach(function(e){addEvent(e,"click",T)});return!1},hideDeletePopup:M,showDeletePopup:function(e){var t=C(y.tagsDeletePopup),n=f(e,"data-id"),i=f(e,"data-hash"),r=f(e,"data-name");return R(t,{id:n,hash:i}),p(t.$("[".concat(w.deleteName,"]")),htsc(r)),!1},submitDeleteTag:function(){var e=F(Array.from($$(y.tagsDeletePopup)).pop()),t=e.id,n=e.hash;_.post("/bookmarks",{_ajax:1,act:"tag_delete",id:t,hash:n},{onDone:function(e){k(e),M()}})},hideCreatePopup:P,showCreatePopup:function(e){var t=C(y.tagsCreatePopup),n=f(e,"data-hash");R(t,{hash:n});var i=$("[name=".concat(w.createName,"]"),t),r=$(y.tagsSubmitButton,t),o=p(i).trim();return g.setDisabled(r,!o),!1},submitCreateTag:function(){var e=Array.from($$(y.tagsCreatePopup)).pop(),t=Array.from($$(y.tagsSettings)).pop(),n=F(e).hash,i=p(e.$("[name=".concat(w.createName,"]"))),r=+!!$(y.tagsSettings);_.post("/bookmarks",{_ajax:1,act:"tag_edit",tag:i,hash:n,id:0,from_settings:r},{onDone:function(e,n){if(r){var i=[];Array.from(t.$$('[name="tag"][type="checkbox"]:checked')||[]).forEach(function(e){i.push(e.value)}),p(t,e),i.forEach(function(e){var n=t.$('[name="tag"][type="checkbox"][value="'.concat(e,'"]'));n&&(n.checked=!0)})}else k(e);!function(e){var t=O(),n=u(e,2),i=n[0],r=n[1];t&&t.tags&&(t.tags[i]={id:i,name:r,order:0})}(n),P()}})},hideEditPopup:I,showEditPopup:function(e){var t=C(y.tagsEditPopup),n=f(e,"data-id"),i=f(e,"data-hash"),r=f(e,"data-name")||"",o=t.$("[name=".concat(w.editName,"]"));p(o,r),R(t,{id:n,hash:i,name:r});var a=Array.from($$(y.tagsSubmitButton,t)).pop(),s=p(o).trim();return g.setDisabled(a,!s),!1},submitEditTag:function(){var e=Array.from($$(y.tagsEditPopup)).pop(),t=F(e),n=t.id,i=t.hash,r=p(e.$("[name=".concat(w.editName,"]")));_.post("/bookmarks",{_ajax:1,act:"tag_edit",tag:r,hash:i,id:n},{onDone:function(e){k(e),I()}})},hideSettingsPopup:x,showSettingsPopup:function(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=f(e,"data-item_id"),s=f(e,"data-item_oid"),l=f(e,"data-item_type"),u=f(e,"data-hash"),c=f(e,"data-raw");r.wrap||(t=C(y.tagsSettingsPopup),n=t.$(y.tagsSettings),i=B(c),p(n,a.default.html({class:"Bookmarks__tagsSettingsLoading"})),R(t,{id:o,oid:s,type:l,hash:u,itemRaw:c}));return _.post("/bookmarks",{_ajax:1,act:"tag_settings",hash:u,item_id:o,item_oid:s,item_type:l,wrap:r.wrap?1:0},{onDone:function(e){if(r.wrap){var a=v(e);R(a=C(a),{id:o,oid:s,type:l,hash:u,itemRaw:c,needRemove:!0,is_from_snackbar:r.is_from_snackbar})}else p(n,e),i.forEach(function(e){var n=t.$('[name="tag"][type="checkbox"][value="'.concat(e,'"]'));n&&(n.checked=!0)})}}),!1},submitSettingsTags:function(){var e=Array.from($$(y.tagsSettingsPopup)).pop(),t=F(e),n=t.id,i=t.oid,o=t.type,s=t.hash,l=t.itemRaw,u=t.is_from_snackbar,c=[];Array.from(e.$$('[name="tag"][type="checkbox"]:checked')||[]).forEach(function(e){c.push(e.value)});var d=c.join(",");_.post("/bookmarks",{_ajax:1,act:"tag_set",hash:s,item_id:n,item_oid:i,item_type:o,tag_ids:d,is_from_snackbar:u},{onDone:function(e){x();var t=$("#".concat(l));if(t){var n=$(".BookmarkListItem__tags, .BookmarksItem__tag",t);if(n)p(n,e);else if(n=$(".Owner__tags",t)){var i=L(),o=c.map(function(e){return parseInt(e,10)}),s=i.filter(function(e){return o.includes(e.id)}),u=a.default.html((0,r.default)({tags:s}));p(n.parentNode,u)}U(l,c,""),cur&&cur.search_bookmarks&&cur.search_bookmarks.redraw()}}})},closeAll:function(){T(),M(),P(),I(),x()},initStore:N,pushItemsToStore:function(e){var t=O();t&&(t.items=c({},t.items,e))},pushItemToStore:U,removeFromBookmarkLink:function(e){var t=f(e,"data-item_id"),n=f(e,"data-item_oid"),i=f(e,"data-item_type"),r=f(e,"data-hash"),o=f(e,"data-raw"),a=f(e,"data-link_url"),s=f(e,"data-link_title"),l=f(e,"data-link_img"),u=$("#".concat(o));return A.closeMenu(),addClass(u,b.removed),_.post("/bookmarks",{_ajax:1,act:"bookmark_remove",hash:r,item_id:t,item_oid:n,item_type:i,link_url:a,link_title:s,link_img:l},{onDone:function(e){H(o,[b.removed]),Share.setBookmarkState(o,!1),cur&&cur.search_bookmarks&&cur.search_bookmarks.redraw()}}),!1},addToBookmarkLink:function(e){var t=f(e,"data-item_id"),n=f(e,"data-item_oid"),i=f(e,"data-item_type"),r=f(e,"data-hash"),o=f(e,"data-raw"),a=f(e,"data-link_url"),s=f(e,"data-link_title"),l=f(e,"data-link_img"),u=$("#".concat(o));return A.closeMenu(),removeClass(u,b.removed),_.post("/bookmarks",{_ajax:1,act:"bookmark_add",hash:r,item_id:t,item_oid:n,item_type:i,link_url:a,link_title:s,link_img:l},{onDone:function(){var e=j(o),t=e.indexOf(b.removed);-1!==t&&e.splice(t,1),H(o,e),Share.setBookmarkState(o,!0),cur&&cur.search_bookmarks&&cur.search_bookmarks.redraw()}}),!1},showSuccessSnack:function(e){var t=window.lang;Snackbar.init({text:t.mobile_bookmarks_snackbar_added,action:{url:"/bookmarks",text:t.mobile_bookmarks_snackbar_edit_tags,onclick:"return Bookmarks.showSettingsPopup(this, { wrap: true, is_from_snackbar: 1 });",attrs:Object.keys(e).reduce(function(t,n){var i=e[n];return t["data-".concat(n)]=i,t},{})}})},keyupCreateInput:function(e,t){var n=gpeByClass("BookmarksPopup",t),i=$(y.tagsSubmitButton,n),r=p(t).trim();g.setDisabled(i,!r)},openSavedTab:function(e,t){var n=$(".mm_counter",t),i=getCookie(E.lastTab);i&&!n&&(e&&e.preventDefault(),nav.go("/bookmarks?type=".concat(i)))},openLikesFeed:function(e){var t=$(".mm_new",e);remove(t)},getStoreItemDataById:V,getTagsByItemId:z,renderSearchItem:function(e,t,n,i,s){var u="";if(!i||isEmpty(i))u=n;else{var c=z(e),d=j(e);i=JSON.parse(i),c&&(t=c.reduce(function(e,t){return[].concat(l(e),[t.id])},[]),i.subtitle=(0,r.default)({tags:c})),d&&(i.mix=l(d)),i.title=a.default.wrap(s.highlight(i.title)),u=a.default.html((0,o.default)(i))}return U(e,t,n),u}};var y={tagsListPopup:".BookmarksPopup__filter",tagsDeletePopup:".BookmarksPopup__delete",tagsCreatePopup:".BookmarksPopup__create",tagsEditPopup:".BookmarksPopup__edit",tagsSettingsPopup:".BookmarksPopup__settings",tagsSettings:".Bookmarks__tagsSettings",tagsListContainer:".BookmarkListItem__tags",tagsListLinks:".Bookmarks__tagsSelectItem",tagsListWrap:".BookmarksTags",tagsListItem:".BookmarksTags__item",tagsListItemMore:".BookmarksTags__item_more",tagsContainer:".basisDefault",tagsSubmitButton:".BookmarksPopup__buttonSubmit",bookmarkItem:".BookmarksItem"},w={deleteName:"data-deletetagname",createName:"createtagname",editName:"edittagname"},b={removed:"BookmarksItem_removed"},E={lastTab:"remixblt"};function k(e){var t=m(),n=$(y.tagsContainer),i=v(e);h(i,n),m(t)}function C(e){var t;A.closeMenu(),t="string"==typeof e?$(e):e,t=d.open(t,!0);var n="popup"+Date.now();return f(t,"data-popupid",n),t}function D(e){return f(e,"data-popupid")}function S(e){var t;if(t=!("string"==typeof e)?e:Array.from($$(e)).pop()){d.close(t);var n=F(t),i=n&&n.needRemove;!function(e){var t=D(e);delete O().popup[t]}(t),i&&remove(t)}return!1}function T(){var e=Array.from($$(y.tagsListPopup)).pop(),t=$$(y.tagsListLinks,e);return t&&t.forEach(function(e){removeEvent(e,"click",T)}),S(e)}function M(){return S(y.tagsDeletePopup)}function P(){var e=Array.from($$(y.tagsCreatePopup)).pop();if(e){var t=e.$("[name=".concat(w.createName,"]"));p(t,"")}return S(y.tagsCreatePopup)}function I(){var e=Array.from($$(y.tagsEditPopup)).pop();if(e){var t=e.$("[name=".concat(w.editName,"]"));p(t,"")}return S(y.tagsEditPopup)}function x(){return S(y.tagsSettingsPopup)}function O(){return window.store.bookmarks||N(),window.store.bookmarks}function L(){var e=O();return e.tags?e.tags:{}}function B(e){var t=O();return t.items[e]?t.items[e][3]:[]}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.store.bookmarks=c({},e,{popup:{}})}function R(e,t){var n=D(e);O().popup[n]=t}function F(e){var t=D(e);return O().popup[t]}function j(e){var t=O();return t&&t.items&&t.items[e]&&t.items[e][5]}function H(e,t){var n=O();n&&n.items&&n.items[e]&&(n.items[e][5]?n.items[e][5]=[].concat(l(n.items[e][5]),l(t)):n.items[e][5]=l(t))}function U(e,t,n,i){var r=O();r&&r.items&&(t=t.map(function(e){return parseInt(e,10)}),r.items[e]?(r.items[e][3]=t,r.items[e][4]=i):r.items[e]=["",n,e,t,i])}function V(e){var t=O();return t&&t.items&&t.items[e]}function z(e){var t=V(e),n=L();if(t&&n){var i=t[3]||[];return n.filter(function(e){return i.includes(e.id)})}return!1}},jZPa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("z9sQ"));var r=function(e){var t=e.img?e.img:"",n=!!e.url&&e.url,r=e.title?e.title:"",o=e.subtitle?e.subtitle:"",a=e.verified?e.verified:"",s=e.mix?e.mix:"",l=e.online?e.online:"",u=!!e.actions&&e.actions,c=!!e.attrs&&e.attrs,d=!!e.linkAttrs&&e.linkAttrs;return{attrs:c,class:[i.default.class("OwnerRow",{actions:!!u}),s],inner:[{class:"OwnerRow__content al_artist",href:n,attrs:d,inner:[{class:"OwnerRow__left",inner:{style:t?"background-image: url('".concat(t,"')"):null,class:"OwnerRow__img",inner:l?{class:i.default.class("OwnerRow__online",l)}:null}},{class:"OwnerRow__right",inner:[{class:i.default.class("OwnerRow__header",{verified:a}),inner:[{class:"OwnerRow__title",inner:r},a?{class:"OwnerRow__verified"}:null]},{class:"OwnerRow__subtitle",inner:o}]}]},u?{class:"OwnerRow__actions",inner:u}:null]}};t.default=r},jk6M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.has3d=t.isTouch=t.mobPlatforms=t._ua=t.default=void 0;var i=window,r=i.ce,o=i.getCssPropertyName,a=window._ua;t._ua=a,a||(t._ua=a=navigator.userAgent.toLowerCase());var s={version:(a.match(/.+(?:me|ox|on|rv|it|era|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],amigo:/amigo.*mrchrome soc/i.test(a),opera:/opera/i.test(a),msie:/msie/i.test(a)&&!/opera/i.test(a),msie6:/msie 6/i.test(a)&&!/opera/i.test(a),msie7:/msie 7/i.test(a)&&!/opera/i.test(a),msie8:/msie 8/i.test(a)&&!/opera/i.test(a),msie9:/msie 9/i.test(a)&&!/opera/i.test(a),mozilla:/firefox/i.test(a),chrome:/chrome/i.test(a)||/crios/i.test(a),safari:!/crios/i.test(a)&&!/chrome/i.test(a)&&/webkit|safari|khtml/i.test(a),iphone:/iphone/i.test(a),ipod:/ipod/i.test(a),iphone4:/iphone.*OS 4/i.test(a),ipod4:/ipod.*OS 4/i.test(a),ipad:/ipad/i.test(a),ios:+(a.match(/.+(?:ipod|ipad|iphone.*os) ([\d.]+)_/i)||[0,0])[1],android:/android/i.test(a),bada:/bada/i.test(a),opera_mini:/opera mini/i.test(a),uc_mini:/mobile safari.*ucbrowser/i.test(a),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile/i.test(a),msie_mobile:/iemobile/i.test(a),msie_edge:/edge/i.test(a)&&!/opera/i.test(a),safari_mobile:/iphone|ipod|ipad/i.test(a),opera_mobile:/opera mini|opera mobi/i.test(a),mac:/mac/i.test(a),mi:/miuibrowser/i.test(a),meizu:/MZBrowser/i.test(a)};if(s.android){var l=a.match(/android (\d[\.\d]*)/i);s.android_version=l?l[1]:void 0}s.desktop=(s.opera||s.msie||s.mozilla||s.chrome||s.safari)&&!s.mobile,s.wkwebview=function(){if(!s.ios)return!1;if(window.webkit&&window.webkit.messageHandlers)return!0;var e=/constructor/i.test(window.HTMLElement),t=!!window.indexedDB;if(-1===a.indexOf("safari")||-1===a.indexOf("version")||navigator.standalone){if(!t&&e||!window.statusbar||!window.statusbar.visible);else if(!e||t)return!0}else;return!1}();var u={1:1,2:1,3:1,4:1,5:1};t.mobPlatforms=u;var c="ontouchstart"in window;t.isTouch=c;var d=function(e){if("WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix)return!0;if("MSCSSMatrix"in e&&"m11"in new e.MSCSSMatrix)return!0;if("CSSMatrix"in e&&"m11"in new e.CSSMatrix)return!0;try{var t=r("div"),n=o(t,"transform");return!!n&&(t.style[n]="translate3d(1px,1px,1px)",t.style[n]&&"none"!=t.style[n])}catch(e){return!1}}(window);t.has3d=d;var A=s;t.default=A,Object.assign(window,{browser:s,_ua:a,mobPlatforms:u,isTouch:c,has3d:d})},k1or:function(e,t,n){"use strict";"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){if("Element"in e){var t=e.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},s=function(e){for(var t=i.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,o=n.length;r<o;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],u=function(){return new s(this)};if(o.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return-1!==a(this,e+="")},l.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do{e=t[n]+"",-1===a(this,e)&&(this.push(e),r=!0)}while(++n<i);r&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do{for(e=n[i]+"",t=a(this,e);-1!==t;)this.splice(t,1),o=!0,t=a(this,e)}while(++i<r);o&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),i=n?!0!==t&&"remove":!1!==t&&"add";return i&&this[i](e),!0===t||!1===t?t:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var c={get:u,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",c)}catch(e){void 0!==e.number&&-2146823252!==e.number||(c.enumerable=!1,n.defineProperty(t,"classList",c))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",u)}}(window.self),function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;n<i;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}())},k9Tg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MailHat=v,t.MailHat__Title=function(e){return i.default.html(d(),e.title)},t.MailHat__icon=w,t.MailHat_main=function(e){var t=(0,r.default)({mix:"mailHat__burger",icon:"burger",attrs:i.default.onClick("MailHat_main.onBurgerClick")}),n=function(e,t,n,i){var r=window.lang;return(0,o.default)({mix:"mailHat__folder",items:[{name:"all",text:r.mobile_mail_tab_all,active:"all"===e,url:t.all},n?{name:"unrespond",text:r.mobile_mail_tab_unrespond,active:"unrespond"===e,url:t.unrespond}:"",{name:"unread",text:r.mobile_mail_tab_unread,active:"unread"===e,url:t.unread},{name:"important",text:r.mobile_mail_tab_important,active:"important"===e,count:i,url:t.important}]})}(e.folder,e.urls,e.withUnrespond,e.importantCount),a=function(e){var t=i.default.class("mailHat__unread",{hasUnread:e>0}),n=(0,r.default)({mix:"mailHat__unreadIcon",icon:"msg"}),o=g(e),a=i.default.onClick("MailHat_main.onUnreadClick");return i.default.html(_(),t,a,n,o)}(e.unreadCount),l=(0,r.default)({mix:"mailHat__cancelForward",icon:"back",attrs:i.default.onMouseDown("MailHat_main.onCancelForwardTap")}),u=function(){var e=window.lang;return i.default.html(f(),e.mobile_mail_choose_recipient)}(),c=(0,r.default)({mix:"mailFilter__create",icon:"pencil",url:e.urls.createChatUrl}),d=(0,s.isNewNavigation)(),A=d?"".concat(l):"".concat(t).concat(l),p=d?"".concat(c):"".concat(e.notifier).concat(a);return v({type:"main",left:A,center:"".concat(n).concat(u),right:p,forwarding:e.forwarding})},t.MailHat_convo=function(e){var t=y(),n=(0,r.default)({mix:"mailHat__cancelEditing",icon:"close",attrs:i.default.onMouseDown("MailHat_convo.onCancelEditingTap")}),s=function(e){var t=i.default.class("mailHat__convo",{mobile:e.mobile}),n=(0,a.default)({mix:"mailHat__convoAvatar",photos:e.photos,size:36}),r=b(e);return i.default.html(c(),t,e.url,n,e.title,r)}(e),l=function(){var e=window.lang;return i.default.html(A(),e.mobile_mail_message_editing)}();return v({type:"convo",left:"".concat(t).concat(n),center:"".concat(s).concat(l),right:function(e){return(0,o.default)({mix:"mailHat__actions",icon:"dots",position:"topRight",items:e})}(e.actions),hasPinnedMsg:e.hasPinnedMsg,editing:e.editing})},t.MailHat_page=function(e){var t=y();return v({type:"page",left:"".concat(t),center:"",right:"",hasPinnedMsg:!1,editing:!1})},t.MailHat_getOnlineText=E,t.MailHat__convoDetails=b,t.MailHat__unreadCount=g;var i=l(n("bZ/P")),r=l(n("9y81")),o=l(n("gy8s")),a=l(n("KMpi")),s=n("fdw3");function l(e){return e&&e.__esModule?e:{default:e}}function u(){var e=m(['\n    <div class="mailHat__convoDetails">\n      <div class="mailHat__convoDetailsText">',"</div>\n      ","\n    </div>\n  "]);return u=function(){return e},e}function c(){var e=m(['\n    <a class="','" href="','">\n      ','\n      <div class="mailHat__convoBody">\n        <div class="mailHat__convoTitle">',"</div>\n        ","\n      </div>\n    </a>\n  "]);return c=function(){return e},e}function d(){var e=m(['\n    <div class="mailHat__title">\n      ',"\n    </div>\n  "]);return d=function(){return e},e}function A(){var e=m(['\n    <div class="mailHat__editingTitle">\n      ',"\n    </div>\n  "]);return A=function(){return e},e}function f(){var e=m(['\n    <div class="mailHat__forwardTitle">\n      ',"\n    </div>\n  "]);return f=function(){return e},e}function p(){var e=m(['\n    <div class="mailHat__unreadCount mailHat__unreadCount_length_','">\n      ',"\n    </div>\n  "]);return p=function(){return e},e}function _(){var e=m(['\n    <div class="','" ',">\n      ","\n      ","\n    </div>\n  "]);return _=function(){return e},e}function h(){var e=m(['\n    <div class="mailHat '," "," "," ",'">\n      <div class="mailHat__left">','</div>\n      <div class="mailHat__center">','</div>\n      <div class="mailHat__right">',"</div>\n    </div>\n  "]);return h=function(){return e},e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){var t=e.forwarding?"mailHat_forwarding":"",n=e.hasPinnedMsg?"mailHat_hasPinnedMsg":"",r="mailHat_type_".concat(e.type),o=e.editing?"mailHat_editing":"";return i.default.html(h(),r,t,n,o,e.left,e.center,e.right)}function g(e){var t;return e>999?(e="999+",t=4):t=e>99?3:e>9?2:1,i.default.html(p(),t,e)}function y(){return w({mix:"mailHat__back",icon:"back",attrs:i.default.onMouseDown("MailHat_convo.onBackTap")})}function w(e){return(0,r.default)({mix:i.default.class("mailHat__icon",e.mix),icon:e.icon,attrs:e.attrs,url:e.url})}function b(e){var t=window.lang,n=e.membersCount,o="",a="";if(n>0)a=e.isChannel?langNumeric(n,t.mobile_mail_channel_N_members):langNumeric(n,t.mobile_mail_N_members);else{var s=e.onlinePlatform;a=E(e.isOnline,e.offlineText),"mobile"===s&&(o=(0,r.default)({mix:i.default.class("mailHat__onlineIcon",{platform:"mobile"}),icon:"phoneMini"}))}return i.default.html(u(),a,o)}function E(e,t){var n=window.lang;return e?n.mobile_mail_online:t}},k9Tn:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=window,a=o.intval,s=o.domData,l=o.isEmpty,u=o.isArray,c=o.setStyle,d=o.ce,A=[],f=!1,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(f=n.mobile||n.isWebView,t&&e.ads&&!l(e.ads)&&!(e.has_more||u(e.ads)&&0==e.ads.length)){var i=d("ins");addClass(i,"mrg-tag"),addClass(i,"article_adsblock"),n.mobile&&addClass(i,"article_adsblock_mobile"),c(i,{display:"block","text-decoration":"none"});var r="";for(var o in n.deviceInfo)n.deviceInfo.hasOwnProperty(o)&&(r+="&"+o+"="+n.deviceInfo[o]);for(var a in e.ads.data["ad-query"]=e.ads.data["ad-query"].replace("%device_info%",r),e.ads.data)e.ads.data.hasOwnProperty(a)&&s(i,a,"".concat(e.ads.data[a]));t.appendChild(i),window.MRGtag||(window.MRGtag=[]);var A=n.isWebView?{iframeMode:!0}:{},p=e.ads.eventsHash;if(_(e,n,"requested",p),A.onNoAds=function(){_(e,n,"no_ads",p)},A.onAdsLoaded=function(){_(e,n,"ads_loaded",p)},A.onAdsClosed=function(){_(e,n,"ads_closed",p)},A.onAdsSuccess=function(){_(e,n,"ads_success",p)},A.onAdsClicked=function(){_(e,n,"ads_clicked",p)},A.onScriptError=function(){_(e,n,"script_error",p)},window.MRGtagOnAdsImpression=function(){_(e,n,"ads_impression",p)},window.MRGtag.push(A),!window.mailRuSdsScriptLoaded){var h=document.createElement("script");h.setAttribute("src",e.ads.script),h.setAttribute("async","true"),document.head.appendChild(h),window.mailRuSdsScriptLoaded=!0}}}},{key:"wasShown",value:function(){return!1}}]),e}();function _(e,t,n,i){A.push("".concat(n,"/").concat(e.owner_id,"_").concat(e.id,"/").concat(i)),clearTimeout(r),r=setTimeout(function(){var e=f?"article.php":"al_articles.php";ajax.post(e,{act:"ads_event",events:A.join(","),is_web_view:a(t.isWebView)}),A=[]},200)}t.default=p},kYGI:function(e,t,n){"use strict";var i=window.each,r={tt:!1,handlers:[],show:function(){r.shown||(r.tt=Array.prototype.slice.call(arguments))},hide:function(){r.tt&&(r.tt=!1)},addHandler:function(e){e&&r.handlers.push(e)},removeHandler:function(e){e?i(r.handlers,function(t){if(e===this)return r.handlers.splice(t,1),!1}):r.handlers=[]},onClose:function(){i(r.handlers,function(){this()})},clear:function(){r.tt&&(r.hide(),r.onClose(),r.removeHandler())},closeByTap:function(e){if(!r.tt||!e.target)return!1;var t=e.target;do{for(var n=0;n<r.tt.length;n++)if(t===r.tt[n])return!1}while(t=t.parentNode);return r.hide(),r.onClose(),!0}};window.tooltip=r},kr3z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("UxAg"),r=l(n("+cqQ")),o=l(n("jk6M")),a=n("OcsD"),s=n("cGUQ");function l(e){return e&&e.__esModule?e:{default:e}}var u=window.clog,c={onBeforeRedirect:(0,r.default)("url"),onBeforePageParse:(0,r.default)(),onRedirect:(0,a.se)(),_tStart:!1,_tAlStart:!1,RESPONSE_CAPTCHA:2,_init:function(){try{new XMLHttpRequest&&(c._req=function(){return new XMLHttpRequest})}catch(t){var e=window.ActiveXObject;try{new e("Msxml2.XMLHTTP")&&(c._req=function(){return new e("Msxml2.XMLHTTP")})}catch(t){try{new e("Microsoft.XMLHTTP")&&(c._req=function(){return new e("Microsoft.XMLHTTP")})}catch(e){c._req=!1}}}},_getreq:function(){return c._req||c._init(),c._req()},_al_reqs:[],_last_req:null,save_req:function(e){c._al_reqs.push(e||c._last_req)},abort_reqs:function(){(0,a.each)(c._al_reqs,function(e,t){t.readyState<4&&t.abort()}),c._al_reqs=[]},_failed_relogin:!1,_failed_reqs:[],save_failed_req:function(e,t,n,i){c._failed_reqs.push([e,t,n,i])},repeat_reqs:function(){(0,a.each)(c._failed_reqs,function(){var e=this.shift();c._post.apply(null,this),(0,a.remove)(e)}),c._failed_reqs=[]},plainpost:function(e,t,n,i,r,o,a,l){var u=c._last_req=c._getreq(),d="string"!=typeof t?(0,s.toQueryString)(t,!0):t;u.onreadystatechange=function(){4==u.readyState&&(u.status>=200&&u.status<300?n&&n(u.responseText,u):i&&i(u.responseText,u))};try{u.open("POST",e,!0)}catch(e){return!1}return u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r||l||u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(d),u},post:function(e,t,n){return"/"!=e.substr(0,1)&&(e="/"+e),e=e.split("#")[0],c._post(e,t,n||{})},onPrepared:(0,a.se)(),prepare_click:function(e){var t=window.al;if(o.default.ios&&!(o.default.ios>=7)&&window.al&&t.ver){var n=[],i=!1;e&&"a"==(e.tagName||"").toLowerCase()?n.push(e):(0,a.isArray)(e)?n=e:(n=(0,a.geByTag)("a",e),i=!0);for(var r=0,s=n.length;r<s;r++){var l=n[r],u=l&&l.target||"";if(l&&l.getAttribute&&(!i||!l.getAttribute("data-href")&&(0,a.checkElementNav)(l,{skip_onclick:!0})&&"_blank"!=u)){var c=l.getAttribute("href");if(null==c||!(0,a.isHttpHref)(c))continue;(0,a.attr)(l,"data-href",(0,a.getHref)(l)),(0,a.attr)(l,"href",!1)}}}},click:function(e,t,n){var i=window.nav;t=t||{};var r,o=!1,s={_ajax:1},l=(0,a.extend)(t,{link:e});if(n=n||{},t.onStart){var u=c.tAlGetParam();c.tAlStart=(new Date).getTime(),u&&(s._talstat=u)}if(n.use_cache){var d=(0,a.ge)(!0===n.use_cache?"preload_data":n.use_cache),A=d.innerHTML.replace(/(^<!--|-->$)/g,""),f=A.split("--\x3e\x3c!--");if(A)d.innerHTML="",t.onStart&&t.onStart.apply(l),n.nav&&i.go(o,null,{push_only:!0}),t.onDone&&t.onDone.apply(l,f),(e=(0,a.geByClass1)("show_more",(0,a.geByClass1)("pcont","mcont")))&&c.click(e,{onDone:function(){var e="";(0,a.each)(arguments,function(t,n){e+="\x3c!--"+(n||"")+"--\x3e"}),d.innerHTML=e,(0,a.ge)("show_more_loading")&&c.click(!1,t,n)}});else t.onStart&&t.onStart.apply(l),n.nav&&i.go(o,null,{push_only:!0});return!1}if(!e)return!0;if(e.form){if(e.disabled)return!0;var p=e.form,_={};o=(p.action||"").replace(/^https?:\/\/[^\/]+/i,""),(0,a.each)(p,function(t,n){return!(n.name&&!n.disabled)||("radio"===n.type&&!n.checked||("checkbox"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==e||("image"===n.type&&n!==e||void(_[n.name]=n.value))))))}),"image"==e.type&&(_[e.name]=e.value,_[e.name+".x"]=1,_[e.name+".y"]=1),p.method&&"get"!=p.method?(0,a.extend)(s,_):o=o.split("?",1).shift()+(0,a.obj2qs)(_)}else e.getAttribute&&(o=e.getAttribute("data-href")||e.getAttribute("href"));if(o||(o=e.pathname?e.pathname+e.search+e.hash:e),!o)return!0;(0,a.extend)(s,n.url_params||{});var h=window.pStats,m=h.getSeenData();if(m){var v=window.cur;s._pstat=m.data,v&&v.module&&(s._pstatref=v.module)}return(r=c.post(o,s,{onDone:function(){m&&h.onSend(m.seen),n.lock&&(0,a.unlockButton)(e),t.onDone&&t.onDone.apply(l,arguments),(n.nav||n.scroll)&&(0,a.scrollToHash)()},onFail:function(){n.lock&&(0,a.unlockButton)(e),t.onFail&&t.onFail.apply(l,arguments),(n.nav||n.scroll)&&(0,a.scrollToHash)()}}))&&(t.onStart&&t.onStart.apply(l),n.nav&&i.go(o,null,{push_only:!0}),n.lock&&(0,a.lockButton)(e)),!r},prepare_nav:function(e){},nav:function(e,t){var n=window.nav,r=window.page,s=window.menu,l=window.cur,d=window.Tabbar;(t=t||{}).nav=t.nav||{};var A,f=(0,a.getHref)(e),p=r.getHash(t.nav);if(!(f=n.checkUrl(f)))return!1;"/"!=f.substr(0,1)&&(f="/"+f),s.close(null,!0);var _=c.tGetParam();if(c.tStart=(new Date).getTime(),t.need_restore&&s&&s.closeSearch(),window.isNewMail&&(t.need_restore&&t.nav.push&&!t.need_check_updates&&c.abort_reqs(),n.onBeforeGo2(t.nav.path,(0,a.qs2obj)(t.nav.params),t.nav.push,t)))return c.abort_reqs(),!0;if(t.need_restore&&t.nav.push&&(A=r.restore(p))&&(c.abort_reqs(),A.lm&&(0,a.extend)(A.lm,{tn:!1,bn:!1}),window.isNewNavigation?r.set(p,A,{},t):r.set(p,A),t.zProcess&&(t.zProcess(A.st),delete t.zProcess),n.set(t),c.tModule=window.cur.module,c.tRestoreRender=(new Date).getTime(),!t.need_check_updates))return!0;var h=!1,m=!1;if(t.need_check_updates&&n.isTabHaveCache(t.tab,p));else if(t.fast)h=!0,r.set(p,!1,{before:!0,beforeAppend:t.beforeAppend,afterAppend:t.afterAppend}),m=t.onAfterFast||!1;else if(t.target&&t.target.className){var v,g=(v=/(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec(t.target.className))&&v[1]||!1,y=v&&v[2]||!1;switch(y){case"menu":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var n=(0,i.$)(".vk__page");if(n.className=n.className.replace("vk__page_notifications",""),window.isNewMail){var o=(0,a.geByClass1)("mcont",e)||(0,a.geByClass1)("layout__basis");(0,a.val)(o,'<div class="pcont bl_cont"><div id="al_loading"></div></div>')}else(0,a.val)((0,a.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>');r.setMhead(e,(0,a.attr)(t.target,"data-header"),"/")},afterAppend:function(){window.isNewMail&&"/mail"===p?(0,a.alLoadingFix)((0,a.geByClass1)("layout").offsetHeight):(0,a.alLoadingFix)(),(0,a.scrollTop)(0)}});break;case"tab":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){(0,a.val)((0,a.geByClass1)("upanel",e),'<div id="al_loading"></div>'),(0,a.val)((0,a.geByClass1)("basisDefault",e),'<div id="al_loading"></div>');var t=(0,a.geByClass1)("tabs_block",e)||(0,a.geByClass1)("tabs",e),n=(0,a.geByClass1)("active",t);n&&((0,a.hasClass)("tab_item_top",n)?((0,a.removeClass)("tab_item_cur",(0,a.geByClass1)("tab_item_cur",t)),(0,a.addClass)("tab_item_cur",(0,a.geByClass1)("tab_item",t))):((0,a.removeClass)("tab_item_cur",(0,a.geByClass1)("tab_item_cur",t)),(0,a.addClass)("tab_item_cur",n)))},afterAppend:function(){(0,a.alLoadingFix)()}},t);break;case"post":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var n=window.lang,i=(0,a.clone)((0,a.gpeByClass)("post_item",t.target)),o=i.id,s=(0,a.outer)((0,a.gpeByTag)("a",(0,a.geByClass1)("pi_img",i))).replace("pi_img","op_img"),l=(0,a.gpeByTag)("div",(0,a.geByClass1)("pi_author",i)),u=(0,a.remove)((0,a.geByClass1)("pi_date",i)),c=(0,a.outer)((0,a.remove)((0,a.geByClass1)("explain",l))),d=(0,a.remove)((0,a.geByClass1)("pi_fronly",i)),A=(0,a.outer)(l),f=(0,a.geByClass1)("pi_body",i),p=(0,a.geByClass1)("pi_text_more",f),_=(u=(0,a.geByClass1)("pi_date",i),(0,a.geByClass1)("pi_info",f)),h=(0,a.geByClass1)("pi_links",f),m=(0,a.geByClass1)("replies_link",h),v=(0,a.val)((0,a.remove)((0,a.geByClass1)("pi_actions_wrap",i))),g=(0,a.val)((0,a.remove)((0,a.geByClass1)("item_replies",_)))?(0,a.val)(m):n.mobile_wall_post_replies_title,y=m?'<a name="comments"></a><h4 class="slim_header">'+(g||"")+'</h4><div id="al_loading"></div>':"";if(p){var w=p.nextSibling?p:p.parentNode;w.nextSibling.style.display="inline",w.style.display="none"}(0,a.val)(h,(0,a.outer)((0,a.geByClass1)("like_wrap",f))),u&&(0,a.attr)(u,"data-date")&&(0,a.val)(u,(0,a.attr)(u,"data-date")),r.setMhead(e,(0,a.attr)(t.target,"data-header"),!0),(0,a.val)((0,a.geByClass1)("mcont",e),function(e,t,n,i,r,o,a,s){return'<div class="pcont bl_cont"><div class="owner_panel">'+(t||"")+'<div class="op_cont">'+(n||"")+'<div class="op_info"><span class="item_date">'+(i||"")+'</span></div></div></div><div id="'+(e||"")+'" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">'+(r||"")+'</div><div class="pi_body">'+(o||"")+"</div></div>"+(s||"")+"</div>"+(a||"")+"</div>"}(o,s,A,(0,a.val)(u)+(d?'<b class="pi_fronly"></b>':""),c,(0,a.val)(f),y,v))},afterAppend:function(e){var n=(0,a.geByTag1)("h4",e);n&&(0,a.alLoadingFix)(t.nav.hash?(0,a.getCh)()-n.offsetHeight:0),t.nav.hash?(0,a.scrollToHash)(t.nav.hash):(0,a.scrollTop)(0)}},t);break;case"wall":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var n=window.lang,i=(0,a.clone)((0,a.hasClass)("wall_item",t.target)?t.target:(0,a.gpeByClass)("wall_item",t.target)),o=i.id,s=(0,a.geByClass1)("wi_body",i),l=(0,a.geByClass1)("wi_buttons",i),c=(0,a.geByClass1)("item_like",l),d=(0,a.geByClass1)("v_like",c),A=(0,a.geByClass1)("item_share",l),f=(0,a.geByClass1)("v_share",A),p=(0,a.remove)((0,a.geByClass1)("item_replies",l)),_=!!p&&(0,a.geByClass1)("v_replies",p),h=+(0,a.stripTags)((0,a.val)(_)).replace(/\D/g,""),m=(0,a.geByClass1)("pi_text_more",s),v=(0,a.geByClass1)("wi_date",i),g=h?(0,a.langNumeric)(h,n.mobile_wall_post_comments):n.mobile_wall_post_replies_title,y=p&&h<50?'<a name="comments"></a><h4 class="slim_header">'+(g||"")+'</h4><div id="al_loading"></div>':"";if(u("item_replies",p),(0,a.remove)((0,a.geByClass1)("wi_actions_btn",i)),(0,a.remove)((0,a.geByClass1)("post__subscribeBtn",i)),(0,a.remove)((0,a.geByClass1)("post__extraHeader",i)),d?(0,a.val)(d):(0,a.append)((0,a.ce)("span",{className:"v_like"}),c),f?(0,a.val)(f):(0,a.append)((0,a.ce)("span",{className:"v_share"}),A),m){var w=m.nextSibling?m:m.parentNode;w.nextSibling.style.display="inline",w.style.display="none"}v&&(0,a.attr)(v,"data-date")&&(0,a.val)(v,(0,a.attr)(v,"data-date")),r.setMhead(e,(0,a.attr)(t.target,"data-header"),!0),(0,a.val)((0,a.geByClass1)("mcont",e),function(e,t,n){return'<div class="pcont"><div class="wall_item single_wall_item" id="'+(e||"")+'">'+(t||"")+"</div>"+(n||"")+"</div>"}(o,(0,a.val)(i),y))},afterAppend:function(e){var n=(0,a.geByTag1)("h4",e);n&&(0,a.alLoadingFix)(t.nav.hash?(0,a.getCh)()-n.offsetHeight:0),t.nav.hash?(0,a.scrollToHash)(t.nav.hash):(0,a.scrollTop)(0)}},t);break;case"pinfo":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var t=window.lang,n=(0,a.geByClass1)("owner_panel",e),i=(0,a.geByClass1)("pp_img",n),o=(0,a.geByClass1)("op_header",n),s=(0,a.geByClass1)("lvi",o),l=(0,a.geByClass1)("pp_last_activity",n),u=(0,a.ce)("div");(0,a.addClass)("mhi_back",(0,a.geByClass1)("mh_header",e)),(0,a.val)(n,'<img src="'+(0,a.escapeAttr)((0,a.attr)(i,"src")||"")+'" class="op_img"><div class="op_cont"><h2 class="op_header">'+(0,a.stripTags)((0,a.val)(o))+'</h2><div class="pp_online">'+(s?t.mobile_online:(0,a.val)(l))+"</div></div>"),(0,a.val)((0,a.geByClass1)("ipanel",e),"<div>"+(0,a.val)(u)+'</div><div id="al_loading"></div>'),r.setMhead(e,!1,!0)},afterAppend:function(){(0,a.alLoadingFix)(),(0,a.scrollTop)(0,10)}},t);break;case"player":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var t=window.lang,n=window.audio,i=n.playlist(),o=n.playlist_q(),s=((i[0]||{}).id||"").split("_").slice(2).join("_")||"";r.setMhead(e,t.mobile_menu_player_head_title,!0),(0,a.val)((0,a.geByClass1)("mcont",e),'\n                <div class="pcont audioPage">\n                  <div class="PageBlock">\n                    <div class="audioPage__header">\n                      '.concat(AudioPlaylist.tplPlayerSearch(s),'\n                    </div>\n                    <div id="au_search_items" class="upanel bl_cont">\n                      <div class="audios_block audios_list _si_container" data-query="').concat((0,a.escapeAttr)(o),'">').concat("","</div>\n                    </div>\n                  </div>\n                </div>")),(0,a.val)("m",e.innerHTML)}},t),m=function(){var e=window,n=e.qsearch,i=e.audio,s=i.playlist(),l=((s[0]||{}).id||"").split("_").slice(2).join("_")||"",u="/audio"+(0,a.obj2qs)({act:"player",list:l}),c=[],d={};(0,a.each)(s,function(e,t){c.push(t.id);d[t.id]=[t.artist+" "+t.title,t.id,t.src,t.artist,t.title,t.dur,t.can_add,!1,t.cover_style,t.is_disabled,t.mix,t.subtitle,t.is_explicit]});var A=[];n.init({action:u,al_action:u,container:(0,a.ge)("au_search_items"),field:(0,a.ge)("au_search_field"),btn:(0,a.ge)("au_search_btn"),top_items:c,_cache:d,tpl:function(e,t,n,r){return t?r||(""==r?'<div class="audios_block audios_list _si_container" data-query="'+(0,a.escapeAttr)(t)+'">'+e+"</div>":'<div class="audios_block audios_list _si_container" data-query="'+(0,a.escapeAttr)(t)+'"><div class="al_loading qs_loading">&nbsp;</div></div>'):'<div class="audios_block audios_list _si_container" data-query="'+(0,a.escapeAttr)(i.playlist_q())+'">'+e+"</div>"},item_tpl:function(e,t,n,i,r,o,a,s,l,u,c,d){var f=window.audioplayer,p={id:e,src:t,dur:r,artist:this.highlight(n),title:this.highlight(i),can_add:o,can_del:a,cover_style:s,is_disabled:l,mix:u,subtitle:c,is_explicit:d};return A.push(p),f&&f.getDOMFromAudio(p,!0,this.q)||""},null_tpl:function(e){var t=window.lang;return'<div class="service_msg_box"><div class="service_msg service_msg_null">'+(e?t.mobile_audio_search_not_found.replace("%s",(0,a.htsc)(e)):t.mobile_audio_no_audio)+"</div></div>"},soft_filter:!0,need_invalid_keys:o.default.desktop,top_len:50,global_search:!0,onRendered:function(){var e=window,t=e.audioplayer,n=e.audio;t&&t.initAudio(),n.addToPlaylist(A)},al_need:!0,init_offset:0});var f=i.getCurrentId(),_=(0,a.ge)("audio"+f);if(_){var h=(0,a.getY)(_)+_.offsetHeight/2-(0,a.getCh)()/2;(0,a.scrollTop)(h),window.isNewNavigation&&r.save(p,{html:null,st:(0,a.scrollTop)(),page:(0,a.ge)("m"),state:r.stash(),cur:window.cur,options:t||{}},!1)}};break;case"photo":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var n=(0,a.geByTag1)("img",t.target),i=n&&n.src||"/images/mobile/blank.gif",o="",s="",l=((0,a.attr)(n,"data-src_big")||"").split("|"),u=l[0],c=+l[1]||0,d=+l[2]||0,A=!0;if(c&&d||(c=n&&n.width||0,d=n&&n.height||0,A=!1),u){if(c&&d){var f=Math.min(604,(0,a.getCw)())/c,p=Math.min(604,Math.ceil(f>=1&&A?d:d*f));o+="height:"+p+"px;"}o+="background:url("+i+") #f7f7f7 no-repeat center top;",p>100&&(0,a.each)(["-moz-","-o-","-webkit-",""],function(e,t){o+=t+"background-size:contain;"}),i=u}else s+="width:100%;";r.setMhead(e,(0,a.attr)(t.target,"data-header"),!0),(0,a.val)((0,a.geByClass1)("mcont",e),function(e,t,n){return'<div class="pcont bl_cont"><div class="media_view photo_view"><div class="pv_summary">&nbsp;<div class="summary_loading" style="float:left;"><i class="i_loading"></i></div></div><div class="pv_body"><div class="thumb_item" style="'+(t||"")+'"><img src="'+e+'" class="ph_img" alt="" style="'+(n||"")+'" /></div></div><div id="al_fill"></div></div></div>'}(i,o,s))},afterAppend:function(){(0,a.alLoadingFix)(0,"al_fill"),(0,a.scrollTop)(0)}},t);break;case"u":case"g":case"p":case"e":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){if(window.isNewNavigation)d.drawLoader(e);else{var n,i=window.lang,o=g.substr(2),s=(0,a.geByClass1)(o,e,"a")||(0,a.geByClass1)(o,e,"span"),l=(0,a.stripTags)((0,a.attr)(t.target,"data-name")||(0,a.attr)(s,"data-name")||(0,a.val)(s)||""),u=s&&s.parentNode&&(0,a.geByClass1)("lvi",s.parentNode),c=((0,a.outer)(u),(0,a.geByClass1)(o,e,"img")),A=c&&c.src||(0,a.attr)(t.target,"data-photo")||"/images/mobile/blank.gif";"u"==y?n=l.split(" ").shift():"g"==y?n=i.mobile_group_head_title:"p"==y?n=i.mobile_public_head_title:"e"==y&&(n=i.mobile_event_head_title),r.setMhead(e,n,"/"),(0,a.val)((0,a.geByClass1)("mcont",e),function(e,t,n){return"g"===y||"p"===y||"e"===y?'<div class="al_loading"></div>':'<div class="pcont fit_box"><div class="PageBlock"><div class="owner_panel profile_panel"><img src="'+(e||"")+'" class="pp_img" /><div class="pp_cont"><h2 class="op_header">'+(t||"")+'</h2></div></div><div id="al_loading"></div></div>'}(A,l))}},afterAppend:function(){(0,a.alLoadingFix)(),(0,a.scrollTop)(0)}},t);break;case"playlists":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var n=(0,a.geByClass)("audioPlaylists__item",e),i="";n&&(0,a.each)(n,function(e,t){i+=AudioPlaylist.tplSearchListItem({href:(0,a.attr)((0,a.geByClass1)("audioPlaylists__itemLink",t),"href"),thumb_style:(0,a.attr)((0,a.geByClass1)("audioPlaylists__itemCover",t),"style"),grid_covers:(0,a.val)((0,a.geByClass1)("audioPlaylists__itemCover",t)),title:(0,a.val)((0,a.geByClass1)("audioPlaylists__itemTitle",t)),author_name:(0,a.val)((0,a.geByClass1)("audioPlaylists__itemAuthor",t)),short_stats:(0,a.val)((0,a.geByClass1)("audioPlaylists__itemStats",t))},!0)});var o=AudioPlaylist.tplPlayerSearch("",!0),s=AudioPlaylist.tplPlaylistsPage(i,o);(0,a.val)((0,a.geByClass1)("mcont",e),'<div class="pcont bl_cont">'+s+"</div>"),r.setMhead(e,(0,a.attr)(t.target,"data-header"),!0),window.isNewNavigation||(0,a.scrollTop)(0)}});break;case"empty":case"artist":case"playlist":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){window.isNewNavigation?d.drawLoader(e):(0,a.val)((0,a.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>')},afterAppend:function(){(0,a.alLoadingFix)(),window.isNewNavigation&&(0,a.scrollTop)(0)}},t);break;case"news_subsection":h=!0,r.set(p,!1,{before:!0,beforeAppend:function(e){var t=(0,a.geByClass1)("news_subsections",e);t&&!(0,a.hasClass)("summary_loading",t.firstChild)&&(0,a.before)((0,a.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)}});break;case"tabbar":h=!0,t.is_fast=!0;var w=!1,b={options:{is_fast:!0,tab:t.tab,prev_tab:t.prev_tab}};t.need_check_updates&&A&&(b=(0,a.extend)(b,A),w=!0),r.set(p,b,{before:!w,beforeAppend:function(e){window.isNewNavigation&&(r.setMhead(e,(0,a.attr)(t.target,"data-header"),!1),d.drawLoader(e)),document.body.classList.contains("vk_tabbar_bottom")&&r.hideHeader(e)},afterAppend:function(){(0,a.alLoadingFix)()}});break;default:l=window.cur;var E=!!(0,a.geByClass1)("mhi_logo","mhead");if(h=!0,l.al_fast&&l.al_fast[y])r.set(p,!1,l.al_fast[y](t),t);else if(window.isNewNavigation&&!E){var k={options:{is_fast:!0,tab:t.tab,removeAfterNextResponse:t.removeAfterNextResponse}};r.set(p,k,{before:!0,afterAppend:function(){(0,a.alLoadingFix)()}})}}}if(t.need_check_updates||c.abort_reqs(),t.local){var C=!0;r.set(p,{},{after:!0,no_scroll:!0,force:!0},!1),m&&m()}else{var D=(0,a.qs2obj)(t.nav.params);(0,a.extend)(D,t.params||{}),window.al&&window.al.menu||(D._nlm=1),_&&(D._tstat=_);var S=window.pStats,T=S.getSeenData();T&&(D._pstat=T.data,l&&l.module&&(D._pstatref=l.module)),D._ref||(D._ref=(n.path||"").substr(1));var M=f.split("#");!D._hash&&M.length>1&&(D._hash="#"+M[1]);C=c.post(f,D,{onPageDone:function(e,n,o,a,s){var l=window.cur;if(T&&S.onSend(T.seen),c.tProcess=(new Date).getTime(),r.set(p,{title:e,html:n,js:o,lm:a,bc:s,st:t.st||0},{after:h,no_scroll:h},!h&&t),t.back){var u=(0,i.$)(".layout");r.setMhead(u,!1,t.back)}c.tModule=l.module,c.tRender=(new Date).getTime()},redirectToLoginPage:t.redirectToLoginPage});c.save_req()}return h&&(t.zProcess&&(t.zProcess(),delete t.zProcess),n.set(t),c.tModule=l.module,c.tFastRender=(new Date).getTime()),C},confirm:function(e){function t(t,n,i,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,i){return!!confirm(t)&&c.click(e,i,{url_params:{hash:n}})}),_post:function(e,t,n){var i=function(e,t){n.onFail&&n.onFail.call(window,0,e,t)};return c.plainpost(e,t,function(r){var o=!1;try{o=(0,a.parseJSON)(r)}catch(e){o=!1}!1===o?i():c.parseResponse(o,e,t,n)},i)},parseResponse:function(e,t,n,i){var r,o=window.al,s=window.nav,l=window.menu,u=window.page,d=e.version,A=e.counters,f=e.type,p=t.indexOf("community")>=0,_=p?window.al&&d!==o.ver:window.al&&d!==o.ver||!!window.menu&&!l.refreshCounters(A);if(!1!==A&&!p){var h=window.isNewNavigation?3:2;(0,a.setNotify)(A[h])}switch(f){case 0:if(_)return s.hard_go(s.cur,null,{replace:!0});var m=e.data;(r=m&&isObject(m[0])&&m[0]._snackbar)&&(Snackbar.init(r),delete m[0]._snackbar),i&&i.onDone&&i.onDone.apply(window,m);break;case 1:var v=e.location;c.onRedirect(!0,v);var g=e.hard,y=e.frame,w=e.clear;if(window.isNewMail&&c.onBeforeRedirect(v))break;if(w&&s.clear(),(r=e._snackbar)&&(Snackbar.init(r),delete e.snackbar),_||g)s.hard_go(v);else if(y){(0,a.setDocumentDomain)();var b=v+(-1==v.indexOf("?")?"?":"&")+"__extra=1",E=(0,a.createIframe)({src:b})}else s.go(v,null,{ignore_cur_process:!0});break;case c.RESPONSE_CAPTCHA:var k=e.location,C=e.img,D=e.post,S=e.key;i&&i.onFail?i.onFail(f,k,{location:k,img:C,post:D,key:S}):s.hard_go(k);break;case 3:var T=e.lm_data;if(window.isNewNavigation&&T&&!!T.is_new_nav!==window.isNewNavigation&&(_=!0),u.need_hard_go=_,T&&T.rdr&&window.al&&o.menu&&(0,a.getW)("vk_wrap")>=614){s.go(T.rdr,null,{replace:!0});break}cur.share&&cur.share.destroy(),(i=i||{}).onPageDone||(i.onPageDone=function(e,n,i,r,o){s.go(t,null,{push_only:!0}),u.set(u.getHash(s),{title:e,html:n,js:i,lm:r,bc:o})});var M=e.title,P=e.html,I=e.js,x=e.body_class;i.onPageDone(M,P,I,T,x);break;case 4:if(i.redirectToLoginPage)return window.location=e.location,!1;if(!c._failed_relogin){var O=e.location;(0,a.setDocumentDomain)();E=(0,a.createIframe)({src:O})}c._failed_relogin=!0,c.save_failed_req(E,t,n,i)}},onReLoginDone:function(){c.repeat_reqs(),c._failed_relogin=!1},tGetParam:function(){if(c.tStart&&c.tModule){var e=c.tFastRender-c.tStart,t=c.tRestoreRender-c.tStart,n=c.tProcess-c.tStart,i=c.tRender-c.tProcess,r=["/"==c.tModule.substr(0,1)?c.tModule.substr(1):c.tModule,e,t,n,i];for(var o in r)(!r[o]||r[o]<0)&&(r[o]=0);return c.tStart=!1,r.join(",")}},tAlGetParam:function(){if(c.tAlStart&&c.tAlModule){var e=c.tAlProcess-c.tAlStart,t=c.tAlRender-c.tAlProcess,n=["al_"+("/"==c.tAlModule.substr(0,1)?c.tAlModule.substr(1):c.tAlModule),e,t];for(var i in n)(!n[i]||n[i]<0)&&(n[i]=0);return c.tAlStart=!1,n.join(",")}},refreshLinks:function(e,t){if(e){var n=(0,a.geByClass1)("mmi_fv","lm_cont"),i=n&&(0,a.geByClass1)("lfm_item",n),r=(0,a.geByClass1)("mmi_fv","mfoot"),o=r&&(0,a.geByClass1)("lfm_item",r),s=(0,a.ge)("fv_link"),l=(0,a.ge)("menu_fv_link"),u=(0,a.geBySel1)('link[rel="canonical"]');(0,a.attr)(i,"href",e),(0,a.attr)(o,"href",e),(0,a.attr)(s,"href",e),(0,a.attr)(u,"href",(0,a.attr)((0,a.ge)("mcont"),"data-canonical")),window.nav.prev_fv_link&&(0,a.attr)(l,"href",window.nav.prev_fv_link),window.nav.fv_link=e}if(t){var c=(0,a.geByClass1)("mmi_app","lm_cont"),d=c&&(0,a.geByClass1)("lfm_item",c),A=(0,a.geByClass1)("mmi_app","mfoot"),f=A&&(0,a.geByClass1)("lfm_item",A),p=(0,a.ge)("app_link"),_=!!t&&"return nav.app_go(this, event, '"+(0,a.escapeStr)(t)+"');";(0,a.attr)(d,"onclick",_),(0,a.attr)(f,"onclick",_),(0,a.attr)(p,"onclick",_)}}};window.ajax=c;var d=c;t.default=d},l51W:function(e,t,n){"use strict";var i=window,r=(i.nav,i.attr,i.ajax),o=function(){function e(e){var t=e.closest(".si_body");return{buttons:$(".si_links",t),message:$(".si_msg",t)}}return{sendRequest:function(t,n){t&&t.preventDefault();var i=n.getAttribute("href");ActionMenu.closeMenu();var o=e(n);r.post(i,{_ajax:1},{onDone:function(e){!function(e){hide(e.buttons),show(e.message)}(o),val(o.message,e)}})},cancelRequest:function(t,n){t&&t.preventDefault();var i=n.getAttribute("href"),o=e(n);r.post(i,{_ajax:1},{onDone:function(e){}}),function(e){hide(e.message),show(e.buttons)}(o)}}}();window.GroupsInvite=o},l57W:function(e,t,n){"use strict";var i=n("UxAg"),r=s(n("r/ag")),o=s(n("29dZ")),a=s(n("Q8gl"));function s(e){return e&&e.__esModule?e:{default:e}}window.SwitcherConfirm={},SwitcherConfirm._onSwitcherChange=c,SwitcherConfirm._onConfirmClick=d,SwitcherConfirm._onCancelClick=function(e){return A(e.$btn)},SwitcherConfirm._onPopupOverlayClick=function(e){return A(e.$popup)};var l={checked:function(e){return"SwitcherConfirm_checked_".concat(e?"yes":"no")}},u={switcher:".SwitcherConfirm",popup:".SwitcherConfirm__popup",confirm:".SwitcherConfirm__confirm",cancel:".SwitcherConfirm__cancel"};function c(e){var t=e.$control,n=t.closest(u.switcher),o=(0,i.$)(u.popup,n);r.default.open(o),n.$popup=o,n.$control=t,n.checked=e.checked}function d(e,t){var n=t.$btn.closest(u.switcher),a=(0,i.$)(u.confirm,n),s=(0,i.$)(u.cancel,n),c=n.checked;n.isSaving=!0,o.default.setLoading(a,!0),o.default.setDisabled(s,!0),Wd.handle(e,{checked:c,onSuccess:function(){n.isSaving=!1,r.default.close(n.$popup),o.default.setLoading(a,!1),o.default.setDisabled(s,!1),n.classList.toggle(l.checked(!0),c),n.classList.toggle(l.checked(!1),!c)}})}function A(e){var t=e.closest(u.switcher);t.isSaving||(a.default.setChecked(t.$control,!t.checked),r.default.close(t.$popup))}},l90V:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SRbS"));Object.assign(i.default,{list:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Array.isArray(e)||(e=[e]);return t?e.map(t).join(""):e.join("")}})},lQx8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=S,t.Messenger_renderConvoLayer=T,t.Messenger_renderLoadingPage=function(e){var t=(0,f.MailHat_page)(),n=(0,a.default)({mix:"messenger__body",inner:[M()]});return i.default.html(w(),t,n)},t.uMessenger_class=O,t.uMessenger_getBanner=I,t.uMessenger_getPinnedMsg=P,t.uMessenger_renderMRsHint=B,t.uMessenger_hasSelectedMsgs=L,t.default=void 0;var i=_(n("bZ/P")),r=_(n("Mc5h")),o=(_(n("9y81")),_(n("O5lf"))),a=_(n("AgBx")),s=_(n("QBkA")),l=_(n("rKp0")),u=_(n("u33z")),c=_(n("HPEO")),d=_(n("CkGd")),A=_(n("yNeG")),f=n("DkIl"),p=_(n("2eJH"));function _(e){return e&&e.__esModule?e:{default:e}}function h(){var e=C(['\n    <a href="/mail?act=mrs" class="messenger__mrsHintBox _touched">\n      ',"\n    </a>\n  "]);return h=function(){return e},e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){var e=C(["\n    ",'\n    <div class="messenger__banner_content">\n      <div class="messenger__banner_text" ',">\n        ",'\n      </div>\n      <div class="messenger__banner_buttons">\n        ',"\n      </div>\n    </div>\n    ","\n  "]);return v=function(){return e},e}function g(){var e=C(['\n      <div class="messenger__banner_icon">\n        <img class="messenger__banner_icon_img" src="','">\n      </div>\n    ']);return g=function(){return e},e}function y(){var e=C(['\n    <div class="messenger__spinner">\n      ',"\n    </div>\n  "]);return y=function(){return e},e}function w(){var e=C(['\n    <div class="messenger__header">\n      ',"\n    </div>\n    ","\n  "]);return w=function(){return e},e}function b(){var e=C(['\n    <div class="messenger__convoListNotice">\n      ',"\n    </div>\n  "]);return b=function(){return e},e}function E(){var e=C(['\n    <div class="messenger__header">\n      ','\n      <div class="','">','</div>\n      <div class="messenger__pinned">',"</div>\n    </div>\n    ",'\n    <div class="','">\n      <div class="messenger__mrbox">','</div>\n      <div class="messenger__write">','</div>\n      <div class="messenger__acts">','</div>\n    </div>\n    <div class="messenger__dialog"></div>\n  ']);return E=function(){return e},e}function k(){var e=C(['\n    <div class="','">\n      <div class="messenger__layer messenger__layer_main">\n        <div class="messenger__header">',"</div>\n        ",'\n      </div>\n      <div class="messenger__layer messenger__layer_convo">\n        ','\n      </div>\n      <div class="messenger__layer messenger__layer_page">',"</div>\n    </div>\n  "]);return k=function(){return e},e}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=store.mail.cur,n=t.query,i=(0,l.default)({scrap:"folder"}),r=(0,l.default)({scrap:"search"}),o=e.page,a="all"!==t.folder||t.query||t.forwardFromId?0:t.countMR;return S({mix:O(),mailHat:(0,A.default)(),convo:T(),page:o,mrs:a,query:n,createChatUrl:"/mail?act=new_chat",scrapFolder:i,scrapSearch:r})};function S(e){var t=window.lang.mobile_mail_search_only_messages,n=(0,s.default)({query:e.query,createUrl:e.createChatUrl}),o=e.mrs?B(e.mrs):"",l=i.default.onClick("Messenger._onSearchMsgsClick"),u=(0,a.default)({mix:"messenger__body",attrs:i.default.onScroll("Messenger._onMainScroll","this"),inner:[(0,r.default)({mix:"messenger__filter",inner:n}),(0,r.default)({mix:i.default.class("messenger__mrsHint",{hidden:!e.mrs}),inner:o}),(0,r.default)({mix:"messenger__searchMsgs",attrs:l,inner:t}),(0,r.default)({mix:"messenger__loadable",inner:[(0,r.default)({mix:"messenger__folderList",inner:e.scrapFolder}),(0,r.default)({mix:"messenger__searchList",inner:e.scrapSearch}),M()]})]});return i.default.html(k(),e.mix,e.mailHat,u,e.convo,e.page)}function T(){var e=store.mail,t=e.cur,n=e.peers[t.peerId],o=(0,A.default)(),s=P(),u=I(),f=(0,c.default)(),_=n&&n.canPin,h=(0,d.default)({canPin:_,isChannel:n.isChannel}),m=(0,l.default)({scrap:"peer"}),v=n.isIncomingMR?(0,p.default)(t.peerId):"",g=n.isRejectedMR?function(){var e=window.lang;return i.default.html(b(),e.mobile_mail_mrs_rejected_info)}():"",y=(0,a.default)({mix:"messenger__body",attrs:i.default.onScroll("Messenger._onConvoScroll","this"),inner:[(0,r.default)({mix:"messenger__spacer"}),(0,r.default)({mix:"messenger__convoList",inner:[m,g]}),M()]}),w="messenger__banner";u&&(w="".concat(w," messenger__bannerVisible"));var k=i.default.class("messenger__footer",{actionsOpen:L(),isIncomingMR:n.isIncomingMR});return i.default.html(E(),o,w,u,s,y,k,v,f,h)}function M(){var e=(0,o.default)();return i.default.html(y(),e)}function P(){var e=store.mail,t=e.cur.peerId;return t&&e.peers[t].pinnedMsg}function I(){var e=store.mail,t=e.cur.peerId,n=t&&e.peers[t],r=n&&n.banner;if(!r)return"";var o="";r.icon&&(o=i.default.html(g(),r.icon));for(var a=r.buttons,s=a.length,l=[],c=0;c<s;c++)l.push(x(a[c]));l=i.default.list(l);var d=(0,u.default)({class:"messenger__banner_close",onClick:i.default.onClick("uMessenger.onBannerButtonClick","event")}),A=i.default.onClick("uMessenger.onBannerTextClick","event");return i.default.html(v(),o,A,r.text,l,d)}function x(e){var t,n,r=i.default.class("messenger__banner_button",{primary:"secondary"!==e.layout,secondary:"secondary"===e.layout});return"link"===e.type?t={href:e.link}:"callback"===e.type&&(n=i.default.onClick("uMessenger.onBannerButtonClick","event",e.callback_data)),(0,u.default)({class:r,text:e.text,type:"link"===e.type?"link":"button",link:t,onClick:n})}function O(){var e,t,n=store.mail.cur;t=n.page?"view_page":n.peerId?"view_dialog":n.query&&"msgs"===n.tab?"view_searchMsgs":n.query?"view_searchPeers":"folder_".concat(n.folder);var r=n.peerId?store.mail.peers[n.peerId]:null;return i.default.class("e","messenger",{isIncomingMR:!!r&&r.isIncomingMR,isRejectedMR:!!r&&r.isRejectedMR},"uMessenger",(m(e={},t,!0),m(e,"community",!!n.groupId),e))}function L(){var e=store.mail.cur.msgSelected;return Object.keys(e).length>0}function B(e){var t=window.lang,n=langNumeric(e,t.mobile_mail_mrs_request_count);return i.default.html(h(),n)}t.default=D},lcib:function(e,t,n){"use strict";var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));window.SearchPanel={setQuery:function(e,t){var n=(0,i.$)(a.inputById(e));t=t||"",n.value!==t&&(n.value=t,c(n,t))}},SearchPanel._onInput=l,SearchPanel._onClearClick=u,SearchPanel._onFocus=s;var o={hasQuery:"SearchPanel_hasQuery"},a={searchPanel:".SearchPanel",input:".SearchPanel__input",inputById:function(e){return'.SearchPanel[data-id="'.concat(e,'"] .SearchPanel__input')}};function s(){}function l(e,t){var n=e.value;c(e,n),r.default.handle(t,{query:n})}function u(e){var t=e.closest(a.searchPanel).$(a.input);t.value="",t.oninput()}function c(e,t){e.closest(a.searchPanel).classList.toggle(o.hasQuery,!!t)}},ldCb:function(e,t,n){"use strict";var i=window.hide;window.Informer={close:function(e){i(e)}}},lkNA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadScript=function(e,t){var n,i=t.timeout,r=t.onLoad,o=t.onError,a=document.createElement("script");a.addEventListener("load",s),a.addEventListener("readystatechange",s),a.addEventListener("error",l),a.src=e,document.head.appendChild(a),i&&(n=setTimeout(l,i));function s(e){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(u(),r&&r())}function l(e){u(),o&&o()}function u(){clearTimeout(n),a.removeEventListener("load",s),a.removeEventListener("readystatechange",s),a.removeEventListener("error",l)}return{destroy:function(){u()}}}},ll1Q:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("sXaZ"));Object.assign(i.default,{setPrefix:function(e,t){e.$(r.prefix).innerText=t},getValue:function(e){return e.$(r.native).value}});var r={native:".TextInput__native",prefix:".TextInput__prefix"}},m0RZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlBase64ToUint8Array=function(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(n),r=new Uint8Array(i.length),o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}},m9bs:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("TYsd"));window.SettingsRow_select={},SettingsRow_select._onChange=o;var r={row:".settingsRow",description:".settingsRow__description"};function o(e,t){!function(e){var t=e.$select,n=e.label;t.closest(r.row).$(r.description).textContent=n}(t),i.default.handle(e,t)}},mOHq:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var r=window,o=r.isUndefined,a=r.getX,s=r.getY,l=r.vkNow,u=r.clog,c=r.cancelEvent,d=r.getW,A=r.setStyle,f=r.getH,p=r.scrollTop,_=r.getCh,h=r.preventEvent,m=r.extend,v=r.hasClass,g=r.gpeByClass,y=r.attr,w=r.toggleClass,b=r.geByClass1,E=r.removeClass,k=r.addClass,C=r.geByClass,D=r.addEvent,S=r.onBodyResize,T=r.removeEvent,M=window.thover;window.Scroller=function(e,t){var n,r,P,I,x,O=t&&t.ignoreMouseWheel,L=t&&t.noAutoScroll,B=!o(document.ontouchmove),N=!0,R=!1,F=!1,j=!1,H=!1,U=0,V=0,z=!1,$=0,q=!1,W=!1,Y=!1,G=!1;function Q(e){var t=e.touches,n=a(r),i=s(r);return{x:((t&&t[0]?t[0].pageX:e.pageX)||0)-n,y:((t&&t[0]?t[0].pageY:e.pageY)||0)-i}}function X(e){z||(z=[]),z.push([l(),e]),z=z.slice(-20)}function K(){z=!1}function J(){if(!z||z.length<2)return[0,0,0];for(var e=l(),t=!1,n=z.pop(),i=z.length-1;i>=0&&!((r=e-z[i][0])>150);i--)t=z[i];if(!t||!n)return[0,0,0];var r,o=n[1].x-t[1].x,a=n[1].y-t[1].y,s=Math.sqrt(o*o+a*a);return(r=n[0]-t[0])?[s/r,o/r,a/r]:[0,0,0]}function Z(e){"touchstart"==e.type?N=!e.touches||1==e.touches.length:"touchmove"==e.type?N=!1:"click"==e.type&&(N||(c(e),N=!0))}function ee(e){if(!(window.isNewMail&&e.target.closest(".stickers_panel")&&e.target.closest(".messenger")||G&&e.touches&&e.touches.length>1)){if(K(),F){if(V<=1)return}else if(d(r)-d(P)>=0)return;j=Q(e),X(H=j),Y=!0,A.animate(P)}}function te(e){if(j&&(G||Y)){M&&M.cancel(e);var t=Q(e);if(X(H=t),Y){var n=j.x-t.x,i=j.y-t.y;if(Math.abs(n)>=Math.abs(i)&&(c(e),G=!0),Y=!1,G){var o=s(r),a=f(r),l=p(),u=_();!L&&(o-7<l?p(o-7):o+a+7>l+u&&p(o+a+7-u))}}if(G)if(c(e),F){var h=d(r);n=j.x-t.x,(U<=0&&n<0||U>=V-1&&n>0)&&(n/=3);var m=-U-n/h,v=R?100*m+"%":m*h;A.transform(P,{translate:[v,0]})}else{var g=d(r)-d(P);n=j.x-t.x,m=$-n,g>0&&(g=0),oe(v=m<g?g-(g-m)/3:m>0?0+(m-0)/3:$-n),A.transform(P,{translate:[v,0]})}}}function ne(e){if(j&&G){if(c(e),F){var t=4.7*J()[1],n=j.x-H.x,i=d(r),o=Math.abs(n)>=i/2;(U>0&&(o&&n<0||t>1)||U<V-1&&(o&&n>0||t<-1))&&(U+=n>0?1:-1);var a=-U,s=R?100*a+"%":a*i;j=!1,K(),ae(),A.animate(P,"transform",{duration:200,func:"ease"}),A.transform(P,{translate:[s,0]})}else{var l=function(){if(!z)return!1;var e=J(),t=e[0],n=e[1];if(K(),!t)return!1;var i=t/4.7,r=n*i-4.7*i*i/2;return u("dx",r*=140,"t",i*=530),!(t<.1||!r)&&{dx:r,t:i}}(),f=d(r)-d(P);n=j.x-H.x,a=$-n,l&&(a+=l.dx),f>0&&(f=0),$=a<f?f:a>0?0:a;var p={duration:200,func:"ease"};l&&(p={duration:l.t,func:"cubic-bezier(0, 1, 1, 1)"}),oe($),A.animate(P,"transform",p),A.transform(P,{translate:[$,0]})}G=!1}}function ie(e){if(!(O||window.isNewMail&&e.target.closest(".stickers_panel")&&e.target.closest(".messenger"))){if(h(e),F){if(V<=1)return}else if((n=d(r)-d(P))>=0)return;var t=(e.detail?e.detail:e.wheelDelta)>0?3:-3;if(!1===q&&(q=0),q+=t,!F){var n=d(r)-d(P),i=$-q;if(n>0&&(n=0),i<n)var o=n-(n-i)/3;else o=i>0?0+(i-0)/3:$-q;oe(o),A.transform(P,{translate:[o,0]})}clearTimeout(W),W=setTimeout(function(){if(F){(U>0&&q<0||U<V-1&&q>0)&&(U+=q>0?1:-1);var e=-U,t=d(r),n=R?100*e+"%":e*t;ae(),A.animate(P,"transform",{duration:200,func:"ease"}),A.transform(P,{translate:[n,0]})}else{var i=d(r)-d(P);e=$-q,i>0&&(i=0),e<i?$=i:e>0?$=0:$-=q,oe(n),A.animate(P,"transform",{duration:200,func:"ease"}),A.transform(P,{translate:[$,0]})}q=!1},200)}}function re(e){if(F){var t=U;if(e&&e.target){var n=v("sp_ppt",e.target)?e.target:g("sp_ppt",e.target),i=+y(n,"data-i");U=i<0?0:i>V-1?V-1:i}j=!1,K(),G=!1;var o=d(r),a=-U,s=R?100*a+"%":a*o;ae(),t!=U&&A.animate(P,"transform",{duration:200,func:"ease"}),A.transform(P,{translate:[s,0]})}}function oe(e){if(!F){e=e||$;var t=d(r)-d(P);w("sw_left",r,e<0),w("sw_right",r,e>t)}}function ae(){if(F){var e=b("sp_ppt_sel",n);e&&e===x[U]||(E("sp_ppt_sel",e),k("sp_ppt_sel",x[U]))}}m(this,{init:function(){r=b("scroller_wrap",n),P=b("scroller_cont",r),F?(I=b("sp_pages_pts",n),x=C("sp_ppt",I),V=(C("scroller_page",P)||[]).length,U=0,ae()):oe($=0),z=!1,A.transform(P,{translate:[0,0]}),B?(D(r,"touchstart touchmove click",Z),D(r,"touchstart",ee),D(r,"touchmove",te),D(r,"touchend touchcancel",ne)):(D(r,"mousewheel",ie),D(I,"click",re)),R||S(re)},destroy:function(){B?(T(r,"touchstart touchmove click",Z),T(r,"touchstart",ee),T(r,"touchmove",te),T(r,"touchend touchcancel",ne)):(T(r,"mousewheel",ie),T(I,"click",re)),R||S("__clear",re)},onShow:function(){F?ae():oe($)},canClick:function(){return N}}),n=e,(t=t||{}).byPage?(F=!0,R=!i.default.android):(F=!1,R=!1,this.showElem=function(e){if(!F){var t=a(e)-a(r),n=t+$,i=n+d(e),o=d(r),s=!1;n<0?s=0-t+20:i>o&&(s=o-d(e)-t-20);var l=d(r)-d(P);l>0&&(l=0),s<l?s=l:s>0&&(s=0),u(t,$,n,i,0,o,s),!1!==s&&(oe($=s),A.animate(P,"transform",{duration:200,func:"ease"}),A.transform(P,{translate:[$,0]}))}})}},mXGF:function(e,t,n){"use strict";var i=window,r=i.preventEvent,o=i.toggleClass,a=i.attr,s=i.gpeByClass,l=i.geByClass1,u=i.ajax,c=i.val,d=i.ge,A=i.addClass,f=i.removeClass,p=i.geBySel1,_=function(){var e="_audioSnippet",t="audio_item",n="audioPlaylist__add_added",i="data-follow_text",_="data-unfollow_text",h="_audioPlaylistsPage__item",m="audioPlaylistsPage__item_removed";return{playPause:function(n,i){r(n);var u=s(e,i),c=l(t,u);audioplayer.playPause(n,a(c,"data-id")),o("audioSnippet__playpause_paused",i)},followPlaylist:function(e,t){r(e);var s=l(h+a(t,"data-playlist_owner_id")+"_"+a(t,"data-playlist_id"));hasClass(n,t)?(t.innerText=a(t,i),A(m,s)):(t.innerText=a(t,_),f(m,s)),function(e){u.post("/audio",{_ajax:1,act:"follow_playlist",playlist_owner_id:a(e,"data-playlist_owner_id"),playlist_id:a(e,"data-playlist_id"),hash:a(e,"data-hash")},{redirectToLoginPage:!0})}(t),o(n,t)},tplSearchBlockItem:function(e){return'<div class="audioPlaylists__item">\n              <a href="'.concat(e.href,'" class="audioPlaylists__itemLink al_playlist">').concat(e.title,'</a>\n              <span class="audioPlaylists__itemCover" style="').concat(e.thumb_style,'">').concat(e.grid_covers,'</span>\n              <span class="audioPlaylists__itemTitle">').concat(e.title,'</span>\n              <span class="audioPlaylists__itemAuthor">').concat(e.author_name,'</span>\n              <span class="audioPlaylists__itemStats">').concat(e.short_stats,"</span>\n            </div>")},tplSearchBlock:function(e,t,n,i){return e?'<div class="audioPlaylists">\n                <div class="audioPlaylists__header">\n                  <div class="audioPlaylists__cell">\n                    <div class="audioPlaylists__title">'.concat(n,'</div>\n                  </div>\n                  <div class="audioPlaylists__cell">').concat(i,'</div>\n                </div>\n                <div class="audioPlaylists__body _preventMenuOpen">\n                  <div class="audioPlaylists__items">\n                    ').concat(e,"\n                  </div>\n                </div>\n              </div>"):""},tplSearchListItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n='<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                  <a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a>\n                  <i class="i_pointer"></i>\n                  <div class="ai_menu wi_actions">\n                    '.concat(e.follow_link,"\n                    ").concat(e.publish_link,"\n                  </div>\n                </div>\n             </div>\n             ").concat(e.actions);return t&&(n='<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                   <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                     <a href="#" class="ai_menu_toggle_button"></a>\n                   </div>\n                 </div>'),'<div class="audioPlaylistsPage__item _audioPlaylistsPage__item'.concat(e.owner_id,"_").concat(e.id,'">\n              <div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_link">\n                <a href="').concat(e.href,'" class="audioPlaylistsPage__itemLink">').concat(e.title,'</a>\n                <span class="audioPlaylistsPage__container">\n                  <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_cover">\n                    <span class="audioPlaylistsPage__cover" style="').concat(e.thumb_style,'">').concat(e.grid_covers,'</span>\n                  </span>\n                  <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_desc">\n                    <span class="audioPlaylistsPage__title">').concat(e.title,'</span>\n                    <span class="audioPlaylistsPage__author">').concat(e.author_name,'</span>\n                    <span class="audioPlaylistsPage__stats">').concat(e.short_stats,"</span>\n                  </span>\n                </span>\n              </div>\n              ").concat(n,"\n            </div>")},tplSearchListNull:function(e){return'<div class="audioPlaylistsPage__notFound">\n              '.concat(e,"\n            </div>")},tplPlaylistsPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="PageBlock">\n              <div class="audioPlaylistsPage">\n                <div class="audioPage__search">\n                  '.concat(t,'\n                </div>\n                <div class="audioPlaylistsPage__list _si_container" id="au_search_playlist_items">\n                  ').concat(e,"\n                </div>\n              </div>\n            </div>")},tplPlayerSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.lang,i=('<input type="hidden" name="act" value="player"><input type="hidden" name="list" value="'.concat(escapeAttr(e),'">'),'<input id="au_search_btn" class="button qs_button al_tab" type="submit" value="'.concat(n.mobile_audio_search_btn,'" />'),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="audioPage__search">\n              <div class="hp_block">\n                '.concat(e,'\n                <div class="qsearch">\n                  <table class="row_table">\n                    <tr>\n                      <td class="row_table_main_column">\n                        <div class="qs_field_wrap">\n                          <div class="iwrap">\n                            <input id="au_search_field" type="text" class="textfield qs_textfield" name="q" placeholder="').concat(n.mobile_audio_search_placeholder_simple,'">\n                          </div>\n                        </div>\n                      </td>\n                      <td class="row_table_last_column">\n                        ').concat(t,"\n                      </td>\n                    </tr>\n                  </table>\n                </div>\n              </div>\n            </div>")});return t?i():function(e,t,n){return'<form action="/audio" class="qsearch" onsubmit="return cur.au_search.go(event);">'.concat(e(t,n),"</form>")}(i)},copyValue:function(e,t){var n=c(e),i=d(t+"_field");c(i,n),cur&&cur[t]&&cur[t].go();var r=p(".audioPage__tabs .tab_item_cur");r&&o("tab_item_cur_noactive",r,n)}}}();window.AudioPlaylist=_},mqBN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickersAnimation=void 0;var i=function(){var e,t=!1,n=!1,r={},o={},a={},s={};function l(e){if(window.isMVK){var t=document.createElement("script");t.onload=function(){e()},t.src="/js/cmodules/web/bodymovin.js",document.head.appendChild(t)}else stManager.add([jsc("web/bodymovin.js")],function(){e()})}function u(e){var t=A(e),n=1;if(t){hasClass(e,"animation_play")||(hide(geByClass1("sticker_img",e)),addClass(e,"animation_play")),t.play();var i=attr(e,"data-loop-count");i=parseInt(i),isNaN(i)&&(i=3),-1!==i&&(!t._cbs.loopComplete||t._cbs.loopComplete&&0===t._cbs.loopComplete.length)&&t.addEventListener("loopComplete",function r(o){var a=!0;i>=++n&&(a=!1),a&&(d(e,!1),""!==t._cbs.loopComplete&&t.removeEventListener("loopComplete",r),t.stop())})}}function c(e){var t=attr(e,"data-uid");return t||(t=attr(e,"data-uid",Math.random().toString(32).substr(2))),t}function d(e,t){s[c(e)]=t}function A(e){var t=attr(e,"data-uniq-id");if(!geByClass1("svg_sticker_animation",e))return!1;var n=o[t];return n||!1}function f(e,t){var n=A(e);if(n)"function"==typeof t&&t(n);else{var i=attr(e,"data-uniq-id");if(!function(e){return!!s[c(e)]}(e)){d(e,!0);var a=attr(e,"data-animation-path"),l=attr(e,"data-sticker-id"),u=!1;if(l&&(u=r[l]?p(e):a&&p(e)),u){var f={container:e,renderer:"svg",loop:!0,autoplay:!1,name:i,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};r[l]?f.animationData=r[l]:f.path=a;var _=geByClass1("svg_sticker_animation",e);if(_&&re(_),n=bodymovin.loadAnimation(f),!r[l])return void n.addEventListener("data_ready",function(){r[l]=n.animationData,o[i]=n,"function"==typeof t&&t(n)})}"function"==typeof t&&(o[i]=n,"function"==typeof t&&t(n))}}}return{checkSettingsAndLoadInWeb:function(e){if(StickersSettings.getAutoplay()){var t=ge("fc_msg"+e),n=geByClass1("sticker_animation",t);i.loadAndPlaySticker(n)}},checkSettingsAndLoad:function(e,t,n){StickersSettings.getAutoplay()&&(n?i.loadStickerInMvkIMAndPlay(e.id,t):-1!==e.text.indexOf("sticker_animation")&&i.loadStickerInMvkIMAndPlay(e.id,t))},loadStickerInMvkIMAndPlay:function(e,t){var n="_msg"+e;t&&(n="msg_id_"+e);var r=geByClass1("sticker_animation",geByClass1(n));i.loadAndPlayStickerWithTimer(r,500)},loadAutoplayAnimationStickers:function(e){if("undefined"!=typeof bodymovin){if(e){if(n)return;n=!0}if(!t){t=!0;var r=geByClass("sticker_animation_autoplay");r&&each(r,function(e,t){f(t,function(){u(t)})}),t=!1}}else l(function(){i.loadAutoplayAnimationStickers()})},loadAndPlaySticker:function(e){if(e)return"undefined"==typeof bodymovin?(l(function(){i.loadAndPlaySticker(e)}),""):void requestAnimationFrame(function(){f(e,function(){u(e)})})},loadAndPlayStickerWithTimer:function(e,t){if(e&&!a[e]){t||(t=1e3);var n=ge(e);hasClass(n,"sticker_animation_disabled_timer")||(a[e]=setTimeout(function(){!n&&(n=ge(e),hasClass(n,"sticker_animation_disabled_timer"))||(i.loadAndPlaySticker(n),clearTimeout(a[e]),a[e]=!1)},t))}},reloadStickers:function(){o={}},touchStartSticker:function(t){t.addEventListener("contextmenu",i.preventContextMenu,!1),e=setTimeout(function(){i.loadAndPlaySticker(t)},500)},touchEndSticker:function(){e&&clearTimeout(e)},preventContextMenu:function(e){event.preventDefault(),event.stopPropagation()}};function p(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom;return t<window.innerHeight&&n>=0&&isVisible(e)}}();t.StickersAnimation=i},myok:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("TYsd")),r=o(n("BoyB"));function o(e){return e&&e.__esModule?e:{default:e}}var a={className:"Btn",setLoading:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return;var i=e.classList.contains(l.loading);if(t){if(i)return;var o=e.classList.contains(l.secondary);!n&&o&&(n="white");var a=(0,r.default)({mix:l.loader,white:"white"===n,large:!0});e.classList.add(l.loading),e.insertAdjacentHTML("afterbegin",a)}else{if(!i)return;var s=e.$(u.loader);e.classList.remove(l.loading),s.remove()}},setDisabled:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.disabled=t}},s=a;t.default=s,a._onClick=c;var l={loading:"Btn_loading",secondary:"Btn_theme_secondary",loader:"Btn__loader"},u={loader:".".concat(l.loader)};function c(e,t,n){e.preventDefault(),i.default.handle(n,{$btn:t})}},n4VL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerHTML5=void 0;var i=n("1V+M");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t||{},this._trackOptions={},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}return a(e,null,[{key:"isSupported",value:function(e){var t=document.createElement("audio");return!!t.canPlayType&&(e=e||'audio/mpeg; codecs="mp3"',!!t.canPlayType(e).replace(/no/,""))}}]),a(e,[{key:"destroy",value:function(){}},{key:"getPlayedTime",value:function(){for(var e=this._currentAudioEl.played,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return t}},{key:"_setAudioNodeUrl",value:function(e,t){window.data&&data(e,"setUrlTimesetUrlTime",t==s?0:vkNow()),e.src=t}},{key:"_createAudioNode",value:function(e){var t=new Audio,n=this;return this.opts.onBufferUpdate&&addEvent(t,"progress",function(){n._currentAudioEl==t&&n.opts.onBufferUpdate(n.getCurrentBuffered());var e=t.buffered;e.length;1==e.length&&0==e.start(0)&&e.end(0)==t.duration&&(t._fullyLoaded=!0)}),addEvent(t,"stalled",function(){n._currentAudioEl==t&&n._isInvalidDuration()&&n._currentAudioEl.currentTime>=n.duration-1&&n._currentAudioEl.dispatchEvent(new Event("ended"))}),this.opts.onProgressUpdate&&addEvent(t,"timeupdate",function(){n._currentAudioEl==t&&n.opts.onProgressUpdate(n.getCurrentProgress())}),this.opts.onEnd&&addEvent(t,"ended",function(){n._currentAudioEl==t&&n.opts.onEnd()}),this.opts.onSeeked&&addEvent(t,"seeked",function(){n._currentAudioEl==t&&n.opts.onSeeked()}),this.opts.onSeek&&addEvent(t,"seeking",function(){n._currentAudioEl==t&&n.opts.onSeek()}),addEvent(t,"error",function(){n._prefetchAudioEl==t?n._prefetchAudioEl=n._createAudioNode():n._currentAudioEl==t&&n.opts.onFail&&n.opts.onFail()}),addEvent(t,"canplay",function(){if(window.data){var e=data(t,"setUrlTime");e&&(cur.audioLoadTimings=cur.audioLoadTimings||[],cur.audioLoadTimings.push(vkNow()-e),data(t,"setUrlTime",0))}n._prefetchAudioEl,n._currentAudioEl==t&&(n.opts.onCanPlay&&n.opts.onCanPlay(),n._seekOnReady&&(n.seek(n._seekOnReady),n._seekOnReady=!1))}),e&&(this._setAudioNodeUrl(t,e),t.preload="auto",t.volume=this._volume||1,t.load()),this._audioNodes.push(t),t}},{key:"onReady",value:function(e){e(!0)}},{key:"prefetch",value:function(e){this._prefetchAudioEl&&this._setAudioNodeUrl(this._prefetchAudioEl,s),this._prefetchAudioEl=this._createAudioNode(e)}},{key:"seek",value:function(e){var t=this._currentAudioEl;this.duration?t.currentTime=this.duration*e:this._seekOnReady=e}},{key:"setVolume",value:function(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}},{key:"_isInvalidDuration",value:function(){var e=this._currentAudioEl;return isNaN(e.duration)||e.duration==1/0||0==e.duration}},{key:"getCurrentProgress",value:function(){var e=this._currentAudioEl;return this.duration?Math.max(0,Math.min(1,e.currentTime/this.duration)):0}},{key:"getCurrentBuffered",value:function(){var e=this._currentAudioEl;return e&&e.buffered.length?Math.min(1,e.buffered.end(0)/e.duration):0}},{key:"isFullyLoaded",value:function(){return this._currentAudioEl._fullyLoaded}},{key:"setUrl",value:function(t,n){var i=this._currentAudioEl;if(this._seekOnReady=!1,this._trackOptions={},n&&"object"===r(n)&&(this._trackOptions=n,n=n.callback),i.src==t)return this.opts.onCanPlay&&this.opts.onCanPlay(),n&&n(!0);if(this._prefetchAudioEl&&this._prefetchAudioEl.readyState>e.STATE_HAVE_NOTHING)if(this._prefetchAudioEl.src==t){this._currentAudioEl.pause(0),this._setAudioNodeUrl(this._currentAudioEl,s);var o=this;this._prefetchAudioEl.readyState>=e.STATE_HAVE_FUTURE_DATA&&setTimeout(function(){o.opts.onCanPlay&&o.opts.onCanPlay()}),i=this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=!1}else this._prefetchAudioEl.src&&this._setAudioNodeUrl(this._prefetchAudioEl,s);return i.src!=t&&(this._setAudioNodeUrl(i,t),i.load()),n&&n(!0)}},{key:"play",value:function(t){this._prefetchAudioEl.src==t&&this._prefetchAudioEl.readyState>e.STATE_HAVE_NOTHING&&(this._setAudioNodeUrl(this._currentAudioEl,s),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=this._createAudioNode(),this.opts.onCanPlay&&this.opts.onCanPlay());var n=this._currentAudioEl;if(n.src)try{(0,i.wrapAudioPlay)(n)}catch(e){debugLog("Audio: url set failed (html5 impl)")}}},{key:"pause",value:function(){var e=this._currentAudioEl;e.src&&e.pause()}},{key:"stop",value:function(){var e=this._currentAudioEl;this._setAudioNodeUrl(e,s)}},{key:"_setFadeVolumeInterval",value:function(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){var t=new Blob(["         var interval;         onmessage = function(e) {           clearInterval(interval);           if (e.data == 'start') {             interval = setInterval(function() { postMessage({}); }, 20);           }         }       "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(t))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}},{key:"fadeVolume",value:function(e,t){e=Math.max(0,Math.min(1,e));var n=this._currentAudioEl,i=0;if(i=e<n.volume?-.04:.001,Math.abs(e-n.volume)<=.001)return this._setFadeVolumeInterval(),t&&t();var r=n.volume;this._setFadeVolumeInterval(function(){i>0&&(i*=1.2),r+=i;if(i<0?r<=e:r>=e)return this.setVolume(e),this._setFadeVolumeInterval(),t&&t();this.setVolume(r)}.bind(this))}},{key:"type",get:function(){return"html5"}},{key:"loaded",get:function(){return!0}},{key:"duration",get:function(){var e=this._currentAudioEl,t=isNaN(e.duration)||e.duration==1/0?0:e.duration;return!t&&this._trackOptions.duration&&(t=parseInt(this._trackOptions.duration)),t}}]),e}();t.PlayerHTML5=l,l.STATE_HAVE_NOTHING=0,l.STATE_HAVE_FUTURE_DATA=3,l.HAVE_ENOUGH_DATA=4,l.AUDIO_EL_ID="ap_audio"},nXjO:function(e,t,n){"use strict";var i=window,r=i.geBySel1,o=i.geByClass1,a=i.gpeByClass,s=i.each,l=i.removeClass,u=i.addClass,c=i.hasClass,d=i.attr,A=i.addEvent,f=i.removeEvent,p=i.ajax,_=(i.replace,i.domClosestOverflowHidden),h={OPEN_CLASS:"reply_owner_show",OPEN_BOTTOM_CLASS:"reply_owner_open_bottom",NO_LIMIT_CLASS:"reply_owner_picker_nolimit",CONTAINER_CLASS:"reply_owner_picker_container",PICKER_CLASS:"reply_owner_picker",PICKER_ITEM_CLASS:"reply_owner_option",LOADING_CLASS:"reply_owner_loading",IMAGE_CLASS:"_reply_owner_image",SELECTED_IMAGE_CLASS:"_reply_owner_selected_image",SELECTED_IMAGE_CONTAINER_CLASS:"reply_owner_selected_image",OPTION_CLASS:"reply_owner_option",PICKER_MAX_HEIGHT:null,LOADING_SHOW_TIME:300,container:null,picker:null,clickEvent:"ontouchend"in document.documentElement?"touchend":"click",clickHandler:null,requestHandler:null,request:null,loading:!1,setElements:function(e){this.container=a(this.CONTAINER_CLASS,e),this.picker=o(this.PICKER_CLASS,this.container),this.clickHandler=this.clickHandler||bind(this.onDocumentClick,this),this.requestHandler=this.requestHandler||bind(this.onDocumentClickBeforeLoad,this)},unsetElements:function(){f(document.body,this.clickEvent,this.clickHandler),f(document.body,this.clickEvent,this.requestHandler),this.container=this.picker=null},show:function(e){this.setElements(e),u(this.OPEN_CLASS,this.container),this.calcPosition()},hide:function(){l(this.OPEN_CLASS,this.container),l(this.OPEN_BOTTOM_CLASS,this.container),this.unsetElements()},toggle:function(){toggleClass(this.OPEN_CLASS,this.container),this.calcPosition(),c(this.OPEN_CLASS,this.container)?(this.scrollToSelected(),A(document.body,this.clickEvent,this.clickHandler)):(this.hide(),this.unsetElements())},calcPosition:function(){var e=ge("mhead").offsetHeight,t=this.picker.getBoundingClientRect(),n=_(this.picker),i=!0;n&&n.getBoundingClientRect().bottom<this.container.getBoundingClientRect().bottom+this.PICKER_MAX_HEIGHT?i=!1:c(this.LOADING_CLASS,this.container)?i=t.top-e-this.PICKER_MAX_HEIGHT+t.height<0:c(this.OPEN_BOTTOM_CLASS,this.container)||(i=t.top-e<0),toggleClass(this.OPEN_BOTTOM_CLASS,this.container,i)},onDocumentClick:function(e){var t=e.target;t===this.container||a(this.CONTAINER_CLASS,t)||this.hide()},onDocumentClickBeforeLoad:function(e){var t=e.target;t===this.container||a(this.CONTAINER_CLASS,t)||this.cancelRequest()},cancelRequest:function(){this.request&&(this.request.abort(),this.unsetElements())},getList:function(){var e=this;if(!this.loading){this.PICKER_MAX_HEIGHT=parseInt(getStyle(this.picker,"maxHeight"),10);var t=r('input[name="from_oid"]',this.container).value,n=r('input[name="post_oid"]',this.container).value;this.loading=!0;var i=setTimeout(function(){u(e.LOADING_CLASS,e.container),e.calcPosition()},this.LOADING_SHOW_TIME);A(document.body,this.clickEvent,this.requestHandler),this.request=p.post("/wall.php",{act:"get_reply_clubs_list",oid:t,post_oid:n},{onDone:function(t){clearTimeout(i),e.picker.innerHTML=t,e.onLoadEnd(),e.toggle(e.picker)},onFail:function(){e.onLoadEnd()}})}},onLoadEnd:function(){this.loading=!1,l(this.LOADING_CLASS,this.container),f(document.body,this.clickEvent,this.requestHandler)},onChange:function(e){var t=a(this.OPTION_CLASS,e),n=o(this.IMAGE_CLASS,t).src;s(geByClass(this.SELECTED_IMAGE_CLASS),function(){this.src=n}),d(o("al"+this.SELECTED_IMAGE_CLASS),"href",d(t,"data-href")),this.hide()},onClick:function(e){this.setElements(e),geByClass(this.PICKER_ITEM_CLASS,this.picker).length?this.toggle():this.getList()},scrollToSelected:function(){var e=a(this.OPTION_CLASS,r(":checked",this.picker));this.PICKER_MAX_HEIGHT||(this.PICKER_MAX_HEIGHT=parseInt(getStyle(this.picker,"maxHeight"),10)),e&&(this.picker.scrollTop=e.offsetTop-this.PICKER_MAX_HEIGHT/2+e.offsetHeight/2)}};window.replyOwnerPicker=h},nggH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("bZ/P")),r=o(n("9y81"));function o(e){return e&&e.__esModule?e:{default:e}}function a(){var e=c(['\n    <div class="','" ',">","</div>\n  "]);return a=function(){return e},e}function s(){var e=c(['\n    <button class="','" aria-label="','" ',"></button>\n  "]);return s=function(){return e},e}function l(){var e=c(['\n    <button class="','" ',">\n      ","\n    </button>\n  "]);return l=function(){return e},e}function u(){var e=c(['\n    <div class="','">\n\n      ','\n\n      <div class="mailActs__counter"></div>\n\n      <div class="mailActs__buttons">\n        <div class="mailActs__buttonsIn">\n          ',"\n          ",'\n        </div>\n        <div class="mailActs__chevron">\n          <div class="mailActs__chevronIn">\n            ',"\n            ","\n            ","\n            ","\n            ",'\n          </div>\n          <div class="mailActs__chevronMore">\n            <div class="mailActs__chevronMoreIcon" ','></div>\n            <div class="mailActs__chevronList">\n              ',"\n              ","\n              ","\n              ","\n              ","\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  "]);return u=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=function(e){e||(e={});window.lang;var t=i.default.onClick("MailActs._onMoreClick"),n=(0,r.default)({mix:"mailActs__close",icon:"close12",attrs:i.default.onClick("MailActs._onCloseClick")}),o=A("reply"),a=A("forward"),s=f("edit",e),l=f("pin",e),c=f("important",e),d=f("remove",e),_=f("spam",e),h=p("edit",e),m=p("pin",e),v=p("important",e),g=p("remove",e),y=p("spam",e),w=i.default.class("mailActs",{canPin:e.canPin,pinned:e.isPinned,important:e.isImportant,isChannel:e.isChannel});return i.default.html(u(),w,n,o,a,s,l,c,d,_,t,h,m,v,g,y)};function A(e){var t=window.lang,n=i.default.class("mailActs__button",{type:e}),r=i.default.onClick("MailActs._onButtonClick",e),o="reply"===e?t.mobile_mail_messages_actions_reply:t.mobile_mail_messages_actions_forward;return i.default.html(l(),n,r,o)}function f(e,t){var n,r=window.lang,o=i.default.class("mailActs__icon",{type:e}),a=i.default.onClick("MailActs._onButtonClick",e),l=t.isPinned?r.mobile_mail_messages_actions_unpin:r.mobile_mail_messages_actions_pin,u=t.isImportant?r.mobile_mail_messages_actions_important_off:r.mobile_mail_messages_actions_important;switch(e){case"edit":n=r.mobile_mail_messages_actions_edit;break;case"pin":n=l;break;case"important":n=u;break;case"remove":n=r.mobile_mail_messages_actions_delete;break;case"spam":n=r.mobile_mail_messages_actions_spam}return i.default.html(s(),o,n,a)}function p(e,t){var n,r=window.lang,o=i.default.class("mailActs__chevronListItem",{type:e}),s=i.default.onClick("MailActs._onButtonClick",e),l=t.isPinned?r.mobile_mail_messages_actions_unpin:r.mobile_mail_messages_actions_pin,u=t.isImportant?r.mobile_mail_messages_actions_important_off:r.mobile_mail_messages_actions_important;switch(e){case"edit":n=r.mobile_mail_messages_actions_edit;break;case"pin":n=l;break;case"important":n=u;break;case"remove":n=r.mobile_mail_messages_actions_delete;break;case"spam":n=r.mobile_mail_messages_actions_spam}return i.default.html(a(),o,s,n)}t.default=d},nhxT:function(e,t,n){"use strict";Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,i=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)};return function(e){var n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var a,s=i(n.length),l=t(this)?Object(new this(s)):new Array(s),u=0;u<s;)a=n[u],l[u]=o?void 0===r?o(a,u):o.call(r,a,u):a,u+=1;return l.length=s,l}}())},nj7l:function(e,t,n){"use strict";onDOMReady(function(){addEvent(window,"click",function(e){if($$(".Tooltip").forEach(function(e){return re(e)}),e.target&&e.target.classList.contains("Tooltip")||e.target.closest(".Tooltip")){var t=e.target.getAttribute("tooltip-id");ajax.post("/?act=tooltip_click&id=".concat(t))}})})},nlPs:function(e,t,n){"use strict";var i=o(n("9qLg")),r=o(n("WwUR"));function o(e){return e&&e.__esModule?e:{default:e}}window.isNewLongpoll?window.im=r.default:window.im=i.default},"o+0k":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("z9sQ")),r=o(n("1IPy"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t){return{tag:"label",class:i.default.class("VotingForm__bcg",{light:"default"===t.type}),inner:[{class:"VotingForm__bcgPreview",inner:[(0,r.default)({bcg:t,photoHeight:48}),{class:i.default.class("VotingForm__bcgTextGhost",{0:!0})},{class:i.default.class("VotingForm__bcgTextGhost",{1:!0})},{class:i.default.class("VotingForm__bcgTextGhost",{2:!0})},{class:i.default.class("VotingForm__bcgTextGhost",{3:!0})},{class:i.default.class("VotingForm__bcgTextGhost",{4:!0})},{class:i.default.class("VotingForm__bcgTextGhost",{5:!0})}]},{tag:"input",class:"VotingForm__bcgRadio",type:"radio",name:e,checked:t.checked?"checked":null,value:t.id},{class:"VotingForm__bcgControl"}]}};t.default=a},o3gn:function(e,t,n){"use strict";var i=n("4SKC"),r=n("mqBN"),o=n("si31");window.Stickers=i.Stickers,window.StickersAnimation=r.StickersAnimation,window.StickersSettings=o.StickersSettings},oHC7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n("TYsd")),r=c(n("j80l")),o=c(n("+cqQ")),a=c(n("3Wjs")),s=n("jk6M"),l=n("fntf"),u=c(n("29dZ"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(t,n,i,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.state={authorIndex:i,storyIndex:r},this.date=t.date,this.preview=t.preview_url,this.type=t.type,this.photo_url=t.photo_url,this.video_url=t.video_url,this.first_frame=t.first_frame,this.videoSupport=!!window.HTMLVideoElement,this.views=t.views,this.answers=t.answers,this.link=t.link,this.unread=t.unread,this.raw_id=t.raw_id,this.is_expired=t.is_expired,this.isAds=t.isAds,this.isPromo=t.isPromo,this.promoCaption=t.promoCaption,this.track_code=t.track_code,this.can_comment=t.can_comment,this.can_share=t.can_share,this.can_remove=t.can_remove,this.can_report=!t.can_manage,this.can_ask=t.can_ask,this.can_ask_anonymous=t.can_ask_anonymous,this.isNewQuestions=t.isNewQuestions,this.name=n.name,this.firstName=n.firstName,this.avatar=n.photo,this.href=n.href,this.prometheus=n.verify.includes("page_top_author"),this.verified=n.verify.includes("page_verified"),this.authorIcon=this.prometheus||this.verified,this.content=null,this.paused=!0,this.stats=t.stats,this.narrative=t.narrative,this.isNarrativeSlide=this.narrative&&!this.narrative.is_cover,this.isNarrativeMetaStory=!!t.isNarrativeMetaStory,this.isOpenNarrativeFromFeed=!!t.isOpenNarrativeFromFeed,this.onAutoPlay=(0,o.default)(),this.onDestroy=(0,o.default)(),this.onVideoBuffering=(0,o.default)(),this.onVideoData=(0,o.default)(),this.onVideoPlayEvent=(0,o.default)(),this.onVideoPauseEvent=(0,o.default)(),this.onVideoEndedEvent=(0,o.default)(),this.reply=t.reply_to,this.reply){var s=this.reply.list;this.reply=extend(this.reply,{onclick:'Stories.openReplies("'.concat(s,'");')})}this.duration=8e3,this.views&&(this.viewsText=this.views),this.answers&&(this.answersText=this.answers.count),this.bookmark_add_hash=t.bookmark_add_hash,this.is_bookmarked=t.is_bookmarked,this.clickable_stickers=t.clickable_stickers,this.stickers=[],this.narrative&&(this.bookmark_add_hash=this.narrative.bookmark_hash,this.is_bookmarked=this.narrative.is_bookmarked),this.StoryMenu=new a.default(extend(t,{can_report:this.can_report,can_bookmark:!!this.bookmark_add_hash,is_bookmarked:this.is_bookmarked})),this.needMenu=this.StoryMenu.needMenu(),this.storyMenuHTML=this.StoryMenu.render()}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(e,[{key:"update",value:function(e){var t=Stories.getCurrentStoryIndex(),n=Stories.getCurrentAuthorIndex();this.state.authorIndex===n&&this.state.storyIndex===t?(this.loadContent(e),Stories.setHistory(this.raw_id)):(this.destroy(),val(e,""))}},{key:"getDuration",value:function(){return this.duration}},{key:"getPreview",value:function(){return this.preview}},{key:"hasLink",value:function(){return!!this.link}},{key:"getLinkUrl",value:function(){var e=this.link.url,t=Stories.getFrom(!1);return r.default.make(e,{from:t})}},{key:"loadContent",value:function(e){var t=window.lang;if(this.is_expired){Stories.hideLoading();var n={class:"Story__content_expired",inner:i.default.wrap(t.mobile_stories_error_expired)};val(e,i.default.html(n)),Stories.restoreAudio()}else if("photo"===this.type){this.isNarrativeMetaStory||Stories.showLoading(),this.img=new Image,this.onLoadImgBind=this.onLoadImg.bind(this),this.onLoadStory=this.onLoadStory.bind(this),addEvent(this.img,"load",this.onLoadImgBind),addEvent(this.img,"load",this.onLoadStory),this.img.src=this.photo_url;var r={style:"background-image: url(".concat(this.photo_url,")"),class:"Story__content_image"};this.narrative&&this.narrative.is_cover?val(e,i.default.html(this.renderNarrativeCover())):this.isNarrativeMetaStory?(val(e,""),e&&e.parentNode.insertAdjacentHTML("beforeend",i.default.html(this.renderNarrativeMetaStory())),addEvent(geByClass1("NarrativeMeta__recommendations"),"scroll wheel touchmove",this.handleRecommendationsScroll.bind(this))):val(e,i.default.html(r)),Stories.restoreAudio()}else if("video"===this.type)if(this.videoSupport&&Stories.isAutoplaySupport())Stories.showLoading(),this.video=ce("video",{src:this.video_url,className:"Story__content_video"}),attr(this.video,"autoplay","autoplay"),attr(this.video,"playsinline","playsinline"),attr(this.video,"webkit-playsinline","webkit-playsinline"),attr(this.video,"muted","muted"),this.onCanPlayBind=this.onCanPlay.bind(this),this.onVideoWaitingBind=this.onVideoBuffer.bind(this),this.onVideoLoadedDataBind=this.onVideoLoadedData.bind(this),this.onVideoPlayBind=this.onVideoPlay.bind(this),this.onVideoPauseBind=this.onVideoPause.bind(this),this.onVideoEndedBind=this.onVideoEnded.bind(this),this.onLoadStory=this.onLoadStory.bind(this),addEvent(this.video,"ended",this.onVideoEndedBind),addEvent(this.video,"play",this.onVideoPlayBind),addEvent(this.video,"pause",this.onVideoPauseBind),addEvent(this.video,"canplaythrough",this.onCanPlayBind),addEvent(this.video,"waiting",this.onVideoWaitingBind),addEvent(this.video,"loadedmetadata",this.onVideoLoadedDataBind),addEvent(this.video,"canplaythrough",this.onLoadStory),append(this.video,e),Stories.pauseAudio();else{var o=Stories.getAuthorElems()[this.state.authorIndex];this.renderError(o,e,t.mobile_stories_inline_video_error)}this.markSeen()}},{key:"onLoadStory",value:function(){if(this.clickable_stickers){var e=geByClass1("Story",this.authorElem);e&&this.renderStickersLayer.call(this,e)}this._loadingStartTime&&(this.loadingTime=Date.now()-this._loadingStartTime,Stories._sendViewerStartTime(this.raw_id,this.loadingTime),this._loadingStartTime=0,Stories.sendAnalyticsEvent("view_story",{preloading_duration:this.loadingTime}))}},{key:"markSeen",value:function(){var e=this.raw_id;this.track_code&&(e+="_"+this.track_code),this.store.readedStories[e]=!0,this.store.authors[this.state.authorIndex].items[this.state.storyIndex].unread=!1}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.video&&this.video.pause())}},{key:"play",value:function(){this.paused&&(this.paused=!1,this.video&&this.video.play())}},{key:"onVideoEnded",value:function(){this.onVideoEndedEvent()}},{key:"onVideoPlay",value:function(){this.onVideoPlayEvent()}},{key:"onVideoPause",value:function(){this.onVideoPauseEvent()}},{key:"onLoadImg",value:function(){Stories.hideLoading(),this.onVideoData({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex})}},{key:"onVideoBuffer",value:function(){this.onVideoBuffering()}},{key:"onVideoLoadedData",value:function(){if(0===this.video.duration){this.duration=16e3}else this.duration=1e3*this.video.duration+100;this.onVideoData({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex})}},{key:"onCanPlay",value:function(){Stories.hideLoading(),this.onAutoPlay({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex}),this.store.isStopped&&this.video.pause()}},{key:"getType",value:function(){return this.type}},{key:"getVideoState",value:function(){return this.video?this.video.readyState:0}},{key:"getVideo",value:function(){if(this.video)return this.video}},{key:"renderError",value:function(e,t,n){var r=this,o={class:"Story__content_expired",inner:i.default.wrap(n)};val(t,i.default.html(o)),Stories.hideLoading(),this.type="broken",addClass(e,l.ERROR_CLASS),requestAnimationFrame(function(){r.onVideoData({paused:r.paused,authorIndex:r.state.authorIndex,storyIndex:r.state.storyIndex})})}},{key:"render",value:function(){var e,t,n=window,r=n.lang,o=n.winToUtf;addEvent(window,"resize",this._onResizeHandle.bind(this));var a=s.isTouch?"ontouchstart":"onmousedown",l=s.isTouch?"ontouchend":"onmouseup";return this._onLoadingStart(),i.default.html({class:"Story",inner:[{class:"Story__header",inner:[this.reply?{class:"Story__reply",inner:this.reply.is_deleted||this.reply.is_private||this.reply.is_expired?{class:"Story__replyDeleted",inner:{class:"Story__replyDeletedContainer",inner:[{class:Bem.class("Story__icon",{deleted:this.reply.is_deleted,private:this.reply.is_private||this.reply.is_expired})},{class:"Story__replyDeletedTitle",inner:this.reply.is_deleted?r.mobile_stories_reply_deleted_title:this.reply.is_expired?r.mobile_stories_reply_expired_title:r.mobile_stories_reply_private_title}]}}:{class:"Story__replyPreview",onclick:this.reply.onclick,style:"background-image: url(".concat(this.reply.photo_url,")"),inner:{class:"Story__replyTitle",inner:o(this.reply.name)}}}:null,{class:"Story__table",inner:[{class:"Story__cell Story__cell_header",inner:{class:"Story__table Story__link al_empty",href:this.href,onclick:"return Stories.clickAuthor();","data-skiponclick":1,inner:[this.isNarrativeSlide?null:{class:"Story__cell Story__cell_avatar",inner:{class:"Story__avatar",src:this.avatar,tag:"img"}},{class:"Story__cell Story__cell_title",inner:[{class:"Story__title",inner:[{class:"Story__name",inner:this.isNarrativeSlide?o(this.narrative.title):o(this.name)},this.authorIcon?{class:"Story__verified",inner:{class:Bem.class("Story__icon",{verified:this.verified,prometheus:this.prometheus})}}:null]},this.isNarrativeSlide?{class:"Story__date",inner:"".concat(this.name," · ").concat(r.global_type_narrative)}:{class:"Story__date",inner:this.isPromo?this.promoCaption:this.isAds?r.mobile_stories_is_promo_title:this.date}]}]}},{class:"Story__cell Story__cell_close",onclick:"return Stories.clickClose();",inner:{class:"Story__close",inner:{class:"Story__icon Story__icon_close"}}}]}]},{class:"Story__footer",inner:this.isNarrativeMetaStory||this.is_expired?null:{class:"Story__table",inner:[this.isNarrativeSlide?null:{class:Bem.class("Story__cell",{empty:!!this.link&&!this.answers&&!this.views,hidden:!this.answers&&!this.views&&!this.link,stats:!0}),inner:this.answers||this.views?{class:Bem.class("Story__stats",{new_questions:this.isNewQuestions}),inner:[this.answers?{class:"Story__replies Story__cell",onclick:'Stories.showViews("'.concat(this.raw_id,'")'),inner:[{class:"Story__cell",inner:{class:"Story__icon Story__icon_replies Story__repliesIcon"}},{class:"Story__cell Story__repliesText",inner:this.link?this.answers.count:this.answersText}]}:null,this.views?{class:"Story__views Story__cell",onclick:'Stories.showViews("'.concat(this.raw_id,'")'),inner:[{class:"Story__cell",inner:{class:"Story__icon Story__icon_views Story__viewsIcon"}},{class:"Story__cell Story__viewsText",inner:this.link?this.views:this.viewsText}]}:null]}:null},this.link&&this.link.text?{class:"Story__cell Story__cell_moreLink",inner:{class:"Story__moreLink",inner:[{class:"Story__moreLinkText",inner:o(this.link.text)},{class:"Story__icon Story__icon_topArrow"}],href:this.getLinkUrl(),onclick:"Stories.openCustomButton(event, this); return;","data-skiponclick":1}}:this.can_comment?{class:"Story__cell Story__cell_comment",inner:{class:"Story__commentButton",inner:{class:"Story__commentButtonText",inner:r.mobile_stories_comment_placeholder},onclick:"Stories.showComment();"}}:null,this.can_share?{class:"Story__cell Story__cell_share",inner:{class:"Story__share",onclick:'Stories.share("'.concat(this.narrative?this.narrative.raw_id:this.raw_id,'", ').concat(!!this.narrative,");"),inner:{class:"Story__icon Story__icon_share","data-skiponclick":1}}}:null,this.needMenu?{class:"Story__cell Story__cell_menu",inner:i.default.wrap(this.storyMenuHTML)}:null]}},this.can_comment?{class:"Story__form Story__form_comment",inner:[(e={class:"Story__formOverlay"},A(e,a,"cancelEvent(event);"),A(e,l,"cancelEvent(event);"),A(e,"ontouchmove","cancelEvent(event);"),e),{class:"Story__formPopout",ontouchmove:"cancelEvent(event);",onmousedown:"event.stopPropagation();",ontouchend:"event.stopPropagation();",inner:[{class:"Story__formHeader",inner:this.isNarrativeSlide?r.mobile_stories_comment_narrative_title:r.mobile_stories_comment_title},{class:"Story__formBody",inner:{class:"Story__formTextarea Story__commentTextarea",tag:"textarea",placeholder:r.mobile_stories_comment_textarea,oninput:"Stories.onInputComment(this);"}},{class:"Story__formFooter",inner:[{class:"Story__formSend Story__commentSend",onclick:"Stories.sendComment();",inner:r.mobile_stories_comment_ok},{class:"Story__formCancel",inner:r.mobile_stories_comment_cancel,onclick:"Stories.hideComment();"}]}]}]}:null,this.can_ask?this.renderAskForm():null,(t={class:"Story__overlay"},A(t,a,"cancelEvent(event);"),A(t,l,"cancelEvent(event); Stories.hideMenu();"),A(t,"ontouchmove","cancelEvent(event);"),t),this.clickable_stickers?{class:"Story__stickers"}:null,{class:"Story__body",style:"background-image: url(".concat(this.preview,")")}]})}},{key:"renderAskForm",value:function(){var e,t=window.lang,n=s.isTouch?"ontouchstart":"onmousedown",i=s.isTouch?"ontouchend":"onmouseup",r=(t.mobile_stories_ask_question_anonymous_info||"").replace("{name}",this.firstName);return{class:"Story__form Story__form_question",onClick:"Stories.toggleQuestionTooltip(event, true);",inner:[(e={class:"Story__formOverlay"},A(e,n,"cancelEvent(event);"),A(e,i,"Stories.toggleQuestionTooltip(event, true);"),A(e,"ontouchmove","cancelEvent(event);"),e),{class:"Story__formPopout",ontouchmove:"cancelEvent(event);",onmousedown:"event.stopPropagation();",ontouchend:"event.stopPropagation();",inner:[{class:"Story__formHeader",inner:[this.can_ask_anonymous?{class:"Story__formHeaderInner",inner:[{tag:"button",class:"Btn Btn_theme_none Story__formHeaderBtn",inner:t.mobile_stories_ask_question_own_name,onclick:"Stories.changeAskAnonymous(event);","data-anonymous":0},{class:"QuestionSupport Icon Icon_menu_support",onclick:"Stories.toggleQuestionTooltip(event);",inner:{class:"QuestionSupport__tooltip",inner:r}}]}:{inner:t.mobile_stories_ask_question_own_name}]},{class:"Story__formBody",inner:{class:"Story__formTextarea Story__questionTextarea",tag:"textarea",placeholder:t.mobile_stories_ask_question_placeholder,oninput:"Stories.onInputQuestion(this);",maxlength:80}},{class:"Story__formFooter",inner:[(0,u.default)({class:"Story__questionSend",theme:"regular",inner:t.mobile_stories_ask_question_ok,on_click:["Stories.sendQuestion"],disabled:!0}),(0,u.default)({class:"Story__questionSend",theme:"link",inner:t.mobile_stories_ask_question_cancel,on_click:["Stories.hideAskQuestion"]})]}]}]}}},{key:"_getStickerStyle",value:function(e,t){var n=this.clickable_stickers,i=n.original_width,r=n.original_height,o=e.top,a=e.left,s=e.width,l=e.height,u=e.rotate,c=d(getSize(t),2),A=c[0],f=c[1],p=A,_=f;return f/A>1.77?p=i*f/r:_=r*A/i,"\n      top: ".concat(o*_-(_-f)/2,"px;\n      left: ").concat(a*p-(p-A)/2,"px;\n      width: ").concat(s*p,"px;\n      height: ").concat(l*_,"px;\n      transform: rotate(").concat(u,"deg);\n    ")}},{key:"renderStickersLayer",value:function(e){var t=this,n=geByClass1("Story__stickers",e),r=(isObject(this.clickable_stickers)?this.clickable_stickers:{}).stickers;n&&(n.innerHTML=""),r.forEach(function(r){var o,a=r.type,u=r.style,c=void 0===u?"":u;if([l.StickerTypes.hashtag,l.StickerTypes.mention,l.StickerTypes.question,l.StickerTypes.place,l.StickerTypes.music].includes(a)){var d=s.isTouch?"ontouchstart":"onmousedown",f=s.isTouch?"ontouchend":"onmouseup",p=i.default.elem((A(o={class:"Story__sticker"},d,"Stories.onTouchStart(event);"),A(o,f,"Stories.onTouchEnd(event);"),A(o,"ontouchcancel","Stories.onTouchEnd(event);"),A(o,"style","".concat(t._getStickerStyle(r,e))),o));switch(domData(p,"type",a),domData(p,"style",c),a){case l.StickerTypes.hashtag:domData(p,"hashtag",r.hashtag);break;case l.StickerTypes.mention:domData(p,"mention",r.mention);break;case l.StickerTypes.question:domData(p,"question",r.question);break;case l.StickerTypes.place:if(t.store.list==="place"+r.placeId)return;domData(p,"place_id",r.placeId);break;case l.StickerTypes.music:var _=Stories.getCurrentStory(),h=r.audioId,m=r.audioData,v=r.audioRestriction;if(v){var g=t.getVideo();if(g&&_.needMute){var y=Stories.getAuthorElems()[t.state.authorIndex];removeClass(y,l.VIDEO_MUTED_CLASS),g.muted=!0}n.appendChild(i.default.elem({class:"StoryRestriction",inner:{class:"StoryRestriction__inner",inner:[{class:"StoryRestriction__title",inner:v.title},v.buttonUrl?{class:"StoryRestriction__link",href:v.buttonUrl,inner:v.buttonText}:null]}})),domData(p,"disabled",1)}addClass(p,"audio_item"),domData(p,"id",h),domData(p,"audio",m);try{domData(p,"track-code",JSON.parse(m).track_code)}catch(e){}p.setAttribute("id","audio".concat(h))}n.appendChild(p),t.stickers.push(p)}})}},{key:"_onResizeHandle",value:function(){var e=this,t=geByClass1("Story",this.authorElem),n=(isObject(this.clickable_stickers)?this.clickable_stickers:{}).stickers;isArray(n)&&n.forEach(function(n,i){e.stickers[i]&&setStyle(e.stickers[i],e._getStickerStyle(n,t))})}},{key:"_createStickerLink",value:function(e){var t=intval(domData(e,"type")),n=intval(domData(e,"disabled"));if(t&&!n){var i,r,o,a="a",s=!0,u=function(){},c={type:t,style:domData(e,"style")};switch(t){case l.StickerTypes.hashtag:var d=domData(e,"hashtag")||"",A=d.replace("#","%23");i="/feed?section=search&q=".concat(A),r=lang.mobile_stories_show_hashtag_link,o="search",c.text=d;break;case l.StickerTypes.mention:var f=(domData(e,"mention")||"").slice(1,-1).split("|");i="/".concat(f[0]),r=f[0].startsWith("id")?lang.mobile_stories_go_to_profile:lang.mobile_stories_go_to_group,o="profile";break;case l.StickerTypes.place:var p=domData(e,"place_id"),_=Stories.getFrom();i="/place"+p,r=lang.mobile_stories_go_to_place,this.store.list.includes("place")?s=!0:(i+="?from="+_,u=function(){a="div",s=!1,Stories._hideTooltip(!0),Stories.showLoading(),nav.go(i)}),o="place";break;case l.StickerTypes.music:a="div",r=lang.mobile_stories_music_more,u=function(){var t=domData(e,"id"),n=domData(e,"audio");Stories.openMusicStickerActions(t,n)}}return Stories._requestStickerStat("click",c),Stories.sendAnalyticsEvent("click_on_clickable_sticker"),ce(a,{href:"a"===a?i:null,target:s?"_blank":null,innerHTML:r,className:"Stories__tooltip-link",onclick:function(){u&&u(),Stories._requestStickerStat(o,c)}})}}},{key:"_onLoadingStart",value:function(){this._loadingStartTime=new Date}},{key:"renderNarrativeCover",value:function(){var e=this.photo_url||this.first_frame,t=this.narrative.views?" · ".concat(this.narrative.views):"";return{class:"NarrativeCover",inner:[{style:"background-image: url(".concat(e,")"),class:"NarrativeCover__image",onclick:"Stories._showTooltip(event, Stories._createNarrativeTooltipLink());"},{class:"NarrativeCover__views",inner:[{tag:"span",class:"NarrativeCover__label",inner:"".concat(lang.global_type_narrative)},{tag:"span",inner:"".concat(t)}]},{class:"NarrativeCover__title",innerHTML:"".concat(this.narrative.title)},{class:"NarrativeCover__author",inner:"".concat(this.narrative.owner_name)}]}}},{key:"renderNarrativeMetaStory",value:function(){var e=this.store.list+"_recommendations",t=window.store.stories[e]&&window.store.stories[e].authors,n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=[];return this.store.list.match(/narrative-?\d+_\d+$/)&&t&&(this.coverItems=t.map(function(e){return e.narrative_cover}),this.coverCount=this.coverItems?this.coverItems.length:0,this.coverRowsCount=Math.ceil(this.coverCount/3),this.elemOffset=0,1===this.coverRowsCount?this.elemOffset=26.4:this.coverRowsCount>1&&(this.elemOffset=26.4*1.5),this.scrollOffset=n/100*this.elemOffset+53,this.coverItems.forEach(function(n){var r={tag:"span",class:"NarrativePreview",style:"background-image: url(".concat(n.preview_url,")"),onclick:'Stories.openNarrative("'.concat(n.raw_id,"/").concat(e,'", { narrativeId: ').concat(n.narrative.id,", source: 'narrative_recommendations' })"),inner:[{class:"NarrativePreview__inner",style:"background-image: url(".concat(n.photo_url,")"),inner:[{tag:"a",href:t[0].author.href,class:"NarrativePreview__author",style:"background-image: url(".concat(t[0].author.photo,")")},{tag:"span",class:"NarrativePreview__title",innerHTML:n.narrative.title}]}]};i.push(r)})),{class:"NarrativeMeta",inner:[{class:"NarrativeMeta__buttons",style:"padding-bottom: ".concat(this.elemOffset,"vh"),inner:[{class:"NarrativeMeta__button",onclick:"Stories.narrativeReply();",inner:[{class:"NarrativeMeta__circle NarrativeMeta__circle_replay"},{class:"NarrativeMeta__text",inner:lang.mobile_narratives_repeat_bottom}]},this.isOpenNarrativeFromFeed?{class:"NarrativeMeta__button",onclick:"Stories.narrativeGoToStories();",inner:[{class:"NarrativeMeta__circle NarrativeMeta__circle_back"},{class:"NarrativeMeta__text",inner:lang.mobile_narratives_back_bottom}]}:null]},i.length?{class:"NarrativeMeta__recommendations",inner:[{class:"NarrativeMeta__recommendations-inner",inner:[{class:"NarrativeMeta__recommendations-title",inner:lang.mobile_narratives_more_bottom,style:"margin-top: calc(100vh - ".concat(this.elemOffset,"vh - 70px - 53px)")},{class:"NarrativeMeta__recommendations-items",inner:i}]}]}:null]}}},{key:"handleRecommendationsScroll",value:function(){event.stopPropagation&&event.stopPropagation(),event.stopImmediatePropagation&&event.stopImmediatePropagation();var e=geByClass1("NarrativeMeta__recommendations"),t=geByClass1("NarrativeMeta__recommendations-inner"),n=Math.min(t.scrollTop/(this.scrollOffset/100),70)/100;setStyle(e,{backgroundColor:"rgba(0, 0, 0, ".concat(n,")")}),t.scrollTop?(addClass(e,"scroll"),Stories.pauseStory()):(Stories.playStory(),removeClass(e,"scroll"))}},{key:"pauseAudio",value:function(){window.Stories.pauseAudio()}},{key:"destroy",value:function(){this.img&&removeEvent(this.video,"load",this.onLoadImgBind),this.video&&(removeEvent(this.video,"ended",this.onVideoEndedBind),removeEvent(this.video,"play",this.onVideoPlayBind),removeEvent(this.video,"pause",this.onVideoPauseBind),removeEvent(this.video,"canplaythrough",this.onCanPlayBind),removeEvent(this.video,"waiting",this.onVideoWaitingBind),removeEvent(this.video,"loadedmetadata",this.onVideoLoadedDataBind),this.video.src="",this.video.load()),this.onDestroy(),this.onAutoPlay.off(),this.onDestroy.off(),this.onVideoBuffering.off(),this.onVideoData.off(),this.onVideoPlayEvent.off(),this.onVideoPauseEvent.off(),this.onVideoEndedEvent.off(),Stories._hideTooltip()}}]),e}();t.default=p},ohv3:function(e,t,n){"use strict";var i=n("W9Tc"),r=window,o=r.parseRusKeys,a=r.parseLatKeys,s=r.parseLat,l=r.parseCyr,u=r.escapeRE,c=r.val,d=r.onBodyScrollForce,A=r.extend,f=r.len,p=r.removeClass,_=r.geByClass1,h=r.addClass,m=r.show,v=r.hide,g=r.alLoadingFix,y=r.cancelEvent,w=r.elfocus,b=r.elblur,E=r.ge,k=r.addEvent,C=r.attr,D=r.initAutoScroll,S=window.ajax,T={};function M(e){var t,n,r,I,x,O,L;M.getQueryREs=_e;var B,N,R,F,j,H,U=[],V={},z={},$={},q={},W=!1,Y=null,G=null,Q=null,X=0,K=[],J=null,Z=null,ee=null,te=!1,ne=!1,ie=10,re=30,oe=[],ae=!0,se=!1,le=!1,ue=!1,ce=0,de=0,Ae=!1,fe={},pe=e&&"au_search_field"===e.field&&C(E(e.field),"data-newsearch");function _e(e){e=e.replace(/https?:\/\/(m\.)?vk\.com\/([^#]+#\/)?/,"");for(var t,n,i,r=ne,c=[e,n=o(e,r)||e,i=a(e,r)||e,s(n),l(i)],d={},A=[],f=0,p=c.length;f<p;f++)c[f]&&!d[c[f]]&&(d[c[f]]=!0,t=(t=u(c[f])).replace(/[её]/gi,"[её]").replace(/(e|yo)/gi,"(?:e|yo)"),A.push(new RegExp("(^|\\s|\\(|>)("+t+")","gi")));return A}function he(e,n,i,r){if(clearTimeout(G),!i)return G=setTimeout(function(){he(e,n,!0)},10),!1;var o=c(e)||"";if(Y===o&&!r)return!1;var a,s="_"+o,l=z[s],u=_e(o);if(!pe&&!l&&o.length>2&&z["_"+o.slice(0,-2)]){var m="_"+o.slice(0,-2);z[m]&&q[m]&&!z[m].length&&(!ue||ue&&!$[m])&&(q[s]=!0,l=z[s]=[],ue&&($[s]=""))}r&&(delete q[s],delete z[s],delete $[s]);var v=0;if(!l){l=[];if(P.isCachedPage)v=(_("_si_container",I)||I).childNodes.length;if(!o&&U.length)for(var g=X,y=X+Math.min(Math.max(ie,v),U.length);g<y;g++)l.push([U[g]]),0;else{var w={},b=0;for(g=0,y=U.length;g<y;g++){var E=U[g];if(V[E]){if(w[E]=!0,(a=me(u,V[E][0]))&&(l.push([E,a]),++b>=re))break;0}}if(b<re)for(var E in V)if(!w[E]&&(a=me(u,V[E][0]))){if(l.push([E,a]),++b>=re)break;0}}q[s]=q[s]||!o&&U.length||l.length>2*ie,q[s]=q[s]||ue&&l.length>ie}return(q[s]||!ae&&!ue)&&!r||N||function e(n,i,r){var o=pe?800:200;clearTimeout(Q);if(!r)return Q=setTimeout(function(){e(n,i,!0)},o),!1;S.post(t,{_ajax:1,q:i},{onDone:function(e,t,r){R&&R.apply(null,arguments);for(var o,a="_"+i,s=z[a]||[],l={},u=_e(i),c=0,_=s.length;c<_;c++)l[s[c][0]]=!0;for(var c=0,_=t.length;c<_;c++){var h=t[c];l[h]||((o=me(u,e[h][0]))||te||!i)&&s.push([h,o])}q[a]=!0,z[a]=s,ue&&($[a]=r||""),V=A(e,V),fe._cache=V,ae=!se||f(V)<se,Y==i?(ve(s,$[a]),d()):delete z[a],ae||p("input_loading",n),B&&(ae=!1,se=Object.keys(V).length)},onFail:function(){delete z["_"+i],p("input_loading",n)}});_("al_loading",I)||h("input_loading",n)}(e,o),z[s]=l,Y=o,ve(l,$[s]),F&&F(o),le&&!Y&&(ce=Math.max(ie,v)),d(),!1}function me(e,t){if(!t)return!1;"string"!=typeof t&&(t=t.toString());var n=[t],i=/([№])/gi;-1!==t.search(i)&&n.push(t.replace(i,""));for(var r=0;r<n.length;r++)for(var o=0,a=e.length;o<a;o++)if(-1!==n[r].search(e[o]))return e[o];return!1}function ve(e,t){var n="";if(Z&&I){var i=Object.keys(oe).filter(function(e){return!!oe[e]}).map(function(e){return e+""});i.length&&""===Y&&(e=e.filter(function(e){return!i.includes(String(e[0]))}),i.forEach(function(t){e.unshift([t,!1])}));for(var r=0,o=e.length;r<o;r++){var a=e[r][0],s=e[r][1];if(V[a]){var l=V[a].slice(1);if(s)for(var u in K){var d=K[u];l[d]&&(l[d]=l[d].replace(s,'$1<em class="found">$2</em>'))}n+=Z.apply({id:a,q:Y,highlight:function(e){return(""+e).replace(s,'$1<em class="found">$2</em>')},template:function(e,t){return(""+e).replace(/%(\d+)%|#(\d+)#/g,function(e,n,i){return+i?(""+t[i-1]).replace(s,'$1<em class="found">$2</em>'):+n&&t[n-1]||""})}},l)}}n||q["_"+Y]||!ae&&!ue||N||(p("input_loading",x),p("_si_container_loading",I),n=Y?'<div class="al_loading qs_loading">&nbsp;</div>':'<div id="al_loading"></div>'),!n&&ee&&(n=ee(Y)),c(I,J?J(n,Y,le,t):n+(t||"")),L&&(Y?m(L):v(L)),!Y&&g(),j&&j(Y)}}A(this,{go:function(e){return!x||(he(x,e,!0,!0),x.blur(),y(e),!1)},redraw:function(){var e="_"+Y;ve(z[e],$[e]),d()},clear:function(e,t){return c(x,""),t?w(x):b(x),he(x,e,!0),y(e),!1},blur:function(){b(x)},toggleAttach:function(e,t){oe[e]=t},init:function(e){if(I=E((e=e||{}).container)||null,x=E(e.field)||null,O=E(e.btn)||null,L=E(e.clear_btn)||null,Y=null,!W||t!=e.action||!e.init_once){z={},$={},q={},t=e.action||"",r=e.next_from||null,n=e.al_action||t,U=e.top_items||[],V=e._cache||{},K=e.hl_fields||[],J=e.tpl||null,Z=e.item_tpl||null,ee=e.null_tpl||null,te=e.soft_filter||!1,ne=e.need_invalid_keys||!1,ie=e.top_len||10,se=e.load_limit||!1,R=e.onLoaded||!1,F=e.onFiltered||!1,j=e.onRendered||!1,H=e.onFocusChanged||!1,le=e.al_need||!1,X=!le&&e.init_offset||0,ue=e.global_search||!1,N=e.no_search_query||!1,B=e.load_once||!1;var o=e.action+e.container;T[o]?fe=T[o]:(fe._cache=V,fe.top_items=U,T[o]=fe),P.isCachedPage&&(U=fe.top_items,V=fe._cache)}var a=null;t&&I&&x&&Z&&(ae=!0!==t&&(!se||f(V)<se),k(x,"focus",function(e){e&&e.preventDefault();clearTimeout(a),H&&H.call({q:Y},!0),function t(n){!n&&he(x,e,!0),a=setTimeout(t,100)}(!0)}),k(x,"keydown keypress change blur",function(e){"blur"==e.type&&(clearTimeout(a),H&&H.call({q:Y},!1)),he(x,e,"keydown"!=e.type&&"keypress"!=e.type)}),e._new||O&&!C(O,"onclick")&&C(O,"onclick","return qsearch.go(event);"),!le||W&&e.init_once||(ce=ie,de=f(V),D(function(){var e=(_("_si_container",I)||I).childNodes;return e[ce]||e[e.length-1]},function(){var e=_("_si_container",I)||I;if(!Ae&&!Y){if((0,i.partConfigEnabled)("audio_recommendations_new_catalog")?!!r:ce+ie>de&&ae)Ae=!0,h(e,"_si_container_loading"),S.post(n,{_ajax:1,offset:de,next_from:r},{onDone:function(n,i,o){r=o,R&&R.apply(null,arguments);var a=f(n);if(Ae=!1,p(e,"_si_container_loading"),se||(U=U.slice(0,de).concat(i),fe.top_items=U),de+=a,V=A(n,V),fe._cache=V,ae=!0!==t&&(!se&&a||f(V)<se),!Y){ce+=ie;for(var s=[],l=0,u=Math.min(ce,U.length);l<u;l++)s.push([U[l]]);ve(s,$._),d()}},onFail:function(){Ae=!1,p(e,"_si_container_loading")}});else if(ce<U.length){ce+=ie;for(var o=[],a=0,s=Math.min(ce,U.length);a<s;a++)o.push([U[a]]);ve(o,$._),d()}}})),!e.skip_init_filter&&he(x,null,!0),W=!0)}}),e&&this.init(e)}var P=new M;window.QuickSearch=M,window.QuickSearchCache=T,window.qsearch=P},ok75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(){i||((i=new o.default({id:"mail_user",element:document,focusElement:window,triggerEvents:"mouseover mousedown keypress touchstart",idleTimeout:15e3})).on("unidle",l),i.on("unidle",s));r={},i.start()},t.stop=function(){r=null,i&&i.stop()},t.addAction=function(e,t){if(!i)return;if(!i.is_idle)return void setTimeout(t,0);r[e]=t},t.flushActions=l,t.onUnidle=void 0;var i,r,o=a(n("gF8j"));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,a(n("+cqQ")).default)();function l(){var e=r;r={},Object.keys(e).forEach(function(t){(0,e[t])()})}t.onUnidle=s},omrv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("9y81"));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?e.mix:"";return(0,i.default)({mix:"".concat(t," Spinner"),icon:"spinner"})};t.default=r},onYX:function(e,t,n){"use strict";!function(e){e&&e.__esModule}(n("+cqQ"));var i="tabs_block",r="mhb_back",o="TopMenu_open",a="TopMenu__switcher_on",s=function(){return geByClass1(i)},l=function(){return geByClass1(r)},u=function(){return geByClass1("TopMenu__switcher")},c=function(){return geByClass1("tab_item_top")},d=!0,A=0;function f(e){stopEvent(e),preventEvent(e),A=300,d&&(toggleClass(a,u()),"touchstart"===e.type&&setTimeout(function(){nav.go(c(),null)},130))}function p(e){gpeByClass(i,e.target)||gpeByClass(r,e.target)||(stopEvent(e),preventEvent(e),removeClass(o,s()),_())}function _(){removeEvent(window,"touchstart mousedown",p)}window.TopMenu={onHeaderClick:function(e){if(!d)return;var t=s();if(stopEvent(e),preventEvent(e),hasClass(o,t))removeClass(o,t);else{var n=l(),i=c();addClass(o,t),geByClass1("_hfixed")&&setStyle(t,"max-height",window.innerHeight-70),append(t,n),addEvent(window,"touchstart mousedown",p),addEvent(i,"touchstart mousedown",f),addEvent(i,"click",function(e){stopEvent(e),preventEvent(e)}),cur.destroy.push(_),cur.destroy.push(function(){return removeEvent(i,"touchstart mousedown",f)})}}},nav.onBeforeGo(function(){d=!1,setTimeout(function(){removeClass(o,s()),A=0,d=!0},A)})},"p/K1":function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("wRgB"));window.landingsSlider=i.default},p5n7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("sXaZ"));n("ll1Q");var r=i.default;t.default=r,window.TextInput=i.default},pBF5:function(e,t,n){"use strict";var i=n("UxAg"),r=d(n("TYsd")),o=d(n("z9sQ")),a=n("OcsD"),s=d(n("+cqQ")),l=n("jk6M"),u=n("6ng+"),c=n("1dTo");function d(e){return e&&e.__esModule?e:{default:e}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=window,p=f.lsGet,_=f.ge,h=f.addClass,m=f.removeClass,v=f.each,g=f.geByClass,y=f.hide,w=f.show,b=f.val,E=f.geByClass1,k=f.gpeByClass,C=f.attr,D=f.addEvent,S=f.cancelEvent,T=f.hasClass,M=f.getX,P=f.geByTag1,I=f.htsc,x=f.stripTags,O=f.toggleClass,L=f.lsSet,B=f.geBySel,N=f.HTMLAudioElement,R=window.ajax,F=window.nav,j=window.audio,H=1e4,U="ad_placeholder",V="ad_mode",z=function(){if(!N)return{init:function(){},initAudio:function(){}};var e="1"==p("audio_time_left"),t="",n="",d="",f=null,$={},q=!1,W=!1,Y=!1,G=[],Q=null,X=null,K=!1;function J(e){if(e&&isString(e)){var t=A(e.split("_"),4);return t[2]+"_"+t[3]}}function Z(e){if(e){$$("#lm_player").forEach(function(e){w(e)}),$$("#lm_audio").forEach(function(t){t&&(b(E("ai_artist",t),e.artist),b(E("ai_title",t),e.title),C(E("ai_play",t),"style",e.cover_style)),j.isAdsPlaying()&&ke(e,!0)});var t=B('.audio_item[data-id="'+e.id+'"]');t&&v(t,function(t,n){de(n,0),Ae(n,0),ce(n,he(0,j.duration())),fe(n,j.volume()),h("ai_current",n),j.isAdsPlaying()&&Ee(e,!0)})}else $$("#lm_player").forEach(function(e){y(e)})}function ee(e){var t=e.id,n=e.dur;$$("#lm_audio").forEach(function(e){m("ai_playing",e)});var i=B('.audio_item[data-id="'+t+'"]');i&&(v(i,function(e,t){ce(t,_e(n)),m("ai_playing",t),m("ai_current",t)}),$[t]&&delete $[t],j.isAdsPlaying()&&Ee(e,!1))}function te(e,t,n){var i=B('.audio_item[data-id="'+e+'"]');if(i){var r=t/n;t<=.01&&n<=1&&(r=0),v(i,function(e,i){re||Ae(i,r),ce(i,z.getFormatedTime(t,n))}),t>1&&($[e]=1),ne(e,j.played())}}function ne(e,t){(t=Math.round(t)||0)&&!K&&(X={id:e,listenedTime:t},clearTimeout(f),f=setTimeout(function(){return z.playback(e)},H))}function ie(e){var t=k("audios_list","audio"+e)||k("AudioBlock","audio"+e),n=g("audio_item",t),i=[],r=!1;v(n,function(t,n){var o=JSON.parse(domData(n,"audio"));if(!o&&!(o=pe(n)))return!0;i.push(o),o.id==e&&(r=!0)}),j.playlist(i,{q:C(t,"data-query")}),r&&j.play(e)}j.onPlay(function(e){Q&&Q!==e&&z.playback(Q);Q=e,$$("#lm_audio").forEach(function(e){h("ai_playing",e)});var t=B('.audio_item[data-id="'+e+'"]');if(!t)return;v(t,function(e,t){h("ai_playing",t),h("ai_current",t)}),ne(e,0);var n=G[G.length-1];n!==e&&(J(n)!==J(e)&&z.onPlaylistChanged(),G.push(e));Y?Y=!1:(W=q,q=!1,z.onPlay(e))}),j.onPause(function(e){$$("#lm_audio").forEach(function(e){m("ai_playing",e)});var t=B('.audio_item[data-id="'+e+'"]');if(!t)return;v(t,function(e,t){m("ai_playing",t),h("ai_current",t)}),ne(e,j.played()),Y||z.onPause(e)}),j.onSelect(Z),j.onDeselect(ee),j.onProgress(function(e,t,n){var i=B('.audio_item[data-id="'+e+'"]');j.playing()?(v(i,function(e,t){h("ai_playing",t)}),$$("#lm_audio").forEach(function(e){h("ai_playing",e)})):(v(i,function(e,t){m("ai_playing",t)}),$$("#lm_audio").forEach(function(e){m("ai_playing",e)})),i&&v(i,function(e,i){de(i,t/n),h("ai_current",i)})}),j.onPositionChanged(te),j.onTimeUpdate(function(e){z.onProgress(e)}),j.onVolumeChanged(function(e,t){var n=B('.audio_item[data-id="'+e+'"]');n&&(v(n,function(e,n){fe(n,t)}),z.onVolume(e,t))}),j.onEnded(function(e){var t=B('.audio_item[data-id="'+e+'"]');t&&(v(t,function(e,t){Ae(t,1)}),q=!0,z.onEnded(e))}),j.onAdStart(function(e){Ee(e,!0),ke(e,!0)}),j.onAdComplete(function(e){Ee(e,!1),ke(e,!1),te(e.id,0,0)}),j.onNotFoundError(ie),j.onEmptyPlaylistError(ie);var re=null,oe=null,ae=!1,se=!1;function le(e){if(re){var t=k("audio_item",re),n=ue(re,e);e&&S(e);var i=B('.audio_item[data-id="'+C(t,"data-id")+'"]');v(i,function(e,t){ae&&Ae(t,n),se&&(fe(t,n),j.volume(n))}),oe=n}}function ue(e,t){var n=k("Slider__scroll",e),i=T("touch",window.bodyNode)?10:8,r=(t.pageX||t.touches&&t.touches[0]&&t.touches[0].pageX||0)-(n?function(e){return e.getBoundingClientRect().left}(e):M(e))-i/2,o=e.offsetWidth-i;return o?Math.max(0,Math.min(r/o,1)):0}function ce(e,t){if(e){var n=E("ai_dur",e);b(n,t)}}function de(e,t){if(e){var n=E("aic_progress_wrap",e),i=E("aic_load_line",n);i&&(i.style.width=100*Math.max(0,Math.min(t,1))+"%")}}function Ae(e,t){if(e){var n=E("aic_progress_wrap",e),i=E("aic_progress_line",n);i&&(i.style.width=100*t+"%")}}function fe(e,t){if(e){var n=E("aic_volume_wrap",e),i=E("aic_progress_line",n);i&&(i.style.width=100*t+"%")}}function pe(e){if(!(e=_(e))||!C(e,"data-id"))return!1;if(T("ai_deleted",e))return!1;var t=C(e,"data-id"),n=b(P("input",e)),i=C(E("ai_dur",e),"data-dur"),r=b(E("ai_artist",e)),o=b(E("ai_title",e)),s=b(E("ai_subtitle",e)),l=!!E("ai_add",e),u=!!E("ai_del",e),c=C(E("ai_play",e),"style"),d=!!E("audio_item_disabled",e),A=(0,a.parseJSON)(C(e,"data-ads")),f=!!E("ai_explicit",e),p={};return v((C(e,"class")||[]).split(" "),function(e,t){"audio_item_"===t.slice(0,"audio_item_".length)&&(p[t.slice("audio_item_".length)]=!0)}),{id:t,src:n,dur:i,artist:I(x(r)),title:I(x(o)),can_add:l,can_del:u,cover_style:c,is_disabled:d,mix:p,subtitle:s,is_explicit:f,ads:A}}function _e(e){var t,n,i,r=e<0;return t=(n=(e=Math.round(r?-e:e))%60)<10?"0"+n:n,t=(i=(e=Math.floor(e/60))%60)+":"+t,(e=Math.floor(e/60))>0&&(i<10&&(t="0"+t),t=e+":"+t),r&&(t="-"+t),t}function he(t,n){return _e(e&&n?t-n:t)}function me(e){var t=window.cur;t.deletedAudios||(t.deletedAudios={}),t.deletedAudios[e]=!0}function ve(e){var t=window.cur;t.deletedAudios&&delete t.deletedAudios[e]}function ge(e,t){t?function(e){var t=window.cur;t.addedAudios||(t.addedAudios={}),t.addedAudios[e]=!0}(e):function(e){var t=window.cur;t.addedAudios&&delete t.addedAudios[e]}(e);var n=B('.audio_item[data-id="'+e+'"]');v(n,function(e,n){O("ai_added",n,t),b(E("ai_add",n),t?lang.global_delete_audio:lang.global_add_to_audio)});var i=geBySel1('body > [id="ai_menu_'+e+'"]'),r=E("ai_add",i);b(r,t?lang.global_delete_audio:lang.global_add_to_audio),ActionMenu.update()}function ye(e,t){t?me(e):ve(e);var n=B('.audio_item[data-id="'+e+'"]');v(n,function(e,n){O("ai_deleted",n,t),b(E("ai_del",n),t?lang.global_add_to_audio:lang.global_delete_audio)});var i=geBySel1('body > [id="ai_menu_'+e+'"]'),r=E("ai_del",i);b(r,t?lang.global_add_to_audio:lang.global_delete_audio),ActionMenu.update()}function we(){var e=j.getCurrentId(),t=_("audio"+e),n=!1;e&&(n=k("audios_list",t)||k("mcont",t)),v(g("_AudioPlayStatus"),function(e,t){O("playing",t,!1)}),n&&v(g("_AudioPlayStatus",n),function(e,t){O("playing",t,j.playing())})}function be(e,t,n){if(window.isArticleWebView)return Article.audioPlay(j.getCurrentId(),j.playlist()),S(e),!1;var i=window.lang;if(j.support){var r=_("audio"+t);if(r&&T("ai_deleted",r)&&!T("ai_current",r))return!0;n&&t!=j.getCurrentId()?ie(t):j.operate(t),we()}else alert(i.mobile_audio_player_not_support);return S(e),!1}function Ee(e,t){var n=_("audio"+e.id);O(V,n,t);var i=E("ai_title",n);b(i,t?getLang("global_audio_ad"):e.title),O(U,i,t)}function ke(e,t){B(".audio_item.al_player.ai_playing").forEach(function(n){if(n){var i=E("ai_title",n);b(i,t?getLang("global_audio_ad"):e.title),O(U,i,t),O(V,n,t),toggle(E("ai_artist"),!t)}})}return D(document,l.isTouch?"touchend touchcancel":"mouseup",function(e){if(!re)return;var t=k("audio_item",re),n=ue(re,e)||oe;e&&S(e);var i=B('.audio_item[data-id="'+C(t,"data-id")+'"]');v(i,function(e,i){ae&&(Ae(i,n),j.position(n,!0)),se&&fe(t,n)}),ae&&(Y=j.playing(),z.onSeek(n));re=oe=null,ae=se=!1}),D(document,l.isTouch?"touchmove":"mousemove",le),{init:function(e){t=e.add_hash||"",n=e.del_hash||"",d=e.res_hash||"",(K=e.use_new_stats)&&(window.playerAdapter=new c.MvkPlayerAdapter(z),new u.AudioStats(window.playerAdapter))},initAudio:function(){v(g("ai_current"),function(e,t){ee(t=pe(t))});var e=j.getCurrentId(),t=B('.audio_item[data-id="'+e+'"]'),n=j.loaded(),i=j.position(),r=j.duration();j.playing()?(v(t,function(e,t){h("ai_playing",t)}),$$("#lm_audio").forEach(function(e){h("ai_playing",e)})):(v(t,function(e,t){m("ai_playing",t)}),$$("#lm_audio").forEach(function(e){m("ai_playing",e)})),Z(j.getCurrent()),v(t,function(e,t){de(t,n/r)}),te(j.getCurrentId(),i,r),setTimeout(function(){we()},1)},getDOMFromAudio:function(e,t,n){if(!e)return"";var i=I(e.id),s=I(e.src),u=+e.dur,c=e.artist,d=e.title,A=e.subtitle,f=e.is_explicit,p=e.can_add,_=e.can_del,h=d?'<span class="divider"> &ndash; </span>':"",m=l.isTouch?"ontouchstart":"onmousedown",v="",g="",y=e.cover_style||"",w=e.is_disabled||"",b=e.ads&&(0,a.escapeAttr)(JSON.stringify(e.ads)),E=o.default.class("audio_item",e.mix)||"audio_item";if(w)return'<div class="audio_item audio_item_disabled"></div>';if(function(e){var t=window.cur;return!!t.deletedAudios&&t.deletedAudios[e]}(i)){if(n)return"";v+=" ai_deleted"}(function(e){var t=window.cur;return!!t.addedAudios&&t.addedAudios[e]})(i)&&(v+=" ai_added"),_?(v+=" ai_has_btn",g='<div class="ai_del wia_item" onclick="audioplayer.del(\''+i+"', event);\">"+lang.global_delete_audio+"</div>"):p&&(v+=" ai_has_btn",g='<div class="ai_add wia_item" onclick="audioplayer.add(\''+i+"', false, event);\">"+lang.global_add_to_audio+"</div>"),i==j.getCurrentId()&&(j.playing()&&(v+=" ai_playing"),v+=" ai_current"),f&&(v+=" audio_item_explicit");var k="";return g?k='<div class="ai_menu_wrap"><i class="i_pointer"></i><a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a><div class="ai_menu wi_actions" id="ai_menu_'+i+'">'+g+"</div></div>":v+=" ai_no_menu",'<div id="audio'+i+'" data-id="'+i+'" data-ads="'+b+'" class="'+v+" "+E+'" onclick="audioplayer.playPause(event, \''+i+"'"+(t?", true":"")+');"><div class="ai_info"><div class="ai_play" style="'+y+'"><i class="i_play"></i></div>'+k+'<div class="ai_body"><div class="ai_dur" data-dur="'+u+'" onclick="audioplayer.switchTimeFormat(this, event);">'+_e(u)+'</div><div class="ai_label"><span class="ai_title">'+d+(A?" "+r.default.html({tag:"span",class:"ai_subtitle",inner:A}):"")+"</span>"+h+'<span class="ai_artist">'+c+'</span></div><input type="hidden" value="'+s+'"></div></div><div class="ai_controls"><table class="row_table"><tr><td class="aic_progress_wrap"><div class="aic_line" '+m+'="audioplayer.setPosition(this, event);" onclick="cancelEvent(event);"><div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div><div class="aic_ln aic_load_line" onclick="cancelEvent(event);"></div><div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);"><div class="aic_ln aic_progress_line" onclick="cancelEvent(event);"><div class="aic_slider" onclick="cancelEvent(event);"></div></div></div></div></td><td class="aic_volume_wrap"><div class="aic_line" '+m+'="audioplayer.setVolume(this, event);" onclick="cancelEvent(event);"><div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div><div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);"><div class="aic_ln aic_progress_line" onclick="cancelEvent(event);"><div class="aic_slider" onclick="cancelEvent(event);"></div></div></div></div></td></tr></table></div></div>'},add:function(e,i,r){var o=_("audio"+e);if(!T("ai_ajax",o)){var a=domData(o,"track-code")||"",s=T("ai_added",o);ge(e,!s),h("ai_ajax",o),z.onAdd(),R.post("/audio",{_ajax:1,act:s?"delete":"add",audio:s?C(o,"data-deleteid"):e,hash:s?n:t,access_key:i,track_code:a},{redirectToLoginPage:!0,onDone:function(t){m("ai_ajax",o),t?C(o,"data-deleteid",t):ge(e,s)},onFail:function(){switch(m("ai_ajax",o),ge(e,s),Array.prototype.slice.call(arguments).shift()){case 2:F.go("/audio?act=add&audio="+e+"&hash="+t+"&access_key="+i)}}}),r&&S(r)}},del:function(e,t){var i=_("audio"+e);if(i){var r=T("ai_deleted",i);ye(e,!r),r?ve(e):me(e),z.onDel(),R.post("/audio",{_ajax:1,act:r?"restore":"delete",audio:e,hash:r?d:n},{redirectToLoginPage:!0,onDone:function(t){t||ye(e,r)},onFail:function(){switch(ye(e,r),Array.prototype.slice.call(arguments).shift()){case 2:F.go("/audio?act="+(r?"restore":"delete")+"&audio="+e+"&hash="+(r?d:n))}}}),t&&S(t)}},playPause:be,getFormatedTime:he,switchTimeFormat:function(t,n){var i=k("audio_item",t);return!(T("ai_current",i)&&!T("ai_select",i))||(L("audio_time_left",(e=!e)?"1":"0"),ce(_("audio"+j.getCurrentId()),he(j.position(),j.duration())),n&&S(n),!1)},setPosition:function(e,t){re||j.isAdsPlaying()||(re=e,ae=!0,le(t))},setVolume:function(e,t){re||(re=e,se=!0,le(t))},playback:function(e){if(X&&X.listenedTime){clearTimeout(f);var n={_ajax:1,act:"playback",audio:e,hash:t,state:document.hidden?"background":"app",listened:X.listenedTime,end_stream_reason:"unknown",from:F.getQuery("from")},i=G.lastIndexOf(e);X=null,W&&(n.auto=1),i&&(n.prev=G[i-1]),R.post("/audio",n)}},openPlayer:function(e,t){var n=F.path,i=F.params,r=n+(i?"?"+i:"")+"#player";return F.al_go(r,null,{local:!0,target:e,nav:{push:r,path:n,params:i,hash:"#player"},no_push:t})},getCurrentElem:function(){return(0,i.$)(".ai_current")},playFirst:function(e,t){e&&S(e);var n=j.getCurrent(),i=k("_audioPlaylist",t),r=!!n&&n.id;if(!r||!E("ai_current",i)){var o=(i||_("mcont")).$(".audio_item[data-id]");r=o&&o.getAttribute("data-id")}r&&be(e,r)},hasArticleWebViewClientAudioSupport:function(){return window.clientWebviewAudioSupport},getAddHash:function(){return t},getPlaybackQueue:function(){return G},isAutoPlayed:function(){return W},useNewStats:function(){return K},onAdd:(0,s.default)(),onDel:(0,s.default)(),onPlay:(0,s.default)(),onPause:(0,s.default)(),onProgress:(0,s.default)(),onVolume:(0,s.default)(),onSeek:(0,s.default)(),onPlaylistChanged:(0,s.default)(),onEnded:(0,s.default)()}}();window.audioplayer=z},pOpT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Go98"));var r=i.default;t.default=r,window.BookmarksFilterListItem=i.default},pQDp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageProxyURL=function(e,t){var n=[];return r(t,function(e,t){switch(e){case"size":t=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((""+e).split("x"),2),n=t[0],i=t[1];return n=n?a(n):"",i=i?a(i):"","".concat(n,"x").concat(i)}(t)}t&&n.push("".concat(e,"=").concat(t))}),n.length?e+"&"+n.join("&"):e};var i=window,r=i.each,o=i.intval;function a(e){return 0<e&&e<1?Math.round(100*e)/100:o(e)}},pYST:function(e,t,n){"use strict";var i,r=n("UxAg"),o=n("OcsD"),a=function(e){return e&&e.__esModule?e:{default:e}}(n("rUE2"));function s(){var e=(0,r.$)(".messenger__dialog");i=null,e.innerHTML=""}Object.assign(a.default,{open:function(e){i={},"function"==typeof e.onConfirm&&(i.onConfirm=e.onConfirm,e.onConfirm="");"function"==typeof e.onClose&&(i.onClose=e.onClose,e.onClose="");var t=(0,r.$)(".messenger__dialog"),n=(0,a.default)(e),s=(0,o.ceFromString)(n);i.onConfirm&&((0,r.$)(".mailDialog__confirmButton",s).onclick=function(e){return i.onConfirm(e,t)});i.onClose&&(0,r.$$)(".mailDialog__overlay,.mailDialog__close,.mailDialog__closeButton",s).forEach(function(e){e.onclick=function(e){return i.onClose(e,t)}});t.innerHTML="",t.appendChild(s)},close:s,_onDialogClose:s})},qHA9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isContactPeer=function(e){return e>19e8&&e<=2e9},t.isCommunityPeer=function(e){return e>-1e9&&e<0},t.isChatPeer=function(e){return e>2e9},t.isUser=function(e){return e>0&&e<=19e8},t.formatTime=d,t.wrapLinks=A,t.wrapMention=f,t.wrapCommunityUrl=function(e){var t=i.default.getQuery("community");t&&(e+="&community=".concat(t));return e},t.sendDataToMessage=function(e,t){var n,i,o=store.mail,a=o.cur,s=o.members,l=Date.now()/1e3,_=d(l,a.timeShift),h=e.message||"";"send"!==e.act&&e.id&&(n=store.mail.msgs[e.id]);u||(u=document.createElement("div"));u.textContent=h,h=u.innerHTML,u.textContent="";var m,v={};if(e.media&&0===e.media.indexOf("sticker")){v.sticker=1;var g=+e.media.replace("sticker","");g&&(m={id:g,url:Stickers.getStickerUrl(g,p()),height:c})}else for(var y,w=1;y=e["attach".concat(w,"_type")];w++)v[y]?v[y]+=1:v[y]=1;i=e.attached_messages?(e.attached_messages+"").split(";"):e.mail_edit_attach_fwd&&n?n.forwards.concat():[];var b=!!e.has_reply,E="send"===e.act?"send"+e.random_id:"edit"+e.id,k=h,C=k=(k=k.replace(/\n/g,"<br>")).replace(/(@|\*)(\S+)(?: +\(([^\n]+?)\))?/g,function(e,t,n,i){i||(i=t+n);for(var r=0,o=Object.keys(s),a=0,l=o.length;a<l;a++){var u=o[a];if(s[u]&&s[u].domain===n){r=u;break}}return"[id".concat(r,"|").concat(i,"]")});C=f(C=A(C),!0),C=(0,r.emojiToHTML)(C);var D={id:"send"===e.act?E:e.id,sendId:E,peerId:"send"===e.act?e.to:e.peerId,authorId:a.viewerId,adminId:a.groupId?a.userId:void 0,ts:l,date:_,dateShort:_,text:C,textInput:h,body:k,isUnread:!n||n.isUnread,isOut:!0,edited:"send"!==e.act,canEdit:!1,attaches:v,forwards:b?[]:i,hasReply:b,reply:b?i[0]:void 0,pending:!t,failed:!!t,attachesLoading:!!Object.keys(v).length};a.groupId&&(D.adminName=lang.mobile_mail_you,D.adminUrl=s[a.userId].url);m&&(D.sticker=m);return D},t.getMsgSendId=function(e){return e.edited?"edit"+e.id:"send"+e.randomId},t.mailRequest=function(e,t){return new Promise(function(n,i){(0,o.ajaxRequest)(e,t,function(e){e.error?i({type:"server",code:e.code||0,message:e.message||""}):n(e.result)},function(e,t,n){var r=n instanceof XMLHttpRequest,o=null,a="unknown",s=0;if(r){var l=n;0===l.status?a="network":(a="server_status",s=l.status)}else 0===e&&null==t&&null==n?a="response_parsing":e===ajax.RESPONSE_CAPTCHA?(a="captcha",o=n):a="unknown";i({type:a,code:s,message:"",data:o})})})},t.getStickerSize=p,t.STICKER_HEIGHT=t.UNKNOWN_ERROR=t.MENTION_CLIENTSIDE_REGEXP=t.MENTION_DOMAIN_REGEXP=t.MENTION_REGEXP=void 0,n("tsGB");var i=function(e){return e&&e.__esModule?e:{default:e}}(n("wMVj")),r=n("9M99"),o=n("OcsD");var a=/\[((id|club)\d+)\|([\S\s]+?)]/g;t.MENTION_REGEXP=a;t.MENTION_DOMAIN_REGEXP=/\[((id|club)\d+)\|@([\S\s]+?)]/g;var s=/\[(()\w+)\|([\S\s]+?)]/g;t.MENTION_CLIENTSIDE_REGEXP=s;var l=-180;t.UNKNOWN_ERROR=10;var u,c=128;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Date(1e3*e),i=n.getTimezoneOffset(),r=-t/60+l;if(i!==r){var o=60*(r-i)*1e3;n.setTime(1e3*e-o)}var a=n.getHours(),s=n.getMinutes();return a+":"+(s<10?"0":"")+s}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return window.mail.wrapLinks(e,t)}function f(e,t){var n;return n=t?s:a,e.replace(n,function(e,t,n,i){return'<a href="/'.concat(t,'" class="mem_link">').concat(i,"</a>")})}function p(){return hasClass("x2",document.body)?2*c:c}t.STICKER_HEIGHT=c},qnb1:function(e,t,n){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})},qsX6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBookmarkState=function(e,t){g.bookmarks[e]=t},t.default=void 0;var i=c(n("wTbK")),r=c(n("JYMJ")),o=c(n("Y6JH")),a=n("VRji"),s=n("MjTa"),l=n("OcsD"),u=n("UxAg");function c(e){return e&&e.__esModule?e:{default:e}}var d="/hints?act=a_json_friends&mobile=1&from=imwrite&case=Nom&qs=1",A="/like?act=publish_box&object=",f="ShareConversations",p="ShareGroups",_=d+f,h=!1,m=0,v=!1,g={bookmarks:{}};function y(e){b(e)}function w(e){nav.go(e),cur.share.destroy()}function b(e){var t=cur.share._els.header,n=e.scrollTop;t.classList.toggle("ShareHeader--scrolled",n>=10)}function E(e,t,n){cur.share._els.content;if(cur.share.blocked)return!1;if(C(!0),cancelEvent(n),hasClass("inline_item_selected",t))return cur.shareSearch.toggleAttach(e,!1),function(e,t){cur.share._els.content;for(var n=0;n<cur.share.selected.length;n++)if(cur.share.selected[n]===e){cur.share.selected.splice(n,1);break}return M(!1),!1}(e);cur.shareSearch.toggleAttach(e,!0);for(var i=!1,r=0;r<cur.share.selected.length;r++)if(cur.share.selected[r]===e){i=!0;break}return i||cur.share.selected.push(e),C(!1),M(!1),I(),!1}function k(e,t,n){if(!cur.share.blocked){e=e.closest(".SharePanelRoot");var i,r=(0,u.$$)(".SharePanel",e);t&&(i=(0,u.$)(".".concat(t),e)),r.forEach(function(e){var t=e===i;e.setAttribute("aria-hidden",!t),e.classList.toggle("SharePanel--active",t),t?e.removeAttribute("tabindex"):e.setAttribute("tabindex",-1),(0,u.$$)("input, ul",e).forEach(function(e){e.setAttribute("aria-hidden",!t),t?(e.removeAttribute("disabled"),e.setAttribute("tabindex",0)):(e.setAttribute("disabled",!0),e.setAttribute("tabindex",-1))})});var o=(0,u.$)("input",i);o&&n&&o.focus(),setStyle(e,{height:i?i.clientHeight:0})}}function C(e){var t=(0,u.$)(".ShareModal");t&&t.classList.toggle("ShareModal--disableAnimations",!e)}function D(e){var t=cur.share._els,n=t.header,i=t.content,r=t.bottom;i.classList.add("ShareLists--transition"),C(!0),k(n,e?"ShareHeaderGroupsPanel":"ShareHeaderConversationsPanel"),k(i,e?"ShareGroups":"ShareConversations"),k(r,e?"":"ActionsPanel"),setTimeout(function(){i.classList.remove("ShareLists--transition")},300),(0,u.$)(".SharePanel--active ul",i).focus(),I(),b(e?(0,u.$)("#ShareGroups .ShareList__container"):(0,u.$)("#ShareConversations .ShareList__container"))}function S(e){var t=cur.share._els,n=t.header,i=(t.content,t.bottom),r=P();h=!0,v=e,I(e),C(!1),k(i,e?"":r),e&&k(n,"ShareHeaderConversationsSearchPanel",!0),I(e),setTimeout(function(){browser.ios&&(0,l.scrollTop)(document.activeElement),h=!1},500)}function T(){var e=cur.share._els,t=e.content,n=e.bottom,i=e.messageTextarea;h=!0,k(n,"ExpandedMessagePanel"),t.classList.add("ShareLists--transition"),I(!1),i.focus({preventScroll:!0})}function M(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=cur.share,n=t.selected,i=t._els;ge(f)&&(!function(){var e=cur.share.cache._cache,t=(0,u.$)(".ShareHeaderConversationsPanel"),n=(0,u.$)(".ShareHeaderConversationsPanel .SharePanel-headerText__receivers",t),i=cur.share.selected,r=i.length;t.classList.toggle("ShareHeaderConversationsPanel--hasReceivers",r>0);var o="";if(1===r){o=getLang("mobile_share_box_to_single");var a=e[i[0]][0];o=o.replace("{name}",a)}else if(2===r){o=getLang("mobile_share_box_to_couple");var s=e[i[0]][6]||e[i[0]][0],l=e[i[1]][6]||e[i[1]][0];o=o.replace("{name1}",s).replace("{name2}",l)}else if(r>2){o=getLang("mobile_share_box_to_many");var c=e[i[0]][6]||e[i[0]][0];o=o.replace("{name}",c).replace("{count}",r-1)}n.innerHTML=o}(),x());var r=P();k(i.bottom,r,e),function(e){var t=cur.share._els.messagePanel,n=(0,u.$)(".Btn",t);n.innerHTML=e?getLang("mobile_share_message_many"):getLang("mobile_share_message_single")}(n.length>1)}function P(){var e=cur.share,t=e.selected,n=e.content;return"ShareHeaderGroupsSearchPanel"===(0,u.$)(".SharePanel--active",n).getAttribute("data-name")?"":t.length>0?"MessagePanel":"ActionsPanel"}function I(e){var t=cur.share._els,n=t.header,i=t.bottom,r=t.content,o=t.groupsList;if(cur.share&&n&&i&&r){var a=(0,u.$)(".ShareModal"),s=400;(e=v||e)&&(s+=cur.share.lastBottomHeight-(0,l.getH)(i)),i.clientHeight&&(cur.share.lastBottomHeight=i.clientHeight);var c=[n,i].reduce(function(e,t){var n=(0,u.$)(".SharePanel--active",t);return n&&(e+=n.clientHeight,setStyle(t,{height:n.clientHeight})),e},0),d=Math.min(s,innerHeight-c);(h||cur.share.blocked)&&(browser.ios||browser.ipad||browser.safari)&&(d=Math.min(s,document.body.clientHeight-c));var A=c+d!==m;A||(C(!1),r.classList.remove("ShareLists--transition")),setStyle(o,{bottom:-i.clientHeight}),a.classList.contains("ModalMenu--focused")||setStyle(r,{height:d}),A||C(!0),m=c+d}}function x(){cur.share&&each(geByClass("inline_item",(0,u.$)("ShareConversations__container")),function(e,t){var n=intval((t.id||"").substr(4)),i=-1!==cur.share.selected.indexOf(n);toggleClass("inline_item_selected",t,i),t.setAttribute("aria-selected",i);var r=(0,u.$)('input[type="checkbox"]',t);r&&(r.checked=i)})}function O(e){var t=cur.share._els.bookmarkButton;if(t){var n=(0,u.$)(".ActionsPanel-button__icon",t),i=(0,u.$)(".ActionsPanel-button__label",t);t.setAttribute("aria-pressed",e),e?(n.innerHTML=Wd.html((0,o.default)("wall","favorite_28")),i.innerHTML=getLang("mobile_share_target_bookmark_active")):(n.innerHTML=Wd.html((0,o.default)("wall","favorite_outline_28")),i.innerHTML=getLang("mobile_share_target_bookmark")),window.thover.clear()}}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,l.preventEvent)(e);var i,r,o,a=cur.share._els.header;if("group"===t?(i=ge("ShareHeaderGroupsSearchPanel__input"),r="ShareHeaderGroupsPanel",o=cur.shareGroupSearch):"peers"===t&&(i=ge("ShareHeaderConversationsSearchPanel__input"),r="ShareHeaderConversationsPanel",o=cur.shareSearch),C(!1),i.value){if(n)return void C(!0);o.clear()}else"peers"===t?(k(a,r),S(!1)):(k(a,r),C(!0))}function B(){var e=/^([a-z_]+)(-?\d+)_(\d+)$/.exec(cur.share.options.object)[1],t=cur.share.options.object;cur.share.options.list&&(t+="?list="+cur.share.options.list),t=t.replace("wall_reply","wall"),t=cur.share.options.external_url||t;var n=navigator.share({url:t});if(!n)return(0,l.statlogsValueEvent)("mvk_share_external",e);n.then(function(){cur.share&&(0,l.statlogsValueEvent)("mvk_share_external",e)})}var N=function(e,t,n){var c=t.can_to_own,m=void 0===c||c,v=t.can_to_club,b=void 0===v||v,P=t.can_bookmark,N=t.is_bookmarked,R=t.from,F=t.post_from,j=t.list;(0,s.preventDocumentScroll)(),N=void 0!==g.bookmarks[e]?g.bookmarks[e]:N,t.is_bookmarked=N,cancelEvent(n);var H=!!navigator.share,U=browser.ios?"iOS":"Android",V=(0,i.default)({on_overlay_click:"cur.share.destroy()",class:"ShareModal",attached:!0,body:(0,r.default)({can_to_own:m,can_to_club:b,supportsExternalShare:H,platform:U,can_bookmark:P,is_bookmarked:N,list:j,from:R,post_from:F,object:t.object})});i.default.open(Wd.elem(V),!0,"share",{swipeDown:!0,onClose:function(){cur.share&&cur.share.destroy(!1)}});var z=(0,u.$)(".ShareModal"),$=(0,u.$)(".ShareHeader"),q=(0,u.$)(".ShareLists"),W=(0,u.$)(".ShareBottom"),Y=(0,u.$)(".ActionsPanel-button--bookmark"),G=(0,u.$)(".ActionsPanel-button--group");cur.shareSearch=new QuickSearch,cur.shareSearch.init({action:d,field:"ShareHeaderConversationsSearchPanel__input",container:f,top_len:20,tpl:function(e,t){return'<ul aria-multiselectable="true" aria-hidden="false" class="ScrollView ShareConversations__container ShareList__container" onscroll="cur.share.onScroll(this)">'.concat(e,"</ul>")},item_tpl:function(e,t){if(cur.share){var n=cur.share.cache._cache,i=n[this.id][0],r=-1!==cur.share.selected.indexOf(+this.id),o=r?"inline_item_selected":"";return'\n        <label aria-label="'.concat(i,'" tabindex="0" role="checkbox" id="peer').concat(this.id,'" onclick="cur.share.select(').concat(this.id,', this)" class="inline_item active ').concat(o,'">\n          <input type="checkbox" style="display: none;">\n            <img aria-hidden="true" class="ii_img" src="').concat(t,'" />\n            <div class="ii_body">\n              <div class="ii_owner">\n                 ').concat(this.highlight(i),"\n              </div>\n            </div>\n          </input>\n        </label>\n      ")}},null_tpl:function(e){var t=getLang("mobile_friends_search_not_found").replace("%s",escape(e));return e||(t=getLang("mobile_share_list_no_friends")),'<div class="service_msg_box"><div class="service_msg service_msg_null">'.concat(t,"</div></div>")}}),x(),addEvent(Y,"click",function(e,t,n){var i=e.split("_"),r=31,o=5,a=[r,o].includes((0,l.toInt)(t.bookmark_type));if(ajax.post("/bookmarks.php",{_ajax:1,wide:2===t.bookmark_type?1:0,from:"share_box",star:a?1:0,act:t.is_bookmarked?"bookmark_remove":"bookmark_add",item_type:t.bookmark_type,item_oid:i[0],item_id:i[1],hash:t.bookmark_hash},{onDone:function(e,t){var n=(0,u.$)(".".concat(e)),i=(0,l.ceFromString)(t);n&&(0,l.replace)(i,n.parentNode)}}),t.bookmark_type===o&&Article.toggleButton(e,!t.is_bookmarked),t.bookmark_type===r){var s=(0,u.$)(".StoryMenu__button");Stories.toggleBookmark(s,!0)}t.is_bookmarked=!t.is_bookmarked,g.bookmarks[e]=t.is_bookmarked,n()}.bind(this,e,t,function(){O(t.is_bookmarked)}),{passive:!0}),addEvent(G,"click",function(){D(!0)},{passive:!0});var Q=(0,u.$)(".ExpandedMessagePanel textarea"),X=(0,u.$)(".MessagePanel__input input");(0,a.initAutogrow)(Q),addEvent(Q,"input blur focus",function(){X.value=Q.value.replace(/\n/gi," "),C(!1)}),addEvent((0,u.$)(".ExpandedMessagePanelSend"),"click",function(){cur.share.sendMessage()},{capture:!0}),addEvent(Q,"input",function(){C(!1),I(!browser.ios),setTimeout(function(){C(!0)},150)}),addEvent(Q,"touchmove",function(e){stopEvent(e)},{capture:!0}),addEvent(Q,"focus",function(e){var t=cur.share._els.content;cancelEvent(e),!0,t.classList.remove("ShareLists--transition"),z.classList.add("ModalMenu--blocked"),C(!1),I(!1),setTimeout(function(){I(!1),0===(0,l.scrollTop)()||browser.ios||(z.classList.add("ModalMenu--focused"),(0,l.scrollTop)(document.body.clientHeight))},300)}),addEvent(Q,"blur",function(){z.classList.remove("ModalMenu--blocked"),C(!1),!1,setTimeout(function(){z.classList.remove("ModalMenu--focused"),document.activeElement&&document.activeElement.blur(),M(),I(!1),h=!1},100),setTimeout(function(){document.activeElement&&document.activeElement.blur(),I(!1)},250)}),addEvent(Q,"keydown",function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey&&browser.mac)&&cur.share.sendMessage(e)}),cur.share={open:!0,onClose:befall(),go:w,options:t,externalShare:B,actionBox:A+t.object+(t.list?"&list=".concat(t.list):""),blocked:!1,_els:{actionsPanel:(0,u.$)(".ActionsPanel"),messagePanel:(0,u.$)(".MessagePanel"),processingPanel:(0,u.$)(".ProcessingPanel"),groupsList:ge("ShareGroups"),conversationsList:ge("ShareConversations"),bookmarkButton:Y,messageTextarea:Q,header:$,content:q,bottom:W},selected:[],cache:QuickSearchCache[_],expandMessage:T,toggleGroupsPanel:D,toggleConversationsSearch:S,select:E,clearSearch:L,setActivePanel:k,onScroll:y,sendMessage:function(e){var t=cur.share._els,n=t.bottom,i=t.processingPanel,r=this.mail_hash,a=this.object,s=this.list,l=(0,u.$)(".ExpandedMessagePanel__textareaWrap textarea");C(!0),e&&cancelEvent(e),k(n,"ProcessingPanel"),cur.share.blocked=!0,(a.startsWith("story")||a.startsWith("narrative"))&&Stories.sendAnalyticsEvent("share_to_message"),setTimeout(function(){I()}),setTimeout(function(){I()},350),ajax.post("/mail?act=send",{_ajax:1,from:"share_box",hash:r,media:a,list:s,message:l.value,to:cur.share.selected.join(",")},{onDone:function(e){C(!0);var t=(0,u.$)(".ProcessingPanel__icon",i),n=(0,u.$)(".ProcessingPanel__label",i);t.classList.remove("ProcessingPanel__icon--loading");var r=e.error;t.innerHTML=Wd.html(r?(0,o.default)("wall","error_circle_40"):(0,o.default)("wall","done_circle_40")),n.innerText=r?getLang("mobile_share_state_error"):getLang("mobile_share_state_success"),setTimeout(function(){cur.share&&cur.share.destroy()},1e3)}})}.bind(t),lastBottomHeight:W.clientHeight,destroy:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,u.$)(".ShareModal");t&&e&&i.default.close(t),cur.share&&(cur.share.onClose(),cur.share.open=!1),(0,s.restoreDocumentScroll)(),delete cur.share,delete cur.shareSearch,delete cur.shareGroupSearch}},function(){cur.shareGroupSearch=new QuickSearch;var e=Icon({icon:"chevron_right"});cur.shareGroupSearch.init({load_once:!0,field:"ShareHeaderGroupsSearchPanel__input",container:p,action:cur.share.actionBox,tpl:function(e,t){return'<ul aria-hidden="true"  class="ScrollView ShareGroups__container ShareList__container" onscroll="cur.share.onScroll(this)">'.concat(e,"</ul>")},item_tpl:function(t,n){var i=function(){if(!cur.share)return{};var e=cur.share.actionBox+p;return QuickSearchCache[e]}(),r=i._cache,o=r[this.id][0],a=cur.share.options,s=a.object,l=a.list,u=a.from,c=a.post_from,d=l?"&list=".concat(l):"",A=u?"&from=".concat(u):"",f=c?"&post_from=".concat(c):"";return'\n        <li aria-label="'.concat(o,'" tabindex="0" role="link" id="group').concat(this.id,'" onclick="cur.share.go(\'/wall').concat(this.id,"?act=add&object=").concat(s).concat(d).concat(A).concat(f,'&share_box=1\')" class="inline_item " xmlns="http://www.w3.org/1999/html">\n          <img aria-hidden="true" class="ii_img" src="').concat(n,'" />\n          <div class="ii_body">\n            <div class="ii_owner">\n               ').concat(this.highlight(o),'\n            </div>\n            <div class="ii_go">\n               ').concat(e,"\n            </div>\n          </div>\n        </li>\n      ")},null_tpl:function(e){var t=getLang("mobile_groups_no_groups_found");return e||(t=getLang("mobile_share_list_no_groups")),'<div class="service_msg_box"><div class="service_msg service_msg_null">'.concat(t,"</div></div>")}})}(),O(N),I(),$.closest(".Share").focus(),onBodyResize(function(){z.classList.contains("ModalMenu--focused")||(I(),setTimeout(function(){C(!0)},150))})};t.default=N},qxbX:function(e,t,n){"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;n<r;){var o;n in i&&(o=i[n],e.call(t,o,n,i)),n++}})},"r/ag":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"POPUP_DISAPPEAR_TIME",{enumerable:!0,get:function(){return r.POPUP_DISAPPEAR_TIME}}),Object.defineProperty(t,"POPUP_NAV_PREFIX",{enumerable:!0,get:function(){return r.POPUP_NAV_PREFIX}}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Po+v")),r=n("TAKr");window.Popup=i.default;var o=i.default;t.default=o},r2Pq:function(e,t,n){"use strict";var i=n("UxAg"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("z9sQ"));window.AudioSerp={setView:function(e){return s("view",e)},setTab:function(e){return s("tab",e)},toggleTabs:function(e){(0,i.$)(a.serp).classList.toggle(o.noTabs,!e)},setFoundHtml:function(e){(0,i.$)(a.found).outerHTML=e},getFoundHtml:function(){return(0,i.$)(a.found).outerHTML}};var o={serpMod:function(e){return"AudioSerp_".concat(e)},noTabs:"AudioSerp_noTabs"},a={serp:".AudioSerp",found:".AudioSerp__found"};function s(e,t){var n=(0,i.$)(a.serp);r.default.setMod(n,o.serpMod(e),t)}},rEJs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;t.events={CURRENT_CHANGED:"curr",PLAY:"start",PAUSE:"pause",STOP:"stop",UPDATE:"update",LOADED:"loaded",ENDED:"ended",FAILED:"failed",BUFFERED:"buffered",PROGRESS:"progress",VOLUME:"volume",PLAYLIST_CHANGED:"plchange",ADDED:"added",REMOVED:"removed",FREQ_UPDATE:"freq",SEEK:"seek",PLAY_NEXT:"play_next",AD_READY:"ad_ready",AD_DEINITED:"ad_deinit",AD_STARTED:"ad_started",AD_COMPLETED:"ad_completed",START_LOADING:"start_load",CAN_PLAY:"actual_start"}},rKUZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("NSb7"));n("eR1x");var r=i.default;t.default=r,window.Typing=i.default,Object.assign(window,{Typing_renderNames:i.Typing_renderNames,Typing_isEmpty:i.Typing_isEmpty})},rKp0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("FZH1"));n("UH2D");var r=i.default;t.default=r,window.MailScrap=i.default},rUE2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("bZ/P"));function r(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n    <div class="','">\n      <div class="mailDialog__overlay" ','></div>\n      <div class="mailDialog__wrap">\n        <div class="mailDialog__content">\n          <div class="mailDialog__close" ',"></div>\n          ",'\n          <div class="mailDialog__body">','</div>\n          <div class="mailDialog__footer">\n            <div class="mailDialog__button mailDialog__confirmButton" ',">",'</div>\n            <div class="mailDialog__button mailDialog__button_secondary mailDialog__closeButton" ',">","</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "]);return r=function(){return e},e}var o=function(e){var t=e.onClose||i.default.onClick("MailDialog._onDialogClose"),n=i.default.class(e.class,"mailDialog",{}),o="";e.title&&(o='<div class="mailDialog__title">'.concat(e.title,"</div>"));return i.default.html(r(),n,t,t,o,e.body,e.onConfirm,e.confirmText,t,e.cancelText)};t.default=o},rulp:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("r/ag"));window.Podcast={toggleFave:function(e,t,n){var i="snippet__favorite_active",r=hasClass(e,i);ajax.post("fave.php",{act:"fave_podcast",add:!r,hash:n,audio_id:t,ref:cur.module}),r?removeClass(e,i):addClass(e,i)},onOpenClick:function(e,t){var n=$(".snippet__popup",e.closest(".snippet")),r="";cur&&cur.module?r=cur.module:nav&&"/feed"===nav.cur?r="feed":!nav||"/feed?section=podcasts"!==nav.cur&&"/feed/podcasts"!==nav.cur||(r="feed_podcasts"),statlogsValueEvent("mvk_podcasts_actions","mvk_open_popup",t,r),i.default.open(n,!0)}}},"s+BL":function(e,t,n){"use strict";window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),i=this;do{for(t=n.length;--t>=0&&n.item(t)!==i;);}while(t<0&&(i=i.parentElement));return i})},s0aB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("NJSj"));n("82vK");var r=i.default;t.default=r,window.Convo=i.default,window.Convo__online=i.Convo__online},sOYs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceMessagePlayer=void 0;var i,r=n("n4VL"),o=n("5KvX"),a=n("X6as"),s=n("rEJs"),l=n("1V+M");function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=!1,d=function(){function e(){var t=this,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onListened;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._reattach=!1,this._audioEl=null,this._playing=!1,this._timer=null,this._duration=0,this._detaching=!1;var a={onEnd:function(){t.detach()},onFail:function(){a.onEnd()},onCanPlay:function(){},onProgressUpdate:function(e){t._updateProgress(e)}};i=!1,r.PlayerHTML5.isSupported()?(r.PlayerHTML5.isSupported('audio/ogg;codecs="opus"')&&!r.PlayerHTML5.isSupported('audio/ogg;codecs="codec_check"')&&(i=!0),this._impl=new r.PlayerHTML5(a)):browser.flash&&window.renderFlash&&(this._impl=new o.PlayerFlash(a)),this.onPlayPause=function(e){return cancelEvent(e),t.toggle()},this.onDurationClick=function(e){t.durationType=!t.durationType,cancelEvent(e)},this._onListened=function(){n&&n(t._audioEl)},this._initEvents()}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(e,[{key:"_updateProgress",value:function(e){this._duration*e>=1&&this._audioEl&&!this._audioEl._listened&&(this._audioEl._listened=!0,this._onListened()),this._durationEl&&(this.durationType?this._durationEl.innerHTML="-"+formatTime(Math.round(this._duration*(1-e))):this._durationEl.innerHTML=formatTime(Math.round(this._duration*e))),this._progressSlider&&this._progressSlider.setValue(e)}},{key:"_initInterface",value:function(){var e=this;this._el=ce("div",{innerHTML:'<div class="audio-msg-player audio-msg-track"><button class="audio-msg-track--btn"></button><div class="audio-msg-track--duration"></div><div class="audio-msg-track--wave-wrapper"><div class="audio-msg-track--slider"></div></div></div>'}).firstChild,window.getLang&&attr(this._el,"aria-label",getLang("mail_audio_message")),this._playBtn=geByClass1("audio-msg-track--btn",this._el),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_play")),this._durationEl=geByClass1("audio-msg-track--duration",this._el),this._durationEl.innerHTML=formatTime(this._duration),this._progressSlider=new a.Slider(geByClass1("audio-msg-track--slider",this._el),{value:0,size:0,hintClass:"audio_player_hint",formatHint:function(t){return formatTime(Math.round(t*e._duration))},onEndDragging:function(t){e._impl.seek(t)}});var t=geByClass1("audio-msg-track--wave-wrapper",this._audioEl).children[0];geByClass1("slider_slide",this._el).appendChild(t.cloneNode(!0)),geByClass1("slider_amount",this._el).appendChild(t.cloneNode(!0)),addEvent(this._playBtn,"click",this.onPlayPause),addEvent(this._durationEl,"click",this.onDurationClick),this._audioEl.parentNode.appendChild(this._el)}},{key:"_destroyInterface",value:function(){hide(this._el),this._audioEl.parentNode.removeChild(this._el),removeEvent(this._playBtn,"click",this.onPlayPause),this._progressSlider&&(this._progressSlider.destroy(),this._progressSlider=null),this._playBtn=null,this._durationEl=null,this._el=null}},{key:"attachTo",value:function(e){var t=this;if(this._audioEl!=e){null!=this._audioEl&&(this._reattach=!0),this.detach(),this._audioEl=e,addClass(this._audioEl,"audio-msg-track_player-attached"),this._duration=attr(e,"data-duration"),this._initInterface();var n=this._audioEl.id.split("_");if(n&&n.length>1&&(this._owner_id=n[1]),this._reattach=!1,!this._impl.loaded)return new Promise(function(n,r){t._impl.onReady(function(){t._impl.setUrl(attr(e,i?"data-ogg":"data-mp3"),{duration:t._duration,callback:n})})});this._impl.setUrl(attr(e,i?"data-ogg":"data-mp3"),{duration:this._duration})}return!0}},{key:"detach",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._audioEl&&this._el&&!this._detaching){if(e&&this.isAttached())return;this._detaching=!0,this.stop(),this._destroyInterface(),removeClass(this._audioEl,"audio-msg-track_player-attached"),this._audioEl._listened=!1,this._audioEl=null}this._detaching=!1}},{key:"play",value:function(){this._audioEl&&(this._reattach||e.pauseGlobalMedia(),addClass(this._el,"audio-msg-track_playing"),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_pause")),this._playing=!0,this._createTimer(),this._owner_id&&statlogsValueEvent("audio_message_play",this._owner_id),this._impl.play())}},{key:"pause",value:function(){this._audioEl&&(!this._reattach&&this._playing&&e.resumeGlobalMedia(),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_play")),removeClass(this._el,"audio-msg-track_playing"),this._playing=!1,this._impl.pause(),this._killTimer())}},{key:"stop",value:function(){this.pause(),this._impl.stop()}},{key:"toggle",value:function(){this._playing?this.pause():this.play()}},{key:"_createTimer",value:function(){var e=this;this._duration>0&&(this._killTimer(),this._timer=setInterval(function(){var t=e._impl.getCurrentProgress();e._updateProgress(t)},100))}},{key:"_killTimer",value:function(){this._timer&&(clearInterval(this._timer),this._timer=null)}},{key:"_initEvents",value:function(){var e=this;window.ap?ap.on(this,s.events.PLAY,function(){delete ap.pausedByMsg,e.pause()}):window.audio&&audio.onPlay(function(){delete audio.pausedByMsg,e.pause()}),window.Notifier&&(Notifier.addRecvClbk("audio_start","audio_msg",function(){e.pause()}),Notifier.addRecvClbk("video_start","audio_msg",function(){e.pause()}))}},{key:"isAttached",value:function(){if(this._audioEl){for(var e=this._audioEl;e.parentNode;)e=e.parentNode;return!!e.body}return!1}},{key:"type",get:function(){return this._impl.type}},{key:"durationType",get:function(){return window.AudioPlayer?!!ls.get(AudioPlayer.LS_PREFIX+AudioPlayer.LS_DURATION_TYPE):"1"==lsGet("audio_time_left")},set:function(e){window.AudioPlayer?ls.set(AudioPlayer.LS_PREFIX+AudioPlayer.LS_DURATION_TYPE,!!e):lsSet("audio_time_left",e?"1":"0")}}],[{key:"pauseGlobalMedia",value:function(){window.Notifier&&(c=!0,Notifier.lcSend("video_start")),window.ap&&ap.isPlaying()?(ap.pause(),ap.pausedByMsg=!0):window.audio&&audio.playing&&audio.playing()&&(audio.pause(),audio.pausedByMsg=!0)}},{key:"resumeGlobalMedia",value:function(){window.Notifier&&c&&(c=!1,Notifier.lcSend("video_hide")),window.ap&&ap.pausedByMsg?(ap.play(),delete ap.pausedByMsg):window.audio&&audio.playing&&audio.pausedByMsg&&((0,l.wrapAudioPlay)(audio),delete audio.pausedByMsg)}}]),e}();t.VoiceMessagePlayer=d},sVNd:function(e,t,n){"use strict";var i=n("MjTa"),r=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=window,s=a.preventEvent,l=a.val,u=a.ce,c=a.replaceEntities,d=a.elfocus,A=a.parseLat,f=a.parseCyr,p=a.show,_=a.hide,h=a.extend,m=(a.isEmpty,a.nav),v=a.addEvent,g=a.trim,y=(a.cancelEvent,a.geByClass),w=a.getXY,b=a.domPS,E=a.domNS,k=a.browser,C=function(){var e={UP:38,DOWN:40,RETURN:13,ESC:27},t="MentionContainer_opened",n="Mention_inited",a="Mention_noScroll",C="MentionItem_active",D={},S={},T=!1;function M(){D={ignoredTerm:null,curValue:"",curTerm:"",curPos:"",input:{}},S={container:null,scroll:null,index:{},cache:{},shown:[],lastQ:null,text:null,requestTimer:null,opts:{}}}M();var P=!0;function I(){P=!1}function x(){var e=l(D.input),t=Math.max(e.lastIndexOf("@"),e.lastIndexOf("*")),n=!1;if(t>-1){var i=function(e){if(void 0!==e.selectionStart)return e.selectionStart!==e.selectionEnd?e.selectionEnd:e.selectionStart;if(void 0!==window.getSelection){var t=window.getSelection();if(!t||!t.rangeCount)return 0;var n=t.getRangeAt(0),i=n.cloneRange(),r=u("div");return i.selectNodeContents(e),i.setEnd(n.startContainer,n.startOffset),r.appendChild(i.cloneContents()),l(r).replace(/\n$/,"").length}return 0}(D.input),r=e.substr(0,i);t=Math.max(r.lastIndexOf("@"),r.lastIndexOf("*"));var o=r.match(/(^|[\s.,:\'\"\u00BB\u00AB;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);o&&"."!==o[2].substr(-1)&&(n=o[2])}!1===n&&delete D.ignoredTerm,void 0!==D.ignoredTerm&&n==D.ignoredTerm&&(n=!1),D.curValue=e,D.curTerm=n,D.curPos=t,S.text=n,!1===D.curTerm?B():(U(!1,D.curTerm),L(),function(){var e=ge("mhead").offsetHeight,t=S.container.getBoundingClientRect(),n=D.input.offsetHeight,i=parseInt(getStyle(S.scroll,"maxHeight"),10),r=!1;r=hasClass("Mention_openToBottom",S.container)?t.top-n-i<e:t.bottom-i<e,w(D.input)[1]>=e+i&&(r=!1),toggleClass("Mention_openToBottom",S.container,r),toggleClass("Mention_openToBottom",S.opts.appendTo,r)}())}function O(e){D.input=e}function L(){Y(),document.addEventListener("click",N,!0),addClass(t,S.opts.appendTo),p(S.container),function(){if(!T){var e=k.ipad?"touchend":"click";T=!0,v(window,e,B),v(window,"touchmove",I),m.onBeforeGo(B)}}()}function B(e){!k.ipad||P?e&&e.target&&gpeByClass(n,e.target)&&!gpeByClass("uMailWrite__button",e.target)&&!hasClass("uMailWrite__button",e.target)||hasClass(t,S.opts.appendTo)&&(removeClass(t,S.opts.appendTo),_(S.container),function(){if(T){var e=k.ipad?"touchend":"click";removeEvent(window,e,B),removeEvent(window,"touchmove",I),m.onBeforeGo.off(B),T=!1}}()):P=!0}function N(e){var t=e.target;t&&!gpeByClass(n,t)&&(e.preventDefault(),e.stopImmediatePropagation(),B()),document.removeEventListener("click",N,!0)}function R(){var e,t,n=S.opts.defaultItems,i=S.opts.items,r=[];for(e=0,t=n.length;e<t;++e)r.push(e);for(S.cache[""]=r,e=0,t=i.length;e<t;++e)F(e,i[e])}function F(e,t){var n,i,r,o="",a=S.opts.searchKeys,s={};for(n=0,r=a.length;n<r;++n)o+=" "+(t[a[n]]||"").replace(S.opts.delimeter," ").replace(/<[^>]*>/g,"");for(o+=(A(o)||"")+(f(o)||""),o=g(o.toLowerCase()).split(/\s+/),n=0;n<o.length;n++)for(i=1;i<=S.opts.wholeIndex;i++){var l=o[n].substr(0,i);s[l]||(S.index[l]||(S.index[l]=[]),S.index[l].push(e),s[l]=1)}}function j(){var e=g(S.text);e&&ajax.post(S.opts.url,h({str:e,mobile:1},S.opts.params||{}),{onDone:function(t){S.cache[e]=H(e).concat(t),V(S.cache[e],!0)}})}function H(e){if(!(e=g(e.toLowerCase().replace(S.opts.delimeter," "))))return S.cache[""];var t=S.opts.wholeIndex;if(e.length<=t&&-1===e.indexOf(" "))return S.index[e]||[];var n,i,r=0,o="";for(n=0,i=(e=e.split(" ")).length;n<i;++n){var a=e[n].substr(0,t),s=S.index[a];if((!o||!s||s.length<r)&&(r=s?s.length:0,o=a),!r)return[]}var l=[],u=S.opts.searchKeys,c=u.length,d=e.length;for(n=0,i=S.index[o].length;n<i;++n){for(var p=S.index[o][n],_=S.opts.items[p],h=!1,m="",v=0;v<c;++v)m+=" "+(_[u[v]]||"").replace(S.opts.delimeter," ").replace(/<[^>]*>/g,"");m=(m+=(A(m)||"")+(f(m)||"")).toLowerCase();for(var y=0;y<d;++y)if(-1===m.indexOf(" "+e[y])){h=!0;break}h||l.push(p)}return l}function U(e,t){if(S.cache[""])if(t=void 0!==t?t:g(S.text),S.lastQ!==t||e){S.lastQ=t,clearTimeout(S.requestTimer);var n=S.cache[t];n?V(n,!0):(V(n=H(t),!S.opts.url),S.opts.url&&(S.requestTimer=setTimeout(j,S.opts.requestWait)))}else L()}function V(e,t){var n=[];S.shown=[];for(var r=e.slice(0,S.opts.maxItems),o=0,c=r.length;o<c;++o){var d=r[o];isArray(d)||(d=S.opts.items[d]),S.shown[d[0]]||(S.shown[d[0]]=d,n.push(z(d)))}S.container&&S.opts.appendTo.contains(S.container)||(S.container=u("div"),addClass("Mention",S.container),S.scroll=u("div"),addClass("ScrollView Mention__scroll",S.scroll),(0,i.setScrollView)(S.scroll,{topBanner:!1}),S.opts.appendTo.appendChild(S.container),S.container.appendChild(S.scroll),v(S.scroll,"touchmove",function(e){hasClass(a,S.scroll)&&s(e)})),toggleClass("Mention_empty",S.container,!n.length),l(S.scroll,n.join("")),S.scroll.scrollTop=0,q(),setTimeout(function(){toggleClass(a,S.scroll,!function(){if(!k.ios&&!k.ipad)return!0;if(S.scroll.scrollHeight>S.scroll.offsetHeight)return!0;return!1}())},0)}function z(e){var t=o(e,4),n=t[0],i=t[1],r=t[2],a=t[3];return'<div class="MentionItem" onclick="Mention.onSelect(\''.concat(n,'\');" onmouseover="Mention.onItemHover(this);">\n              <div class="MentionItem__cell">\n                <img src="').concat(a,'" class="MentionItem__img"/>\n              </div>\n              <div class="MentionItem__cell MentionItem__cell_name">\n                <div class="MentionItem__name">').concat(i,'</div>\n                <div class="MentionItem__tag">').concat(r,"</div>\n              </div>\n            </div>")}function $(){var e=geByClass1(C,S.container),t=e.offsetTop;S.scroll.scrollTop=t-e.offsetHeight-parseInt(getStyle(S.scroll,"paddingTop"),10)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=y("MentionItem",S.container);if(t.length){var n=t.find(function(e){return hasClass(C,e)});e?(removeClass(C,n),addClass(C,e)):n||addClass(C,t[0])}}function W(e,t){setTimeout(function(){O(t),x()},0)}var Y=(0,r.default)();return{onKeyUp:function(t,n){t.keyCode!==e.UP&&t.keyCode!==e.DOWN&&(U(!0),O(n),x())},onKeyDown:function(n,i){hasClass(t,S.opts.appendTo)&&(n.keyCode===e.UP?(function(){var e=geByClass1(C,S.container);if(e){var t=b(e);t&&(q(t),$())}else q(),$()}(),n.preventDefault()):n.keyCode===e.DOWN?(function(){var e=geByClass1(C,S.container);if(e){var t=E(e);t&&(q(t),$())}else q(),$()}(),n.preventDefault()):n.keyCode===e.RETURN?function(){var e=geByClass1(C,S.container);return!!e&&(e.click(),!0)}()&&n.preventDefault():n.keyCode===e.ESC&&(B(),n.preventDefault()))},onFocus:W,onClick:W,onSelect:function(e){var t=S.shown[e];t&&function(e){if(!e)return!1;var t,n=e[2].replace("@",""),i=D.curValue.substr(0,D.curPos),r=D.curValue.substr(D.curPos),o=!!i.match(/\#[\w_\.\u0400-\u04FF]+$/i);S.opts.preferDomain&&e[9]&&(o=!0),o||(t=c(e[8]||e[1]));var a=new RegExp("^(@|\\*)"+escapeRE(D.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");r=r.replace(a,function(e,i,r){var a=i+n+" ";return o||(a+="("+t.replace(/[\(\)\]\[]/g,"")+") "),a}),o||!i||i.match(/[\.\(\)\?\!\s\n\r\'\"\u00BB\u00AB \u00A0]$/)||(r=" "+r),B(),l(D.input,i+r),d(D.input),S.opts.afterInsert&&S.opts.afterInsert(D.input)}(t),B()},onItemHover:function(e){q(e)},onOpen:Y,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M(),S.opts=h({appendTo:document.body,url:"hints",params:{act:"a_json_friends",from:"composer"},delimeter:/[\s\(\)\.,\-]+/g,requestWait:300,wholeIndex:2,maxItems:51,searchKeys:[1,4],preferDomain:!1,defaultItems:[],items:[],afterInsert:function(){}},e),addClass("Mention_inited",S.opts.appendTo),S.scroll&&removeClass(a,S.scroll),R()},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.opts=h(S.opts,e),R(),U(!0)}}}();window.Mention=C},sWID:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getAppropriateImage=function(e,t,n){var i=[];if(a(e,function(e,t){n&&-1==["w","z","y","x","m","s"].indexOf(e)||i.push(t)}),!i.length)return[!1];i.sort(function(e,t){return e[1]-t[1]}),t*=window.devicePixelRatio>=2?2:1;var r=i[i.length-1];return a(i,function(e,n){if(n[1]>=t)return r=n,!1}),r},t.preloadImage=function(e,t){if(!0===s[e])return t&&t(),!0;if(isArray(s[e]))return s[e].push(t),!1;s[e]=[t];var n=new Image;return n.onload=function(){var t=s[e];s[e]=!0,a(t,function(e,t){t&&t()})},n.src=e,!1},t.mailruStatsPixel=function(e,t){if(isObject(t)&&!isEmpty(t)){var n="https://vk-callback.go.mail.ru/longread_pxl?action=".concat(e);a(t,function(e,t){n+="&".concat(e,"=").concat(t)});var i=new Image;i.src=n}},t.getUrlParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},t.changeHeightInstagramEmbed=function(e){if(!/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(e.origin))return;var t=function(e){for(var t,n=document.getElementsByTagName("iframe"),i=n.length-1;i>=0;i--){var r=n[i];if(r.contentWindow===e.source){t=r;break}}return t}(e);if(!t)return;try{e=JSON.parse(e.data)}catch(e){}if("object"!=i(e)||"string"!=typeof e.type||"object"!=i(e.details))return;setTimeout(function(){if("MEASURE"===e.type){var n=e.details.height;t.setAttribute("height",n)}},100)},t.ArticleStatsEvents=t.ObjectResizeType=t.ResizableObjectTypes=t.ParagraphType=void 0;var r={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectPodcast:104,ObjectAudio:105,ObjectTwitter:106,ObjectFacebook:107,ObjectInstagram:108,ObjectVK:109,ObjectTelegram:110,ObjectPoll:111};t.ParagraphType=r;var o=[r.ObjectPhoto,r.ObjectGIF,r.ObjectVideo,r.ObjectTwitter,r.ObjectFacebook,r.ObjectInstagram,r.ObjectVK,r.ObjectTelegram];t.ResizableObjectTypes=o;t.ObjectResizeType={Normal:0,Float:1,Medium:2,Large:3};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t.call(e[n],n,e[n]))break;return e}t.ArticleStatsEvents={clickOnVideo:"click_on_video",clickOnAudio:"click_on_audio",clickOnPhoto:"click_on_photo",clickOnExternalLink:"external_link_click",clickOnCarouselNext:"click_on_carousel_next",clickOnCarouselPrev:"click_on_carousel_prev",clickOnMentions:"click_on_mentions",nightModeOn:"night_mod_on",nightModeOff:"night_mod_off",close:"close"};var s={}},sXAB:function(e,t,n){"use strict";var i=n("UxAg"),r=need("ajax"),o=need("onDOMReady"),a=need("onBodyResize");window.CookiePolicy={},o(l),CookiePolicy._onHideClick=c;var s={body:"body",fixedHeader:"._hfixed",cookiePolicy:".CookiePolicy"};function l(){(0,i.$)(s.cookiePolicy)&&(u(),a(u))}function u(){if((0,i.$)(s.fixedHeader)){var e=(0,i.$)(s.body),t=(0,i.$)(s.cookiePolicy).offsetHeight,n=parseInt(getComputedStyle(e).paddingBottom,10);e.style.paddingBottom="".concat(n+t+7,"px")}}function c(e,t){e.preventDefault();var n=t.getAttribute("href");t.closest(s.cookiePolicy).style.display="none",a("__clear",u),r.post(n,{_ajax:1})}},sXaZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("z9sQ"));var r=function(e){var t=e.style||[],n=e.class||e.mix,r=e.prefix,o=e.postfix,a=function(e){var t=[];isArray(e.on_key_down)?(e.on_key_down.push("event"),t=e.on_key_down):e.on_key_down&&(t=[e.on_key_down,"event"]);return{class:"TextInput__native",id:e.id,tag:"input",type:e.type,name:e.name,value:e.value,spellcheck:e.spellcheck+"",placeholder:e.placeholder,autocapitalize:!1===e.autocapitalize?"off":null,autocomplete:!1===e.autocomplete?"off":null,tabindex:e.tabindex,readonly:e.readonly,disabled:e.disabled,oninput:e.on_change,onkeydown:t,onblur:e.onblur,onfocus:e.onfocus,maxlength:e.maxlength}}(e);return{class:[i.default.class("TextInput",{style_stretch:t.stretch,prefixed:!!r,hidden:"hidden"===e.type,error:t.error}),n],tag:"label",onclick:e.on_click,inner:r||o?[r?{class:i.default.class("TextInput__prefix",{rightPadding:r.with_right_padding,gray:r.gray}),inner:r.text}:null,{class:"TextInput__nativeWrap",inner:a},o?{class:"TextInput__postfix",inner:o.text}:null]:a}};t.default=r},sZWN:function(e,t,n){"use strict";var i,r,o,a,s,l=n("OcsD"),u=".basis__header",c="basis__header_noshadow",d="basis__header_noshadowAnim",A="basis__header_noTransition",f="basis__header_hidden",p="BottomMenu__updateButton_offset",_=5,h=20,m=200,v=!1,g=(0,l.scrollTop)(),y=56,w=!1,b=!1,E=[];function k(){if(v&&(clearInterval(s),(0,l.onBodyScroll)("__clear",r),removeEvent(window,"touchend",o),E.forEach(function(e){removeEvent(e,"blur",o)}),v=!1),!v){i=D(),y=parseInt((0,l.getStyle)(i,"height"),10),g=(0,l.scrollTop)();var e=$(".BottomMenu__updateButton");i&&(i.classList.add(A),i.classList.remove(f),e&&e.classList.remove(p)),C(i,(0,l.scrollTop)()),r=function(){w=!0},o=function(){clearInterval(a),a=setTimeout(function(){var t=(0,l.ge)("mcont");if(t){var n=Math.max(t.scrollHeight,parseInt((0,l.getStyle)(t,"height"),10));window.innerHeight>n&&n&&(i.classList.remove(f),e&&e.classList.remove(p))}},100)},setTimeout(function(){w=!1},0),setTimeout(function(){i&&i.classList.remove(A)},200),v||(s=setInterval(function(){w&&(function(){var e=(0,l.scrollTop)();if(i){C(i,e);var t=(0,l.ge)("mcont");if(t){var n=$(".BottomMenu__updateButton"),r=Math.max(t.scrollHeight,parseInt((0,l.getStyle)(t,"height"),10));if(b&&e)return;if(Math.abs(g-e)<=y)return;e>g+h&&e>y?(i.classList.add(f),n&&n.classList.add(p),b=!0,setTimeout(function(){b=!1},m)):e+window.innerHeight<r&&(i.classList.remove(f),n&&n.classList.remove(p))}g=e}}(),w=!1)},250),(0,l.onBodyScroll)(r),addEvent(window,"touchend",o),(E=Array.from($$("input, textarea")||[])).forEach(function(e){addEvent(e,"blur",o)}),v=!0)}}function C(e,t){t<=_&&e&&e.classList.contains(c)?e.classList.add(d):e&&e.classList.remove(d)}function D(){return $(u)}function S(){(i=D())&&(i.classList.remove(f),C(i,(0,l.scrollTop)()))}onDOMReady(function(){k(),window.page.onChange(k),onBodyResize(S),addEvent(window,"orientationchange",S),addEvent(window,"blur",S)})},saGk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=window.isMVK?"mvk":"web",r={start:function(e,t){var n=this;if(t.stopPropagation(),t.preventDefault(),this.id=window.domData(e,"id"),this.id&&(window.statlogsValueEvent("special_event","click",i,this.id),!this.timeoutHandle)){var r=Number(window.domData(e,"v"))||0;this.duration||(this.duration=Number(window.domData(e,"duration"))||0),this.duration&&(!this.animationData||!this.animationData.v||"number"==typeof this.v&&this.v!==r?(this.v=r,this._getAnimation().then(function(e){return n.animationData=JSON.parse(e),n._loadBodymovin()}).then(function(){return n._play()})):this._play())}},_getAnimation:function(){var e=this;return new Promise(function(t){var n=new XMLHttpRequest;n.open("GET","/images/stickers/special/".concat(e.id,"/animation.json?v=").concat(e.v),!0),n.send(),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)}})},_play:function(){var e=this;if(window.bodymovin){this.frame||(this.frame=document.createElement("div"),this.frame.className="special_event_frame",document.body.appendChild(this.frame)),this.frame.style.display="block";var t=window.bodymovin.loadAnimation({container:this.frame,renderer:"svg",loop:!0,autoplay:!0,animationData:this.animationData});this.timeoutHandle=setTimeout(function(){t.stop(),t.destroy(),e.frame.style.display="none",e.timeoutHandle=null,window.statlogsValueEvent("special_event","showed",i,e.id)},this.duration)}},_loadBodymovin:function(){return new Promise(function(e){if(window.bodymovin)e();else if(window.isMVK){var t=document.createElement("script");t.src="/js/cmodules/web/bodymovin.js",t.onload=function(){return e()},document.head.appendChild(t)}else stManager.add([jsc("web/bodymovin.js")],e)})}};t.default=r},sc7o:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+cqQ"));window.uVK={onReady:(0,i.default)(),onResize:(0,i.default)(),onOrientationChange:(0,i.default)()},onDOMReady(function(){if(window.isNewMail&&document.body){uVK.onReady();var e=document.body.getAttribute("onresize"),t=document.body.getAttribute("onorientationchange");document.body.setAttribute("onresize","uVK.onResize(); ".concat(e)),document.body.setAttribute("onorientationchange","uVK.onOrientationChange(); ".concat(t))}})},sdz3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onOpen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(y)return;if(b=!1,y=!0,r=!1,a=0,s=0,u=0,c=0,E={},void 0,A="start",f=0,k=0,"top"!==(w=e)&&"bottom"!==w)return void document.body.classList.add("ScrollViewsDisabled");window.removeEventListener("resize",S),I()<h&&x(0);var t=document.body;l=t.offsetHeight,t.offsetWidth,(i.default.ipad||(i.default.iphone||i.default.ipod)&&i.default.ios>=8)&&(window.addEventListener("scroll",C),"top"===w&&O()||(M(),T()),"bottom"===w&&i.default.ipad&&requestAnimationFrame(function(){T(),requestAnimationFrame(function(){T()})}))},t.onClose=function(){if(!y)return;"top"===w||"bottom"===w?(o&&clearTimeout(o),window.removeEventListener("resize",S),window.removeEventListener("scroll",C),window.removeEventListener("scroll",D)):document.body.classList.remove("ScrollViewsDisabled");b=!1,w="",y=!1,r=!1,l=0,0},t.isKeyboardOpen=function(){return y},t.adjustBottom=function(){if("bottom"!==w)return;(i.default.ipad||i.default.wkwebview)&&(x(0),T(l))},t.getPosition=function(){return w};var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var r,o,a,s,l,u,c,d,A,f,p=45,_=85,h=200,m=60,v=0,g=0,y=!1,w="",b=!1,E={},k=0;function C(){if(M(),"top"!==w){if("bottom"===w){var e=pageYOffset,t=I();if(r)if(r=!1,t?P(t):l,e===u)return;i.default.wkwebview?c<=5&&T():e>h?e>t?(x(e),i.default.safari&&!i.default.wkwebview&&T()):e<t?E[e]||e>P(t)?(E[e]=!0,T(l)):T():e!==P(t)&&T():t||(e<m?(a===e?s++:(a=e,s=1),s>=3&&(window.removeEventListener("scroll",C),x(a)),setTimeout(function(){T()},300)):T())}}else{if(O())return;if(i.default.wkwebview)return void(0!==pageYOffset&&T(0));var n=innerHeight;if("start"===A&&(n<l?A="animate":T(1)),"animate"===A)if(f=l-n,k||(k=Math.max(1,Math.min(4,Math.floor(f/10)))),f<=0)A="stop";else{var o=i.default.ipad?i.default.version<11?3:2:1;T(Math.min(f,k)*o)}"stop"===A&&T(1)}}function D(){M()}function S(){d&&clearTimeout(d),window.removeEventListener("scroll",C),d=setTimeout(function(){document.activeElement.blur()},100)}function T(e){r=!0;var t,n=I();"bottom"===w?t=e||(n&&!i.default.wkwebview?P(n):l):"top"===w&&(t=isFinite(e)?e:1),c++,u=t,window.scrollTo(0,t)}function M(){o&&clearTimeout(o),b||(o=setTimeout(function(){b=!0,o=null,window.removeEventListener("scroll",C),window.removeEventListener("scroll",D),window.addEventListener("resize",S)},500))}function P(e){if(i.default.ipad)return e;if(!i.default.ipad&&!i.default.wkwebview){if(90===Math.abs(window.orientation)&&screen.width>=375)return e;375===screen.width&&812===screen.height&&3===window.devicePixelRatio?e-=_:e-=p}return e}function I(){return 90===Math.abs(window.orientation)?v:g}function x(e){90===Math.abs(window.orientation)?v=e:g=e}function O(){return 90===Math.abs(window.orientation)&&!i.default.ipad}},si31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickersSettings=void 0;var i={autoplay:0,setAutoplay:function(e){this.autoplay=e},getAutoplay:function(){return i.autoplay}};t.StickersSettings=i},t7Ww:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalMenuBtn=function(e){var t=e.class?" ".concat(e.class):"";return(0,r.default)({url:e.url,class:"ModalMenu__btn ModalMenu__item".concat(t),theme:e.theme?e.theme:"none",size:e.size?e.size:"",inner:e.inner,on_click:e.onclick,use_native_onclick:!0,attrs:e.attrs})},t.default=void 0;var i=o(n("r/ag")),r=o(n("29dZ"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.attached?"ModalMenu--attached":"",n=window.lang,o=[];if(e.body&&o.push({class:"ModalMenu__body",inner:e.body}),isArray(e.items)){var a=e.items.map(function(e){return e});o.push(a)}return e.close&&o.push((0,r.default)({class:"ModalMenu__btn ModalMenu__cancel",theme:"secondary",size:"large",inner:e.closeText?e.closeText:n.mobile_cancel,on_click:["ModalMenu.close","this"],use_native_onclick:!0})),(0,i.default)({class:"ModalMenu ".concat(e.class," ").concat(t),on_overlay_click_native:e.on_overlay_click?e.on_overlay_click:["ModalMenu.close","this"],content:o})};t.default=a},t7n3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vkLocal=l,t.lTimeout=function(e,t){return setTimeout(l(e),t)},t.intval=u,t.floatval=function(e){if(!0===e)return 1;return parseFloat(e)||0},t.positive=function(e){return(e=u(e))<0?0:e},t.isNumeric=function(e){return!isNaN(e)},t.winToUtf=function(e){return e.replace(/&#(\d\d+);/g,function(e,t){return(t=u(t))>=32?String.fromCharCode(t):e}).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")},t.clean=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},t.unclean=function(e){return(0,a.replaceEntities)(e.replace(/\t/g,"\n"))},t.indexOf=c,t.inArray=function(e,t){return-1!==c(t,e)},t.clone=function e(t,n){var i=(0,a.isObject)(t)||void 0===t.length?{}:[];for(var r in t)(!/webkit/i.test(_ua)||"layerX"!=r&&"layerY"!=r&&"webkitMovementX"!=r&&"webkitMovementY"!=r)&&(n&&"object"===s(t[r])&&"prototype"!==r&&null!==t[r]?i[r]=e(t[r]):i[r]=t[r]);return i},t.arrayKeyDiff=function(e){var t={},n=arguments.length,i=arguments;for(var r in e)if(e.hasOwnProperty(r)){for(var o=!1,a=1;a<n;a++)i[a][r]&&i[a][r]===e[r]&&(o=!0);o||(t[r]=e[r])}return t},t.extend=d,t.addTemplates=function(e){window.templates=window.templates||{},d(window.templates,e)},t.getTemplate=function(e,t){var n=(window.templates=window.templates||{})[e];"function"==typeof n&&(n=n());if(n&&t)return(0,i.rs)(n,t);return n||""},t.serializeForm=function(e){if("object"!==s(e))return!1;var t={},n=function(t){return(0,i.geByTag)(t,e)},r=function(n,r){if(r.name)if("text"!==r.type&&r.type)if(r.getAttribute("bool")){var a=(0,i.val)(r);if(!a||"0"===a)return;t[r.name]=1}else t[r.name]=o.browser.msie&&!r.value&&e[r.name]?e[r.name].value:r.value;else t[r.name]=(0,i.val)(r)};return(0,a.each)(n("input"),function(e,t){if("radio"!==t.type&&"checkbox"!==t.type||t.checked)return r(e,t)}),(0,a.each)(n("select"),r),(0,a.each)(n("textarea"),r),t},t.extractUrls=function(e,t){var n,i=t?/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i:/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i,r=[];for(;e&&(n=e.match(i));){e=e.substr(n.index+n[0].length);var o=0;n[4]||(o=7),r.push({url:n[2+o],query:n[5+o]||"",domain:n[4+o]})}return r},t.getCaretCharacterOffsetWithin=function(e){if(!e)return[0,0];var t=0,n=0,i=e.ownerDocument||e.document,r=i.defaultView||i.parentWindow;if(r.getSelection().rangeCount>0){var o=r.getSelection().getRangeAt(0),a=o.cloneRange();a.selectNodeContents(e),a.setEnd(o.startContainer,o.startOffset),t=a.toString().length,a.setEnd(o.endContainer,o.endOffset),n=a.toString().length}return[t,n]},t.formatCount=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=n.kLimit||1e3;var o=n.mLimit||1e6;if(t>=o&&!n.noCheck)return t=(t=u(t/1e5))>1e3?u(t/10):t/10,e(t,d(n,{noCheck:!0}),!0)+"M";if(t>=i&&!n.noCheck)return t=(t=u(t/100))>100?u(t/10):t/10,e(t,d(n,{noCheck:!0}),!0)+"K";return(0,r.langNumeric)(t,"%s",!0).replace(/,/g,".")},t.initUtilsCommon=function(){window.PageID=window.PageID||1},Object.defineProperty(t,"rand",{enumerable:!0,get:function(){return a.rand}}),Object.defineProperty(t,"replaceEntities",{enumerable:!0,get:function(){return a.replaceEntities}}),Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return a.isArray}}),Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return a.isEmpty}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return a.isFunction}}),Object.defineProperty(t,"isHttpHref",{enumerable:!0,get:function(){return a.isHttpHref}}),Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return a.isObject}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return a.isString}}),Object.defineProperty(t,"isUndefined",{enumerable:!0,get:function(){return a.isUndefined}}),Object.defineProperty(t,"irand",{enumerable:!0,get:function(){return a.irand}}),Object.defineProperty(t,"escapeAttr",{enumerable:!0,get:function(){return a.escapeAttr}}),Object.defineProperty(t,"escapeRE",{enumerable:!0,get:function(){return a.escapeRE}}),Object.defineProperty(t,"escapeStr",{enumerable:!0,get:function(){return a.escapeStr}}),Object.defineProperty(t,"each",{enumerable:!0,get:function(){return a.each}}),Object.defineProperty(t,"htsc",{enumerable:!0,get:function(){return a.htsc}}),Object.defineProperty(t,"copy",{enumerable:!0,get:function(){return a.copy}}),Object.defineProperty(t,"vkNow",{enumerable:!0,get:function(){return a.vkNow}}),Object.defineProperty(t,"locBase",{enumerable:!0,get:function(){return a.locBase}}),Object.defineProperty(t,"unescapeAttr",{enumerable:!0,get:function(){return a.unescapeAttr}}),Object.defineProperty(t,"utf2win",{enumerable:!0,get:function(){return a.utf2win}}),Object.defineProperty(t,"srand",{enumerable:!0,get:function(){return a.srand}}),Object.defineProperty(t,"stripTags",{enumerable:!0,get:function(){return a.stripTags}}),t.decodeHtml=t.encodeHtml=t.isRetina=t.stripHTML=t.trim=t.vkImage=void 0;var i=n("zxIV"),r=n("4+be"),o=n("gdug"),a=n("jE6c");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){var t=PageID;return function(){t===PageID&&e.apply(this,arguments)}}t.vkImage=function(){return window.Image?new Image:(0,i.ce)("img")};t.trim=function(e){return(e||"").replace(/^\s+|\s+$/g,"")};function u(e){return!0===e?1:parseInt(e)||0}function c(e,t,n){for(var i=n||0,r=(e||[]).length;i<r;i++)if(e[i]==t)return i;return-1}function d(){var e=arguments,t=e.length,n=e[0]||{},i=1,r=!1;for("boolean"==typeof n&&(r=n,n=e[1]||{},i=2),"object"===s(n)||(0,a.isFunction)(n)||(n={});i<t;i++){var o=e[i];if(null!=o)for(var l in o)if(o.hasOwnProperty(l)){var u=n[l],c=o[l];n!==c&&(r&&c&&"object"===s(c)&&!c.nodeType?n[l]=d(r,u||(null!=c.length?[]:{}),c):void 0!==c&&(n[l]=c))}}return n}t.stripHTML=function(e){return e?e.replace(/<(?:.|\s)*?>/g,""):""};t.isRetina=function(){return window.devicePixelRatio>=2};var A=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(function(){var e=null;return[function(t){return e||(e=(0,i.se)("<span> </span>")),e.innerText=t,e.innerHTML},function(t){return e||(e=(0,i.se)("<span> </span>")),e.innerHTML=t.replace(/<br\s*\/?>/gim,"\n"),e.innerText}]}(),2),f=A[0],p=A[1];t.decodeHtml=p,t.encodeHtml=f},tMHi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audioUnmaskSource=function(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){var t,n,i=e.split("?extra=")[1].split("#"),a=""===i[1]?"":o(i[1]);if(i=o(i[0]),"string"!=typeof a||!i)return e;for(var s=(a=a?a.split(String.fromCharCode(9)):[]).length;s--;){if(n=a[s].split(String.fromCharCode(11)),t=n.splice(0,1,i)[0],!r[t])return e;i=r[t].apply(null,n)}if(i&&"http"===i.substr(0,4))return i}return e};var i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",r={v:function(e){return e.split("").reverse().join("")},r:function(e,t){var n;e=e.split("");for(var r=i+i,o=e.length;o--;)~(n=r.indexOf(e[o]))&&(e[o]=r.substr(n-t,1));return e.join("")},s:function(e,t){var n=e.length;if(n){var i=function(e,t){var n=e.length,i=[];if(n){var r=n;for(t=Math.abs(t);r--;)t=(n*(r+1)^t+r)%n,i[r]=t}return i}(e,t),r=0;for(e=e.split("");++r<n;)e[r]=e.splice(i[n-1-r],1,e[r])[0];e=e.join("")}return e},i:function(e,t){return r.s(e,t^vk.id)},x:function(e,t){var n=[];return t=t.charCodeAt(0),each(e.split(""),function(e,i){n.push(String.fromCharCode(i.charCodeAt(0)^t))}),n.join("")}};function o(e){if(!e||e.length%4==1)return!1;for(var t,n,r=0,o=0,a="";n=e.charAt(o++);)~(n=i.indexOf(n))&&(t=r%4?64*t+n:n,r++%4)&&(a+=String.fromCharCode(255&t>>(-2*r&6)));return a}},ti65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Msg__restoreInner=I,t.Msg__reply=L,t.Msg__authorName=H,t.Msg__replyAttach=F,t.Msg__replyLink=j,t.Msg__textPreview=B,t.Msg__attachPreview=N,t.Msg__gifWrapper=function(e,t){return i.default.html(A(),t,e)},t.Msg_makeReplyLink=x,t.Msg_detailed=function(e){var t=M(e);return i.default.html(b(),t)},t.default=void 0;var i=u(n("bZ/P")),r=u(n("9y81")),o=u(n("KMpi")),a=u(n("u33z")),s=u(n("BoyB")),l=n("fdw3");function u(e){return e&&e.__esModule?e:{default:e}}function c(){var e=S(['\n    <a class="msg__sticker"\n      href="','"\n      ','\n      data-sticker-id="','"\n      data-uniq-id="','"\n      data-loop-count="3"\n      data-animation-path="','"\n      style="width: ',"px; height: ",'px;"\n    >\n      <img class="msg__stickerImg sticker_img" height="','" src="','">\n    </a>\n  ']);return c=function(){return e},e}function d(){var e=S(['\n    <div class="msg__stickerWrap">\n      ',"\n    </div>\n  "]);return d=function(){return e},e}function A(){var e=S(['\n    <div class="msg__gifWrapper">\n      <div style="padding-top: ','%;"></div>\n      <div class="msg__gifWrapperCont">',"</div>\n    </div>\n  "]);return A=function(){return e},e}function f(){var e=S(['\n    <a href="','" class="msg__replyLink" ',">\n      ","\n    </a>\n  "]);return f=function(){return e},e}function p(){var e=S(['\n    <div class="msg__replyAttach">',"</div>\n  "]);return p=function(){return e},e}function _(){var e=S(['\n    <div class="msg__bodyPreview">\n      ',"\n      ","\n    </div>\n  "]);return _=function(){return e},e}function h(){var e=S(['\n    <div class="msg__reply">\n      ','\n      <div class="msg__replyInner">\n        <div class="msg__replyHead">\n          <div class="msg__replyHeadRow">\n            <div class="msg__replyName">','</div>\n            <div class="msg__replyDate">','</div>\n          </div>\n        </div>\n        <div class="msg__replyBody">\n          ',"\n        </div>\n      </div>\n    </div>\n  "]);return h=function(){return e},e}function m(){var e=S(['\n    <div class="msg__info msg__restoreText msg__restoreText_remove">\n      ','\n      <span class="msg__restoreText msg__infoLink" ',">\n        ",'\n      </span>\n    </div>\n    <div class="msg__info msg__restoreText msg__restoreText_spam">\n      ','\n      <span class="msg__restoreText msg__infoLink" ',">\n        ","\n      </span>\n    </div>\n  "]);return m=function(){return e},e}function v(){var e=S(['\n    <span class="msg__edited">\n      <span class="msg__editedMiddot">&middot;</span><span class="msg__editedText">',"</span>\n    </span>\n  "]);return v=function(){return e},e}function g(){var e=S(['\n    <div class="msg__admin">\n      (<a class="msg__adminLink" href="','">',"</a>)\n    </div>\n  "]);return g=function(){return e},e}function y(){var e=S(['\n    <div class="msg__actions">\n      ',"\n    </div>\n  "]);return y=function(){return e},e}function w(){var e=S(['\n    <div class="msg_item','">\n      <div class="mi_header">\n        ','\n        <a class="msg__author" href="','">','</a>\n        <div class="msg__date">',"</div>\n        ","\n      </div>\n      ","\n      ","\n      ","\n      ","\n    </div>\n  "]);return w=function(){return e},e}function b(){var e=S(['\n    <div class="msg__content">\n      <div class="msg__text">\n        ',"\n      </div>\n    </div>\n  "]);return b=function(){return e},e}function E(){var e=S(['\n    <div class="msg_item _msg single_msg_item msg__text">\n      <div class="msg__giftMedia">',"</div>\n      ","\n    </div>\n  "]);return E=function(){return e},e}function k(){var e=S(['\n    <div class="msg_item _msg single_msg_item msg__text">\n      <div class="mi_cont">\n        <div class="mi_body">\n          ',"\n          ","\n          ","\n          ","\n        </div>\n      </div>\n    </div>\n  "]);return k=function(){return e},e}function C(){var e=S(["\n    ",'\n    <div class="msg__content">\n      <div class="msg__head">\n        <a class="msg__author" href="','">',"</a>\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n      </div>\n      ",'\n      <div class="msg__text">\n        ','\n      </div>\n    </div>\n    <div class="msg__restore">\n      ',"\n    </div>\n  "]);return C=function(){return e},e}function D(){var e=S(['\n    <div class="','" ',">\n      ","\n    </div>\n  "]);return D=function(){return e},e}function S(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=function(e){var t=e.id,n=e.removed,s=e.service,l=function(e){var t=window.lang;if(e.service)return e.text;var n,s=(0,o.default)({mix:"msg__avatar",url:e.authorUrl,photos:[e.authorPhoto],size:40}),l=(0,r.default)({mix:"msg__check",icon:"check"}),u=(0,r.default)({mix:"msg__star",icon:"star",blue:!0}),c=!!e.attaches.gift,d=store.mail.msgs[e.id];d&&d.authorId===d.peerId&&(n=store.mail.peers[d.peerId]);var A,f=e.admin?function(e){return i.default.html(g(),e.url,e.name)}(e.admin):"",p=e.removed?I(e.id):"",_=e.edited?P():"",h=e.pending||e.failed?"":'<div class="msg__date">'.concat(e.date,"</div>"),m=e.pending?'<div class="msg__pending"></div>':"",v=e.failed?'<div class="msg__error">'.concat(t.mobile_mail_send_error,"</div>"):"",w=e.channel?function(e){var t=(0,a.default)({class:"msg__actionForward",onClick:i.default.onClick("Msg._onActionClick","event","forward",e)});return i.default.html(y(),t)}(e.id):"",b=c&&n?'<div class="msg__giftHead">'.concat(langSex(n.sex,t.mobile_mail_sent_gift),"</div>"):"";A=c?function(e){var t=e.text,n=e.attachesHTML;t&&(t='<div class="msg__giftText">'.concat(t,"</div>"));return i.default.html(E(),n,t)}(e):M(e);return i.default.html(C(),s,e.authorUrl,e.authorName,b,h,m,v,_,f,l,u,w,A,p)}(e),u=!s&&!(!e.attaches||!e.attaches.gift),c=i.default.class("msg",{id:t,service:s,unread:e.unread&&!e.failed,important:e.important,removed:!!n,spam:"spam"===n,pending:e.pending,failed:e.failed,gift:u}),d="";s||(d=e.pending||e.failed?i.default.onClick("Msg._onPendingClick","event","this",t,e.sendId||"",!!e.failed):i.default.onClick("Msg._onClick","event","this",t));return i.default.html(D(),c,d,l)};function M(e){var t,n=window.lang,r=e.text,a=0;e.attachesHTML?t=e.attachesHTML:e.attaches.sticker&&e.sticker?t=function(e){return i.default.html(d(),e)}(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=Date.now(),u=Math.random(),d="".concat(l).concat(u),A=i.default.onClick("Msg._onStickerClick","event","this",o,r);return i.default.html(c(),a,A,e,d,s,t,t,t,n)}(e.sticker.id,e.sticker.height,e.sticker.url)):V(e)&&Object.keys(e.attaches).length&&(a+=1,t=R(N(e),!e.failed&&1===a));var s,u=e.forwards;u.length&&(V(e)&&U(u)?(a+=1,s=R(langNumeric(u.length,n.mobile_mail_N_forwards),!e.failed&&1===a)):s=(s=u.map(function(t){return function e(t,n,r){var a=window.lang;var s=store.mail;var l=s.forwards[t]||s.msgs[t];if(!l)return"";var u=s.members[l.authorId];var c=l.peerId;s.peers[c];var d=H(u,c,s.cur.userId);var A=l.edited;var f=u.avatar;var p=u.url;var _=d;var h=l.date;var m=l.text;var v=l.attachesHTML;var g=l.forwards;var y=l.reply;var b=(0,o.default)({mix:"mi_author_photo",photos:[f],size:36});var E=A?P():"";var k;if(r>0){for(var C=[],D=g.length,S=0;S<D;S++){var T=e(g[S],n,r-1);C.push(T)}k=C.join("")}else if(g.length){var M=langNumeric(g.length,a.mobile_mail_N_forwards);k='<a href="/mail?act=msg&id='.concat(n,'" class="msg__fwdsLink">').concat(M,"</a>")}v&&(v=v.replace(/%top_msg_id%/g,n),v='<div class="mi_medias">'.concat(v,"</div>"));k&&(k='<div class="mi_forwarded">'.concat(k,"</div>"));m&&(m='<div class="mi_text">'.concat(m,"</div>"));var I=y?O(y,n):"";var x=!!l.attaches.gift;var L=x?" msg__forwardGift":"";return i.default.html(w(),L,b,p,_,h,E,I,m,v,k)}(t,e.id,e.maxDepth-1)})).join(""));var A,f=e.reply;f&&(V(e)&&(U([f])||!function(e){var t=store.mail;return(0,l.isFinite)(e)?!!t.pendingReplies[e]:!!t.replies[e]}(f))?(a+=1,A=R(n.mobile_mail_in_reply_to,!e.failed&&1===a)):A=O(f,e.id));return t&&(t='<div class="mi_medias">'.concat(t,"</div>")),s&&(s='<div class="mi_forwarded">'.concat(s,"</div>")),r&&(r='<div class="mi_text">'.concat(r,"</div>")),i.default.html(k(),A,r,t,s)}function P(){var e=window.lang;return i.default.html(v(),e.mobile_mail_edited_short)}function I(e){var t=window.lang,n=i.default.onClick("Msg._onRestoreClick","event",e);return i.default.html(m(),t.mobile_msg_mail_message_deleted,n,t.mobile_restore,t.mobile_msg_mail_message_marked_as_spam,n,t.mobile_restore)}function x(e,t,n){var i="/mail?act=msg";return t?(i=(0,l.concatValues)(i,"&id=".concat(t,"&reply=true")),n&&(i=(0,l.concatValues)(i,"&reply_id=".concat(n)))):i=(0,l.concatValues)(i,"&id=".concat(e)),(0,l.wrapCommunityMailUrl)(i)}function O(e,t){var n=store.mail.forwards[e]||store.mail.msgs[e],i=store.mail.replies[e]||store.mail.pendingReplies[e];return j(L(n,H(store.mail.members[n.authorId],n.peerId,store.mail.cur.userId),i.preview_url),i.msg_id,t,e)}function L(e,t,n){var r=e.body?B(e.body):F(e),o="";return(e.attaches.photo||e.attaches.video||e.attaches.doc)&&(o=n?'<div class="msg__replyPreview"\n        style="background-image: url('.concat(n,')"></div>'):e.attaches.doc?'<div class="msg__replyPreview msg__replyPreview_icon">\n        <div class="msg__replyPreviewDoc"></div>\n      </div>':'<div class="msg__replyPreview msg__replyPreview_empty"></div>'),i.default.html(h(),o,t,e.date,r)}function B(e){return e=e.replace(/<br>/g,"\n"),e=(0,l.mailReplaceDomainMentions)(e,"@$3"),e=(0,l.mailReplaceMentions)(e,"$3"),e=(0,l.emojiToHTML)(e)}function N(e){var t,n=window.lang,i=Object.keys(e.attaches),r=i.length;if(r>1){for(var o=0,a=i.length,s=0;s<a;s++)o+=0|e.attaches[i[s]];t=langNumeric(o,n.mobile_mail_attachments)}else if(1===r){var l=i[0],u=e.attaches[l];if(1===u)switch(l){case"poll":t=n.mobile_mail_added_poll;break;case"article":t=n.global_article;break;case"photo":t=n.mobile_mail_added_photo;break;case"video":t=n.mobile_mail_added_video;break;case"audio":t=n.mobile_mail_added_audio;break;case"audio_playlist":t=n.mobile_mail_added_audio_playlist;break;case"money_transfer":t=n.mobile_mail_added_money_transfer;break;case"podcast":t=n.mobile_mail_added_podcast;break;case"money_request":t=n.mobile_mail_added_money_request;break;case"vkpay":t=n.mobile_mail_added_vkpay;break;case"story":t=n.mobile_mail_added_story;break;case"graffiti":t=n.mobile_mail_added_graffiti;break;case"audiomsg":t=n.mobile_mail_added_audiomsg;break;case"doc":t=n.mobile_mail_added_doc;break;case"geo":case"map":t=n.mobile_mail_added_geo;break;case"wall":t=n.mobile_mail_added_wall;break;case"wall_reply":t=n.mobile_mail_added_wall_reply;break;case"gift":t=n.mobile_mail_added_gift;break;case"link":t=n.mobile_mail_added_link;break;case"sticker":t=n.mobile_mail_added_sticker;break;case"market":t=n.mobile_mail_added_market_item;break;case"call":t=n.mobile_mail_added_call}else if(u>1)switch(l){case"photo":t=langNumeric(u,n.mobile_mail_added_photos);break;case"video":t=langNumeric(u,n.mobile_mail_added_videos);break;case"audio":t=langNumeric(u,n.mobile_mail_added_audios);break;case"doc":t=langNumeric(u,n.mobile_mail_added_docs)}}var c=e.forwards&&e.forwards.length||e.hasReply;return!t&&c&&(t=e.hasReply?langNumeric(1,n.mobile_mail_messages):langNumeric(e.forwards.length,n.mobile_mail_N_forwards)),t||""}function R(e,t){var n;return t&&(n=(0,s.default)({large:!0}),n='<div class="msg__loading">'.concat(n,"</div>")),i.default.html(_(),e,n)}function F(e){var t=N(e);return i.default.html(p(),t)}function j(e,t,n,r){var o=x(t,n,r),a=i.default.onClick("Msg._onReplyClick","event",t,n,r);return i.default.html(f(),o,a,e)}function H(e,t,n){return t>2e9?e.name:t>-2e9&&t<0?e.id===n?e.firstName:e.name:e.firstName}function U(e){for(var t=store.mail.msgs,n=store.mail.members,i=store.mail.forwards,r=e.length,o=0;o<r;o++){var a=e[o];if((0,l.isFinite)(a)){var s=t[a];if(!s)return!0;if(!s.authorId||!n[s.authorId])return!0}else{var u=i[a];if(!u)return!0;if(!u.authorId||!n[u.authorId])return!0}}return!1}function V(e){return e.pending||e.failed||e.waiting}t.default=T},"tlL+":function(e,t,n){"use strict";var i=window,r=i.remove,o=i.lockButton,a=i.addClass,s=i.obj2qs,l=i.domCA,u=i.intval,c=i.geByClass1,d=i.getLang,A=i.domData,f=i.nav,p=i.cdf,_=i.append,h=i.Friends,m=i.ajax,v=i.FriendsStats,g=i.throttle,y=i.cancelEvent;window.FriendsRecommendedSlider={init:function(){window.cur&&cur.destroy.push(function(){R=null,F=null,j=null})},hideRecommended:function(e,t,n,i){var o=gpeByClass(E,e);if(!o)return i&&y(i);var a=V(o),l=A(o,"code")||A(a,"code"),u=A(a,"ref");!function(e){var t=V(e);r(e),j=null,F=null,H().length||U(t)}(o);var c=w+s({act:b,hash:n,id:t,track_code:l,ref:u});return m.post(c,{_ajax:1}),i&&y(i)},hideBlock:U,acceptFriend:function(e,t,n,i){if(hasClass(k,e))return i&&y(i);var r=gpeByClass(E,e),s=V(e),u=A(r,"code")||A(s,"code"),p=A(s,"ref");return a(C,e),o(e),h.accept(t,n,"user_rec",0,p,u,function(t){var n=t||d(S);unlockButton(e),removeClass(C,e),a(k,e),e.textContent=n,function(e){var t=function(e){var t=l(e,x);if(t)return c(T,t)}(e);a(M,t)}(e)},function(t,n){t===N&&f.hard_go(n),removeClass(C,e),unlockButton(e)}),i&&y(i)},onOpenUser:function(e){var t=gpeByClass(E,e);if(!t)return;var n=V(t),i=A(t,"uid")||"",r=A(t,"code")||A(n,"code"),o=A(n,"ref");v.log(v.EVENTS.EVENT_OPEN_USER,{uid:i,ref:o,trackCode:r})},onScroll:g(function(e){!R&&e&&(R=V(e));if(!R)return;if(R._lastScroll=R.scrollLeft,e.ajaxIsRunning)return;var t=R.scrollLeft,n=function(){if(F)return F;if(!R)return{};var e=getSize(R)[0],t=getX(R),n=H(),i=getX(n[0])-t,r=getSize(n[0])[0],o=getX(n[1])-t-i-r,a=Math.floor(r/3);return F={width:e,itemWidth:r+o,leftMargin:i,part:a,scrollWidth:R.scrollWidth}}(),i=Math.max(0,Math.floor((t-n.leftMargin)/n.itemWidth)),r=Math.max(0,Math.floor((t+n.width-n.leftMargin)/n.itemWidth));i*n.itemWidth+n.itemWidth-n.part<t&&i++;r*n.itemWidth+n.part>t+n.width&&r--;var o=H();i=Math.max(0,i),r=Math.min(o.length,r);for(var a=A(R,"ref"),l=A(R,"code"),d=i;d<=r;d++){var f=o[d];if(f&&!f.viewed){f.viewed=!0;var h=A(f,"uid")||"",g=A(f,"code")||l;v.log(v.EVENTS.EVENT_VIEW_USER,{uid:h,pos:d,ref:a,trackCode:g})}}!e.allLoaded&&t+n.width>=n.scrollWidth/2&&function(e){(e=V(e)).currentPage=e.currentPage||1;var t=A(e,"next")||"";if(e.allLoaded||!t||e.currentPage++>=B)return void(e.allLoaded=!0);var n=A(e,"code")||"",i=A(e,"ref")||"",r=u(A(e,"friend-id")),o=w+s({act:D,next:t,ref:i,friendId:r,track_code:n});e.ajaxIsRunning=!0,m.post(o,{_ajax:1},{onDone:function(t,n){if(t){var i=c(P,e),r=p(t);_(r,i),F=null,j=null}A(e,"next",n||null),e.allLoaded=!n,e.ajaxIsRunning=!1},onFail:function(){setTimeout(function(){return e.ajaxIsRunning=!1},L)}})}(e)},50)};var w="/friends",b="hide_possible",E="prettyCard",k="prettyCard__button_accepted",C="prettyCard__button_loading",D="recommended_carousel",S="mobile_friends_feed_recom_got_notification",T="prettyCard__closeButton",M="prettyCard__closeButton_hidden",P="Slider__line",I="Slider__scroll",x=".prettyCard",O="friendsRecommendedSliderWrap",L=500,B=3,N=2,R=null,F=null,j=null;function H(){return j||(R&&(j=geByClass(E,R)),j||[])}function U(e,t){var n=gpeByClass(O,e);if(!n)return t&&y(t);var i=R;if(!i&&e&&(i=V(n)),i){var o=A(i,"code"),a=A(i,"ref");v.log(v.EVENTS.EVENT_HIDE_BLOCK,{ref:a,trackCode:o})}if(r(n)){var l=f.getQuery();delete l.recs,f.go(location.pathname+s(l),!1,{replace:!0,push_only:!0})}return t&&y(t)}function V(e){var t;return hasClass(e,I)?t=e:(t=c(I,e))||(t=gpeByClass(I,e)),t}},tqgD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"QRPhotoPosting",{enumerable:!0,get:function(){return i.QRPhotoPosting}}),Object.defineProperty(t,"QRPhotoPostingButton",{enumerable:!0,get:function(){return i.QRPhotoPostingButton}}),Object.defineProperty(t,"show",{enumerable:!0,get:function(){return r.show}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return r.close}}),Object.defineProperty(t,"back",{enumerable:!0,get:function(){return r.back}}),Object.defineProperty(t,"getQRPhotoButton",{enumerable:!0,get:function(){return r.getQRPhotoButton}}),Object.defineProperty(t,"appendQRPhotoButton",{enumerable:!0,get:function(){return r.appendQRPhotoButton}});var i=n("IrFw"),r=n("xwOv");window.QRPhotoPosting=i.QRPhotoPosting,extend(i.QRPhotoPosting,{show:r.show,close:r.close,back:r.back,getQRPhotoButton:r.getQRPhotoButton,QRPhotoPosting:i.QRPhotoPosting,QRPhotoPostingButton:i.QRPhotoPostingButton,appendQRPhotoButton:r.appendQRPhotoButton})},tqja:function(e,t,n){"use strict";var i=window,r=i.nav,o=i.attr,a=i.ajax,s=function(){var e="_locked",t={1:"SEND_EMAIL",2:"CALL_PHONE",6:"OPEN_GROUP_APP"};return{processButton:function(n,i,s,l,u){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n.classList.contains(e))return!1;var d=!0;return t[i]&&(d=!1),n.classList.add(e),a.post("/groups",{_ajax:1,act:"proxy_cta_button",action:i,resource:s,group_id:l,hash:u},{onDone:function(){if(n.classList.remove(e),c)c();else if(d){var t=o(n,"href");r.go(t)}}}),!d}}}();window.GroupActionButton=s},tsGB:function(e,t,n){"use strict";n("UxAg");var i=n("jk6M"),r=window,o=r.each,a=r.geByClass,s=r.attr,l=r.replaceClass,u=r.ge,c=r.val,d=r.addClass,A=r.toggleClass,f=r.removeClass,p=r.ce,_=r.se,h=r.addEvent,m=r.removeEvent,v=r.extend,g=(r.qs2obj,r.vkNow),y=r.geByClass1,w=r.setStyle,b=r.remove,E=r.intval,k=r.isArray,C=r.hasClass,D=r.after,S=r.cdf,T=r.stripTags,M=r.getHref,P=r.indexOf,I=r.htsc,x=r.replaceEntities,O=r.escapeAttr,L=r.replace,B=r.scrollTop,N=r.before,R=r.alLoadingFix,F=window.ajax,j=window.mediaUpload,H=window.nav,U=window,V=U.Dialog,z=U.Dialogs,$=function(){var e={},t={},n=null,r=!1,P={},I={},x={},U=null;function G(){if(n){var t=[],i=!1;if(o(a("_unread"),function(){var e=+s(this,"data-id");e&&t.push(e),i=$.getPeerByMsg(e),l("_unread","_read",this)}),i){var r=u("messages"+i);r&&e[i]&&(e[i].messages=c(r))}t.length&&$.sendMarkAsRead(n,t)}}function Q(e,t){t?(d("lvi",e),A("mlvi",e,!!i.mobPlatforms[t])):(f("lvi",e),f("mlvi",e))}function X(e){(0,e.updater)(document.body),o(e.caches,function(t,n){var i=n.storage,r=n.getter,o=function(e,t){var n,i=t.split("."),r=i.length,o=e;for(n=0;n<r;n++)if(!(o=o[i[n]]))return null;return o}(i,r);if(o){var a="string"==typeof o;a&&(o=p("div",{innerHTML:o})),e.updater(o),function(e,t,n){var i,r,o=t.split("."),a=o.length-1,s=e;for(r=0;r<a;r++)s=s[i=o[r]]||(s[i]={});s[o[a]]=n}(i,r,a?o.innerHTML:o)}})}return H.onBeforeGo(function(e,t,n){if(H.getQuery("community")&&(!n||!n.ignore_cur_process)&&"/mail"===("string"==typeof e?e:s(e,"href")||s(e,"data-href")))return H.go(e,t,{ignore_cur_process:!0}),!0}),H.onBeforeGo(function(){if(H.getQuery("community"))var e=F.post("/",{_ajax:1,act:"ping"},{onDone:function(){try{var t=JSON.parse(e.response),n=t&&t[1]&&t[1][2];$.actualizeMessagesCornerCounter(n)}catch(e){}}})}),{wrapLinks:Y,wrapMention:W,onShowDialogFromCache:_(),onShowWritePageFromCache:_(),onShowDialogsPageFromCache:_(),onMessagesRepainted:_(),init:function(t,o){var a=window.im;window.cur.destroy.push(function(){AudioMessagePlayer.detachPlayer()}),o&&(cur.ref=o.ref,cur.refSource=o.ref_source),t&&(n=t,o&&($.saveDialog(o,t),e[t])),r||(r=!0,h(document,i.isTouch?"touchstart":"mousedown",G)),setTimeout(function(){a.on()})},unpinMessage:function(t){X({caches:[{storage:e,getter:t+".write_form"}],updater:function(e){e.$$(".cm_unpin").forEach(hide),e.$$(".head_actions_wrap").forEach(function(e){return e.classList.remove("head_actions_has_pinned")}),e.$$(".pinnedMsg_peer_".concat(t)).forEach(function(e){return e.classList.add("pinnedMsg_hidden")})}})},pinMessage:function(t,n){X({caches:[{storage:e,getter:t+".write_form"}],updater:function(e){e.$$(".cm_unpin").forEach(show),e.$$(".head_actions_wrap").forEach(function(e){return e.classList.add("head_actions_has_pinned")}),$$(".pinnedMsg_peer_".concat(t)).forEach(function(e){return e.outerHTML=n})}})},clear:function(){H.clear();var o=window.im;e={},t={},P={},n=null,m(document,i.isTouch?"touchstart":"mousedown",G),r=!1,o.off()},send:function(e,t){if(j&&!j.checkUploading())return!1;var n=F.click(e,v({clear:!0,save:!0},V),{lock:!0,url_params:{ref_source:cur.refSource,ref:cur.ref}});return cur.ref=void 0,cur.refSource=void 0,n},save:function(t){o(t,function(t,n){e[t]&&n.last_msg==e[t].last_msg&&delete n.messages,$.saveDialog(n,t)})},saveDialog:function(t,n){e[n]||(e[n]={});var i=e[n];v(i,t),i.msgs&&o(i.msgs,function(e,t){P[t]=n})},getPeerByMsg:function(e){return P[e]||!1},cacheDialogsPage:function(){H.getQuery("community")&&H.getQuery("tab")||(t.page=c("m"),H.getQuery().act?t.link=q("/mail"):t.link=H.cur)},keyup:function(e,t,n){var i=U||"",r=e.value||"";i.length==r.length&&i==r||($.myTyping(t,n),U=r)},myTyping:function(e,t){if(!(e<=-2e9)){var n=g();x[e]&&n-x[e]<5e3||(x[e]=n,F.post("/mail",{_ajax:1,act:"typing",peer:e,hash:t,community:H.getQuery("community")}))}},typing:function(e,t){t=t||e;e>2e9?(I[e]||(I[e]={}),I[e][t]=g()):I[e]=g(),$.updateTyping(e)},updateTyping:function(e){var t=function(e,t){return e.getAttribute&&e.getAttribute(t)},n=window.lang,i=u("dialog_near"+e),r=y("di_current_peer",i),a=y("di_typing",i);if(i){var s=[],l=g();if(e>2e9)o(I[e]||{},function(e,n){t(a,"data-u"+e)&&n&&l-n<6e3&&s.push(e)});else{var A=I[e];t(a,"data-u"+e)&&A&&l-A<6e3&&s.push(e)}if(s.length){if(1==s.length){var p=s[0],_=t(a,"data-u"+p),h=t(a,"data-s"+p);c(a,'<i class="i_typing"></i>'+(n.mobile_mail_typing[h]||"").replace("{user}",_))}else{o(s,function(e,n){s[e]=t(a,"data-u"+n)});var m=s.pop();c(a,'<i class="i_typing"></i>'+(n.mobile_mail_multi_typing||"").replace("{users}",s.join(", ")).replace("{last_user}",m))}r.offsetWidth&&w(a,"minWidth",r.offsetWidth),d("di_typing_now",i),setTimeout(function(){d("di_typing_animated",i)},10),setTimeout(function(){$.updateTyping(e)},2e3)}else c(a,""),w(a,"minWidth",0),f("di_typing_animated",i),f("di_typing_now",i)}},updateOnline:function(t,n){var i=u("messages"+t);if(i&&b(y("di_activity",i)),o(a("_lv"+t,"mcont"),function(e,t){Q(t,n)}),e[t]){if(e[t].write_form){var r=p("div",{innerHTML:e[t].write_form});o(a("_lv"+t,r),function(e,t){Q(t,n)}),e[t].write_form=c(r)}if(e[t].messages){r=p("div",{innerHTML:e[t].messages});b(y("di_activity",r)),e[t].messages=c(r)}}},updateImportantMessages:function(n,i,r){X({caches:[{storage:t,getter:"page"},{storage:H.page_get(q("/mail")),getter:"html"}],updater:function(e){var t=y("dialogs_filter_button_important",e);if(t){var n=E(c(t))+r;c(t,n),A("dialogs_filter_without_important",y("dialogs_filter",e),0===n)}}}),X({caches:[{storage:e,getter:n+".messages"}],updater:function(e){var t=y("_msg"+i,e);t&&A("msg_item_important",t,1===r)}})},updateImportantDialog:function(e,n){H.getQuery("community")&&X({caches:[{storage:t,getter:"page"},{storage:H.page_get(q("/mail")),getter:"html"}],updater:function(t){var i=y("_peer".concat(e),t);i&&A("dialog_item_important",i,n)}})},sendMarkAsRead:function(t,n){k(n)||(n=[n]);var i=e[t];i&&i.hash&&F.post("/mail",{_ajax:1,act:"mark_read",peer:t,msgs:n.join(","),hash:i.hash,community:H.getQuery("community")},{onDone:function(e){e&&o(n,function(e,n){$.markAsRead(t,n)})}})},markAsRead:function(t,n){window.im;var i=u("messages"+t);if(i){var r=y("_msg"+n,i);C("_read",r)||f("mi_unread",r);var o=e[t];if(o&&o.messages){var a=p("div",{innerHTML:o.messages});r=y("_msg"+n,a);C("_read",r)||f("mi_unread",r),o.messages=c(a)}}},markPeerAsRead:function(n,i,r){var l=u("messages"+n);if(l&&(o(a("msg_item",l),function(){if(!r==!C("_unread",this))return!0;+s(this,"data-id")<=i&&!C("_read",this)&&f("mi_unread",this)}),(h=e[n])&&h.messages)){var d=p("div",{innerHTML:h.messages});o(a("msg_item",d),function(){if(!r==!C("_unread",this))return!0;+s(this,"data-id")<=i&&!C("_read",this)&&f("mi_unread",this)}),h.messages=c(d)}var A=u("dialogs"),_=r?"di_unread_outbox":"di_unread_inbox";if(A)(h=y("_peer"+n,A))&&C(_,h)&&(f(_,h),b(y("di_unread_cnt",h)));else if(t.page){var h;d=p("div",{innerHTML:t.page});(h=y("_peer"+n,d))&&C(_,h)&&(f(_,h),b(y("di_unread_cnt",h))),t.page=c(d)}X({caches:[{storage:H.page_get(q("/mail")),getter:"html"}],updater:function(e){var t=y("_peer"+n,e);t&&C(_,t)&&(f(_,t),b(y("di_unread_cnt",t)))}})},markAsDeleted:function(t,n){var i=u("messages"+t);if(i){b(y("_msg"+n,i));var r=e[t];if(r&&r.messages){var o=p("div",{innerHTML:r.messages});b(y("_msg"+n,o)),r.messages=c(o)}}F.click(q(H.path),v({no_scroll:!0},z))},addMessage:function(t,n,i,r){if(window.isNewNavigation||H.clear(),t<2e9?delete I[t]:I[t]&&delete I[t][i],$.updateTyping(t),!0!==r){if(t&&n&&(P[n]=t),!y("_msg"+n)){var o=e[t];if(o&&o.messages){o.msgs&&o.msgs.push(n);var a=p("div",{innerHTML:o.messages});(l=y("di_activity",a))?(D(S(r),l),o.messages=c(a)):o.messages=r+o.messages,(s=u("messages"+t))&&(c(s,o.messages),$.onMessagesRepainted(!0))}else{var s,l;if(s=u("messages"+t))(l=y("di_activity",s))?D(S(r),l):c(s,r+c(s))}}}else if(u("dialogs")&&"/mail"==H.path){var d=H.getQuery();d.act||d.offset||d.q||F.click(q(H.path),v({no_scroll:!0},z))}},replaceMessage:function(t,n,i,r){var o=u("messages"+t),a=e[t];if(a&&a.messages){var s=p("div",{innerHTML:a.messages}),l=y("_msg"+n,s);l&&(l.outerHTML=r),a.messages=c(s),c(o,a.messages)}else y("_msg"+n).outerHTML=r},getMsgHTML:function(t,n,i,r,o,a,l,d){var A=window,f=A.vk,p=A.lang,_=2&n?f.id:l&&l.from||i;if(!_)return!1;if(!u("messages"+i))return!0;if(l.attach1||l.fwd||l.geo||l.emoji)return!1;if(l.source_act)return!1;if(!e[i]||!e[i].hash)return!1;var h="_u"+_,m=y(h,"mcont","a"),v=T(s(m,"data-name")||c(m)||""),g=M(m),w=y(h,"mcont","img"),b=w&&w.src||"";if(!v||!g||!b)return!1;i=E(i),t=E(t),o=o&&-1==o.toString().indexOf(" ... ")&&i<2e9?o:"";var k=1&n?" mi_unread":"";return!(2&n)&&1&n&&(k+=k?" _unread":""),a=$.wrapLinks(a,n),a=$.wrapMention(a),'<a name="msg{{msgId}}"></a><div  class="msg_item _msg{{msgId}}{{msgClass}}"  data-id="{{msgId}}"  onclick="return MessagesActions.onMessageClick(event);">  <div class="mi_iwrap">    <a class="al{{cl}}" href="{{href}}">      <img src="{{photo}}" class="mi_img {{cl}}" />    </a>  </div>  <div class="mi_cont">    <div class="mi_head">      <a class="mi_date" href="'.concat(q("/mail?act=msg&id={{msgId}}").replace(/\&/g,"&amp;"),'">        {{time}}      </a>      {{edited}}\n      <a class="mi_author al{{cl}} {{cl}}" href="{{href}}" data-name="{{dataName}}">        {{name}}      </a>    </div>    <div class="mi_body">      {{mi_title}}      <div class="mi_text">{{text}}</div>    </div>  </div></div>').replace(/{{msgId}}/g,t).replace(/{{cl}}/g,h).replace(/{{href}}/g,g).replace("{{msgClass}}",k).replace("{{edited}}",d?'<span class="mi_edited">'.concat(p.mobile_mail_edited,"</span>"):"").replace("{{photo}}",b).replace("{{time}}",function(){var e=new Date(1e3*r),t=e.getHours(),n=e.getMinutes();return t+":"+(n<10?"0":"")+n}()).replace("{{dataName}}",O(v)).replace("{{name}}",v.split(" ").shift()).replace("{{mi_title}}",o?'<div class="mi_title">'+o+"</div>":"").split("{{text}}").join(a)},updateStickers:function(){var t=window.cur,i=window.post,r=e[n];if(r){var o=r.write_form?(t.sticker_panel||"").split("mail-0").join("mail"+n):"",a=u("stickers_panel");a&&(L(S(o),a),a=null,i.stickersInit())}},showDialog:function(i,r,o){var a=window.cur,l=window,u=l.MessagesActions,d=l.Mention,A=window.post;if(u.hasFwdMessages())return u.attachFwdMessages(r),!1;t.scroll_top=B();var _=e[r];if(_){var h=p("div",{innerHTML:c("m")}),m=y("mhb_back",h);if(m&&_.header){var g=p("div");c(g,_.header),N(g.firstElementChild,m),b(m)}var w=_.write_form?(a.sticker_panel||"").split("mail-0").join("mail"+r):"";c(y("pcont",y("mcont",h)),_.write_form+w+(r?'<div id="messages'+r+'" class="messages bl_cont">'+(_.messages||"")+'<div id="al_loading"></div></div>':"")),c("m",h.innerHTML),A.stickersInit(),F.refreshLinks(_.fv_link,_.app_link),R(),n=r,_;var E=M(i);H.go(E,null,{push_only:!0,no_push:o}),r?(U=null,$.updateTyping(r),F.click(E,v({save:r},V),{scroll:!0})):$.onShowWritePageFromCache(!0),$.onShowDialogFromCache(!0),B(0,10)}else H.al_go(_&&_.cur_link||M(i)||H.cur);H.getQuery("community")&&"unread"===H.getQuery("ctab")&&f("al_back",y("mhb_back"));var k=y("MentionContainer"),C=parseJSON(s(k,"data-mentions"))||[];return C.length&&d.init({url:!1,appendTo:k,defaultItems:C,items:C,preferDomain:!0}),!1},backToDialogs:function(e){if(t.page)H.go(t.link,null,{push_only:!0,no_push:e}),F.click(t.link,v({no_scroll:!0},z)),c("m",t.page),F.refreshLinks(s("fv_link","href")||s("fv_link","data-href"),"vkontakte://vk.com/mail"),n=null,B(t.scroll_top||0),$.onShowDialogsPageFromCache(!0);else{var i=q(t.link||"/mail");H.go(i,null,{push_only:!0,no_push:e}),H.al_go(i)}},actualizeMessagesCornerCounter:function(e){X({caches:[{storage:t,getter:"page"},{storage:H.page_get(q("/mail")),getter:"html"}],updater:function(t){var n=y("mhi_notify",t),i=y("mh_notify_counter",n);i||(i=p("em",{className:"mh_notify_counter"}),append(i,n)),e?i.innerText=e:n.innerHTML="&nbsp;"}})}}}();function q(e){var t=window.nav.getQuery(),n=t.community,i=t.ctab,r=n&&-1===e.indexOf("community=")?"community=".concat(n):"",o=n&&i&&-1===e.indexOf("ctab=")?"&ctab=".concat(i):"";return r?e+(e.indexOf("?")>=0?"&":"?")+r+o:e}function W(e){return e.replace(/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,function(e,t,n,i,r){return'<a href="/'.concat(t+n,'" class="mem_link">').concat(r,"</a>")})}function Y(e,t){var n=32768&t;return e=(e=e.replace(/([a-zA-Z\-_\.0-9]+@[a-zA-Z\-_0-9]+\.[a-zA-Z\-_\.0-9]+[a-zA-Z\-_0-9]+)/g,function(e){return'<a href="mailto:'+e+'">'+e+"</a>"})).replace(/(https?:\/\/)?(([A-Za-zА-Яа-яЁё0-9@][A-Za-zА-Яа-яЁё0-9@\-\_\.]*[A-Za-zА-Яа-яЁё0-9@])(\/([A-Za-zА-Яа-я0-9@\-\_#%&?+\/\.=;:~]*[^\.\,;\(\)\?<\&\s:])?)?)/gi,function(){var e=arguments[3],t=arguments[2],i=arguments[0],r=arguments[1]||"http://";if(-1==e.indexOf(".")||-1!=e.indexOf(".."))return i;var o=e.split(".").pop();if(o.length>7||-1==P("place,camera,info,name,academy,aero,arpa,coop,media,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,рф,укр,сайт,онлайн,срб,cat,pro,local".split(","),o))return i;if(-1!=i.indexOf("@"))return i;try{i=decodeURIComponent(i)}catch(e){}return i.length>55&&(i=i.substr(0,53)+".."),i=I(i),!n&&e.match(/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/)?'<a href="'+(r+(t=x(t).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,encodeURIComponent))).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'">'+i+"</a>":'<a href="/away?to='+encodeURIComponent(r+x(t))+'" target="_blank">'+i+"</a>"})}window.mail=$,window.makeUrl=q},"u+Ht":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={rollback:{onDone:function(e){var t=e.html,n=e.post;e.hash;cur.restored=0;var i=ge("".concat(n,"__message-archived"));if(t){var r="".concat(n,"__message-rollback"),o=ce("div",{className:["post_message_item",i.className].join(" "),innerHTML:t,id:r});hide(i),ge(o)||after(o,i)}else{var a=ge("".concat(n,"__message-rollback"));show(i),remove(a)}}},set:{onStart:function(){var e=this.link;e.classList.contains("wia_item")&&addClass(e,"wia_item--loading")},onDone:function(e){var t=e.html,n=e.post,i=e.restored,r=e.rollback_hash,o=this.link;cur.restored||(cur.restored=0),i&&"profile"===cur.module&&cur.restored++,removeClass(o,"wia_item--loading");var a=ge(n),s=ge("".concat(n,"_replies"));if(t){if(cur.restored>3){var l="".concat(a.id,"?act=rollback_archive&hash=").concat(r);t+=Wd.html({class:"service_msg_row",inner:{tag:"a",href:l,onclick:"return ajax.click(this, Archive.rollback)",inner:getLang("mobile_archive_restore_bulk")}})}var u="".concat(a.id,"__message-archived"),c=ce("div",{className:["post_message_item",a.className].join(" "),innerHTML:t,id:u});hide(a),hide(s),ge(u)||after(c,a)}else if(n){var d=ge("".concat(n,"__message-archived")),A=ge("".concat(n,"_replies"));show(n),show(A),remove(d)}}}};t.default=i},u33z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("+CUd"));var r=i.default;t.default=r,window.MailButton=i.default},uOGV:function(e,t,n){"use strict";if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(t=n[o],e.call(r,t,o,n))return o;return-1}})}},uQjJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("4O8T"));window.EventEmitter=i.default;var r=i.default;t.default=r},uU5W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdsPlayerAdapter=void 0;var i=n("rEJs"),r=n("OcsD");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioPage=t}return s(e,null,[{key:"convertAudioInfo",value:function(e){var t=o(e.id.split("_"),2),n=t[0],i=t[1];return{performer:e.artist,canAdd:e.can_add,canDelete:e.can_del,duration:intval(e.dur),id:i,isClaimed:e.is_disabled,isExplicit:e.is_explicit,title:e.title,subTitle:e.subtitle,ownerId:n,ads:e.ads}}}]),s(e,[{key:"notify",value:function(e){var t=this.audioPage.getCurrent();switch(e){case i.events.AD_STARTED:this.audioPage.onAdStart(t);break;case i.events.AD_COMPLETED:this.audioPage.onAdComplete(t);break;case i.events.PLAY:this.audioPage.onPlay(t.id);break;case i.events.PAUSE:this.audioPage.onPause(t.id);break;case i.events.PROGRESS:var n=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2];isNaN(n)||isNaN(r)||this.audioPage.onPositionChanged(t.id,n*r,r)}}},{key:"setIsPlaying",value:function(e){this.audioPage.setIsPlaying(e)}},{key:"getVolume",value:function(){var e=(0,r.ssGet)("audio_vol");return null===e?1:e}},{key:"_getPlayingContextSection",value:function(){return window.playerAdapter.getContext()}}]),e}();t.AdsPlayerAdapter=l},uk5P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIO_PLAYER_ENUMS=void 0;t.AUDIO_PLAYER_ENUMS={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_INDEX_NEW_STATS:23,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<div role="button" class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</div>',LOG_LS_KEY:"audiolog"}},uo4j:function(e,t,n){"use strict";var i=window,r=i.ownerPhotoUpload,o=i.setStyle,a=i.remove,s=i.domData,l=i.geByClass,u=i.geByClass1,c=i.getLang,d=i.FeedAssistance,A=i.FeedAssistanceStats;r.onUploadedDone(function(e){var t=u(f);if(t){var n=u(p,t),i=u(h,t),r=u(_,t),o=u(m,t);(function(e,t){if(window.Image){var n=new Image;n.onload=function(){return w(e,t)},n.src=e}else w(e,t)})(e=function(e){return e.replace(/"/g,"").replace(/'/g,"").replace(/</g,"").replace(/>/g,"")}(e),n),r&&(r.textContent=c(g)),i&&(i.textContent=c(y)),d.setFilled(t),a(o)}}),A.registerTrackingCls("feedAssistance_profilePhoto");var f="feedAssistance_profilePhoto",p="feedAssistanceProfilePhotoContent__avatar",_="feedAssistanceProfilePhotoContent__title",h="feedAssistanceProfilePhotoContent__desc",m="feedAssistance__footerButton",v="feedAssistanceProfilePhotoContent__avatar_uploaded",g="mobile_assistance_profile_photo_uploaded_title",y="mobile_assistance_profile_photo_uploaded_desc";function w(e,t){t&&(addClass(v,t),o(t,"background-image","url(".concat(e,")"))),function(e){l("al_u"+vk.id).forEach(function(t){s(t,"photo")&&s(t,"photo",e);var n=u("_u"+vk.id,t);n&&"IMG"===n.tagName&&(n.src=e)})}(e)}},"v/ER":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submit=o,t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("Po+v"));function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t,n,o,a){"string"==typeof a&&(a=JSON.parse(a));var s=$("#mcont");setStyle(s,{"pointer-events":"none"}),ajax.post(e,r({_ajax:1,reason:n},a)),"story"===a.type&&Stories.sendAnalyticsEvent("claim"),Snackbar.init({text:getLang("mobile_msg_reported")}),$$(".Confirm").forEach(function(e){return i.default.close(e)})}t.default=function(e,t,n,i,r,a,s){n?Confirm(t,"ReportConfirm.submit('".concat(r,"', false, ").concat(i,", '").concat(a,"', ").concat(JSON.stringify(s),")"),"",{title:e,id:"confirm-".concat(i)}):o(r,!0,i,a,JSON.stringify(s))}},vOyG:function(e,t){e.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"]},vTE6:function(e,t,n){"use strict";var i,r=s(n("+cqQ")),o=n("DkIl"),a=s(n("B5sG"));function s(e){return e&&e.__esModule?e:{default:e}}function l(){store.mail&&store.mail.cur&&(store.mail.cur.peerId&&u())}function u(){var e=store.mail.cur;(e?e.peerId:null)?i=setTimeout(function(){f(),u()},3e4):c()}function c(){i&&clearTimeout(i)}function d(){$$(".mailHat").forEach(function(e){return e.outerHTML=(0,a.default)()})}function A(){}function f(){var e=window.lang,t=store.mail,n=t.cur,i=t.peers,r=n?n.peerId:null;if(r){var o=i[r];if(o.lastActionTime&&!o.isOnline){var a=n.timeShift,s=function(e,t){var n=window.lang,i="";e+=t;var r=parseInt(Date.now()/1e3)-e;if(r<60)i=n.mobile_profile_status_just_now;else if(r<3600){var o=intval(r/60);i=langWordNumeric(o,n.mobile_profile_status_word_mins_ago,n.mobile_profile_status_mins_ago)}else if(r<14400){var a=intval(r/3600);i=langWordNumeric(a,n.mobile_profile_status_word_hours_ago,n.mobile_profile_status_hours_ago)}else i=function(e){var t=1e3*e,n=new Date(t),i=new Date,r=window.lang;return n.getFullYear()!=i.getFullYear()&&n.getTime()<i.getTime()-1728e5||Math.abs(n.getTime()-i.getTime())>157248e5?langDate(t,r.mobile_mail_date,0,r.months_sm_of,!1):langDate(t,r.mobile_mail_short_date_time,0,r.months_sm_of,!1)}(e);return i}(o.lastActionTime,a);o.offlineText=langSex(o.sex,e.mobile_mail_last_activity_tip).replace("{time}",s)}d()}}Object.assign(a.default,{onUnreadClick:(0,r.default)(),onBackClick:(0,r.default)(),onBackToDialogClick:(0,r.default)(),onCancelEditing:(0,r.default)(),setModifiers:o.MailHat_convo.setModifiers,redrawCounter:function(){var e=store.mail.cur.countUnread;if(!nav.getQuery("community")){var t=geBySel1(".mmi_mail .mm_counter2");e>0?(t.innerText=e,attr(t,"style","display: inline")):hide(t)}window.isNewNavigation?Tabbar.setCounter(Tabbar.TAB_ID_MESSAGES,e):o.MailHat_main.setUnreadCount(e)},redrawOnline:f,redraw:d,startStatusUpdate:u,cancelStatusUpdate:c}),o.MailHat_main.onUnreadClick(a.default.onUnreadClick),o.MailHat_main.onBurgerClick(menu.open),o.MailHat_main.onCancelForwardTap(a.default.onBackToDialogClick),o.MailHat_convo.onBackTap(a.default.onBackClick),o.MailHat_convo.onCancelEditingTap(a.default.onCancelEditing),uVK.onReady(l),uVK.onReady(A),page.onChange(A)},vZUn:function(e,t,n){"use strict";var i=window,r=i.geByClass1,o=i.tag,a=i.geByTag1,s=i.ce,l=i.hasClass,u=i.attr,c=i.removeEvent,d=i.addEvent,A=i.qs2obj,f=i.each,p=i.len,_=i.extend,h=i.copy,m=i.onDOMReady,v=i.scrollTop,g=i.getY,y=i.scrollToEl,w=i.scrollToHash,b=i.obj2qs,E=i.escapeAttr,k=i.remove,C=i.val,D=i.toggleClass,S=i.show,T=i.hide,M=i.gpeByClass,P=i.geByTag,I=i.addClass,x=i.checkEvent,O=i.unescapeAttr,L=i.removeClass,B=i.ge,N=i.cancelEvent,R=i.isUndefined,F=window.ajax,j=window.nav,H=window.post,U=window.zlayer,V=function(){var e,t,n,i,z,$,q,W,Y,G,Q,X,K,J,Z=1,ee=!1,te={},ne={},ie={},re=null,oe=null,ae=!1,se=null,le=null,ue=!0,ce=0,de=!1;function Ae(){if(!(e=r("photo_view","m")))return j.al_go(j.cur),!1;if(t=r("pv_summary",e),r("photo_msg",e),Q=r("pv_tag_wrap",e),z=r("pv_body",e),$=r("thumb_item",z),i=r("pv_nav",z),Y=r("pv_photo_wrap",$),q="a"==o($)&&$,W=a("img",$),G=r("pv_footer",e),(n=r("summary_loading",t))||(n=s("div",{innerHTML:'<i class="i_loading"></i>',className:"summary_loading"},{display:"none"}),t.appendChild(n)),ee=l("pv_touch_full",z),i){var A=r("pv_nav_left",i),f=r("pv_nav_z",i),p=r("pv_nav_right",i);X=r("pv_nav_link",A),J=r("pv_nav_link",f),K=r("pv_nav_link",p),u(X,"onclick","return photo.prev(event);"),u(K,"onclick","return photo.next(event);"),u(q,"onclick",!ee&&"return photo.next(event);"),F.prepare_click([X,K,q])}return c(window,"orientationchange",ye),d(window,"orientationchange",ye),!0}function fe(){var t=window.photoview;return!!t&&(!!de||(de=!0,t.onPhotoChange=function(e,t){ce=e,be(e,t)},t.onUpdate=function(){},t.onClose=function(t){if(uRegisterFloatBtn.show(),!function(e){var t=A(j.params);if(delete t.z,!e.local&&!e.crop){if(j.tryHistoryBack())return!1;var n=j.path+b(t)+j.hash;j.go(n,null,{push_only:!0})}return!0}(t))return!0;var n=A(j.params);e&&n.list==oe&&we(ce,!0)},!0))}function pe(e){var t=window.photoview,n=[];return f(e,function(e,t){if(!t)return!0;n.push(te[t.id]=t)}),re&&t&&t.saveSource(ve(re)),n}function _e(e){return te[e]||{}}function he(e,t,n){if(null!==t){ne[e]||(ne[e]=new Array(n||p(t))),pe(t);var i=ne[e];ae&&i.reverse(),_(i,t),ae?(re=h(i),i.reverse()):re=i}else delete ne[e]}function me(e){if("string"!=typeof e)return e;var t=ne[e]||[];return ae?h(t).reverse():t}function ve(e){var t=me(e),n=new Array(t.length),i=A(j.params);for(var r in delete i.z,t){var o=re[r],a="",s="";o.hash&&(s=b({hash:o.hash,mp4:!0})),o.isDoc?(a="doc"+o.id+s,n[r]={id:o.id,photo_url:"/"+a,src:o.original_src,isDoc:!0,hasVideo:o.hasVideo}):(a="photo"+o.id+"?list="+oe+(ae?"&rev=1":"")+(le?"&from="+le:""),n[r]={id:o.id,photo_url:"/"+a,like_url:"/like?act="+(o.likes_me?"del":"add")+"&object=photo"+o.id+"&from="+encodeURIComponent(a)+"&list="+oe+"&hash="+o.like_hash,likes_me:o.likes_me,src:o.original_src,tags:o.tags,caption:o.caption,likes_cnt:o.likes_cnt,replies_cnt:o.replies_cnt})}return n}function ge(e,t){for(var n in t||(t=re),t)if(re[n].id==e)return+n;return-1}function ye(){j.hash||m(function(){if(r("photo_view")){var e=v();z&&g(z)<e&&y(z)}})}function we(n,i,r){var o=window.cur,s=window.lang,l=re[n],c=1==re.length;if(l){j.hash?w(j.hash):ye();var d={};se&&(d.list=se),ae&&(d.rev=1),le&&(d.from=le);var p=b(d),h="photo"+l.id+p,m=l.photo,g=(ke(n-1)||{}).id,y=(ke(n+1)||{}).id;if(c||(q.href="/photo"+y+p,X&&(X.href="/photo"+g+p),K&&(K.href="/photo"+y+p),F.prepare_click([X,K,q])),ee){var S="photo"+l.id+"/"+se+(ae?"/rev":""),T=_({},d,{z:S}),M="/photo"+l.id+b(T);if(U._lastNav){var P=U._lastNav;(T=A(P.params)).z=S,M=P.path+b(T)+P.hash}J&&(J.href=M),F.prepare_click(J),u(J,"onclick","return photo.fullscreen('"+E(M)+"', event);")}if(W&&W.src!=m){W.onload=null,k(W);var I="";f(l.tags,function(e,t){if(!e||0==e)return!0;var n=t[0][0],i=t[0][1],r=t[0][2],o=t[0][3];I+='<div class="pv_tag" style="left: '+n+"%; top: "+i+"%; width: "+r+"%; height: "+o+'%;" id="pv_tag'+e+'" onclick="return photo.selectTag('+e+', event, true);"><div class="fill"></div></div>'}),C(Y,'<img src="'+m+'" alt="" class="ph_img" />'+I),W=a("img",Y)}D("photo_deleted",e,!!l.deleted),D("pv_one_photo",z,1==re.length),C(t,(s.mobile_photos_photo_header||"").replace("%s",ce+1).replace(/%s|{count}/,re.length)),C(Q,l.tag_info||"");var x="",O=(o.sticker_panel||"").split("photo-0_0").join("photo"+l.id),L=(l.comments_html||"").split("\x3c!--stickers_panel--\x3e").join(O);if(l.caption&&(x+='<div class="mv_description">'+l.caption+"</div>"),l.tags_list&&(x+='<dl class="pv_tags_list si_row"><dt>'+s.mobile_photos_on_this_photo+"</dt><dd>"+l.tags_list+"</dd></dl>"),l.was_edited&&(x+='<dl class="si_row"><dt>'+s.mobile_photos_photo_was_edited+"</dt></dl>"),l.album_link&&(x+='<dl class="si_row"><dt>'+s.mobile_photos_photo_album_label+"</dt><dd>"+l.album_link+"</dd></dl>"),l.author_link&&(x+='<dl class="si_row"><dt>'+s.mobile_photos_photo_author_label+"</dt><dd>"+l.author_link+"</dd></dl>"),(l.date||l.likes||l.publish)&&(x+='<div class="vi_values">'+(l.date||"")+(l.likes||"")+(l.publish||"")+"</div>"),C(G,'<div class="like_box bl_cont"><div class="photo_msg bl_none">'+(l.deleted||"")+'</div><div class="mv_details">'+x+'</div><ul class="mv_actions">'+(l.actions||"")+'</ul></div><div class="comments_wrap bl_cont">'+L+"</div>"),H.stickersInit(),o.replyTo=0,F.refreshLinks(l.fv_link,l.app_link),V.closeTags(),!i){var N="/"+h;j.go(N,null,{no_push:i,push_only:!0,replace:r}),window.isNewNavigation&&page.save(N,{st:v(),page:B("m"),state:page.stash(),cur:window.cur,options:{replacePrevPage:!0}},!1)}}ue||(Ce(),function(){for(var e=0,t=ce+1;e<Z;e++){var n=e+t,i=ke(n),r=i&&i.photo;if(r&&!ie[r]){var o=ie[r]=new Image;o.src=r,o.onload=function(){ie[r]=!0}}}}())}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isDoc,i=t.hash,r=t.hasVideo,o=window.photoview,a=re[e];re.length;if(a){var s=A(j.params);if(s.z=n?"doc"+a.id+"/"+i:"photo"+a.id+"/"+se+(ae?"/rev":""),t.no_open||o.open(e,ve(re),{local:t.local,isDoc:n,hasVideo:r}),!t.local&&!t.crop){var l=j.path+b(s)+j.hash;j.go(l,null,{no_push:t.no_push,push_only:!0,replace:t.replace,nav_init:!t.no_open,nav_incr:!0})}}t.local||t.crop||Ce(!0,n)}var Ee=!1;function ke(e){return e>0?e%=re.length:e=(100*re.length+e)%re.length,re[e]}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Ee){for(var i=window.photoview,r=!1,o=1,a=0;a<5;a++){if(!(l=ke(s=a+ce))||!l.owner_id){r=s,o=1;break}}if(!1===r)for(a=-1;a>-3;a--){var s,l;if(!(l=ke(s=a+ce))||!l.owner_id){r=s,o=-1;break}}if(!1!==r){var u=ke(ce);if(u){Ee=!0,S(n);var c=window.cur,d=u.owner_id||(u.id||"").split("_")[0],A=Gif.isMp4Supports()&&u.hasVideo,f=s==ce&&u.id?(t?"/doc":"/photo")+u.id+(u.hash?"?hash="+u.hash:"")+(A?"&mp4":""):"/photos.php",p={_ajax:1,oid:d,list:oe,offset:r,direction:o,rev:ae?1:0};c.stickers||(p.need_stickers=1),j.getQuery("community")&&(p.community=j.getQuery("community")),F.post(f,p,{onDone:function(t,r,o,a){T(n),Ee=!1,o&&(c.replyNames||(c.replyNames={}),_(c.replyNames,o)),a&&_(c,a),he(oe,t,r||re.length),e?i&&i.saveSource(ve(oe),!1,!0):we(ce,!0)}})}}}}function De(e,t,n,i,r){if(re=[],e){var o=M("thumbs_list",e)||M("wiki_body",e);o&&f(P("img",o),function(){var e=u(this,"data-id"),t=u(this,"data-src_big");if(!e||!t)return!0;var n=(t=t.split("|"))[0],i=+t[1]||0,r=+t[2]||0;re.push({id:e,original_src:n,width:i,height:r})})}re.length||re.push({id:t,original_src:!0,isDoc:n,hasVideo:i,hash:r})}function Se(){I("pv_icons_hide",z)}return{save:pe,get:_e,saveSource:he,getSource:me,clear:function(){c(window,"orientationchange",ye)},open:function(e,t,n,i,r){if(x(n))return!0;if(!Ae())return!0;if(ae=!1,"/rev"==t.substr(-4)&&(t=t.slice(0,-4),ae=!0),le=i||null,t)oe=t;else{var o=_e(e);oe=o.album?"album"+o.album:""}if(se=oe,re=me(oe),-1===(ce=ge(e,re))){if(!(o=_e(e)).id)return!1;re=[o],ce=0}ue=re.length<2,!1;var a=re[ce]&&e!=re[ce].id;return we(ce,r&&!a,a),!1},prev:function(e){return!!x(e)||!(Ee&&!ke(ce-1))&&(!Ae()||(ue?V.close():(--ce<0&&(ce=re.length-1),we(ce),Se(),!1)))},next:function(e){return!!x(e)||!(Ee&&!ke(ce+1))&&(!Ae()||!ue&&(++ce>=re.length&&(ce=0),we(ce),Se(),!1))},close:function(e,t){return!!x(e)},fullscreen:function(e,t){return!!l("pv_photo_tags_selected",z)||j.go(O(e),t,{need_restore:!0})},showIcons:function(){var e=r("photo_view","m");if(!e)return!1;var t=r("pv_body",e);if(!t)return!1;setTimeout(function(){L("pv_hidden_icons",t),setTimeout(function(){I("pv_icons_hide",t)},2e3)},10)},selectTag:function(e,t,n){if(n&&!l("pv_photo_tags_selected",z))return!0;var i=B("pv_tag"+e),o=r("pv_tag_selected","pv_photo_tags_wrap"),a=B("pv_tag_label"+e),s=r("pv_tag_label_selected","pv_tags_list");return l("pv_tag_selected",i)||(L("pv_tag_selected",o),I("pv_tag_selected",i)),l("pv_tag_label_selected",a)?j.go(a,t):(L("pv_tag_label_selected",s),I("pv_tag_label_selected",a),I("pv_photo_tags_selected",z),N(t),!1)},closeTags:function(e){if(!l("pv_photo_tags_selected",z))return!0;var t=r("pv_tag_selected","pv_photo_tags_wrap"),n=r("pv_tag_label_selected","pv_tags_list");return t&&L("pv_tag_selected",t),n&&L("pv_tag_label_selected",n),L("pv_photo_tags_selected",z),N(e),!1},init:function(e,t,n,i,r,o,a){Z=R(a.preload)?1:a.preload,ae=!!r,V.saveSource(e,t,n),m(function(){V.open(i,e+(r?"/rev":""),null,o,!0)})},zopen:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(x(t))return!0;var o=r.isDoc,a=r.hasVideo,s=r.hash;if(fe(),ae=!1,"/rev"==i.substr(-4)&&(i=i.slice(0,-4),ae=!0),delete A(j.params).z,le=r.from||!1,i)oe=i;else{var l=_e(n);oe=l.album?"album"+l.album:""}if(se=oe,(re=me(oe))[0]&&re[0].isDoc&&re[0].hasVideo!==a&&(re=[]),re.length||De(e,n,o,a,s),-1===(ce=ge(n,re))&&(De(e,n,o,a,s),ce=ge(n,re)),-1===ce){if(!(l=_e(n)).id)return!0;re=[l],ce=0}ue=re.length<2,!1;var u=re[ce]&&n!=re[ce].id;return be(ce,{no_push:r.no_push&&!u,replace:u,local:r.local,isDoc:o,hasVideo:a,hash:s}),uRegisterFloatBtn.hide(),N(t),!1},zclose:function(e,t){return uRegisterFloatBtn.show(),!!x(e)}}}();window.photo=V},vfU8:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("EMnU"));Object.assign(i.default,{toggleActive:function(e){e.classList.toggle(r.active)}});var r={active:"Icon_active"}},vkUM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e){o.default.open({body:function(e){var t,n,r=e.isEditing,o=e.canDeleteForAll;if(r)t=lang.mobile_mail_dialog_msg_delete_for_all;else{var a=Object.keys(store.mail.cur.msgSelected).length;t=langNumeric(a,lang.mobile_mail_dialog_msg_delete_N)}if(!r&&o){var c=lang.mobile_mail_delete_for_all,d=function(){if("boolean"!=typeof u){var e=!!lsGet("delete_message_for_all_checked");u=e}return u}()?"checked":"";n='\n      <div class="MsgDeleteDialog__checkbox">\n        <label class="MsgDeleteDialog__checkboxIn">\n          <input type="checkbox" class="'.concat(l,'" ').concat(d,'>\n          <span class="MsgDeleteDialog__checkboxLabel">').concat(c,"</span>\n        </label>\n      </div>\n    ")}return i.default.html(s(),t,n)}(e),confirmText:lang.mobile_mail_delete_popup_delete,cancelText:lang.mobile_mail_delete_popup_cancel,onConfirm:i.default.onClick("MsgDeleteDialog.onConfirmDelete"),onClose:i.default.onClick("MsgDeleteDialog.close")})},t.close=function(){var e=$("."+l);e&&(u=e.checked,lsSet("delete_message_for_all_checked",u));o.default.close()},t.isDeleteMessagesForAll=function(){var e=$("."+l);return!!e&&e.checked},t.onConfirmDelete=void 0;var i=a(n("bZ/P")),r=a(n("+cqQ")),o=a(n("iS9e"));function a(e){return e&&e.__esModule?e:{default:e}}function s(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    ","\n    ","\n  "]);return s=function(){return e},e}var l="MsgDeleteDialog__checkboxInput",u=null,c=(0,r.default)();t.onConfirmDelete=c},vys4:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=window,o=r.attr,a=r.hasClass,s=(r.gpeByClass,r.geByClass1),l=r.geByTag1,u=r.page,c=r.extend,d=r.val,A=r.ce,f=r.append,p=r.remove,_=r.browser,h=function(){var e,t="_BottomMenu__icon_js",n="BottomMenu__icon_active",r="BottomMenu__counter",u="BottomMenu__updateButton",h="BottomMenu",m="vk_tabbar_hidden",v="data-tabbar",g="data-counter",y="messages",w=Math.max(window.innerHeight,window.innerWidth),b=["feed","recommend",y,"notification","menu"],E="",k={},C=(i(e={},"feed",0),i(e,"recommend",0),i(e,y,0),i(e,"notification",0),i(e,"menu",0),e);function D(e){var t=geBySel1("[".concat(v,'="').concat(e,'"]'));return o(t,"data-default")}function S(e){each(geBySel("[".concat(v,"]")),function(n,i){var a=s(t,i),l=s(r,a),u=o(i,g),c=o(i,v);e({i:n,tabId:c,counter:u,$link:i,$icon:a,$counter:l})})}function T(){S(function(e){var t=e.$counter,n=e.$icon,i=(e.$link,e.tabId),o=C[i];if(o&&0!==o)if(t)d(t,o);else{var a=A("div",{className:r,innerHTML:o});f(a,n)}else d(n,"")})}function M(){var e=$(".".concat(u));p(e)}return{setCurrentId:function(e){E=e},setHistory:function(e){k=c({},e)},setCounter:function(e,t){C[e]=t?parseInt(t,10):0,T()},getCurrentId:function(){return E},getDefaultURL:D,getTabCounter:function(e){return C[e]?C[e]:0},drawUI:function(){S(function(e){var t=e.$icon,i=e.$link,r=e.tabId,a=k[r];if(a){var s=a.filter(function(e){return!0===e.current})||[];s.length&&r!==y&&o(i,"href",s[0].a);var l=o(i,"href");r!==E||!s.length||s[0].a!==l&&s[0].d!==l||o(i,"href",D(r))}toggleClass(n,t,r===E)}),T()},drawUICounters:T,drawLoader:function(e){setTimeout(function(){M()},0),d(s("mcont",e),'<div class="pcont bl_cont"><div id="al_loading" class="BottomMenu__preloader"></div></div>')},showUpdateButton:function(e){var t=window.lang,n=Wd.html({class:u,inner:{class:"BottomMenu__updateButton_container",inner:{class:"BottomMenu__updateButton_wrap",onclick:["nav.updateCurrentPage"],inner:[{class:"BottomMenu__updateButton_icon",inner:{class:"Icon Icon_whiteArrowTop"}},{class:"BottomMenu__updateButton_text",inner:t.mobile_menu_refresh_button}]}}}),i=a("vk_custom_scroll",l("body")),r=e.$(i?".basis":".upanel");r.$(".".concat(u))||r.insertBefore(ceFromString(n),r.firstChild)},removeUpdateButton:M,onFocusIn:function(e){var t=geBySel1(".".concat(h)),n=e&&e.target;if(n&&t&&_.android){var i=!1;"textarea"===n.tagName.toLowerCase()&&(i=!0),"input"!==n.tagName.toLowerCase()||["checkbox","radio"].includes(n.type)||(i=!0),"select"===n.tagName.toLowerCase()&&(i=!0),i&&t.classList.add(m)}},onFocusOut:function(){var e=geBySel1(".".concat(h));e&&e.classList.remove(m)},onResize:function(){var e=window.bodyNode;e&&e.classList.contains("vk_tabbar_bottom")&&0===Math.abs(window.orientation)&&w-180>window.innerHeight?e.classList.add(m):e&&e.classList.remove(m)},setDefaultCounters:function(){S(function(e){var t=e.tabId,n=e.counter;C[t]=n?parseInt(n,10):0}),T()},TAB_ID_FEED:"feed",TAB_ID_RECOMMEND:"recommend",TAB_ID_MESSAGES:y,TAB_ID_NOTIFICATION:"notification",TAB_ID_MENU:"menu",TAB_IDS:b}}();window.Tabbar=h,window.isNewNavigation&&(u.onRestore(h.drawUI),u.onChange(h.drawUI),onDOMReady(function(){var e;h.setDefaultCounters(),addEvent(window,"resize",function(){h.onResize(),clearTimeout(e),e=setTimeout(function(){h.onResize()},300)})}))},w1QQ:function(e,t,n){"use strict";var i=window,r=i.ajax,o=i.domCA,a=i.remove,s=i.FeedAssistanceStats;window.FeedAssistance={hide:function(e,t,n){var i=o(e,d),c=hasClass(i,A);a(i),c||function(e,t,n){var i=s.getFromRef(e);r.post(l,{_ajax:1,type:t,hash:n,act:u,from:i})}(e,t,n);return!1},setFilled:function(e){var t=hasClass(e,c)?e:o(e,d);addClass(A,t)}};var l="/feed",u="hide_assistance",c="feedAssistance",d="."+c,A="feedAssistance_filled"},wMVj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("UxAg"),r=l(n("+cqQ")),o=l(n("jk6M")),a=n("OcsD"),s=(l(n("K0hv")),n("eGQV"));function l(e){return e&&e.__esModule?e:{default:e}}var u=window,c=u.se,d=u.ce,A=u.attr,f=u.append,p=u.ge,_=u.each,h=u.addEvent,m=u.removeEvent,v=u.remove,g=u.unlockButton,y=u.setDocumentDomain,w=u.lockButton,b=u.checkNav,E=u.cancelEvent,k=u.checkEvent,C=u.getHref,D=u.extend,S=u.stopEvent,T=u.tag,M=u.gpeByTag,P=u.obj2qs,I=u.scrollToHash,x=u.addClass,O=u.hasClass,L=(u.toggleClass,u.qs2obj),B=u.copy,N=u.ajax,R=u.isVkWebView,F=u.onDOMReady,j=u.statlogsValueEvent,H=function(){var e=!(!window.history||!history.pushState),t=c(function(){return l}),n={},l=null,u=[],F=!1,U=20,V=30;function z(){Tabbar.setHistory(n)}function $(e){var t=window.Tabbar;if(e.lm&&e.lm.tab&&e.lm.is_tab_page||e.options&&e.options.forceSetCurrent){var n=t.getCurrentId(),i=e.lm&&e.lm.tab||e.options.tab;t.setCurrentId(i),n!==i&&z()}else if(e.lm&&!e.lm.tab)if(getW("vk_wrap")>=882){var r=t.getCurrentId(),o=t.TAB_ID_MENU;t.setCurrentId(o),r!==o&&z()}else e.lm.tab=t.getCurrentId()}function q(e){n[e]=[]}function W(e){return!!n[e]&&n[e]}function Y(){return W(Tabbar.getCurrentId())}function G(e,t){var n=(e||[]).filter(function(e){return e.d===t||e.h===t});return!(!n||!n[0])&&n[0]}function Q(){var e=(Y()||[]).filter(function(e){return!0===e.current});return!(!e||!e[0])&&e[0]}function X(e,t,i){var r;t.options&&t.options.is_fast&&t.options.prev_tab?r=W(t.options.prev_tab):($(t),r=Y(),t.lm&&t.lm.is_tab_page&&(r=!1));var o=function(){var e=Q();return e&&e.d&&e.d.options&&e.d.options.replaceState}()||function(e){return e&&e.options&&e.options.replacePrevPage}(t),a=!1;if(r){var s=r.findIndex(function(t){return t.h===e||t.a===e});s>-1&&r.splice(s,r.length);for(var l=r.length-1;l>=0;--l){var u=r[l];u.h===e||u.a===e?(r[l]={h:e,d:t,a:i,current:!0},a=!0):r[l].current=!1}}if(!a){var c={h:e,d:t,a:i,current:!0};if(r){var d=r[r.length-1],A=d&&d.d&&d.d.options&&d.d.options.removeAfterNextResponse;(o||A)&&r.pop(),r.push(c),r.length>U&&r.shift()}else{var f=Tabbar.getCurrentId(),p=Q();if(p&&p.d&&p.d.options&&p.d.options.need_check_updates&&c.d.lm.check_updates){var _=c.d.html,h=p.d.page;c.d.page=h,c.d.newHTML=_}n[f]=[c]}}if(isArray(r)){var m=r.findIndex(function(e){return!0===e.current});if(m>0){var v=m-1;r[v].h.includes("/like?act=publish")&&function(e,t){e.splice(t,1)}(r,v)}}}function K(e){var t;if(t=/^(https?:)\/\/([^:\/]+)?(?::(\d+))?\/?(.*)$/i.exec(e)){if(t[1]!=location.protocol)return!1;if(t[2]&&t[2]!=location.hostname)return!1;if(t[3]&&t[3]!=location.port)return!1;e=(t[4]||"").replace(/^\/+/,"/")}return e}function J(e,t,n){if(k(t))return!0;if(n&&n.push_only)return!0;if(n&&n.replace)location.replace(e);else if(e){var i=C(e);i===location.href.replace(location.origin,"")?location.reload():location.href=i}return!0}function Z(e,t,n){var i=window.al;E(t);var r=C(e);if(window.al&&i.ver){if(n&&n.push_only)return!0;if(N.nav(r,n))return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!0}J(r,t,n)}function ee(t,n,i){var r,o,s=window.Tabbar;if(t&&t.href){if(t.getAttribute&&t.getAttribute("data-vkui-url")&&(0,a.isVKUISupported)())return J(o=t.getAttribute("data-vkui-url"),n,i),!1;if(o=t.href,t.getAttribute&&t.getAttribute("data-change-location-with-post-away")){var l={};return(r=ae(t)).post_id&&(l.post=r.post_id,r.ad_data&&(l.post_ad_data=r.ad_data),r.post_click_cc_key&&(l.cc_key=r.post_click_cc_key),o="/away.php?to="+encodeURIComponent(o)+"&"+P(l).substr(1)),J(o,n,i),!1}}if(t&&t.href&&t.dataset&&t.dataset.setFrom&&(t.href=Url.make(t.href,{from:H.cur})),H.onBeforeGo(t,n,i))return!1;if(i=D({no_push:!1,push_only:!1,replace:!1},i),k(n))return!S(n);if(!t)return!0;e&&(i.no_push||i.need_restore)&&(F=!1);var u=t,c="",b="",C="";function N(e){return"a"===T(e)?e:M("a",e)}!t.href&&t.getAttribute&&(u=t.getAttribute("data-href"));var R=n&&N(n.target)||t&&t.tagName&&N(t);if(("input"==T(t)||"button"==T(t))&&("submit"==t.type||"image"==t.type)&&t.form){if(t.disabled)return!0;var j=t.form,U={},V=j.action||"",z=!1;if(_(j,function(e,n){return!(n.name&&!n.disabled)||("radio"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==t||("image"===n.type&&n!==t||("file"===n.type?(z=!0,!1):"checkbox"===n.type?(U[n.name]=n.checked?1:0,!0):void(U[n.name]=n.value))))))}),"image"==t.type&&(U[t.name]=t.value,U[t.name+".x"]=1,U[t.name+".y"]=1),z||"multipart/form-data"==A(j,"enctype"))return function(e){var t=d("iframe");A(t,"id","upload_iframe"),A(t,"name","upload_iframe"),A(t,"width","0"),A(t,"height","0"),A(t,"border","0"),A(t,"style","width:0;height:0;border:none;position:absolute;left:-1000px;"),f(t,e.parentNode),window.frames.upload_iframe.name="upload_iframe",t=p("upload_iframe");var n=!1;return _(e,function(e,t){if("submit"===t.type)return n=t,!1}),h(t,"load",function e(){m(t,"load",e),setTimeout(function(){v(t),g(n)},2e3)}),y(),A(e,"target","upload_iframe"),A(e,"method","post"),A(e,"enctype","multipart/form-data"),A(e,"encoding","multipart/form-data"),f(d("input",{type:"hidden",id:"__extra",name:"__extra",value:1}),e),e.submit(),w(n),setTimeout(function(){v("__extra")},0),!1}(j);if(!(u=K(V)))return!0;j.method&&"get"!=j.method?i.params=U:u=u.split("?",1).shift()+P(U)}if(O("al_need_login",t)&&(i.redirectToLoginPage=!0),"string"!=typeof u){if(!u)return!0;"/"!==(c=(u.pathname||"").replace(/^\/+/,"/")).substr(0,1)&&(c="/"+c),b=u.search.substr(1),C=u.hash,u=c+u.search+C;if(/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/.test(c.substr(1))&&window.cur&&window.cur.module){var q=window.cur.module;if("feed"===q)"search"===L(H.params).section&&(q="feed_search");b+="&ref=".concat(q)}}else{var W=u.split("#"),Y=W.shift();C=W.length?"#"+W.join("#"):"",c=(Y=Y.split("?")).shift(),b=Y.join("?"),!C&&!b||c||(c=H.path,Y||(b=H.params),u=c+(b?"?"+b:"")+C)}var G=L(b);function Q(e,t,n){var i=n&&G[t];return!(!e||i)&&(G[t]=e,!0)}if(Q((r=ae(R,!!G._post_click_type)).post_id,"_post",!0),Q(r.post_click_type,"_post_click_type",!0),G._post_click_type&&(Q(r.post_click_mention_id,"_post_click_mention_id",!0),Q(r.post_click_cc_key,"_post_click_cc_key",!0),Q(r.post_click_url,"_post_click_url",!0),Q(r.ad_data,"_post_ad_data",!0)&&Q(r.ad_block_unique_id,"_post_ad_block_unique_id")),0!==location.pathname.indexOf("/app")&&0===c.indexOf("/app")&&G&&G.act&&"app_r"===G.act)return!!n||(J(t,n,i),!1);if(b=P(G).substr(1),n&&u.split("#").shift()==H.cur.split("#").shift()&&C&&!i.force&&(I(C),i.push_only=!0),i.no_push&&H.cur==u&&!i.force)return!1;if(i.push_only)return ie(D(i,{nav:{push:u,path:c,params:b,hash:C}})),!1;if(x("active",i.link||t),O("al_back_history",t)){if(window.isNewNavigation)return x("al_back",i.link||t),removeClass("al_back_history",i.link||t),H.backToTabHistory(i.link||t);if(H.tryBack())return!1}if(window.isNewNavigation&&(V||i.isForm)&&(i.removeAfterNextResponse=!0),window.isNewNavigation&&(O("al_tab",t)||O("SliderTabs__tab",t))&&(i.replaceState=!0),O("al_back",t)){var X=G.act;window.isNewMail&&"/mail"===location.pathname&&!X||"show"===X&&!geByClass1("messenger")?i.need_restore=!1:i.need_restore=!0}if(window.isNewNavigation){var ee=A(t,"data-tabbar");if(ee){var ne=s.getCurrentId();ne!==ee?(ee!==s.TAB_ID_MESSAGES&&0===s.getTabCounter(ee)&&(i.need_restore=!0),ee===s.TAB_ID_FEED&&"/feed"===u&&(i.need_check_updates=!0),i.tab=ee,i.prev_tab=ne,i.forceSetCurrent=!0):(i.tab=ee,i.prev_tab=ee,i.replace=!0),$({lm:{tab:ee,is_tab_page:!0}})}else if(i.tab)i.native_prev=s.getCurrentId(),i.is_native_back=!0,i.forceSetCurrent=!0,$({lm:{tab:i.tab,is_tab_page:!0}});else{var re=s.getCurrentId();i.tab=re;var oe=!(!this||!isString(this.cur))&&this.cur.substr(1);s.TAB_IDS.includes(oe)?i.prev_tab=oe:i.prev_tab=re}}var se=function(e){var t=window.cur,n=window.menu,i=L(e.nav.params),r=L(H.params);if((r.z||i.z)&&r.z!=i.z){if(H.path==e.nav.path){var o=B(i),a=B(r);if(delete o.z,delete a.z,o=P(o),a=P(a),o==a)return te(i.z,!1,e),ie(e),n.close(null,!0),!1}e.zProcess=function(t,n){te(i.z,t,D({},e,{no_push:!0}),n)}}if(e.onPreNav=function(){e.zProcess&&(e.zProcess(),delete e.zProcess)},!e.ignore_cur_process&&t.processNav&&t.processNav(e))return ie(e),n.close(null,!0),!1;return Z(e.nav.push,null,e),!1}(D(i,t.tagName?{target:t}:{},{nav:{push:u,path:c,params:b,hash:C}}));return se||E(n),se}function te(e,t,n,i){var r,o=window.photo,a=window.zlayer;if(e){if(r=/^photo(-?\d+_\d+)(?:\/([a-z0-9_-]+(\/rev)?)?)?$/i.exec(e)){if(!0===i)return!1;var s=r[1]||"",l=r[2]||"";return o.zopen(!1,null,s,l,{no_push:(n||{}).no_push}),a&&!1!==t&&void 0!==t&&(a._st=t),QRPhotoPosting&&QRPhotoPosting.close(),!0}if(r=/^story(-?\d+_\d+)(\/?([a-z0-9_-]+))(\/?[a-z0-9_:]+)?$/i.exec(e)){var u=window.Stories;if(!0===i)return!1;var c=r[1]+(r[2]?r[2]:"/".concat(r[1]))+(r[4]?r[4]:"");return u.close({isPopState:!0,storyRaw:c}),!0}if(r=/^\/?narrative(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e)){var d=window.Stories;return!0!==i&&(d.init("".concat(r[1],"/narrative").concat(r[1],"_").concat(r[2]),{source:"narrative_link"}),!0)}if(r=/^\/?doc(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e))return!0!==i&&(o.zopen(null,null,"".concat(r[1],"_").concat(r[2]),"",{no_push:(n||{}).no_push,isDoc:!0,hasVideo:!1,hash:r[4]}),a&&!1!==t&&void 0!==t&&(a._st=t),!0);if(r=/^\/?publish_photo(-?\d+)?$/i.exec(e)){if(!0===i)return!1;QRPhotoPosting&&QRPhotoPosting.show()}}return!1!==i&&(a&&a.close(),Stories&&Stories.close({isPopState:!0,closeAll:!0}),QRPhotoPosting&&QRPhotoPosting.close(),!0)}function ne(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){if(window.isNewNavigation)return void function(e,t,n){var i=window.Tabbar.getCurrentId(),r={nav:{tab:t.tab||i,prev_tab:t.prev_tab}};window.isNewMail?t.replace?history.replaceState(D({},n,r),null,e):history.pushState(D({},n,r),null,e):t.replace?history.replaceState(r,null,e):history.pushState(r,null,e)}(t,n,i);t="/"==t.substr(0,1)?t:"/"+t,window.isNewMail?n.replace?history.replaceState(i,null,t):history.pushState(i,null,t):n.replace?history.replaceState(null,null,t):history.pushState(null,null,t)}else{var r="/"==t.substr(0,1)?t:"/"+t,o="#"+r,a=location.pathname+location.search+o;p("base").href=r,n.replace?location.replace(a):(l=o,location.href=a)}}function ie(t){if(!t.no_push&&H.cur!=t.nav.push){if((0,s.isOfflineCapable)()&&!1===navigator.onLine&&!t.push_only)return J(t.nav.push,null,t);try{window.isNewMail?ne(t.nav.push,t,t.historyState):ne(t.nav.push,t),e&&!t.no_push&&(t.nav_init||t.nav_incr)?(t.nav_init&&(F=0),t.nav_incr&&!1!==F&&F++,F>V&&(F=!1)):F=!1}catch(e){return J(t.nav.push,null,t)}}H.cur!==t.nav.push&&(H.prev_cur=H.cur,H.prev_fv_link=H.fv_link),H.cur=t.nav.push,H.path=t.nav.path,H.params=t.nav.params,H.hash=t.nav.hash,H.path&&0!==H.path.indexOf("/")&&(H.path="/"+H.path)}if(e)h(window,"popstate",function(e){if(window.isNewMail&&H.onPopState())return preventEvent(e),void S(e);var t=D({no_push:!0,need_restore:!0});if(window.isNewNavigation&&e.state&&e.state.nav){var n=e.state.nav,i=n.tab,r=n.prev_tab;t=D(t,{tab:i,prev_tab:r})}ee(location,null,t)});else{var re=location.hash||"";"#/"==re.substr(0,2)&&J(re.substr(1),null,{replace:!0});var oe=function(e){(e=(e||"").substr(1))&&"/"==e.substr(0,1)||(e=location),ee(e,null,{no_push:!0,need_restore:!0})};"onhashchange"in window?h(window,"hashchange",function(){oe(location.hash||"")}):(!function e(){var n=location.hash||"";l!==n&&(l=n,t(!0)),setTimeout(e,100)}(),t(function(e){oe(e)}))}function ae(e,t){var n={};if(!!(!e||!e.getAttribute))return n;var i=e.getAttribute("data-post-id");i&&(n.post_id=i);var r=e.getAttribute("data-post-click-type");r&&(n.post_click_type=r);var o=e.getAttribute("mention_id");o&&(n.post_click_mention_id=o);var a=e.getAttribute("data-post-click-cc-key");a&&(n.post_click_cc_key=a);var s=[e.getAttribute("href"),e.getAttribute("data-href")];if(_(s,function(e,t){if(t&&"#"!==t)return n.post_click_url=t,!1}),!!r||t){var l=gpeByClass("_ads_block_data_w",e),u=(l=l||gpeByClass("_ads_promoted_post_data_w",e))&&l.getAttribute("data-ad"),c=l&&l.getAttribute("data-ad-block-uid");u&&(n.ad_data=u),c&&(n.ad_block_unique_id=c)}return n}var se=(location.pathname||"").replace(/^\/+/,"/"),le=location.search||"",ue=location.hash||"";return{onBeforeGo:(0,r.default)(),onBeforeGo2:(0,r.default)("path","queryObject","fullUrl","opts"),onPopState:(0,r.default)(),go:ee,al_go:Z,app_go:function(e,t,n){if(!n)return!0;if(k(t))return!0;v("app_go_frame");var i=C(e),r=d("iframe",{id:"app_go_frame",src:n,onload:function(){v("app_go_frame"),i&&H.hard_go(i)}},{display:"none"});return window.bodyNode.appendChild(r),!1},hard_go:J,go_after:function(e,t){var n=window.al;return!window.al||!n.ver||!!b(t.target,{skip_onclick:!0,skip_clicable:!0})||!1!==e&&(H.go(e,t)||E(t),!1)},page_set:function(e,t,n){if(window.isNewNavigation)X(e,t,n);else{for(var i=u.length-1;i>=0;--i)if(u[i].h==e||u[i].a==e)return void(u[i]={h:e,d:t,a:n});u.push({h:e,d:t,a:n}),u.length>U&&u.shift()}},page_get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tabbar.getCurrentId();if(window.isNewNavigation)return function(e,t){for(var n=W(t),i=n.length-1;i>=0;--i){var r=n[i];if(r.h===e||r.a===e)return r.d}return!1}(e,t);for(var n=u.length-1;n>=0;--n)if(u[n].h==e||u[n].a==e)return(u=u.slice(0,n+1))[n].d;return!1},saveScrollPosition:function(){var e=Q();e&&e.d&&(e.d.st=scrollTop())},set:ie,checkUrl:K,tryHistoryBack:function(){var e=F;return e&&history.go(-e),F=!1,!!e},zInit:function(){var e=L(H.params);e.z&&te(e.z)},getPostParams:ae,cur:se+le+ue,path:se,params:le.substr(1),hash:ue,clear:function(){window.isNewNavigation?(n={},H.initStore(),u=[],Tabbar.setHistory(n)):u=[]},hasUpdate:function(e,t,n){if(!e||!e.need_check_updates||!window.isNewNavigation)return!1;var i=t,r=G(W(e.tab),i);if(!r||!n.html)return!1;var o=r.d.lm.check_updates,a=n.lm.check_updates;return!(!o&&!a)&&a!==o&&{currentCache:r}},needUpdate:function(e,t,n){if(!e||!e.need_check_updates||!window.isNewNavigation)return!0;var i=t,r=G(W(e.tab),i);if(!r||!n.html)return!0;var o=r.d.lm.check_updates,a=n.lm.check_updates;return!o&&!a||a!==o},updateCurrentPage:function(){var e=Q();page.set(e.h,e.d,{forceUpdate:!0})},isTabHaveCache:function(e,t){var n=W(e);return!!n&&!!G(n,t)},getQuery:function(e){var t=L(H.params);return e?t[e]||null:t},getNotifierScrollTop:function(){var e=u.find(function(e){return"/settings?act=notifier"===e.h});return e?e.d.st:null},reload:function(){return H.go(H.cur)},tryBack:function(){var e=u.slice(-2)[0];return!!e&&(H.go(e.h,null,{need_restore:!0}),!0)},backToTabHistory:function(e){var t=Y(),n=t.findIndex(function(e){return!0===e.current}),i=e&&O("al_back",e),r=A(e,"href"),o=e&&O("al_force_back",e);if(r&&!o){if("/menu"===r){var a=Tabbar.getCurrentId(),s=Tabbar.getDefaultURL(a);return q(a),H.go(s)}return H.go(e)}var l=t[n-1];if(l)return t.splice(n,t.length),H.go(l.h,null,{need_restore:i});if(r&&o)return H.go(r);var u=Tabbar.getCurrentId(),c=Tabbar.getDefaultURL(u);return q(u),H.go(c)},openInNativeApp:function(e,t,n){var i=this;if(this._openAppInProgress)return!1;E(t);var r={android:"https://vk.cc/android",iphone:"https://vk.cc/iphone"},a="vk://vk.com"+(window.isNewNavigation&&p("vk_wrap").offsetWidth<882&&H.prev_cur?H.prev_cur:H.cur),s=o.default.mi?1500:300;o.default.safari&&(s=o.default.ios>10?0:1100);var l=Date.now(),u=setTimeout(function(){i._openAppInProgress=!1,Date.now()-l>s+200||!document.hasFocus()||(n&&n.href?H.hard_go(n.href):H.hard_go(r[e]))},s);if(h(window,"blur",function e(){clearTimeout(u),i._openAppInProgress=!1,m(window,"blur",e)}),o.default.ios){h(window,"focus",function e(){window.menu&&window.menu.close(),m(window,"focus",e)})}else window.menu&&window.menu.close();return this._openAppInProgress=!0,H.hard_go(a),j("mvk_open_in_native_link",1,e),!1},initOpenInNativeAppBtn:function(){if(!R()){var e=geByClass1("mmi_open_in_app");e&&x("supported",e)}},initStore:function(){window.store.tabs=n},getPageJs:function(){var e=(0,i.$)("#page_script");return e?e.innerText:u.length&&u[u.length-1].d.js||""},onMenuItemClick:function(e){var t=window.isNewNavigation?"tabbar":"left_menu",n=getW("vk_wrap")>=882?"full_version":"mobile";if(j("mvk_navigation_pages","click",t,e,n),"/wall"===H.cur.substr(0,5)&&"add"===H.getQuery("act")){var r=(0,i.$)("#feed_add_form"),o=L(r.action.split("?")[1]),a=r.getAttribute("data-hash")||o.hash;a&&post.saveDraft(null,a)}},setFvLink:function(e){H.fv_link=e}}}();F(function(){H.initOpenInNativeAppBtn(),H.initStore()}),window.nav=H;var U=H;t.default=U},wRgB:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=window,o=r.isObject,a=r.extend,s=r.ge,l=r.geByClass1,u=r.val,c=r.addClass,d=r.addEvent,A=r.removeEvent,f=r.setStyle,p=r.cancelEvent,_=r.vkNow,h=r.getW,m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(n)||(n={items:n}),this.opts=a({slideClassName:"",onStartChange:!1,onChange:!1,pointsWrap:!1,slideContFn:!1,shownSlidesNum:1},n),this.wrap=s(t),this.parseItems(n.items),this.init()}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"parseItems",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"string"==typeof i&&(i={className:i}),i=a({html:"",className:"",pos:t.length},i),t.push(i)}this.items=t}},{key:"init",value:function(){if(c("landings_slider_wrap",this.wrap),d(this.wrap,"touchstart mousedown",this.touchStart.bind(this)),this.opts.pointsWrap){var e="";for(var t in this.items)e+='<div class="landings_slider_point"></div>';c("landings_slider_points",this.opts.pointsWrap),u(this.opts.pointsWrap,e)}this.changeSlide(0)}},{key:"getTouchX",value:function(e){return e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].pageX:e.pageX}},{key:"getTouchY",value:function(e){return e.targetTouches&&e.targetTouches.length>0?e.touches[0].pageY:e.pageY}},{key:"touchStart",value:function(e){var t=this.getTouchX(e),n=this.getTouchY(e),i=this,r=!1,o=!1,a=_(),s=0,l=this.getTouchX(e),u=h(this.wrap);function c(e){if(!o)if(!r&&Math.abs(i.getTouchY(e)-n)>20)o=!0;else{i.lock&&(r=!0,t=i.getTouchX(e),a=_(),i.changeSlide(i.newPos),p(e),i.lock=0,clearTimeout(i.changeTimeout));var c=i.getTouchX(e),d=t-c;(Math.abs(d)>20||r)&&(p(e),r||(t=i.getTouchX(e),d=0,r=!0),s=d,l=c,d=-(100+d/u*100),d-=100*i.opts.shownSlidesNum-100,f(i.helper,"transform","translateX("+d+"%)"))}}function m(e){if(A(bodyNode,"mousemove touchmove",c),A(bodyNode,"mouseup touchend touchcancel",m),!i.lock)if(i.lock=1,Math.abs(s)>50){var n=s<0?"prev":"next",r=Math.abs(l-t)/(a/_());r+=.2*r;var o=100*i.opts.shownSlidesNum;o="next"==n?100+o:o-100,f(i.helper,{transition:"transform "+r+"ms",transform:"translateX(-"+o+"%)"});var u=i.items.length-1,d="prev"==n?i.pos-1:i.pos+1;d<0?d=u:d>u&&(d=0),i.opts.onStartChange&&i.opts.onStartChange(d,n),i.newPos=d,i.changeTimeout=setTimeout(function(){i.lock=0,i.changeSlide(d)},r)}else f(i.helper,{transition:"transform 200ms",transform:"translateX(-"+100*i.opts.shownSlidesNum+"%)"}),setTimeout(function(){i.lock=0},200)}A(bodyNode,"mousemove touchmove",c),A(bodyNode,"mouseup touchend touchcancel",m),d(bodyNode,"mousemove touchmove",c),d(bodyNode,"mouseup touchend touchcancel",m)}},{key:"makeItem",value:function(e){var t=this.pos==e.pos?"_active_slide ":"",n=this.opts.slideContFn?this.opts.slideContFn(e):e.html;return'<div class="landings_slider_item '+t+e.className+" "+this.opts.slideClassName+'">'+n+"</div>"}},{key:"getSlidesHtml",value:function(e){for(var t=this.opts.shownSlidesNum,n=this.items.length-1,i="",r=e,o=0;o<t;o++)--r<0&&(r=n),i=this.makeItem(this.items[r])+i;i+=this.makeItem(this.items[e]),r=e;for(var a=0;a<t;a++)++r>n&&(r=0),i+=this.makeItem(this.items[r]);return i}},{key:"changeSlide",value:function(e){if(this.pos=Math.max(0,Math.min(e,this.items.length-1)),this.replaceHtml(this.getSlidesHtml(this.pos)),this.opts.onChange&&this.opts.onChange(this.pos),this.opts.pointsWrap){var t=s(this.opts.pointsWrap);removeClass("selected",l("selected",t)),c("selected",t.children[this.pos])}}},{key:"replaceHtml",value:function(e){u(this.wrap,'<div class="landings_slider_helper">'+e+"</div>"),this.helper=l("landings_slider_helper",this.wrap),f(this.helper,"transform","translateX(-"+100*this.opts.shownSlidesNum+"%)")}},{key:"toSlide",value:function(e,t){this.lock=1;var n=this.makeItem(this.items[this.pos]),i=this.makeItem(this.items[e]);e>this.pos?n+=i:n=i+n,this.replaceHtml(n),t||(t=e>this.pos?"next":"prev");var r="next"==t?0:-100;f(this.helper,"transform","translateX("+r+"%)"),this.opts.onStartChange&&this.opts.onStartChange(e,t);var o=this;clearTimeout(this.toSlideTimer),this.toSlideTimer=setTimeout(function(){r="next"==t?-100:0,f(o.helper,{transition:"transform 200ms",transform:"translateX("+r+"%)"}),o.toSlideTimer=setTimeout(function(){o.lock=0,o.changeSlide(e)},200)},10)}}]),e}();t.default=m},wTbK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"open",{enumerable:!0,get:function(){return r.open}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return r.close}}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("t7Ww")),r=n("ACAL");var o=i.default;t.default=o,window.ModalMenu=i.default,extend(i.default,{open:r.open,close:r.close})},wZQE:function(e,t,n){e.exports=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t=function(e,t,n,i,r){if(e<7&&t<7)return!1;if(e>=n-7&&t<7)return!1;if(e<7&&t>=n-7)return!1;if(r){var o=9;n<=25&&o--;var a=(n-14-o)/2-1;return n<=25&&a++,!(e>7+a&&e<n-7-a-1&&t>7+a&&t<n-7-a-1)&&0<=e&&e<n&&0<=t&&t<n&&i[t][e]}return i[t]&&i[t][e]},n=function(e,n,i,r,o){return void 0===o&&(o=!0),{l:t(e-1,n,i,r,o),r:t(e+1,n,i,r,o),t:t(e,n-1,i,r,o),b:t(e,n+1,i,r,o),current:t(e,n,i,r,o)}},i=function(e,i){if("number"!=typeof i.qrSize)throw new Error("Size should be a number");if("string"!=typeof i.className)throw new Error("Classname should be a string");for(var r=84.7776815,o=[],a=0,s=0,l=0,u=0,c=0;c<e.size;c++){a=0;for(var d=0;d<e.size;d++){l=d+a,a+=96,u=c+s;var A=n(d,c,e.size,e.modules,i.isShowLogo),f="",p="";A.current?(p=!(p=p||A.l||A.r||A.t||A.b?"":"empty")&&A.l&&A.r||A.t&&A.b?"rect":"")||(p+=A.l?"l":A.r?"r":"",(p+=A.t?"t":A.b?"b":"")||(p="empty")):p=!(p=!(p=!(p=!p&&A.l&&A.t&&t(d-1,c-1,e.size,e.modules,i.isShowLogo)?"n_lt":"")&&A.l&&A.b&&t(d-1,c+1,e.size,e.modules,i.isShowLogo)?"n_lb":"")&&A.r&&A.t&&t(d+1,c-1,e.size,e.modules,i.isShowLogo)?"n_rt":"")&&A.r&&A.b&&t(d+1,c+1,e.size,e.modules,i.isShowLogo)?"n_rb":"",p&&(f='<use xlink:href="#'+p+"-"+i.suffix+'"/>',o.push('<g transform="translate('+l+","+u+')">'+f+"</g>"))}s+=96}var _="",h=(e.size-21)/2*96+672-10;e.size<=25&&(_="scale(0.85)",h+=50);var m=96*(e.size-7);o.push('<use fill-rule="evenodd" transform="translate(0,0)" xlink:href="#point-'+i.suffix+'"/>'),o.push('<use fill-rule="evenodd" transform="translate('+m+',0)" xlink:href="#point-'+i.suffix+'"/>'),o.push('<use fill-rule="evenodd" transform="translate(0,'+m+')" xlink:href="#point-'+i.suffix+'"/>'),i.isShowLogo&&(i.logoData?o.push('\n        <image \n          style="width: 750px; height: 750px;" width="750" height="750" \n          transform="translate('+h+","+h+") "+_+'" \n          xlink:href="'+i.logoData+'" \n        />\n      '):o.push('\n        <use style="width: 750px; height: 750px;" width="750" height="750" \n          fill="none" \n          fill-rule="evenodd" \n          transform="translate('+h+","+h+") "+_+'" xlink:href="#vk_logo-'+i.suffix+'"\n        />\n      '));var v=99*e.size,g="",y="translate(0,0)";if(i.isShowBackground){var w=(i.qrSize-40)/i.qrSize,b=v/i.qrSize*21,E=Math.ceil(v/(i.qrSize/36));g='\n      <rect \n        x="0" \n        width="'+v+'" \n        height="'+v+'" \n        rx="'+E+'" \n        fill="'+i.backgroundColor+'"\n      />',y="translate("+b+", "+b+") scale("+w+")"}var k="M0,0 L66,0 C"+r+",-3.44940413e-15 100,15.2223185 100,34 L100,66 C100,"+r+" "+r+",100 66,100 L0,100 L0,0 Z",C="M0,0 L100,0 L100,66 C100,"+r+" "+r+",100 66,100 L0,100 L0,0 Z";return'\n  <svg \n    version="1.1" \n    viewBox="0 0 '+v+" "+v+'" \n    width="'+i.qrSize+'px" \n    height="'+i.qrSize+'px"\n    '+(i.className?'class="'+i.className+'"':"")+' \n    xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <defs>\n      <rect id="rect-'+i.suffix+'" width="100" height="100" fill="'+i.foregroundColor+'"/>\n      <path \n        id="empty-'+i.suffix+'" \n        d="M0,28.6v42.9C0,87.3,12.8,100,28.6,100h42.9c15.9,0,28.6-12.8,28.6-28.6V28.6C100,12.7,87.2,0,71.4,0H28.6 C12.8,0,0,12.8,0,28.6z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path id="b-'+i.suffix+'" d="'+k+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="r-'+i.suffix+'" d="'+k+'" transform="rotate(-180 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="l-'+i.suffix+'" d="'+k+'" fill="'+i.foregroundColor+'"/>\n      <path id="t-'+i.suffix+'" d="'+k+'" transform="rotate(90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="l-'+i.suffix+'" d="'+C+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="lt-'+i.suffix+'" d="'+C+'" fill="'+i.foregroundColor+'"/>\n      <path id="lb-'+i.suffix+'" d="'+C+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="rb-'+i.suffix+'" d="'+C+'" transform="rotate(-180 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="rt-'+i.suffix+'" d="'+C+'" transform="rotate(90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path \n        id="n_lt-'+i.suffix+'" \n        d="M30.5,2V0H0v30.5h2C2,14.7,14.8,2,30.5,2z" \n        fill="'+i.foregroundColor+'"\n      />\n      <path \n        id="n_lb-'+i.suffix+'"\n        d="M2,69.5H0V100h30.5v-2C14.7,98,2,85.2,2,69.5z" \n        fill="'+i.foregroundColor+'"\n      />\n      <path \n        id="n_rt-'+i.suffix+'" \n        d="M98,30.5h2V0H69.5v2C85.3,2,98,14.8,98,30.5z" \n        fill="'+i.foregroundColor+'"\n      />\n      <path id="n_rb-'+i.suffix+'" \n        d="M69.5,98v2H100V69.5h-2C98,85.3,85.2,98,69.5,98z" \n        fill="'+i.foregroundColor+'"\n      />\n      <path \n        id="point-'+i.suffix+'" \n        fill="'+i.foregroundColor+'"\n        d="M600.001786,457.329333 L600.001786,242.658167 C600.001786,147.372368 587.039517,124.122784 581.464617,118.535383 C575.877216,112.960483 552.627632,99.9982143 457.329333,99.9982143 L242.670667,99.9982143 C147.372368,99.9982143 124.122784,112.960483 118.547883,118.535383 C112.972983,124.122784 99.9982143,147.372368 99.9982143,242.658167 L99.9982143,457.329333 C99.9982143,552.627632 112.972983,575.877216 118.547883,581.464617 C124.122784,587.027017 147.372368,600.001786 242.670667,600.001786 L457.329333,600.001786 C552.627632,600.001786 575.877216,587.027017 581.464617,581.464617 C587.039517,575.877216 600.001786,552.627632 600.001786,457.329333 Z M457.329333,0 C653.338333,0 700,46.6616668 700,242.658167 C700,438.667167 700,261.332833 700,457.329333 C700,653.338333 653.338333,700 457.329333,700 C261.332833,700 438.667167,700 242.670667,700 C46.6616668,700 0,653.338333 0,457.329333 C0,261.332833 0,352.118712 0,242.658167 C0,46.6616668 46.6616668,0 242.670667,0 C438.667167,0 261.332833,0 457.329333,0 Z M395.996667,200 C480.004166,200 500,220.008332 500,303.990835 C500,387.998334 500,312.001666 500,395.996667 C500,479.991668 480.004166,500 395.996667,500 C312.001666,500 387.998334,500 304.003333,500 C220.008332,500 200,479.991668 200,395.996667 C200,312.001666 200,350.906061 200,303.990835 C200,220.008332 220.008332,200 304.003333,200 C387.998334,200 312.001666,200 395.996667,200 Z" \n      />\n      <g id="vk_logo-'+i.suffix+'">\n        <path \n          fill="'+i.logoColor+'" \n          d="M253.066667,0 C457.466667,0 272.533333,0 476.933333,0 C681.333333,0 730,48.6666667 730,253.066667 C730,457.466667 730,272.533333 730,476.933333 C730,681.333333 681.333333,730 476.933333,730 C272.533333,730 457.466667,730 253.066667,730 C48.6666667,730 0,681.333333 0,476.933333 C0,272.533333 0,367.206459 0,253.066667 C0,48.6666667 48.6666667,0 253.066667,0 Z"/><path fill="#FFF" d="M597.816744,251.493445 C601.198942,240.214758 597.816746,231.927083 581.719678,231.927083 L528.490512,231.927083 C514.956087,231.927083 508.716524,239.08642 505.332448,246.981031 C505.332448,246.981031 478.263599,312.960647 439.917002,355.818719 C427.510915,368.224806 421.871102,372.172112 415.10389,372.172112 C411.720753,372.172112 406.822917,368.224806 406.822917,356.947057 L406.822917,251.493445 C406.822917,237.95902 402.895137,231.927083 391.615512,231.927083 L307.969678,231.927083 C299.511836,231.927083 294.425223,238.208719 294.425223,244.162063 C294.425223,256.99245 313.597583,259.951287 315.573845,296.043086 L315.573845,374.428788 C315.573845,391.614583 312.470184,394.730425 305.702972,394.730425 C287.658011,394.730425 243.763595,328.456052 217.730151,252.620844 C212.628223,237.881107 207.511068,231.927083 193.907178,231.927083 L140.678012,231.927083 C125.469678,231.927083 122.427826,239.08642 122.427826,246.981031 C122.427826,261.079625 140.473725,331.006546 206.452402,423.489903 C250.437874,486.648674 312.410515,520.885417 368.803012,520.885417 C402.638134,520.885417 406.823845,513.28125 406.823845,500.183098 L406.823845,452.447917 C406.823845,437.239583 410.029185,434.204421 420.743703,434.204421 C428.638315,434.204421 442.172739,438.151727 473.753063,468.603713 C509.843923,504.694573 515.79398,520.885417 536.094678,520.885417 L589.323845,520.885417 C604.532178,520.885417 612.136345,513.28125 607.749619,498.274853 C602.949226,483.318593 585.717788,461.619053 562.853283,435.89599 C550.446258,421.234166 531.837128,405.444943 526.197316,397.548454 C518.302704,387.399043 520.558441,382.88663 526.197316,373.864619 C526.197316,373.864619 591.049532,282.508661 597.816744,251.493445 Z"\n        />\n      </g>\n    </defs>\n\n    '+g+'\n\n    <g transform="'+y+'">\n      '+o.join("\n")+"\n    </g>\n  </svg>"},r=function(){function e(t,n,i,r){if(this.version=t,this.errorCorrectionLevel=n,this.mask=r,this.modules=[],this.isFunction=[],t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version value out of range";if(r<-1||r>7)throw"Mask value out of range";this.size=4*t+17;for(var o=[],a=0;a<this.size;a++)o.push(!1);for(var a=0;a<this.size;a++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();var s=this.addEccAndInterleave(i);if(this.drawCodewords(s),-1==r)for(var l=1e9,a=0;a<8;a++){this.applyMask(a),this.drawFormatBits(a);var u=this.getPenaltyScore();u<l&&(r=a,l=u),this.applyMask(a)}if(r<0||r>7)throw"Assertion error";this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}return e.encodeText=function(t,n){var i=a.makeSegments(t);return e.encodeSegments(i,n)},e.encodeBinary=function(t,n){var i=a.makeBytes(t);return e.encodeSegments([i],n)},e.encodeSegments=function(t,n,i,r,o,s){if(void 0===i&&(i=1),void 0===r&&(r=40),void 0===o&&(o=-1),void 0===s&&(s=!0),!(e.MIN_VERSION<=i&&i<=r&&r<=e.MAX_VERSION)||o<-1||o>7)throw"Invalid value";var u,c;for(u=i;;u++){var d=8*e.getNumDataCodewords(u,n),A=a.getTotalBits(t,u);if(A<=d){c=A;break}if(u>=r)throw"Data too long"}for(var f=0,p=[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH];f<p.length;f++){var _=p[f];s&&c<=8*e.getNumDataCodewords(u,_)&&(n=_)}for(var h=new l,m=0,v=t;m<v.length;m++){var g=v[m];h.appendBits(g.mode.modeBits,4),h.appendBits(g.numChars,g.mode.numCharCountBits(u));for(var y=0,w=g.getData();y<w.length;y++){var b=w[y];h.array.push(b)}}if(h.array.length!=c)throw"Assertion error";var E=8*e.getNumDataCodewords(u,n);if(h.array.length>E)throw"Assertion error";if(h.appendBits(0,Math.min(4,E-h.array.length)),h.appendBits(0,(8-h.array.length%8)%8),h.array.length%8!=0)throw"Assertion error";for(var k=236;h.array.length<E;k^=253)h.appendBits(k,8);for(var C=[];8*C.length<h.array.length;)C.push(0);return h.array.forEach(function(e,t){return C[t>>>3]|=e<<7-(7&t)}),new e(u,n,C,o)},e.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},e.prototype.drawCanvas=function(e,t,n){if(e<=0||t<0)throw"Value out of range";var i=(this.size+2*t)*e;n.width=i,n.height=i;for(var r=n.getContext("2d"),o=-t;o<this.size+t;o++)for(var a=-t;a<this.size+t;a++)r.fillStyle=this.getModule(a,o)?"#000000":"#FFFFFF",r.fillRect((a+t)*e,(o+t)*e,e,e)},e.prototype.toSvgString=function(e){if(e<0)throw"Border must be non-negative";for(var t=[],n=0;n<this.size;n++)for(var i=0;i<this.size;i++)this.getModule(i,n)&&t.push("M"+(i+e)+","+(n+e)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(this.size+2*e)+" "+(this.size+2*e)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+t.join(" ")+'" fill="#000000"/>\n</svg>\n'},e.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),n=t.length,e=0;e<n;e++)for(var i=0;i<n;i++)0==e&&0==i||0==e&&i==n-1||e==n-1&&0==i||this.drawAlignmentPattern(t[e],t[i]);this.drawFormatBits(0),this.drawVersion()},e.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,n=t,i=0;i<10;i++)n=n<<1^1335*(n>>>9);var r=21522^(t<<10|n);if(r>>>15!=0)throw"Assertion error";for(var i=0;i<=5;i++)this.setFunctionModule(8,i,o(r,i));this.setFunctionModule(8,7,o(r,6)),this.setFunctionModule(8,8,o(r,7)),this.setFunctionModule(7,8,o(r,8));for(var i=9;i<15;i++)this.setFunctionModule(14-i,8,o(r,i));for(var i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,o(r,i));for(var i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,o(r,i));this.setFunctionModule(8,this.size-8,!0)},e.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var n=this.version<<12|e;if(n>>>18!=0)throw"Assertion error";for(var t=0;t<18;t++){var i=o(n,t),r=this.size-11+t%3,a=Math.floor(t/3);this.setFunctionModule(r,a,i),this.setFunctionModule(a,r,i)}}},e.prototype.drawFinderPattern=function(e,t){for(var n=-4;n<=4;n++)for(var i=-4;i<=4;i++){var r=Math.max(Math.abs(i),Math.abs(n)),o=e+i,a=t+n;0<=o&&o<this.size&&0<=a&&a<this.size&&this.setFunctionModule(o,a,2!=r&&4!=r)}},e.prototype.drawAlignmentPattern=function(e,t){for(var n=-2;n<=2;n++)for(var i=-2;i<=2;i++)this.setFunctionModule(e+i,t+n,1!=Math.max(Math.abs(i),Math.abs(n)))},e.prototype.setFunctionModule=function(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0},e.prototype.addEccAndInterleave=function(t){var n=this.version,i=this.errorCorrectionLevel;if(t.length!=e.getNumDataCodewords(n,i))throw"Invalid argument";for(var r=e.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][n],o=e.ECC_CODEWORDS_PER_BLOCK[i.ordinal][n],a=Math.floor(e.getNumRawDataModules(n)/8),l=r-a%r,u=Math.floor(a/r),c=[],d=new s(o),A=0,f=0;A<r;A++){var p=t.slice(f,f+u-o+(A<l?0:1));f+=p.length;var _=d.getRemainder(p);A<l&&p.push(0),c.push(p.concat(_))}for(var h=[],A=0;A<c[0].length;A++)for(var m=0;m<c.length;m++)(A!=u-o||m>=l)&&h.push(c[m][A]);if(h.length!=a)throw"Assertion error";return h},e.prototype.drawCodewords=function(t){if(t.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var n=0,i=this.size-1;i>=1;i-=2){6==i&&(i=5);for(var r=0;r<this.size;r++)for(var a=0;a<2;a++){var s=i-a,l=0==(i+1&2),u=l?this.size-1-r:r;!this.isFunction[u][s]&&n<8*t.length&&(this.modules[u][s]=o(t[n>>>3],7-(7&n)),n++)}}if(n!=8*t.length)throw"Assertion error"},e.prototype.applyMask=function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var n=0;n<this.size;n++){var i=void 0;switch(e){case 0:i=(n+t)%2==0;break;case 1:i=t%2==0;break;case 2:i=n%3==0;break;case 3:i=(n+t)%3==0;break;case 4:i=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:i=n*t%2+n*t%3==0;break;case 6:i=(n*t%2+n*t%3)%2==0;break;case 7:i=((n+t)%2+n*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][n]&&i&&(this.modules[t][n]=!this.modules[t][n])}},e.prototype.getPenaltyScore=function(){for(var t=0,n=0;n<this.size;n++){for(var i=[0,0,0,0,0,0,0],r=!1,o=0,a=0;a<this.size;a++)this.modules[n][a]==r?5==++o?t+=e.PENALTY_N1:o>5&&t++:(e.addRunToHistory(o,i),!r&&e.hasFinderLikePattern(i)&&(t+=e.PENALTY_N3),r=this.modules[n][a],o=1);e.addRunToHistory(o,i),r&&e.addRunToHistory(0,i),e.hasFinderLikePattern(i)&&(t+=e.PENALTY_N3)}for(var a=0;a<this.size;a++){for(var i=[0,0,0,0,0,0,0],r=!1,s=0,n=0;n<this.size;n++)this.modules[n][a]==r?5==++s?t+=e.PENALTY_N1:s>5&&t++:(e.addRunToHistory(s,i),!r&&e.hasFinderLikePattern(i)&&(t+=e.PENALTY_N3),r=this.modules[n][a],s=1);e.addRunToHistory(s,i),r&&e.addRunToHistory(0,i),e.hasFinderLikePattern(i)&&(t+=e.PENALTY_N3)}for(var n=0;n<this.size-1;n++)for(var a=0;a<this.size-1;a++){var r=this.modules[n][a];r==this.modules[n][a+1]&&r==this.modules[n+1][a]&&r==this.modules[n+1][a+1]&&(t+=e.PENALTY_N2)}for(var l=0,u=0,c=this.modules;u<c.length;u++)for(var d=c[u],A=0,f=d;A<f.length;A++){var r=f[A];r&&l++}var p=this.size*this.size,_=Math.ceil(Math.abs(20*l-10*p)/p)-1;return t+=_*e.PENALTY_N4},e.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),n=[6],i=this.size-7;n.length<e;i-=t)n.splice(1,0,i);return n},e.getNumRawDataModules=function(t){if(t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version number out of range";var n=(16*t+128)*t+64;if(t>=2){var i=Math.floor(t/7)+2;n-=(25*i-10)*i-55,t>=7&&(n-=36)}return n},e.getNumDataCodewords=function(t,n){return Math.floor(e.getNumRawDataModules(t)/8)-e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]},e.addRunToHistory=function(e,t){t.pop(),t.unshift(e)},e.hasFinderLikePattern=function(e){var t=e[1];return t>0&&e[2]==t&&e[4]==t&&e[5]==t&&e[3]==3*t&&Math.max(e[0],e[6])>=4*t},e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e}();function o(e,t){return 0!=(e>>>t&1)}var a=function(){function e(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw"Invalid argument";this.bitData=n.slice()}return e.makeBytes=function(t){for(var n=new l,i=0,r=t;i<r.length;i++){var o=r[i];n.appendBits(o,8)}return new e(e.Mode.BYTE,t.length,n.array)},e.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var n=new l,i=0;i<t.length;){var r=Math.min(t.length-i,3);n.appendBits(parseInt(t.substr(i,r),10),3*r+1),i+=r}return new e(e.Mode.NUMERIC,t.length,n.array)},e.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var n,i=new l;for(n=0;n+2<=t.length;n+=2){var r=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));r+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),i.appendBits(r,11)}return n<t.length&&i.appendBits(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6),new e(e.Mode.ALPHANUMERIC,t.length,i.array)},e.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var n=new l;if(t<0)throw"ECI assignment value out of range";if(t<128)n.appendBits(t,8);else if(t<16384)n.appendBits(2,2),n.appendBits(t,14);else{if(!(t<1e6))throw"ECI assignment value out of range";n.appendBits(6,3),n.appendBits(t,21)}return new e(e.Mode.ECI,0,n.array)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var n=0,i=0,r=e;i<r.length;i++){var o=r[i],a=o.mode.numCharCountBits(t);if(o.numChars>=1<<a)return 1/0;n+=4+a+o.bitData.length}return n},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}(),s=function(){function e(t){if(this.coefficients=[],t<1||t>255)throw"Degree out of range";for(var n=this.coefficients,i=0;i<t-1;i++)n.push(0);n.push(1);for(var r=1,i=0;i<t;i++){for(var o=0;o<n.length;o++)n[o]=e.multiply(n[o],r),o+1<n.length&&(n[o]^=n[o+1]);r=e.multiply(r,2)}}return e.prototype.getRemainder=function(t){for(var n=this.coefficients.map(function(e){return 0}),i=function(t){var i=t^n.shift();n.push(0),r.coefficients.forEach(function(t,r){return n[r]^=e.multiply(t,i)})},r=this,o=0,a=t;o<a.length;o++){var s=a[o];i(s)}return n},e.multiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var n=0,i=7;i>=0;i--)n=n<<1^285*(n>>>7),n^=(t>>>i&1)*e;if(n>>>8!=0)throw"Assertion error";return n},e}(),l=function(){function e(){this.array=[]}return e.prototype.appendBits=function(e,t){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var n=t-1;n>=0;n--)this.array.push(e>>>n&1)},e}();(function(e){var t=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}();e.Ecc=t})(r||(r={})),function(e){var t=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}();e.Mode=t}(a||(a={}));var u=128,c="#ffffff",d="#000000",A="#4680c2";return{createQR:function(t,n,o,s){if("string"!=typeof t)throw new TypeError("Enter text for encoding");var l=e({},"object"==typeof n&&null!==n?n:{},"object"==typeof s&&null!==s?s:{},{qrSize:"object"==typeof n&&null!==n&&"number"==typeof n.qrSize?n.qrSize:n,className:"object"==typeof n&&null!==n&&"string"==typeof n.className?n.className:o}),f={qrSize:"number"==typeof l.qrSize?l.qrSize:u,className:"string"==typeof l.className?l.className:o||"",isShowLogo:!!l.isShowLogo||!1,isShowBackground:!!l.isShowBackground||!1,foregroundColor:"string"==typeof l.foregroundColor?l.foregroundColor:d,backgroundColor:"string"==typeof l.backgroundColor?l.backgroundColor:c,logoColor:"string"==typeof l.logoColor?l.logoColor:A,suffix:l.suffix?l.suffix.toString():"0",logoData:"string"==typeof l.logoData?l.logoData:null},p=a.makeSegments(t),_=r.encodeSegments(p,r.Ecc.QUARTILE,1,40,-1,!0);return i(_,f)}}}()},wZtc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadMessage=function(e){s(e)};var i=n("qHA9"),r=null,o=null;function a(e){if(o&&(clearTimeout(o),o=null),r&&(r=Object.assign({},r,{fails:0})),"online"===e.type&&r){var t=r;r=null,s(t)}}function s(e){if(!1!==navigator.onLine)return(0,i.mailRequest)("/mail",{act:"message",message_id:e.msgId,forcePinned:e.forcePinned}).then(function(t){e.onResult(t)}).catch(function(t){if(e.onTryError&&e.onTryError(t),!1!==navigator.onLine){var n=Math.min(1+(0|e.fails),6),i=Math.pow(2,Math.max(n-2,0));r=Object.assign({},e,{fails:n}),o=setTimeout(function(){o=null,s(r)},1e3*i)}else r=Object.assign({},e,{fails:0})});r=Object.assign({},e,{fails:0})}window.addEventListener("online",a),window.addEventListener("offline",a)},wcVR:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=window.extend,o={_def_opts:{enableHighAccuracy:!0,maximumAge:3e5,timeout:6e4},_provider:null,initW3C:function(){o._provider=navigator.geolocation,o.getCurrentPosition=function(e,t,n){o._provider.getCurrentPosition(function(t){void 0!==t.latitude?e(r(t,{coords:r(t.coords||{},{latitude:t.latitude,longitude:t.longitude})})):e(t)},t,n)}},initGears:function(){var e=window.google;o._provider=e.gears.factory.create("beta.geolocation")},initSymbian:function(){var e=window.device;o._provider=e.getServiceObject("Service.Location","ILocation"),o.getCurrentPosition=function(e,t){o._provider.ILocation.GetLocation({LocationInformationClass:"BasicLocationInformation"},function(n,i,r){4==i?t({code:2,message:"Position unavailable"}):e({timestamp:null,coords:{latitude:r.ReturnValue.Latitude,longitude:r.ReturnValue.Longitude,altitude:r.ReturnValue.Altitude,heading:r.ReturnValue.Heading}})})}},initPalm:function(){o.getCurrentPosition=function(e,t,n){var i={};n&&(n.enableHighAccuracy&&1==n.enableHighAccuracy&&(i.accuracy=1),n.maximumAge&&(i.maximumAge=n.maximumAge),n.responseTime&&(n.responseTime<5?i.responseTime=1:n.responseTime<20?i.responseTime=2:i.timeout=3)),new window.Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:i,onSuccess:function(t){e({timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,heading:t.heading}})},onFailure:function(e){1==e.errorCode?t({code:3,message:"Timeout"}):2==e.errorCode?t({code:2,message:"Position unavailable"}):t({code:0,message:"Unknown Error: webOS-code"+e.errorCode})}})}},getCurrentPosition:function(e,t,n){o._provider.getCurrentPosition(e,t,r(o._def_opts,n||{}))},init:function(){var e=window,t=e.google,n=e.device,r=e.Mojo;try{var a="undefined";if(i(navigator.geolocation)!==a)o.initW3C();else if(i(window.google)!==a&&i(t.gears)!==a)o.initGears();else if(i(n)!==a&&i(n.getServiceObject)!==a)o.initSymbian();else{if(i(r)===a||"Mojo.Service.Request"==typeof r.Service.Request)return!1;o.initPalm()}}catch(e){return!1}return!0}};window.geo=o;var a=o;t.default=a},wyHI:function(e,t,n){"use strict";var i=window,r=i.gpeByClass,o=i.hasClass,a=i.addClass,s=i.removeClass,l=i.geByClass1,u=i.setStyle,c=i.tooltip,d=i.ajax;window.Fave={showActionsTT:function(e,t){cancelEvent(t);var n=r("FaveArticles__row",e);if(o(n,"wi_actions_opened"))Fave.hideActionsTT();else{var i=l("wi_actions_wrap",n),s=l("FaveArticles__row_actions",n);u(i,"top",e.offsetTop+e.offsetHeight+"px"),a(n,"wi_actions_opened"),c.addHandler(Fave.hideActionsTT),c.show(i,s)}},hideActionsTT:function(){s("wi_actions_opened",l("wi_actions_opened")),c.hide()},removeArticle:function(e,t,n){Fave.hideActionsTT();var i=r("FaveArticles__row",e);a(i,"removed"),d.post("fave.php",{act:"defave_article",link:t,hash:n},{onFail:function(){return s(i,"removed")}})},restoreArticle:function(e,t,n){var i=r("FaveArticles__row",e);s(i,"removed"),d.post("fave.php",{act:"enfave_article",link:t,hash:n},{onFail:function(){return a(i,"removed")}})}}},xwOv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.back=function(){window.history?window.history.back():window.location="/"},t.close=function(){i&&a.default.close(i)},t.show=function(){var e=d(),t="https://vk.com/fest?publish_photo=".concat(e.photo),n=s.default.createQR(t,271,"QRPhotoPosting__svg",{isShowLogo:!0});i=a.default.open(r.default.elem((0,l.QRPhotoPosting)({svg:n,title:lang.mobile_photo_qr_popup_title})),!0),nav.go("".concat(nav.path,"?z=publish_photo").concat(e.photo),null,{push_only:!0,nav_init:!1,nav_incr:!0})},t.getQRPhotoButton=A,t.appendQRPhotoButton=function(e){var t=$("#z_photoview .zpv_values"),n=r.default.elem(A(e));(0,o.append)(n,t)};var i,r=c(n("TYsd")),o=n("OcsD"),a=c(n("r/ag")),s=c(n("wZQE")),l=n("tqgD"),u=n("W9Tc");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=/photo(-?\d+)_(\d+)/i.exec(e||nav.cur);return Array.isArray(t)||(t=["",0,0]),{album:(0,o.intval)(t[1]),photo:(0,o.intval)(t[2])}}function A(e){return-86529522===d(e).album&&(0,u.partConfigEnabled)("mvk_photo_fest_qr_sharing")?(0,l.QRPhotoPostingButton)():""}},yEBz:function(e,t,n){"use strict";var i=n("UxAg");window.Settings={_privacy:{}},Settings._privacy.onRadioChange=a;var r={pad:function(e){return'.Settings__privacyPad[data-privacy="'.concat(e,'"]')},submit:".Settings__privacySubmitRow",form:".Settings__privacyForm",forbid:".Settings__privacySelectForbiddenLink"},o={padVisible:"Settings__privacyPad_visible",submitVisible:"Settings__privacySubmitRow_visible"};function a(e,t){if("none"===e)s("allowed",!1),s("forbidden",!1),l(!0);else if("allowed"===e)s("allowed",!0),s("forbidden",!1),l(!1);else if("forbidden"===e){s("allowed",!1),s("forbidden",!0),l(!0);var n=(0,i.$)(r.form),o=(0,i.$)(r.forbid),a=t.name,u=t.value,c=n.getAttribute("action"),d="".concat(c,"&").concat(a,"=").concat(u,"&forbid");o.setAttribute("href",d)}}function s(e,t){(0,i.$)(r.pad(e)).classList.toggle(o.padVisible,t)}function l(e){(0,i.$)(r.submit).classList.toggle(o.submitVisible,e)}},yHBz:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("jk6M"));var r=window.setCookie;i.default.ios&&r("remixmvk_iphone_x",i.default.ios&&3===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height?1:0)},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},yNeG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("B5sG"));n("vTE6");var r=i.default;t.default=r,window.uMailHat=i.default},yVRv:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("9CLW"));function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=window,a=o.registeredEvents,s=o.removeEvent,l=["touchstart","touchend","touchmove","touchcancel"];i.default.onIframeReady(function(e){e.is_api&&a.forEach(function(e){var t=r(e,3),n=t[0],i=t[1],o=t[2];l.indexOf(i)>=0&&s(n,i,o)})})},yXty:function(e,t,n){"use strict";var i=need("Voting"),r=window,o=r.attr,a=r.removeClass,s=r.addClass,l=r.hasClass,u=r.toggleClass,c=r.ge,d=r.val,A=r.geByClass1,f=r.langNumeric,p=r.each,_=r.lockButton,h=window.browser,m=window.ajax,v=window.nav,g=window.page,y=window.mail,w=window.im,b=function(){var e,t,n=[],r=!1,b=!1,k={};function C(e){return function(){if(!r)return e.apply(this,arguments)}}function D(e){return"A"===e.tagName}function S(){b=n.length>0,u("vk_messages_actions_visible",document.body,b)}function T(){b&&(k={},p(n,function(e,t){a("mi_selected",A("_msg"+t))}),r=!1,n=[],S())}function M(){return!!window.getSelection&&window.getSelection().toString().length>0}function P(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r=!0,_(e),w.off(),m.click("/mail",{},{url_params:{act:o?"spam":"delete",peer:t,hash:i,ids:n.join(","),community:E()}})}function I(){return Boolean(e)}function x(){c("dialogs")&&I()?s("vk_dialogs_forwarding",document.body):e="",T()}return g.onChange(x),y.onShowDialogsPageFromCache(x),y.onShowDialogFromCache(x),y.onMessagesRepainted(function(){p(n,function(e,t){s("mi_selected",A("_msg"+t))})}),{onMessageClick:C(function(e){var t=e.target,r=e.currentTarget,u=D(t)||D(t.parentNode);t.closest(".".concat(i.cls))?e.stopPropagation():(u&&T(),h.uc_mini||M()||u||setTimeout(function(){M()||(function(e){var t=o(e,"data-id"),i=n.indexOf(t);i>=0?(n.splice(i,1),a("mi_selected",e),delete k[t]):(n.push(t),s("mi_selected",e),k[t]=l("msg_item_important",e))}(r),S(),function(){var e=window.lang,t=Math.max(n.length,1);d(A("messagesActions__row_counter"),f(t,e.mobile_mail_messages_selected).replace("{count}",t))}())},40))}),remove:C(P),reply:C(function(e,t,i){r=!0,_(e),m.click("/attachments",{},{url_params:{act:"add",target:"mail"+t,hash:i,object:"mail"+n.join(";"),community:E()}})}),forward:C(function(i,o){r=!0,_(i),e="mail"+n.join(";"),t=o;var a=E(),s=a?"?community=".concat(a):"";v.go(location.pathname+s,null,{ignore_cur_process:!0})}),spam:C(function(e,t,n){P(e,t,n,!0)}),close:C(T),toggleImportant:C(function(e){var t,i=n.length,r=0;for(t=0;t<i;t++)if(!k[n[t]]){r=1;break}for(t=0;t<i;t++)u("msg_item_important",A("_msg"+n[t]),1===r);m.post("/mail",{_ajax:1,act:"mark_important",ids:n,val:r,hash:e}),T()}),hasFwdMessages:I,attachFwdMessages:function(n){m.click("/attachments",{},{url_params:{act:"add",target:"mail"+n,hash:t,object:e,community:E()}}),e=""}}}();function E(){return v.getQuery("community")}window.MessagesActions=b},yZoT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("MjTa")),r=o(n("sdz3"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}var a=function(){function e(){window.isCustomScroll&&(document.body.classList.contains("vk__page_mail")||i.restoreDocumentScroll())}return{init:function(){if(window.isCustomScroll&&!document.body.classList.contains("vk__page_mail")){var t=ge("mcont");t&&t.classList.contains("ScrollView")?i.init():e(),r.onClose()}},restore:e}}(),s=a;t.default=s,onDOMReady(function(){a.init(),page.onChange(function(){a.init()})}),window.ContentScrollView=a},ydHj:function(e,t,n){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})},yguo:function(e,t,n){"use strict";var i=n("UxAg"),r=l(n("+cqQ")),o=l(n("jk6M")),a=l(n("ZoJ6")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}(n("sdz3"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){requestAnimationFrame(function(){var t=e.value;A(e.value),a.default.onChange(t)})}function c(){s.onOpen("top")}function d(e){var t=e.closest(".mailFilter").$(".mailFilter__input"),n=document.activeElement===t;(o.default.ios?setTimeout:requestAnimationFrame)(function(){A(""),t.value="",n&&t.focus(),a.default.onClear(),a.default.onChange("")})}function A(e){(0,i.$$)(".mailFilter").forEach(function(t){return t.classList.toggle("mailFilter_hasQuery",!!e)})}Object.assign(a.default,{onChange:(0,r.default)("query"),onClear:(0,r.default)(),setQuery:function(e){var t=(0,i.$)(".mailFilter__input");t&&t.value!==e&&(t.value=e,a.default.onChange(e),A(e))},setQuerySilently:function(e){var t=(0,i.$)(".mailFilter__input");t&&t.value!==e&&(t.value=e,A(e))}}),a.default._onInput=u,a.default._onClearMouseDown=d,a.default._onFocus=c},yuVR:function(e,t,n){"use strict";var i=window,r=i.lsSet,o=i.lsGet,a=i.ajax,s=i.extend,l=1e4,u="friendsStat.events",c="/friends",d="stats",A=null;function f(){clearTimeout(A);var e=o(u)||[];if(e.length){r(u);var t={act:d};t=s(t,function(e){var t={};return each(e,function(){t[this.type]?t[this.type].push(this.data):t[this.type]=[this.data]}),t}(e)),a.post(c,t)}}window.FriendsStats={log:function(e,t){var n=function(e,t){var n=[],i=(new Date).getTime();switch(e){case FriendsStats.EVENTS.EVENT_VIEW_USER:n=[t.uid,i,t.pos,t.ref,t.blockType,t.trackCode];break;case FriendsStats.EVENTS.EVENT_HIDE_BLOCK:n=[i,t.ref,t.trackCode];break;case FriendsStats.EVENTS.EVENT_OPEN_USER:n=[t.uid,i,t.ref,t.trackCode]}return n.join("|")}(e,t);if(!n)return;var i=o(u)||[];i.push({type:e,data:n}),r(u,i),clearTimeout(A),A=setTimeout(f,l)},EVENTS:{EVENT_VIEW_USER:"show_user_rec",EVENT_HIDE_BLOCK:"hide_block",EVENT_OPEN_USER:"open_user"}},A=setTimeout(f,l)},ywff:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initPhotoCarousel=function(e,t){var n=domQuery1("[data-sizes]",e),o=JSON.parse(domData(n,"sizes")),a=(domData(n,"media-links")||"").split(",");if(o.length<=1||domData(e,"carousel-inited"))return;if(domData(e,"carousel-inited",1),t.mobile){var s=function(e,t){var n,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=geByClass1("article_photo_carousel__controls",t),u=geByClass1("article_photo_carousel__counter",t),c=domData(u,"counter-lang")||getLang("global_article_carousel_counter"),d=getSize(geByClass1("article_figure_content",t)),A=geByClass1("article_photo_carousel_inner",t),f=s.onClick,p=0,_=0,h=!1,m=0,v=0,g=!1,y=!1;l.addEventListener("touchstart",function(e){o=e.touches[0].pageX,n=e.touches[0].pageY,addClass(A,"--no_trans"),h=!0,clearTimeout(a)});var w,b=!1;function E(n,i,o){if(!i||!h){if(h=!0,i)return A.style.transform="translateX(-50px)",void(a=setTimeout(function(){A.style.transform="translateX(0px)"},700));clearTimeout(a),p=void 0===p?Math.min(e.length-1,Math.max(0,p+n)):o,domData(t,"photo-carousel-index",p),r(p,t),u.innerHTML=c.replace("{counter}",p+1).replace("{total}",e.length),A.style.transform="translateX(-".concat(p*d[0],"px)")}}return l.addEventListener("touchmove",function(t){if(y||!(Math.abs(t.touches[0].pageY-n)>5||g)){if(_=t.touches[0].pageX-o,!(Math.abs(_)<10)||b){y||window.addEventListener("touchmove",w=function(e){return cancelEvent(e)},{passive:!1}),y=!0,b=!0;var i=Math.min(e.length-1,Math.max(0,p+(_<0?1:-1))),r=0===i&&0===p,a=i===e.length-1&&p===e.length-1;m=i;var s=-p*d[0];s+=r||a?.2*_:_,A.style.transform="translateX(".concat(s,"px)")}}else g=!0}),l.addEventListener("touchend",function(){b=!1,g=!1,y=!1,v=p,removeClass(A,"--no_trans"),w&&window.removeEventListener("touchmove",w),Math.abs(_)<50||(p=m),E(0,!1,m),isFunction(f)&&v!==m&&f(v<m?i.ArticleStatsEvents.clickOnCarouselNext:i.ArticleStatsEvents.clickOnCarouselPrev)}),E}(o,e,t);return s}var l=function(e,t,n,o){var a,s=0,l=geByClass1("article_photo_carousel__controls",t),u=geByClass1("article_photo_carousel__counter",t),c=domData(u,"counter-lang")||getLang("global_article_carousel_counter"),d=getSize(geByClass1("article_figure_content",t)),A=geByClass1("article_photo_carousel_inner",t),f=geByClass1("article_photo_carousel__left",t),p=geByClass1("article_photo_carousel__right",t),_=n.onClick,h=!1;function m(i,l){if(!l||!h){if(h=!0,l)return A.style.transform="translateX(-50px)",void(a=setTimeout(function(){A.style.transform="translateX(0px)"},700));clearTimeout(a),s=Math.min(e.length-1,Math.max(0,s+i));if(n.moderDeletePhoto){var _=o[s];'<a href="'.concat(_,'" target="_blank" rel="noopener" class="flat_button article_photo_moder_open">Открыть</a>')}A.style.transform="translateX(-".concat(s*d[0],"px)"),u.innerHTML=c.replace("{counter}",s+1).replace("{total}",e.length),toggle(f,s>0),toggle(p,s<e.length-1),domData(t,"photo-carousel-index",s),r(s,t)}}return p.addEventListener("click",function(e){return m(1),_&&_(i.ArticleStatsEvents.clickOnCarouselNext),cancelEvent(e)}),f.addEventListener("click",function(e){return m(-1),_&&_(i.ArticleStatsEvents.clickOnCarouselPrev),cancelEvent(e)}),t.addEventListener("mousemove",function(){l.style.opacity=1}),t.addEventListener("mouseleave",function(){l.style.opacity=0}),m}(o,e,t,a);return data(e,"changePhotoFunction",l),l};var i=n("sWID");function r(e,t){var n=geByTag1("figcaption",t),i=[];n&&((i=domData(n,"captions"))&&(i=JSON.parse(i)),n.innerHTML=i[e]||"")}},z8PJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gemiusTrackPage=function(){if((0,i.partConfigEnabled)("geminus_counter")){var e="pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";if(window.pp_gemius_identifier)window.pp_gemius_hit(e);else{window.pp_gemius_identifier=e;var t=function(e){window[e]=window[e]||function(){var t=window[e+"_pdata"]=window[e+"_pdata"]||[];t[t.length]=arguments}};t("gemius_hit"),t("gemius_event"),t("pp_gemius_hit"),t("pp_gemius_event"),function(e,t){try{var n=e.createElement(t),i=e.getElementsByTagName(t)[0],r="http"+("https:"==location.protocol?"s":"");n.setAttribute("async","async"),n.setAttribute("defer","defer"),n.src=r+"://galv.hit.gemius.pl/xgemius.js",i.parentNode.insertBefore(n,i)}catch(e){}}(document,"script")}}};var i=n("W9Tc")},z9sQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("iHpm"));var r=i.default;t.default=r,window.Bem=i.default},zEUu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("OcsD"),r={cachedProgress:{}},o={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.srand)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.radius=t,{component:this._getLoader(e,r.cachedProgress[e]),id:e}},update:function(e,t){var n=$('[data-loader-id="'.concat(e,'"] circle'));if(n){var i=this.radius,o=Math.PI*(2*i);r.cachedProgress[e]=t;var a=(100-Math.max(5,t))/100*o;n.setAttribute("stroke-dashoffset",a)}},ready:function(e){var t=$('[data-loader-id="'.concat(e,'"]'));re(t)},_getLoader:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.radius,i=Math.PI*(2*n);return{class:"Loader",inner:[{class:"Loader__progress","data-loader-id":e,inner:{tag:"svg",viewPort:"0 0 100 100",inner:{tag:"circle",r:n,cx:"30",cy:"30","stroke-dashoffset":(100-Math.max(5,t))/100*i,"stroke-dasharray":i}}}]}}};t.default=o},zHNa:function(e,t,n){"use strict";var i=window,r=i.cancelEvent,o=i.gpeByClass,a=i.geByClass1,s=i.toggleClass,l=i.hasClass,u=i.ajax,c=i.attr,d=need("Control"),A=need("Popup"),f={init:function(){var e=a("_adultConfirm"),t=a("_adultConfirm__submit",e),n=a("adultConfirm__checkbox",e);s("adultConfirm__submit_disabled",t,!d.isChecked(n))},toggle:function(e){var t=o("_adultConfirm",e.$control),n=a("_adultConfirm__submit",t);s("adultConfirm__submit_disabled",n,!e.checked)},submit:function(e,t){if(r(e),!l("adultConfirm__submit_disabled",t)){var n=o("_adultConfirm",t),i=a("_adultConfirm__form",n),s={_ajax:1};each(geByTag("input",i),function(e,t){var n=t.type.toLowerCase(),i=t.name.toLowerCase();"hidden"!==n&&"checkbox"!==n&&"radio"!==n||(s[i]=t.value)});var d=c(i,"action");u.post(d,s),A.close()}},back:function(e){r(e),window.history?window.history.back():window.location="/"}};window.AdultConfirm=f},zb1z:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SRbS"));Object.assign(i.default,{html:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="";return e.forEach(function(e,t){var i=n[t];r+=e+(i||0===i?i:"")}),r}})},zouF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Confirm=l;var i=n("OcsD"),r=s(n("TYsd")),o=s(n("Po+v")),a=s(n("z9sQ"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=(0,i.ceFromString)(r.default.html((0,o.default)({id:a.id,class:"Confirm",scrollable:!0,header:{title:a.title||getLang("mobile_warning_header")},content:[e,{class:"Popup__buttons",inner:[u(getLang("mobile_continue"),"regular",t),u(getLang("mobile_cancel"),"secondary",n||"Popup.close(this)")]}]})));domInsert(document.body,s),o.default.open(s,!0)}function u(e,t,n){return{class:["Popup__button",a.default.class("Btn",{theme:t||"regular"})],tag:"button",inner:e,onclick:n}}page.onChange(function(){$$(".Confirm").forEach(function(e){return o.default.close(e)})}),window.Confirm=l},zxIV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geById=function(e){return document.getElementById(e)},t.$=function(e,t){return(t||document).querySelector(e)},t.$$=function(e,t){return(t||document).querySelectorAll(e)},t.setInnerText=function(e,t){e&&(e.innerText=t)},t.geByTag=l,t.geByTag1=u,t.geByClass=c,t.geByClass1=d,t.gpeByClass=A,t.domQuery=function(e,t){return(t||document).querySelectorAll(e)},t.domQuery1=function(e,t){return(t||document).querySelector(e)},t.domClosest=function(e,t){if(I(t,e))return t;return A(e,t)},t.domClosestByTag=function(e,t){if(e=e.toUpperCase(),t.nodeType===Node.ELEMENT_NODE&&t.tagName.toUpperCase()===e)return t;return f(e,t)},t.gpeByTag=f,t.ce=p,t.re=function(e){(e=s(e))&&e.parentNode&&e.parentNode.removeChild(e);return e},t.rs=function(e,t){return(0,i.each)(t,function(t,n){e=e.replace(new RegExp("%"+t+"%","g"),(void 0===n?"":n).toString().replace(/\$/g,"&#036;"))}),e},t.psr=function(e){if("https:"!==locProtocol)return e;return e=(e=(e=(e=(e=e.replace(/http:\/\/(cs(\d+)\.vk\.me\/c(\d+)\/)/gi,"https://$1")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/c(\d+)\/(v\d+\/|[a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$3/$4")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/([a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$1/$3")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\//gi,"https://ps.vk.me/c$1/")).replace(/http:\/\/video(\d+)\.vkadre\.ru\//gi,"https://ps.vk.me/v$1/")},t.domReplaceEl=function(e,t){(0,i.isString)(t)&&(t=h(t));return w(e).replaceChild(t,e),t},t.domEL=m,t.domChildren=b,t.domInsertBefore=function(e,t){var n=w(t);return n&&n.insertBefore(e,t)},t.domInsertAfter=function(e,t){var n=w(t);return n&&n.insertBefore(e,v(t))},t.domByClass=function(e,t){if(!e)return e;return d(t,e)},t.domData=function(e,t,n){if(!e)return null;return void 0!==n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t)},t.domChildIndex=function(e){var t=0;for(;null!=(e=g(e));)t++;return t},t.domCA=function(e,t){do{e=w(e)}while(e&&!E(e,t));return e},t.domClosestSibling=function(e,t,n){var i=null;for(;null===i&&e;)(e=-1===n?g(e):v(e))&&E(e,t)&&(i=e);return i},t.matchesSelector=E,t.isHover=function(e){return E(e,":hover")},t.isAncestor=function(e,t){var n=s(e);if(t=s(t),!e||!t)return!1;for(;n=n.parentNode;)if(n===t)return!0;return!1},t.getScroll=function(){var e=o.browser.msie6?s("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]},t.domClosestPositioned=function(e,t){var n=(t=t||{}).fromEl||w(e),r=t.positions||["relative","absolute","fixed"];for(;n&&n!==bodyNode;){var o=N(n,"position");if((0,i.inArray)(o,r)&&(!t.noOverflow||"hidden"!==N(n,"overflow")))break;n=w(n)}return n},t.domClosestOverflowHidden=function(e,t){var n,i,r,a=e=s(e),l=!1;for(;a&&a.tagName&&a!==bodyNode;){if(n=N(a,"position"),i=N(a,"overflow"),r=N(a,"transform"),t&&o.browser.mozilla){if("page_wrap"!=a.id&&a!==e&&"visible"!==i&&("static"===n?!l||"relative"===l:"fixed"!==l))break}else if(a!==e&&"visible"!==i&&("static"===n?!l||"relative"===l:"fixed"!==l))break;"none"!==r?l=void 0:"static"!==n&&"fixed"!==l&&(l=n),a=w(a)}return a},t.show=k,t.hide=C,t.isVisible=D,t.clientHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},t.getClientRectOffsetY=function(e,t,n){e=s(e),n=n||0;var r=M(e)[1],o=P(e)[1],a=window,l=document.documentElement,u=Math.max((0,i.intval)(a.innerHeight),(0,i.intval)(l.clientHeight)),c=s("page_header_cont"),d=l.scrollTop||bodyNode.scrollTop||window.scrollY||0,A=vk.staticheader?Math.max(0,P(c)[1]-d):P(c)[1];if(t){if(r+o<d+A+n)return r+o-d-A-n;if(r>d+u-n)return r-d-u+n}else{if(r<d+A+n)return r-d-A-n;if(r+o>d+u-n)return r+o-d-u+n}return 0},t.toggle=function(e,t){void 0===t&&(t=!D(e));t?k(e):C(e);return t},t.boundingRectEnabled=S,t.getXYRect=T,t.getXY=M,t.isWindow=function(e){return null!=e&&e===e.window},t.getSize=P,t.getW=function(e){return P(e)[0]},t.getH=function(e){return P(e)[1]},t.hasClass=I,t.addClass=x,t.removeClass=L,t.toggleClass=function(e,t,n){void 0===n&&(n=!I(e,t));return(n?x:L)(e,t),n},t.toggleClassDelayed=function(e,t,n,r){r=(0,i.positive)(r),void 0===n&&(n=!I(e,t));return(n?O:B)(e,t,r),n},t.replaceClass=function(e,t,n){L(e,t),x(e,n)},t.getStyle=N,t.setStyle=R,t.setPseudoStyle=function(e,t,n){var r=F(e,"pseudo-id");r||(r=(0,i.irand)(1e8,999999999),F(e,"pseudo-id",r),x(e,"_pseudo_"+r));var o=t+"-style-"+r,a=s(o),l="._pseudo_"+r+":"+t+"{";a||(a=headNode.appendChild(p("style",{id:o,type:"text/css"})));(0,i.each)(n,function(e,t){l+=e+": "+t+" !important;"}),l+="}",a.sheet?(a.sheet.cssRules.length&&a.sheet.deleteRule(0),a.sheet.insertRule(l,0)):a.styleSheet&&(a.styleSheet.cssText=l)},t.data=F,t.attr=function(e,t,n){return e=s(e),void 0===n?e.getAttribute(t):(e.setAttribute(t,n),n)},t.removeAttr=j,t.removeData=H,t.cleanElems=function(){for(var e=arguments,t=0;t<e.length;++t){var n=s(e[t]);n&&(H(n),j(n,"btnevents"))}},t.setTitle=function(e,t,n){if(!(e=s(e))||e.titleSet)return;t||(t=e);if(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)e.setAttribute("title",n||e.innerText||e.textContent);else{var i=u("b",e);i&&(i.scrollWidth>i.clientWidth||i.scrollHeight>i.clientHeight)?e.setAttribute("title",n||e.innerText||e.textContent):e.removeAttribute("title")}e.titleSet=1},t.getZoom=function(){var e=s("zoom_test_1")||document.body.appendChild(p("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"}));return(s("zoom_test_2")||document.body.appendChild(p("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}))).offsetLeft/e.offsetLeft},t.val=function(e,t,n){if(!(e=s(e)))return;void 0!==t&&(e.setValue?(e.setValue(t),!n&&e.phonblur&&e.phonblur()):"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value=t:void 0!==e.emojiId&&window.Emoji?Emoji.val(e,t):e.innerHTML=t,!n&&(0,r.triggerEvent)(e,"valueChanged"));return e.getValue?e.getValue():("INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value:e.innerHTML)||""},t.elfocus=function(e,t,n){e=s(e);try{if(e.focus(),void 0!==t&&!1!==t||(t=e.value.length),void 0!==n&&!1!==n||(n=t),e.setSelectionRange)e.setSelectionRange(t,n);else if(window.getSelection&&document.createRange){var i=document.createRange();i.selectNodeContents(e),i.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(i)}}catch(e){}},t.traverseParent=function(e,t,n){e=s(e),n=n||999;for(;e&&!t(e);){if(0===--n)return!1;try{if((e=w(e))===document)return!1}catch(t){e=!1}}return e},t.setDocumentTitle=function(e){if(U)return;return window.document.title=(0,i.replaceEntities)(e)},t.lockDocumentTitle=function e(t){U=t;t&&window.cur&&window.cur.destroy.push(function(){e(!1)})},t.initDomScripts=function(){window.vkExpand=window.vkExpand||"VK"+(0,i.vkNow)(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{}},t.createElement=t.setStyleDelayed=t.removeClassDelayed=t.addClassDelayed=t.domPN=t.domLC=t.domFC=t.domPS=t.domNS=t.sech=t.se=t.cf=t.ge=void 0;var i=n("t7n3"),r=n("Egk5"),o=n("gdug"),a=n("98sY");var s=function(e){return"string"==typeof e||"number"==typeof e?document.getElementById(e):e};function l(e,t){return(t=s(t)||document).getElementsByTagName(e)}function u(e,t){return(t=s(t)||document).querySelector&&t.querySelector(e)||l(e,t)[0]}function c(e,t,n){return t=s(t)||document,n=n||"*",e=("."+e).replace(/\s+/gm,"."),Array.prototype.slice.call(t.querySelectorAll(n+e))}function d(e,t,n){return t=s(t)||document,n=n||"*",t.querySelector&&t.querySelector(n+("."+e).replace(/\s+/gm,"."))||c(e,t,n)[0]}function A(e,t,n){if(!(t=s(t)))return null;for(;n!==t&&(t=t.parentNode);)if(I(t,e))return t;return null}function f(e,t){if(!(t=s(t)))return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()===e)return t;return null}function p(e,t,n){var r=document.createElement(e);return t&&(0,i.extend)(r,t),n&&R(r,n),r}t.ge=s;var _=function(e){var t=e.createDocumentFragment(),n=e.createElement("div"),i=e.createRange&&e.createRange();return t.appendChild(n),i&&i.selectNodeContents(n),i&&i.createContextualFragment?function(t){return t?i.createContextualFragment(t):e.createDocumentFragment()}:function(t){if(!t)return e.createDocumentFragment();n.innerHTML=t;for(var i=e.createDocumentFragment();n.firstChild;)i.appendChild(n.firstChild);return i}}(document);t.cf=_;var h=function(e){return y(p("div",{innerHTML:e}))};t.se=h;function m(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}t.sech=function(e){return b(p("div",{innerHTML:e}))};var v=function(e){return m((e||{}).nextSibling)};t.domNS=v;var g=function(e){return m((e||{}).previousSibling,1)};t.domPS=g;var y=function(e){return m((e||{}).firstChild)};t.domFC=y;t.domLC=function(e){return m((e||{}).lastChild,1)};var w=function(e){return(e||{}).parentNode};function b(e){for(var t=[],n=e.childNodes,i=0;i<n.length;i++)n[i].tagName&&t.push(n[i]);return t}function E(e,t){return!(!(e=s(e))||e===document)&&(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}).call(e,t)}function k(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)k(arguments[n]);else if((e=s(e))&&e.style){var i=e.olddisplay,r=e.tagName.toLowerCase(),a="block";e.style.display=i||"","none"===N(e,"display")&&(a=I(e,"inline")||I(e,"_inline")?"inline":I(e,"_inline_block")?"inline-block":"tr"!==r||o.browser.msie?"table"!==r||o.browser.msie?"block":"table":"table-row",e.style.display=e.olddisplay=a)}}function C(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)C(arguments[n]);else if((e=s(e))&&e.style){var i=N(e,"display");e.olddisplay="none"!==i?i:"",e.style.display="none"}}function D(e){return!(!(e=s(e))||!e.style)&&"none"!==N(e,"display")}function S(e){return void 0!==e.getBoundingClientRect}function T(e,t){var n;if(t&&"inline"===N(e,"display")){var i=e.getClientRects();n=i&&i[0]||e.getBoundingClientRect()}else n=e.getBoundingClientRect();return n}function M(e,t){if(!(e=s(e)))return[0,0];var n=e.ownerDocument,i={top:0,left:0};if(!n)return[0,0];var r=n.documentElement;S(e)&&(i=T(e,!0));var o=n===n.window?n:9===n.nodeType&&(n.defaultView||n.parentWindow);return[i.left+(t?0:o.pageXOffset||r.scrollLeft)-(r.clientLeft||0),i.top+(t?0:o.pageYOffset||r.scrollTop)-(r.clientTop||0)]}function P(e,t,n){e=s(e);var r,o=document.documentElement,a=[0,0];if(t&&"border-box"===N(e,"boxSizing")&&(t=!1),e===document)a=[Math.max(o.clientWidth,bodyNode.scrollWidth,o.scrollWidth,bodyNode.offsetWidth,o.offsetWidth),Math.max(o.clientHeight,bodyNode.scrollHeight,o.scrollHeight,bodyNode.offsetHeight,o.offsetHeight)];else if(e){var l=function(){a=S(e)&&(r=T(e,n))&&void 0!==r.width?[r.width,r.height]:[e.offsetWidth,e.offsetHeight],t&&(0,i.each)(a,function(t,n){var r=t?["Top","Bottom"]:["Left","Right"];(0,i.each)(r,function(){a[t]-=parseFloat(N(e,"padding"+this))||0,a[t]-=parseFloat(N(e,"border"+this+"Width"))||0})})};if(D(e))l();else{var u={position:"absolute",visibility:"hidden",display:"block"},c={},d=!1;e.style.cssText.indexOf("!important")>-1&&(d=e.style.cssText),(0,i.each)(u,function(t,n){c[t]=e.style[t],e.style[t]=n}),l(),(0,i.each)(u,function(t,n){e.style[t]=c[t]}),d&&(e.style.cssText=d)}}return a}function I(e,t){var n=s(e);return n&&1===n.nodeType&&(" "+n.className+" ").replace(window.whitespaceRegex," ").indexOf(" "+t+" ")>=0}function x(e,t){var n=s(e);n&&!I(n,t)&&(n.className=(n.className?n.className+" ":"")+t)}t.domPN=w,window.whitespaceRegex=/[\t\r\n\f]/g;var O=function(e,t,n){n=(0,i.positive)(n),setTimeout(x.pbind(e,t),n)};function L(e,t){var n=s(e);n&&(n.className=(0,i.trim)((n.className||"").replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")))}t.addClassDelayed=O;var B=function(e,t,n){n=(0,i.positive)(n),setTimeout(L.pbind(e,t),n)};function N(e,t,n){if(e=s(e),(0,i.isArray)(t)){var r={};return(0,i.each)(t,function(t,n){return r[n]=N(e,n)}),r}if(!e)return"";if(void 0===n&&(n=!0),!n&&"opacity"===t&&o.browser.msie){var a=e.style.filter;return a?a.indexOf("opacity=")>=0?parseFloat(a.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!n&&e.style&&(e.style[t]||"height"===t))return e.style[t];var l,u=document.defaultView||window;if(u.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var c=u.getComputedStyle(e,null);c&&(l=c.getPropertyValue(t))}else if(e.currentStyle){if("opacity"===t&&o.browser.msie){var d=e.currentStyle.filter;return d&&d.indexOf("opacity=")>=0?parseFloat(d.match(/opacity=([^)]*)/)[1])/100+"":"1"}var A=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});"auto"===(l=e.currentStyle[t]||e.currentStyle[A])&&(l=0),l=(l+"").split(" "),(0,i.each)(l,function(t,n){if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var i=e.style,r=i.left,o=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,i.left=n||0,l[t]=i.pixelLeft+"px",i.left=r,e.runtimeStyle.left=o}}),l=l.join(" ")}if(n&&("width"===t||"height"===t)){var f=P(e,!0)[{width:0,height:1}[t]];l=((0,i.intval)(l)?Math.max((0,i.floatval)(l),f):f)+"px"}return l}function R(e,t,n){if(e=s(e))if((0,i.isObject)(t))(0,i.each)(t,function(t,n){return R(e,t,n)});else if("opacity"===t)o.browser.msie&&((n+"").length?e.style.filter=1!==n?"alpha(opacity="+100*n+")":"":e.style.cssText=e.style.cssText.replace(/filter\s*:[^;]*/gi,""),e.style.zoom=1),e.style.opacity!==n&&(e.style.opacity=n);else try{var r="number"==typeof n;r&&/height|width/i.test(t)&&(n=Math.abs(n)),n=r&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?n+"px":n,e.style[t]!==n&&(e.style[t]=n)}catch(e){(0,a.debugLog)("setStyle error: ",[t,n],e)}}t.removeClassDelayed=B,window.cssTransformProp=function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var n in t)if(void 0!==e.style[t[n]+"Transform"])return t[n]+"Transform"}return"transform"}();function F(e,t,n){if(!e)return!1;var i=e[vkExpand];return i||(i=e[vkExpand]=++vkUUID),void 0!==n&&(vkCache[i]||(vkCache[i]={},window.__debugMode&&(vkCache[i].__elem=e)),vkCache[i][t]=n),t?vkCache[i]&&vkCache[i][t]:i}function j(e){for(var t=0,n=arguments.length;t<n;++t){var i=arguments[t];if(void 0!==e[i])try{delete e[i]}catch(t){try{e.removeAttribute(i)}catch(e){}}}}function H(e,t){var n=!!e&&e[vkExpand];if(n)if(t){if(vkCache[n]){delete vkCache[n][t],t="";var i=0;for(var o in vkCache[n])if("__elem"!==o){i++;break}i||H(e)}}else(0,r.removeEvent)(e),j(e,vkExpand),delete vkCache[n]}t.setStyleDelayed=function(e,t,n){return setTimeout(R.pbind(e,t,n),0)};var U=!1;var V=p;t.createElement=V}});